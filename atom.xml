<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Marshall</title>
  <subtitle>Comm. Tech. Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://marshallcomm.cn/"/>
  <updated>2017-10-20T03:36:26.956Z</updated>
  <id>http://marshallcomm.cn/</id>
  
  <author>
    <name>Marshall</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Polar Code（21）3GPP RAN1#90</title>
    <link href="http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/"/>
    <id>http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/</id>
    <published>2017-10-20T01:01:08.000Z</published>
    <updated>2017-10-20T03:36:26.956Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>我一直有意将<a href="http://marshallcomm.cn/categories/Polar-Code/">Polar Code</a>系列和<a href="http://marshallcomm.cn/categories/3GPP-PolarCode/">3GPP_PolarCode</a>系列区分开，因此把它们放在不同的分类里，虽然它们都是关于polar code的文章，但前者关注极化码编译码算法本身，而后者关注极化码在5G标准化中的进展。前者更偏于理论研究，参考资料多是paper，后者更注重实际应用，参考资料多是3GPP proposal或Technical Specification（技术规范）。这可看作是polar code发展的两条线，有时这两条线又相交重叠，相互促进。如果你熟悉LTE system，那么<a href="http://marshallcomm.cn/categories/3GPP-PolarCode/">3GPP_PolarCode</a>系列则更容易理解。3GPP里的极化码是控制信道框架下的信道编码，它的上一步骤是CRC添加，它的下一步是速率匹配，这个过程在LTE system里也是如此。</p><p>3GPP RAN1#90会议于8月21~25日在布拉格召开。会议达成的结论已在3GPP Rel-15技术规范v1.0.0版本中体现，详见<a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/">《5G物理层协议V100》</a>。</p><p>截止到本次会议，polar coding一个比较完整的编码方案已经形成，从CRC计算到极化码编码，再到速率匹配方案都基本确定了，并已将本次会议达成的结论体现在v1.0.0版本协议的<a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a>中。</p><p>本文结合本次会议达成的结论和v1.0.0版本协议的<a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a>，对Polar coding过程进行比较全面的梳理。5G控制信道编码的基本流程：</p><ul><li>CRC添加</li><li>信道编码</li><li>速率匹配</li></ul><a id="more"></a><h1 id="Code-construction"><a href="#Code-construction" class="headerlink" title="Code construction"></a>Code construction</h1><p><br>这部分主要讨论了CRC和interleaver（交织器）的设计。一方面，基于CRC-Polar的编码方案无疑是3GPP确定采用的方案；另一方面，3GPP RAN1会议已同意支持提前终止（early termination，ET）的编译码策略。<br>传统的做法是将CRC bits统一地放置在信息比特后面，译码端只有译出全部比特时才能对该码字进行校验，校验后才能知道该译码码字是否正确。新的方法是将CRC bits分散地插入到信息比特中间。这样做的好处是，只译出一部分bits即可进行一次CRC校验，一旦检测到误码立即终止译码，由于该码字已经出错，后面就没有必要再译了。Distributed-CRC（DCRC）可降低译码计算量，节省功率，带来提前终止增益。</p><p>例如，$K=4$位信息比特，CRC长度为${ {L}_{CRC}}=4$，CRC bits$\left( \begin{matrix}<br>{ {p}_{1}} &amp; { {p}_{2}} &amp; { {p}_{3}} &amp; { {p}_{4}} \\<br>\end{matrix} \right)$已分散地插入到信息比特中：</p><script type="math/tex;mode=display">\left( \begin{matrix}
   { {x}_{1}} & { {x}_{2}} & { {p}_{1}} & { {x}_{3}} & { {p}_{2}} & { {x}_{4}} & { {p}_{3}} & { {p}_{4}}  \\
\end{matrix} \right)</script><p>译码时每译出一个CRC bit就进行一次校验。</p><p>如上所述，对于极化码编码，CRC计算和交织器往往是联系在一起的。这个过程分为两步：</p><p><strong>第一步，进行正常的CRC添加。</strong>给定长度为${ {L}_{CRC}}$的CRC生成多项式，按照通行的做法去计算CRC。假设待编码比特序列长度为$K$，添加CRC后的序列长度为${ {K}^{‘}}=K+{ {L}_{CRC}}$。3GPP已确定5G NR-PDCCH的CRC长度为24，即${ {L}_{CRC}}=24$，并采用如下生成多项式：</p><script type="math/tex;mode=display">{ {g}_{\text{CRC24C}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{21}}+{ {D}^{20}}+{ {D}^{17}}+{ {D}^{15}}+{ {D}^{13}}+{ {D}^{12}}+{ {D}^{8}}+{ {D}^{4}}+{ {D}^{2}}+D+1]</script><p><strong>第二步进行交织。</strong>交织器将${ {L}_{CRC}}$个CRC bits分散插入到$K$个信息比特中。交织器的输入、输出比特数相同，都是${ {K}^{‘}}=K+{ {L}_{CRC}}$。</p><p><strong>交织模式（interleaver pattern）按下列方法得到</strong>：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/091026784.png" alt="mark"></p><p>${ {K}_{\max }}$表示最大的信息比特数。5G NR控制信道所承载的内容不能太多，因为涉及信令开销的问题，大致在200 bits以内。${ {K}_{\max }}$限定了极化码待编码比特的数目。</p><p>3GPP采用统一的交织方法，即给定了一个统一交织模式$\pi $，$\pi $是按照最大比特数$\left( { {K}_{\max }}+{ {L}_{CRC}} \right)$得到的。交织器的输入比特数是$\left( K+{ {L}_{CRC}} \right)$，对满足$\left( K+{ {L}_{CRC}} \right)\le \left( { {K}_{\max }}+{ {L}_{CRC}} \right)$的任意比特数，其子交织模式$\pi ‘$都来自于这个统一的交织模式$\pi $。其中$\pi \left( k \right)$的值见下表：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/091349888.png" alt="mark"></p><blockquote><p>由于目前${ {K}_{\max }}$的值还未确定，$\pi \left( k \right)$是按照$\left( { {K}_{\max }}+{ {L}_{CRC}} \right)$的长度来计算的，在后面的协议版本中，这张表格将会得到进一步的修订。</p></blockquote><p>子交织模式$\pi ‘$表示交织后的比特位置索引，当按照上述方法获得$\pi ‘$，根据这个比特索引重新给信息比特排序：</p><p>$c_{k}^{‘}={ {c}_{\pi ‘\left( k \right)}}$，$k=0,1,…,{ {K}^{‘}}-1$</p><p>至此，就得到了交织后的信息比特序列，其效果就是：</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & \left( \begin{matrix}
   { {x}_{1}} & { {x}_{2}} & { {x}_{3}} & { {x}_{4}} & { {p}_{1}} & { {p}_{2}} & { {p}_{3}} & { {p}_{4}}  \\
\end{matrix} \right) \\ 
 \nonumber & \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \downarrow  \\ 
 \nonumber & \left( \begin{matrix}
   { {x}_{1}} & { {x}_{2}} & { {p}_{1}} & { {x}_{3}} & { {p}_{2}} & { {x}_{4}} & { {p}_{3}} & { {p}_{4}}  \\
\end{matrix} \right) \\ 
\end{align}</script><p>交织以后则进行极化码编码。不过在编码之前，还需要另一个独立的过程，那就是输入序列的设计。</p><h1 id="Sequence-design"><a href="#Sequence-design" class="headerlink" title="Sequence design"></a>Sequence design</h1><p><br>极化码输入序列的设计，事关信息比特和冻结比特位置如何选取的问题。选取的规则是根据子信道可靠性程度，将信息比特放置在可靠性高的子信道上。关于如何评估子信道可靠性，本博客已花了大量篇幅介绍AWGN下的高斯近似法，之后又介绍了<a href="http://marshallcomm.cn/2017/09/19/polar-code-20-beta-expansion/">Beta-expansion</a>算法。3GPP正是采用了华为提出的Beta-expansion算法，按照极化权重（PW）给子信道排序，用极化权重来度量子信道可靠性。这部分已经写入5G协议规范中，详见博文<a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a> polar coding一节。虽然5G协议并不会提到Beta-expansion算法，但协议所展示的Table 5.3.1-2 Polar sequence and its corresponding reliablity正是基于Beta-expansion算法得到的。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230838961.png" alt="mark"></p><p>需要说明的是，Table 5.3.1-2所示的$W\left( Q_{i}^{ { {N}_{\max }}} \right)$，是在Beta-expansion算法基础上又做了进一步改进的结果。</p><p>按权重从小到大排序$W\left( Q_{0}^{ { {N}_{\max }}} \right)&lt;W\left( Q_{1}^{ { {N}_{\max }}} \right)&lt;…&lt;W\left( Q_{ { {N}_{\max }}-1}^{ { {N}_{\max }}} \right)$，其中$Q_{i}^{ { {N}_{\max }}}$就是按可靠性程度排序之后的比特索引，最终得到极化码输入序列的比特位置索引$\mathbf{Q}_{0}^{ { {N}_{\max }}-1}=\left\{ Q_{0}^{ { {N}_{\max }}},Q_{1}^{ { {N}_{\max }}},…,Q_{ { {N}_{\max }}-1}^{ { {N}_{\max }}} \right\}$。</p><p>用$\bar{Q}_{I}^{N}$表示信息比特索引集合，用$\bar{Q}_{F}^{N}$表示冻结比特索引集合，$\left| \bar{Q}_{I}^{N} \right|={ {K}^{‘}}+{ {n}_{PC}}$，$\left| \bar{Q}_{F}^{N} \right|=N-\left| \bar{Q}_{I}^{N} \right|$。</p><blockquote><p>为了本文叙述的连贯性，本文涉及的${ {K}^{‘}}$表示包含CRC比特的信息位数，即${ {K}^{‘}}=K+{ {L}_{CRC}}$。因此本文中的${ {K}^{‘}}$与5G协议<a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a> polar coding一节中的$K$等价。</p><p>若${ {n}_{PC}}=0$，则说明极化码编码采用CRC-Polar；若${ {n}_{PC}}&gt;0$,则说明极化码采用CRC-PC-Polar，在这种情下，CRC、PC和待编码信息比特都作为极化码的信息比特位，即都在$\bar{Q}_{I}^{N}$中。有或没有PC，如果有，${ {n}_{PC}}$的值是多少？——这个待定。目前5G协议里暂设${ {n}_{PC}}=0$。</p></blockquote><p>用$Q_{PC}^{N}$表示PC比特索引集合，$\left| Q_{PC}^{N} \right|={ {n}_{PC}}$。极化码信息比特索引集合$\bar{Q}_{I}^{N}$还可进一步细分，用$\tilde{Q}_{I}^{N}$表示$\bar{Q}_{I}^{N}$中可靠性最高的$\left( \left| \mathbf{\bar{Q}}_{I}^{N} \right|-{ {n}_{PC}} \right)$个比特索引。PC比特又分为两个部分，其中有$n_{PC}^{wm}$个PC比特对应于$\tilde{Q}_{I}^{N}$的最小行重。用${ {G}_{N}}$表示极化码生成矩阵，${ {G}_{N}}={ {\left( { {G}_{2}} \right)}^{\otimes n}}$，$G2=\left[ \begin{matrix}<br>1 &amp; 0 \\<br>1 &amp; 1 \\<br>\end{matrix} \right]$。用${ {\mathbf{g}}_{j}}$表示${ {G}_{N}}$的第$j$行，用$w\left( { {\mathbf{g}}_{j}} \right)$表示${ {\mathbf{g}}_{j}}$的行重，行重就是${ {\mathbf{g}}_{j}}$中“1”的个数。</p><p>因此1）把$n_{PC}^{wm}$个PC比特放置在具有$\tilde{Q}_{I}^{N}$最小行重的索引上；2）把$\left( { {n}_{PC}}-n_{PC}^{wm} \right)$个PC比特放置在$\bar{Q}_{I}^{N}$中可靠性最低的索引上；3）$\bar{Q}_{I}^{N}$中剩余的比特索引放置${ {K}^{‘}}=K+{ {L}_{CRC}}$个信息比特。</p><blockquote><p>这两部分的PC比特所在的位置是不会重合的。</p><p>如果$\tilde{Q}_{I}^{N}$中最小行重的比特索引数大于$n_{PC}^{wm}$，那么就将$n_{PC}^{wm}$个PC比特放置在行重最小且可靠性最高的比特索引上。</p></blockquote><p>极化码输入序列索引示意如下图所示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/111753905.jpg" alt="mark"></p><p>按照如上所述的方法，得到极化码输入序列$\mathbf{u}=\left[ { {u}_{0}}\text{ }{ {u}_{1}}\text{ }{ {u}_{2}}\text{ }…\text{ }{ {u}_{N-1}} \right]$。将序列$\mathbf{u}$和生成矩阵相乘</p><script type="math/tex;mode=display">\mathbf{d}=\mathbf{u}{ {\mathbf{G}}_{n}}</script><p>得到编码器输出序列$\mathbf{d}=\left[ { {d}_{0}}\text{ }{ {d}_{1}}\text{ }{ {d}_{2}}\text{ }…\text{ }{ {d}_{N-1}} \right]$。</p><h1 id="Rate-matching"><a href="#Rate-matching" class="headerlink" title="Rate matching"></a>Rate matching</h1><p><br>编码之后的速率匹配是非常重要的一环。速率匹配的输入序列即为编码输出序列$\mathbf{d}=\left[ { {d}_{0}}\text{ }{ {d}_{1}}\text{ }{ {d}_{2}}\text{ }…\text{ }{ {d}_{N-1}} \right]$，速率匹配的输出序列为${ {f}_{0}},{ {f}_{1}},{ {f}_{2}},…,{ {f}_{E-1}}$，速率匹配比特数为$E$。$E$才是实际要传输的编码比特数。</p><p>速率匹配分为三个过程，子块交织、比特收集、比特交织。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112410760.png" alt="mark"></p><h2 id="子块交织"><a href="#子块交织" class="headerlink" title="子块交织"></a>子块交织</h2><p><br>子块交织就是上图所示的Rate-matching Interleaving，它将输入进来的N编码比特分为32个子块，然后将32个子块按照序列（0 1 2 3 4 5 6 7 8 9 10 11 12 16 13 17 14 18 15 19 20 24 21 22 25 26 28 23 27 29 30 31）重新排序。编码序列${ {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}}$，经过子块交织后表示为${ {y}_{0}},{ {y}_{1}},{ {y}_{2}},…,{ {y}_{N-1}}$。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112524657.png" alt="mark"></p><p>子块交织过程为：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112624520.png" alt="mark"></p><p>其中子块交织模式$P\left( i \right)$由下表得到：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112709695.png" alt="mark"></p><h2 id="比特收集"><a href="#比特收集" class="headerlink" title="比特收集"></a>比特收集</h2><p><br>比特收集就是Circular Buffer，有三种速率匹配模式：repetition，puncturing，shortening。比特收集器的输入序列为子块交织器的输出${ {y}_{0}},{ {y}_{1}},{ {y}_{2}},…,{ {y}_{N-1}}$，比特收集器的输出序列为${ {e}_{0}},{ {e}_{1}},{ {e}_{2}},…,{ {e}_{E-1}}$。完成从极化码码长N到速率匹配比特数E的转换，E是实际传输的编码比特数。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112827354.png" alt="mark"></p><p>速率匹配模式的选择方法为：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112857191.png" alt="mark"></p><p>当$E&gt;N$，选择repetiton；当$\frac{K}{E}\le \frac{7}{16}$，选择Puncturing，当$\frac{K}{E}&gt;\frac{7}{16}$，选择shortening。</p><p>比特收集的具体方法为：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/113048532.png" alt="mark"></p><h2 id="比特交织"><a href="#比特交织" class="headerlink" title="比特交织"></a>比特交织</h2><p><br>比特交织器的输入序列为比特收集器的输出${ {e}_{0}},{ {e}_{1}},{ {e}_{2}},…,{ {e}_{E-1}}$，比特交织器的输出为${ {f}_{0}},{ {f}_{1}},{ {f}_{2}},…,{ {f}_{E-1}}$。</p><p>交织过程如下：</p><p>$ T $表示满足$ T\left( T+1 \right)/2\ge E $的最小整数；</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084452223.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084546055.png" alt="mark"></p><p>至此，一个码字的5G控制信道编码过程就完成了。$K$比特待编码序列，经极化码编码和速率匹配后，输出$E$比特编码序列。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><br>[1] Chairman’s Notes RAN1_90_final<br>[2] <a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;我一直有意将&lt;a href=&quot;http://marshallcomm.cn/categories/Polar-Code/&quot;&gt;Polar Code&lt;/a&gt;系列和&lt;a href=&quot;http://marshallcomm.cn/categories/3GPP-PolarCode/&quot;&gt;3GPP_PolarCode&lt;/a&gt;系列区分开，因此把它们放在不同的分类里，虽然它们都是关于polar code的文章，但前者关注极化码编译码算法本身，而后者关注极化码在5G标准化中的进展。前者更偏于理论研究，参考资料多是paper，后者更注重实际应用，参考资料多是3GPP proposal或Technical Specification（技术规范）。这可看作是polar code发展的两条线，有时这两条线又相交重叠，相互促进。如果你熟悉LTE system，那么&lt;a href=&quot;http://marshallcomm.cn/categories/3GPP-PolarCode/&quot;&gt;3GPP_PolarCode&lt;/a&gt;系列则更容易理解。3GPP里的极化码是控制信道框架下的信道编码，它的上一步骤是CRC添加，它的下一步是速率匹配，这个过程在LTE system里也是如此。&lt;/p&gt;&lt;p&gt;3GPP RAN1#90会议于8月21~25日在布拉格召开。会议达成的结论已在3GPP Rel-15技术规范v1.0.0版本中体现，详见&lt;a href=&quot;http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/&quot;&gt;《5G物理层协议V100》&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;截止到本次会议，polar coding一个比较完整的编码方案已经形成，从CRC计算到极化码编码，再到速率匹配方案都基本确定了，并已将本次会议达成的结论体现在v1.0.0版本协议的&lt;a href=&quot;http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/&quot;&gt;《5G-NR复用与信道编码》&lt;/a&gt;中。&lt;/p&gt;&lt;p&gt;本文结合本次会议达成的结论和v1.0.0版本协议的&lt;a href=&quot;http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/&quot;&gt;《5G-NR复用与信道编码》&lt;/a&gt;，对Polar coding过程进行比较全面的梳理。5G控制信道编码的基本流程：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;CRC添加&lt;/li&gt;&lt;li&gt;信道编码&lt;/li&gt;&lt;li&gt;速率匹配&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="3GPP_PolarCode" scheme="http://marshallcomm.cn/categories/3GPP-PolarCode/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（20）Beta-expansion</title>
    <link href="http://marshallcomm.cn/2017/09/19/polar-code-20-beta-expansion/"/>
    <id>http://marshallcomm.cn/2017/09/19/polar-code-20-beta-expansion/</id>
    <published>2017-09-19T09:20:30.000Z</published>
    <updated>2017-09-19T12:02:57.524Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br><strong>高斯近似（GA）终将成为历史，取而代之的是β-expansion算法。β-expansion与GA性能等价，但复杂度极低。</strong></p><p>文献[1]首先揭示了极化码合成信道（synthesized channels）之间的偏序（Partial Order，PO）关系。2016年8月22-26日，在瑞典哥德堡举行的3GPP RAN1 #86次会议上，华为提出了用极化权重（Polarization Weight，PW）来表征AWGN信道下极化码合成信道可靠性的算法[2]。这两项独立的研究似乎不谋而合，促使华为进一步进行理论扩展，追求AWGN信道下极化码的快速构造方法。这就是本博文所要介绍的β-expansion[3]。</p><p>文献[3]首先介绍了通用偏序（Universal Partial Order，UPO）的两个重要性质：嵌套和对称。这两个性质是能够采用递归方式构造极化码序列的基础。然后介绍了PW方法，其中β参数需要慎重地选择，其值的大小直接决定了合成信道的顺序。最后用大量的篇幅论证了β的最佳取值为1.1892，即$\beta ={ {2}^{ {1}/{4}\;}}$。无论是渐进性分析，还是数值仿真结果都证实β-expansion方法以低复杂度获得了与GA相同的性能。</p><a id="more"></a><h1 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h1><h2 id="极化码策略"><a href="#极化码策略" class="headerlink" title="极化码策略"></a>极化码策略</h2><p><br><strong>策略：</strong>将信息比特放置于好的信道位置上，将冻结比特放置于差的信道位置上。</p><p><strong>关键：</strong>如何有效地识别信道位置的好坏并按可靠性排序，是极化码序列构造的关键。</p><p><strong>不幸：</strong>有效地序列构造仅存在于二进制删除信道（BEC）上。</p><p><strong>挑战：</strong>5G无线通信系统要求极化码至少能够适用于AWGN信道。</p><p><strong>已有方法：</strong>高斯近似（GA）。</p><p><strong>已有方法缺点：</strong>GA的缺点是计算量大，其计算量随着码块长度成比例增加，这对于码长和码率变化的实际系统是不可接受的。不仅如此，对于低延迟的编译码器，也无法实现在线地处理。</p><h2 id="通用偏序（UPO）"><a href="#通用偏序（UPO）" class="headerlink" title="通用偏序（UPO）"></a>通用偏序（UPO）</h2><p><br>文献[1]证明了任意二进制输入对称信道下的可靠性测量存在偏序（Partial Order）关系。给定一对合成信道索引$\left( x,y \right)$，它们的可靠性关系取决于下列规则：</p><p><strong>Addition：</strong>若一个合成信道索引用二进制表示为$\left( a,b,1,c \right)$，那么它的可靠性一定大于合成信道$\left( a,b,0,c \right)$。$’’1\succ 0’’$模式对于1比特或多比特同样适用。例如：</p><p>2（0, 1 ,0） $\prec $ 3（0, 1, 1）</p><p>9（1, 0, 0, 1） $\prec $ 15（1, 1, 1, 1）</p><p>在此例中（1, 0, 0, 1）是合成信道索引9的二进制表示。</p><p><strong>Left-swap：</strong>若合成信道索引为$\left( a,0,b,1,c \right)$，那么它的可靠性一定小于合成信道$\left( a,1,b,0,c \right)$。$’’0…1\prec 1…0’’$模式可以出现多次，并且0,1不需要彼此相邻。例如：</p><p>2（0, 1 ,0） $\prec $ 4（1, 0, 0）</p><p>12（0, 1, 1, 0, 0） $\prec $ 24（1, 1, 0, 0, 0）</p><p>但这两个规则也不是万能的，对于某些索引对$\left( x,y \right)$则无能为力。Addition、Left-swap或它们的联合都不能确定顺序。例如：</p><p>3（0, 1, 1）and 4（1, 0, 0）</p><p>7（0, 1, 1, 1）and 12（1, 1, 0, 0）</p><p>我们称这些序对于UPO是<strong>未知的</strong>。</p><h1 id="UPO的性质"><a href="#UPO的性质" class="headerlink" title="UPO的性质"></a>UPO的性质</h1><p><br><strong>Proposition 1.</strong> （嵌套和对称）极化码通用偏序有两个重要性质：</p><p><strong>嵌套：</strong>码长为$N$的序可在码长为$2N$的序中保持不变。</p><p><strong>对称：</strong>在码长为$N$的极化码中，$x\prec y$的序和$\left( N-1-x \right)\prec \left( N-1-y \right)$的序对称。</p><p>现在讨论UPO的递归结构。定义$\mathbf{UP}{ {\mathbf{O}}_{n}}$为极化码码长$N$的偏序关系$x\prec y$的最小集合，其中$x\prec y$记为$\left\{ x,y \right\}$，$x,y$是$\left[ 0,N-1 \right]$内的整数。关系链$x\prec y\prec z$可以用若干子链表示最临近节点之间的关系，即$x\prec y$和$y\prec z$。例如：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/181904087.png" alt="mark"></p><p>其中$\mathbf{UP}{ {\mathbf{O}}_{n}}$中黑色字体的序来源于它的上一级$\mathbf{UP}{ {\mathbf{O}}_{n-1}}$，对应于Proposition 1的<strong>嵌套性质</strong>；蓝色字体的序表示与黑色字体的序对称的部分，对应于Proposition 1的<strong>对称性质</strong>；红色字体的序表示从$\mathbf{UP}{ {\mathbf{O}}_{n-1}}$到$\mathbf{UP}{ {\mathbf{O}}_{n}}$构造过程中出现的新序，这些新出现的序对于UPO来说是<strong>未知的</strong>。</p><h1 id="β-expansion：PW算法原理"><a href="#β-expansion：PW算法原理" class="headerlink" title="β-expansion：PW算法原理"></a>β-expansion：PW算法原理</h1><p><br><strong>定义：（PW 算法）</strong>考虑一个合成信道索引$x$，其$n$比特二进制扩展为$B=\left( { {b}_{n-1}},…,{ {b}_{1}},{ {b}_{0}} \right)$，最左边为最高有效位。极化权重定义为</p><script type="math/tex;mode=display">\begin{align}
{ {f}^{PW}}:x\mapsto \sum\limits_{i=1}^{n}{ { {b}_{i}}{ {\beta }^{i}}}
\end{align}</script><p>其中$\beta $的值需要慎重选择。文献[2]建议$\beta ={ {2}^{ {1}/{4}\;}}$。</p><p>在数学上，这种表示方法被称为β-expansion，是十进制扩展的推广，可以看作是对于任意实数$y$的基于β的非整数表示。</p><p><strong>例1：</strong>令$\beta ={ {2}^{ {1}/{4}\;}}$，极化码码长为$N={ {2}^{n}}=16$。则对于合成信道索引3，即${ {B}_{3}}=\left( 0,0,1,1 \right)$，其β-expansion可计算为</p><script type="math/tex;mode=display">{ {w}_{3}}=0\cdot { {2}^{ {3}/{4}\;}}+0\cdot { {2}^{ {2}/{4}\;}}+1\cdot { {2}^{ {1}/{4}\;}}+1\cdot { {2}^{ {0}/{4}\;}}=2.189\cdot \cdot \cdot</script><p>同理，我们可以写出所有合成信道的β-expansion</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & w=\left\{ \begin{matrix}
   0.000 & 1.000 & 1.189 & 2.189 & 1.414 & 2.414 & 2.603 & 3.603  \\
\end{matrix} \right. \\ 
 \nonumber & \ \ \ \ \ \ \ \left. \begin{matrix}
   1.682 & 2.682 & 2.871 & 3.871 & 3.096 & 4.096 & 4.285 & 5.285  \\
\end{matrix} \right\} \\ 
\end{align}</script><p>${ {w}_{x}}$值越大表示合成信道索引$x$的可靠性越高。将$w$按可靠性增序排列，就得到了极化码序列</p><script type="math/tex;mode=display">order=\left\{ \begin{matrix}
   0 & 1 & 2 & 4 & 8 & 3 & 5 & 6 & 9 & 10 & 12 & 7 & 11 & 13 & 14 & 15  \\
\end{matrix} \right\}</script><p><strong>PW算法的优点是，对合成信道可靠性，提供了一种简洁、低复杂度的全排列算法，并且当码长${ {2}^{n}}$从$n=1$到$n\to +\infty $增加时，能够始终保持一种嵌套性质。</strong></p><p><strong>Proposition 2. </strong>（嵌套结构）PW算法维持了极化码的嵌套码构造的特性。</p><p><strong>Proposition 3.</strong> 当$\beta &gt;1$，任何由PW算法得到的序列都遵循极化码的通用偏序（UPO）关系。</p><p><strong>Theorem 1.</strong> 对于长度为${ {2}^{n}}\left( n\ge 3 \right)$的极化码，存在一个升序集合${ {A}_{n}}=\left\{ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},…,{ {a}_{ { {i}_{\max }}}},+\infty \right\}$，其中${ {a}_{0}}=1$和${ {a}_{1}},{ {a}_{2}},…,{ {a}_{ { {i}_{\max }}}}$都是代数。任意$\beta $落入区间$\left( { {a}_{i}},{ {a}_{i+1}} \right),\forall i\ge 0$内，β-expansion都是唯一的，并且$\beta $落入不同区间可导致不同的顺序序列。此外，集合${ {A}_{n}}$是嵌套的，即${ {A}_{n}}\subset { {A}_{n+1}}$。</p><blockquote><p>Marshall：通过上述Proposition和Theorem，初步地把β-expansion和偏序建立起联系，β-expansion获得了偏序的理论支撑。两者的共性在于，它们都具有嵌套结构。然而$\beta $的值究竟取何值呢？这还需要在具体的用例中去分析和确定。</p></blockquote><h1 id="AWGN信道下的快速构造"><a href="#AWGN信道下的快速构造" class="headerlink" title="AWGN信道下的快速构造"></a>AWGN信道下的快速构造</h1><p><br>现在UPO已经成为极化码序列构造的基础，而极化码序列的构造决定了合成信道的可靠性顺序。但UPO无法做到对整个序列进行全排列，正如在UPO的性质一节所看到的，从$\mathbf{UP}{ {\mathbf{O}}_{n-1}}$到$\mathbf{UP}{ {\mathbf{O}}_{n}}$的构造中，总会有一些新的序是UPO无法判断的。而高斯近似虽然能够对整个序列进行全排序，但由于其高复杂度而不适用于实际应用。为了克服两者的缺点，本节呈现了一种基于UPO和β-expansion的快速构造方法。</p><blockquote><p>Marshall：根据高斯近似的结果，一步一步缩小$\beta $的取值范围，最终的序列不仅满足UPO性质，而且与高斯近似的结果保持一致。换句话说，没有条件，就去创造条件。</p></blockquote><p>解释一下为什么$\beta $的取值会影响序列顺序，如图1所示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/181329970.png" title="图 1 $\beta $-expansion嵌套结构，$\beta ={ {2}^{ {1}/{4}\;}}$，$N=2,4,8,16$ "></p><p>根据定理1，是默认为$\beta &gt;1$，所以今后只考虑$\beta &gt;1$。</p><p>当$n=3$时，只有一对未定关系，即$\left( \beta +1,{ {\beta }^{2}} \right)$。为了区分它们的关系，需要多项式方式${ {x}^{2}}-x-1=0$，取其大于1的根为$x=\frac{1+\sqrt{5}}{2}=1.618$，因此升序集合为</p><script type="math/tex;mode=display">{ {A}_{3}}=\left\{ 1,1.618,+\infty  \right\}</script><p>当$\beta \in \left( 1,1.618 \right)$时，有$\beta +1&gt;\beta $，则相应的序列为</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/182022400.png" alt="mark"></p><p>当$\beta \in \left( 1.618,+\infty \right)$时，有$\beta +1&lt;\beta $，则相应的序列为</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/182147280.png" alt="mark"></p><p>这就是定理1所说的，当$\beta $落入${ {A}_{3}}$的任意区间内，β-expansion是唯一的，且导致不同的顺序序列。</p><p>当$n=4$时，有4对未定关系，包括之前提到的$\left( \beta +1,{ {\beta }^{2}} \right)$及其两个等价形式，即</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & \left( \beta +1,{ {\beta }^{2}} \right),\left( { {\beta }^{2}}+\beta ,{ {\beta }^{3}} \right),\left( { {\beta }^{2}}+\beta ,{ {\beta }^{3}} \right) \\ 
 \nonumber & \left( \beta +1,{ {\beta }^{3}} \right),\left( { {\beta }^{2}}+1,{ {\beta }^{3}} \right),\left( { {\beta }^{2}}+\beta +1,{ {\beta }^{3}} \right) \\ 
\end{align}</script><p>为了区分它们的关系，需要求解4个多项式方程</p><script type="math/tex;mode=display">\begin{align}
{ {x}^{3}}-{ {x}^{2}}-x-1=0
\end{align}</script><script type="math/tex;mode=display">\begin{align}
{ {x}^{3}}-{ {x}^{2}}-1=0
\end{align}</script><script type="math/tex;mode=display">\begin{align}
{ {x}^{2}}-x-1=0
\end{align}</script><script type="math/tex;mode=display">\begin{align}
{ {x}^{3}}-x-1=0
\end{align}</script><p>得到</p><script type="math/tex;mode=display">{ {A}_{4}}=\left\{ 1,1.325,1.466,1.618,1.839,+\infty  \right\}</script><p>其中1.325,1.466,1.618,1.839分别是多项式方程（2~5）的根。</p><p>$\beta $分别落入${ {A}_{4}}$的5段子区间内，将导致5种不同的序，如图2所示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/183636666.png" title="图 2 极化码的$\beta $-expansion，$N=16$"></p><p>$\beta $取哪个值？此时高斯近似法开始派上用场。对于码长$N={ {2}^{4}}=16$，$n=2$的极化码，AWGN信道下，高斯近似法对合成信道索引的排序为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & 0\to 1\to 2\to 4\to 8\to 3\to 5\to 6\to 9 \\ 
  \nonumber & \to 10\to 12\to 7\to 11\to 13\to 14\to 15 \\ 
\end{align}</script><p>将这个序与图2对比，发现当$\beta \in \left( 1,1.325 \right)$时，两个序一致。</p><p>由此，我们将$\beta $的取值范围由$n=3$时的$\left( 1,1.618 \right)$缩小到$n=4$时的$\left( 1,1.325 \right)$。</p><p>进一步，当$n=5$时，有5对未定关系，即$\left( 28,15 \right),\left( 14,19 \right),\left( 24,13 \right),\left( 24,11 \right),\left( 24,7 \right)$。根据高斯近似的可靠性结果，呈现出与$\beta $的对应关系</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & 28\prec 15,\ 24\prec 11\Leftrightarrow \beta <1.221 \\ 
 \nonumber & \ \ \ \ \ \ \ \ \ \ \ \ 14\prec 19\Leftrightarrow \beta <1.325 \\ 
 \nonumber & \ \ \ \ \ \ \ \ \ \ \ \ 24\prec 13\Leftrightarrow \beta <1.272 \\ 
\end{align}</script><p>对于序$\left\{ 7,24 \right\}$，虽然依赖于SNR的可靠性结果为$7\succ 24$，但大量仿真结果表明$7\prec 24$具有更好的性能。因此选择</p><script type="math/tex;mode=display">7\prec 24\Leftrightarrow \beta >1.179</script><p>此时，$\beta $的取值范围进一步缩小到$\left( 1.179,1.221 \right)$。</p><p>对于$n&gt;5$（$N&gt;32$）的情况，继续重复这一搜索过程，得到如下表中所示的结果。随着$N$的增加，$\beta $的取值范围不断缩小，并接近于$1.1892\approx { {2}^{ {1}/{4}\;}}$。新的序对小于合成信道总数的20%。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/184231335.png" alt="mark"></p><h1 id="渐进性分析与数值仿真结果"><a href="#渐进性分析与数值仿真结果" class="headerlink" title="渐进性分析与数值仿真结果"></a>渐进性分析与数值仿真结果</h1><p><br>β-expansion可以转化为贝努力卷积（Bernoulli Convolution）概念。贝努力卷积定义了概率测度</p><script type="math/tex;mode=display">{ {v}_{\lambda }}=\sum\limits_{i=1}^{+\infty }{ { {b}_{i}}}{ {\beta }^{i}}</script><p>假设$B=\left( …,{ {b}_{1}},{ {b}_{0}} \right)$是二进制独立随机序列，满足</p><script type="math/tex;mode=display">\Pr \left\{ { {b}_{i}}=1 \right\}=\Pr \left\{ { {b}_{i}}=0 \right\}=0.5,\forall i</script><p>测度${ {v}_{\lambda }}$要么是绝对连续的，要么是奇异的。我们需要的正是${ {v}_{\lambda }}$的绝对连续，使得在无限长的序列上能够进行全排列。令$\beta ={ {2}^{ {1}/{k}\;}}$，已经证明当$k=4$时，即$\beta \text{=}1.1892$时，满足绝对连续的必要条件。这与上表中的观察一致。</p><p>图3则从仿真结果上表明β-expansion与高斯近似的性能相同。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/184439317.png" title="图 3 Comparison of PW algorithm with β= 1.1892 and Gaussian approximation for different block-length N (code length in number of code bits). Simulation assumptions are: BLER = 0.001, QPSK modulation, AWGN channel, successive cancellation list (SCL) decoder with list size 8 and extra 19-bit CRC."></p><p>至此，从理论分析到仿真结果，充分论证了β-expansion算法的可行性和优越性。</p><h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p><br>[1] C. Schurch, “A partial Order for the Synthesized Channels of a Polar Code, ISIT 2016.<br>[2] 3GPP, R1-167209, Polar code design and rate matching, Huawei, HiSilicon.<br>[3] β-expansion A Theoretical Framework for Fast and Recursive Construction of Polar Codes, Huawei.</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;&lt;strong&gt;高斯近似（GA）终将成为历史，取而代之的是β-expansion算法。β-expansion与GA性能等价，但复杂度极低。&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;文献[1]首先揭示了极化码合成信道（synthesized channels）之间的偏序（Partial Order，PO）关系。2016年8月22-26日，在瑞典哥德堡举行的3GPP RAN1 #86次会议上，华为提出了用极化权重（Polarization Weight，PW）来表征AWGN信道下极化码合成信道可靠性的算法[2]。这两项独立的研究似乎不谋而合，促使华为进一步进行理论扩展，追求AWGN信道下极化码的快速构造方法。这就是本博文所要介绍的β-expansion[3]。&lt;/p&gt;&lt;p&gt;文献[3]首先介绍了通用偏序（Universal Partial Order，UPO）的两个重要性质：嵌套和对称。这两个性质是能够采用递归方式构造极化码序列的基础。然后介绍了PW方法，其中β参数需要慎重地选择，其值的大小直接决定了合成信道的顺序。最后用大量的篇幅论证了β的最佳取值为1.1892，即$\beta ={ {2}^{ {1}/{4}\;}}$。无论是渐进性分析，还是数值仿真结果都证实β-expansion方法以低复杂度获得了与GA相同的性能。&lt;/p&gt;
    
    </summary>
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/categories/Polar-Code/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
  </entry>
  
  <entry>
    <title>5G物理层协议V100</title>
    <link href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/"/>
    <id>http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/</id>
    <published>2017-09-11T02:19:28.000Z</published>
    <updated>2017-10-20T01:33:39.559Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><p>3GPP 5G 物理层规范共有7个文档：</p><p><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">3GPP TS 38.201: “NR物理层概述”</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">3GPP TS 38.202: “NR物理层提供的服务”</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">3GPP TS 38.211: “NR物理信道与调制”</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">3GPP TS 38.212: “NR复用与信道编码”</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">3GPP TS 38.213: “NR物理层过程（控制）”</a><br>3GPP TS 38.214: “NR物理层过程（数据）”<br>3GPP TS 38.215: “NR物理层测量”</p><p>本系列博文较全面地呈现了<a href="http://marshallcomm.cn/tags/2017-09/"><strong>3GPP Rel-15 V1.0.0 (2017-09)</strong></a>版本前5份规范的各个章节。其中“NR复用与信道编码”规范只关注了与polar code相关的比特级处理，LDPC码相关处理待日后整理。</p><hr><p>是时候开启一个新的系列了。前面已写有两个系列，一是<a href="http://marshallcomm.cn/categories/Polar-Code/">极化码技术系列</a> ，二是<a href="http://marshallcomm.cn/categories/3GPP-PolarCode/">极化码在3GPP标准化的进展系列</a>。今天开启的是<a href="http://marshallcomm.cn/categories/5G-NR/">5G-NR系列</a>。</p><a id="more"></a><p>3GPP 5G标准化时间表为：</p><ul><li>2017年12月完成NSA（non-standalone）标准，并于2018年3月冻结；</li><li>2018年6月完成SA（standalone）标准，并于2018年9月再次冻结。</li></ul><p>如今距离NSA标准的完成只剩下3个月，9月以后的会议更加密集。</p><ul><li>2017-09-11 <strong>3GPP RAN#77</strong></li><li>2017-09-18 3GPP RAN1-NR#3</li><li>2017-10-09 3GPP RAN1#90b</li><li>2017-11-27 3GPP RAN1#91</li><li>2017-12-18 <strong>3GPP RAN#78</strong></li></ul><p>9月7日3GPP把Rel-15的7份物理层规范全部更新到 <a href="http://marshallcomm.cn/tags/2017-09/"><strong>V1.0.0 (2017-09)</strong></a>版本，本博客对5G-NR物理层规范的跟踪就从这个版本开始。</p><p>这个系列的时效性很强。9月7日才更新的规范，9月11日又开RAN全会。这意味着Rel-15规范很快又会更新并填充新的内容，V1.0.0 (2017-09)版本很快就会“过时”。规范内容翻译得比较仓促，也不得不仓促，先整理了前5份文档。</p><p>无论是LTE、LTE-A，还是LTE-A Pro，其规范文档编号都是36.xxx系列，5G NR则使用新的编号——38.xxx系列。</p><p>此时的5G-NR规范仍然只是初稿，仍有大量内容等待填充，以往内容最多的211协议目前也只不过30几页。但从目前已有的内容中，也可大致窥见到5G NR物理层与LTE有多大的不同，又有多大的相似。</p><p>Marshall</p><p>2017年9月11日</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;3GPP 5G 物理层规范共有7个文档：&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/08/nr-v100-general-description/&quot;&gt;3GPP TS 38.201: “NR物理层概述”&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/&quot;&gt;3GPP TS 38.202: “NR物理层提供的服务”&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/&quot;&gt;3GPP TS 38.211: “NR物理信道与调制”&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/&quot;&gt;3GPP TS 38.212: “NR复用与信道编码”&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/&quot;&gt;3GPP TS 38.213: “NR物理层过程（控制）”&lt;/a&gt;&lt;br&gt;3GPP TS 38.214: “NR物理层过程（数据）”&lt;br&gt;3GPP TS 38.215: “NR物理层测量”&lt;/p&gt;&lt;p&gt;本系列博文较全面地呈现了&lt;a href=&quot;http://marshallcomm.cn/tags/2017-09/&quot;&gt;&lt;strong&gt;3GPP Rel-15 V1.0.0 (2017-09)&lt;/strong&gt;&lt;/a&gt;版本前5份规范的各个章节。其中“NR复用与信道编码”规范只关注了与polar code相关的比特级处理，LDPC码相关处理待日后整理。&lt;/p&gt;&lt;hr&gt;&lt;p&gt;是时候开启一个新的系列了。前面已写有两个系列，一是&lt;a href=&quot;http://marshallcomm.cn/categories/Polar-Code/&quot;&gt;极化码技术系列&lt;/a&gt; ，二是&lt;a href=&quot;http://marshallcomm.cn/categories/3GPP-PolarCode/&quot;&gt;极化码在3GPP标准化的进展系列&lt;/a&gt;。今天开启的是&lt;a href=&quot;http://marshallcomm.cn/categories/5G-NR/&quot;&gt;5G-NR系列&lt;/a&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>5G-NR物理层过程（控制）</title>
    <link href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/"/>
    <id>http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/</id>
    <published>2017-09-11T01:43:15.000Z</published>
    <updated>2017-09-12T02:48:22.181Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="同步过程"><a href="#同步过程" class="headerlink" title="同步过程"></a>同步过程</h1><h2 id="小区搜索"><a href="#小区搜索" class="headerlink" title="小区搜索"></a>小区搜索</h2><p><br>小区搜索过程是UE获得和小区时间和频率同步，并检测物理层小区ID的过程。</p><p>为进行小区搜索，UE需接收下列同步信号：主同步信号（PSS）和辅同步信号（SSS）。主辅同步信号在TS 38.211中定义。</p><p>UE应假设PBCH、PSS和SSS在连续的OFDM符号内接收，并且形成SS/PBCH块。</p><p>对于半帧中的SS/PBCH块，候选SS/PBCH块的OFDM 符号索引号和第1个OFDM符号索引根据下列情况确定：</p><ul><li>15 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{2, 8} + 14*n。对于载波频率小于等于3 GHz，有n=0, 1。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1, 2, 3。</li><li>30 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{4, 8, 16, 20} + 28*n。对于载波频率小于等于3 GHz，有n=0。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1。</li><li>30 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{2, 8} + 14*n。对于载波频率小于等于3 GHz，有n=0, 1。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1, 2, 3。</li><li>120 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{4, 8, 16, 20} + 28*n。对于载波频率大于6 GHz，有n=0, 1, 2, 3, 5, 6, 7, 8, 10, 11, 12, 13, 15, 16, 17, 18。</li><li>240 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{8, 12, 16, 20, 32, 36, 40, 44} + 56*n。对于载波频率大于6 GHz，有n=0, 1, 2, 3, 5, 6, 7, 8。</li></ul><p>一个半帧中的候选SS/PBCH块在时域上以升序从0到$ L-1 ]$进行编号。对于$ L=4 $或$ L&gt;4 $，UE应根据与每个半帧内SS/PBCH块索引一一对应的PBCH中传输的DM-RS序列索引，分别确定SS/PBCH块索引的2或3个LSB比特。对于$ L=64 $，UE应根据高层参数[<em>SSB-index-explicit</em>]确定每个半帧内SS/PBCH块索引的3 个MSB比特。</p><a id="more"></a><blockquote><p>注：DM-RS序列索引在TS 38.211中定义。</p></blockquote><p>UE可通过参数[<em>SSB-transmitted-SIB1</em>]被配置，SS/PBCH块索引对于与SS/PBCH块对应重叠的REs，UE不应接收其他信号或信道。UE也可通过高层参数[<em>SSB-transmitted</em>]在每个服务小区被配置，SS/PBCH块索引对于与SS/PBCH块对应重叠的REs，UE不应接收其他信号或信道。[通过[<em>SSB-transmitted</em>]配置优先于通过[<em>SSB-transmitted-SIB1</em>]配置。]</p><blockquote><p>注：May be removed and captured in 38.211。</p></blockquote><p>对于每个服务小区中SS/PBCH块的接收，UE可以在每个服务小区通过高层参数[<em>SSB-timing</em>]每半帧周期性地被配置。如果对于SS/PBCH块的接收，UE没有每半帧被周期性配置，则UE应假设以半帧为周期。UE应假设在服务小区中，对于所有SS/PBCH块，周期是相同的。</p><p>对于初始小区的选择，UE可以假设SS/PBCH块半帧出现的周期为2帧。</p><h2 id="传输定时调整"><a href="#传输定时调整" class="headerlink" title="传输定时调整"></a>传输定时调整</h2><h2 id="Timing-for-secondary-cell-activation-deactivation"><a href="#Timing-for-secondary-cell-activation-deactivation" class="headerlink" title="Timing for secondary cell activation / deactivation"></a>Timing for secondary cell activation / deactivation</h2><h1 id="无线链路监测"><a href="#无线链路监测" class="headerlink" title="无线链路监测"></a>无线链路监测</h1><p><br>为了向高层指示失步/同时状态，UE应监测主小区的下行无线链路质量。</p><p>此处暂省略300+字，具体内容详见原文档。</p><h1 id="链路重配置过程"><a href="#链路重配置过程" class="headerlink" title="[链路重配置过程]"></a>[链路重配置过程]</h1><p><br>在一个服务小区内为了[RSRP x 或SINR]测量，UE可以配置一组CSI-RS资源或一组SS/PBCH块索引。UE应假设SCI-RS采用非零传输功率。每个CSI-RS资源参数通过高层信令配置，这些参数包括：</p><ul><li>[资源配置]</li><li>[周期]</li><li>[天线端口]</li><li>[传输功率]</li><li>[伪随机序列生成参数]</li><li>[QCL参数]</li><li>[…]</li></ul><blockquote><p>[Editor’s note: For reconfiguration request, there are also no existing agreements to describe preamble retransmissions, or the window for the UE to receive a response, or the configuration of the CORESET where the PDCCH scheduling the response is transmitted, etc.]</p></blockquote><h1 id="上行功率控制"><a href="#上行功率控制" class="headerlink" title="上行功率控制"></a>上行功率控制</h1><h2 id="物理上行共享信道"><a href="#物理上行共享信道" class="headerlink" title="物理上行共享信道"></a>物理上行共享信道</h2><h3 id="UE-behaviour"><a href="#UE-behaviour" class="headerlink" title="UE behaviour"></a>UE behaviour</h3><h3 id="Power-headroom"><a href="#Power-headroom" class="headerlink" title="Power headroom"></a>Power headroom</h3><h2 id="物理上行控制信道"><a href="#物理上行控制信道" class="headerlink" title="物理上行控制信道"></a>物理上行控制信道</h2><h3 id="UE-behaviour-1"><a href="#UE-behaviour-1" class="headerlink" title="UE behaviour"></a>UE behaviour</h3><h2 id="探测参考信号"><a href="#探测参考信号" class="headerlink" title="探测参考信号"></a>探测参考信号</h2><h2 id="物理随机接入信道"><a href="#物理随机接入信道" class="headerlink" title="物理随机接入信道"></a>物理随机接入信道</h2><p><br>在时隙$ i $内，对于服务小区$c$，UE通过下式确定PRACH传输功率：</p><p><script type="math/tex">{ {P}_{\text{PRACH,c}}}(i)=\min { {\left\{ { {P}_{\text{CMAX},c}}(i),\ { {P}_{\text{PRACH,target}}}+P{ {L}_{c}} \right\}}^{ {}}}</script>dBm</p><p>其中$ { {P}_{\text{CMAX,c}}}(i) $是在TS 38.133中定义的服务小区$c$中在时隙$i$的UE传输功率，$ { {P}_{\text{PRACH,target}}} $由高层参数[<em>preambleReceivedTargetPower</em>]提供，$ P{ {L}_{c}} $是UE计算对于服务小区$c$的路径损耗，单位为dB。为了确定$ { {P}_{\text{PRACH,c}}}(i) $，UE计算路径损耗$ P{ {L}_{c}} $。路径损耗根据SS/PBCH块得到，即$ P{ {L}_{c}} $ = <em>SS/PBCHBlockPower</em> – higher layer filtered RSRP，其中<em>SS/PBCHBlockPower</em>由[<em>SystemInformationBlockType1</em>]提供，RSRP在TS 38.215中定义，高层滤波器配置在TS 38.331中定义。</p><p>如果一个随机接入响应窗口内，如5.2小节中描述，UE不接收随机接入响应，随机接入响应包含了一个与UE发送的前导序列对应的前导ID，UE将为随后的PRACH传输确定传输功率，如果有的话。[TS 38.321]</p><h2 id="载波聚合"><a href="#载波聚合" class="headerlink" title="载波聚合"></a>载波聚合</h2><h2 id="双连接"><a href="#双连接" class="headerlink" title="双连接"></a>双连接</h2><h1 id="随机接入过程"><a href="#随机接入过程" class="headerlink" title="随机接入过程"></a>随机接入过程</h1><p><br>在进行初始化的物理随机接入过程之前，L1应该从高层接收一组SS/PBCH块索引，并且应向高层提供一组对应的RSRP测量。</p><p>在进行初始化的物理随机接入过程之前，L1应该从高层接收以下信息：</p><ul><li>PRACH传输参数（PRACH前导格式，用于PRACH传输的时域和频域资源）</li><li>用于决定小区中根序列及其在前导序列集合中的循环移位值的参数（逻辑根序列表格索引、循环移位$ N_{\text{CS}}^{ {}} $、集合类型（受限集合和非受限集合））</li></ul><p>从物理层来看，物理层随机接入过程包括PRACH中随机接入前导（Msg1）的发送，PDSCH（Msg2）中的随机接入响应（RAR），PUSCH中的Msg3和PDSCH中的Msg4。</p><blockquote><p>批注：Tentatively, Msg3 and Msg4 will be described as part of the RA procedure due to various differences from PUSCH/PDSCH after RRC connection.</p></blockquote><h2 id="随机接入前导"><a href="#随机接入前导" class="headerlink" title="随机接入前导"></a>随机接入前导</h2><p><br>L1过程通过PRACH传输请求被触发，PRACH传输由高层来配置。高层对PRACH传输的配置包括：</p><ul><li>对于PRACH传输，高层参数[<em>PRACH-config</em>]提供的配置</li><li>对于PRACH传输，高层参数[<em>PRACH-cell-idx</em>]提供的服务小区索引</li><li>前导索引，PRACH格式，$ { {P}_{\text{PRACH,target}}} $，相应的RA-RNTI，PRACH资源</li><li>[对于PRACH传输的重复次数，也作为请求的一部分由高层指示]</li></ul><p>A PRACH format is selected from the preamble sequence set for the corresponding preamble sequence length using the preamble index.</p><p>在所指示的PRACH资源上，前导使用所选择的PRACH格式发送，传输功率为4.4节描述的$ { {P}_{\text{PRACH}}} $。</p><h3 id="定时"><a href="#定时" class="headerlink" title="定时"></a>定时</h3><h2 id="随机接入响应"><a href="#随机接入响应" class="headerlink" title="随机接入响应"></a>随机接入响应</h2><p><br>UE通过高层[TS 38.321]在一个约束窗内，采用所指示的RA-RNTI尝试检测PDCCH。窗口开始于最早的CORESET的符号。对于Type1-PDCCH公共搜索空间，UE配置了CORESET。Type1-PDCCH公共搜索空间在7.1节进行了定义，在前导序列传输的[X]个符号之后。随机接入响应窗口的长度由高层参数[<em>rar-windowlength</em>]提供。</p><p>如果UE在时间窗内，采用所指示的RA-RNTI和相应的DL-SCH传输块检测PDCCH，UE将传输块传递到高层。高层分析传输块并向物理层指示上行授权。如果在时间窗内，UE不检测PDCCH或相应的DL-SCH传输块，则UE过程如[TS 38.321]中的描述。</p><p>如果UE在时间窗内，采用所指示的RA-RNTI和相应的DL-SCH传输块检测PDCCH，高层指示[XX]比特的上行授权到物理层。这一过程被称为物理层的随机接入响应（RAR）。UE应接收PDCCH和PDSCH。作为包含[<em>SystemInformationBlockType1</em>]的PDSCH的接收，PDSCH包含了具有相同子载波间隔和相同CP的DL-SCH传输块。[XX]比特的内容，开始于MSB，结束于LSB：</p><p>[…]</p><blockquote><p>批注：To be completed as the contents of the UL grant in the RAR are determined.</p></blockquote><h2 id="Msg3-PUSCH"><a href="#Msg3-PUSCH" class="headerlink" title="Msg3 PUSCH"></a>Msg3 PUSCH</h2><p><br>对于Msg3 PUSCH传输，高层参数[<em>msg3-tp</em>]指示UE是否应用变换预编码（transform precoding），变换预编在[TS 38.211]中描述。</p><p>Msg3 PUSCH传输的子载波间隔由高层参数[<em>msg3-scs</em>]提供。</p><p>UE应在相同的服务小区内发送PRACH和Msg3 PUSCH。</p><h2 id="Msg4-PDSCH"><a href="#Msg4-PDSCH" class="headerlink" title="Msg4 PDSCH"></a>Msg4 PDSCH</h2><p><br>Msg4 PDSCH传输的子载波间隔与PDSCH相同提供随机接入响应。</p><h1 id="UE-procedure-for-reporting-control-information"><a href="#UE-procedure-for-reporting-control-information" class="headerlink" title="UE procedure for reporting control information"></a>UE procedure for reporting control information</h1><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/095958597.png" alt="mark"></p><h2 id="UE-procedure-for-HARQ-ACK-codebook-determination"><a href="#UE-procedure-for-HARQ-ACK-codebook-determination" class="headerlink" title="UE procedure for HARQ-ACK codebook determination"></a>UE procedure for HARQ-ACK codebook determination</h2><h3 id="CBG-based-HARQ-ACK-codebook-determination"><a href="#CBG-based-HARQ-ACK-codebook-determination" class="headerlink" title="CBG-based HARQ-ACK codebook determination"></a>CBG-based HARQ-ACK codebook determination</h3><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/100046252.png" alt="mark"></p><blockquote><p>批注：[HARQ-ACK information bits] The actual number of bits to report can be different – e.g. with bundling.</p><p>批注：[initial] For retransmissions, decisions are needed for dynamic/semi-static HARQ-ACK codebook determination and for possible DCI indications.</p><p>批注：[a] No decision currently exists for 2 TBs (e.g. same number for both TBs, separately configured number per TB).</p></blockquote><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/100136656.png" alt="mark"></p><blockquote><p>批注：[the UE determines whether or not a CBG is retransmitted based on a corresponding value of the CBGTI field] Placeholder text – will be modified once the specifics for the operation of the CBGTI field are decided.</p><p>批注：[<em>cc</em>] LTE terminology for indicating semi-static codebook (can be modified once RRC terminology is finalized). Statement in brackets will be removed if only semi-static codebook determination is supported for CBG-based HARQ-ACK.</p></blockquote><h2 id="UE-procedure-for-reporting-HARQ-ACK"><a href="#UE-procedure-for-reporting-HARQ-ACK" class="headerlink" title="UE procedure for reporting HARQ-ACK"></a>UE procedure for reporting HARQ-ACK</h2><h3 id="HARQ-ACK-reporting-in-physical-uplink-shared-channel"><a href="#HARQ-ACK-reporting-in-physical-uplink-shared-channel" class="headerlink" title="HARQ-ACK reporting in physical uplink shared channel"></a>HARQ-ACK reporting in physical uplink shared channel</h3><h3 id="HARQ-ACK-reporting-in-physical-uplink-control-channel"><a href="#HARQ-ACK-reporting-in-physical-uplink-control-channel" class="headerlink" title="HARQ-ACK reporting in physical uplink control channel"></a>HARQ-ACK reporting in physical uplink control channel</h3><p><br>如果UE没有配置为PUSCH和PUCCH同时传输，并且UE不传输PUSCH，且不传输CSI或positive/negative SR，则UE应传输HARQ-ACK</p><ul><li>on PUCCH format 0 if<ul><li>the transmission is over 1 symbol or 2 symbols,</li><li>the number of HARQ-ACK information bits is 1 or 2</li></ul></li><li>on PUCCH format 1 if<ul><li>the transmission is over 4 or more symbols,</li><li>the number of HARQ-ACK information bits is 1 or 2</li></ul></li><li>on PUCCH format 2 if<ul><li>the transmission is over 1 symbol or 2 symbols,</li><li>the number of HARQ-ACK information bits is more than 2</li></ul></li><li>on PUCCH format 3 if<ul><li>the transmission is over 4 or more symbols,</li><li>the number of HARQ-ACK information bits is more than [2]</li></ul></li></ul><p>UE在一个时隙的$ N_{\text{symb}}^{\text{slot},\mu } $个符号上发送一个或多个PUCCH。对于PUCCH传输时隙的参考，如果UE在PDCCH上检测DCI格式，其中PDCCH通过一定数量的符号调度PDSCH的接收，这些符号的最后一个符号在时隙$n$内，则UE应在PUCCH传输中提供相应的HARQ-ACK信息，PUCCH在时隙$ n+k $上传输，其中$k$是时隙数，且通过DCI格式中的[DL-data-DL-acknowledgement]字段来指示。[DL-data-DL-acknowledgement]字段的值映射到时隙数的值，见Table 9.1.2-1中的定义。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/100506146.png" alt="mark"></p><blockquote><p>批注：Dynamic indication of symbols within a slot or joint indication of time/frequency/code PUCCH resources is not precluded pending specific RAN1 agreements.</p></blockquote><h4 id="HARQ-ACK-procedures-for-one-configured-serving-cell"><a href="#HARQ-ACK-procedures-for-one-configured-serving-cell" class="headerlink" title="HARQ-ACK procedures for one configured serving cell"></a>HARQ-ACK procedures for one configured serving cell</h4><h4 id="HARQ-ACK-procedures-for-more-than-one-configured-serving-cell"><a href="#HARQ-ACK-procedures-for-more-than-one-configured-serving-cell" class="headerlink" title="HARQ-ACK procedures for more than one configured serving cell"></a>HARQ-ACK procedures for more than one configured serving cell</h4><h2 id="UE-procedure-for-reporting-SR"><a href="#UE-procedure-for-reporting-SR" class="headerlink" title="UE procedure for reporting SR"></a>UE procedure for reporting SR</h2><blockquote><p>批注：There are currently no RAN1 decisions on SR transmission structure and possible multiplexing with HARQ-ACK/CSI</p></blockquote><h2 id="UE-procedure-for-reporting-multiple-UCI-types"><a href="#UE-procedure-for-reporting-multiple-UCI-types" class="headerlink" title="UE procedure for reporting multiple UCI types"></a>UE procedure for reporting multiple UCI types</h2><h2 id="UCI-repetition-procedure"><a href="#UCI-repetition-procedure" class="headerlink" title="UCI repetition procedure"></a>UCI repetition procedure</h2><h1 id="UE-procedure-for-receiving-control-information"><a href="#UE-procedure-for-receiving-control-information" class="headerlink" title="UE procedure for receiving control information"></a>UE procedure for receiving control information</h1><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/100635180.png" alt="mark"></p><p>UE应在一个或多个激活的服务小区或BWPs上，根据相应的搜索空间，在一个或多个CORESET内监听一组PDCCH候选集，其中搜索空间是根据所监听的DCI格式译码每个PDCCH候选。</p><blockquote><p>批注：[PDCCH候选集] Can add more details later, such as per activated cell, etc., based on respective agreements.</p><p>批注：[DCI formats] Can remain applicable for potentially mapping multiple DCI formats to a same size (as for LTE DCI format 0 and DCI format 1A).</p></blockquote><h2 id="UE-procedure-for-determining-physical-downlink-control-channel-assignment-in-common-search-space"><a href="#UE-procedure-for-determining-physical-downlink-control-channel-assignment-in-common-search-space" class="headerlink" title="UE procedure for determining physical downlink control channel assignment in common search space"></a>UE procedure for determining physical downlink control channel assignment in common search space</h2><p><br>UE应在下列一个或多个搜索空间内监听PDCCH候选：</p><ul><li>a Type0-PDCCH common search space for a DCI format scrambled by a [SI-RNTI] on a primary cell</li><li>a Type1-PDCCH common search space for a DCI format scrambled by a [RA-RNTI] on a primary cell</li><li>a Type2-PDCCH common search space for a DCI format scrambled by a [INT-RNTI]</li></ul><p>[UE应在没有载波指示域的情况下监听PDCCH候选。]</p><p>如果UE通过高层配置为以[INT-RNTI]加扰的CRC译码DCI格式，UE也在[每个服务小区]配置[一组]PRBs和一组OFDM符号。如果UE以[INT-RNTI]加扰的CRC检测DCI格式，UE可以假设不在这组PRBs和OFDM符号中发送。UE通过高层参数[<em>int-PRBs-unit</em>]配置PRBs的指示粒度。UE通过高层参数[<em>int-symbols-unit</em>]配置OFDM符号的指示粒度。UE通过高层参数[<em>Num-PDCCH-cand</em>]来配置对于DCI格式的每个CCE聚合等级下的若干PDCCH候选，其中DCI格式使用[INT-RNTI]加扰的CRC。</p><blockquote><p>批注：[[INT-RNTI]加扰的CRC] Eventually, this DCI format will have a name and will be used to remove this part.</p></blockquote><h2 id="UE-procedure-for-determining-physical-downlink-control-channel-assignment-in-UE-specific-search-space"><a href="#UE-procedure-for-determining-physical-downlink-control-channel-assignment-in-UE-specific-search-space" class="headerlink" title="UE procedure for determining physical downlink control channel assignment in UE-specific search space"></a>UE procedure for determining physical downlink control channel assignment in UE-specific search space</h2><p><br>对于每个服务小区，高层信令给UE配置$ Q $个CORESETs。对于CORESET $q$，$ 0\le q&lt;Q $，配置包括：</p><ul><li>高层参数[<em>CORESET-start-symb</em>]提供第1个OFDM符号</li><li>高层参数[<em>CORESET-time-duration</em>]提供若干连续的OFDM符号</li><li>高层参数[<em>CORESET-freq-dom</em>]提供一组RBs集合</li><li>高层参数[<em>CORESET-trans-type</em>]提供CCE-to-REG映射</li><li>对于交织的CCE-to-REG映射，高层参数[<em>CORESET-REG-bundle-size</em>]提供REG bundle大小</li><li>[高层参数[<em>CORESET-QCL-ConfigId</em>]提供天线端口quasi-collocation]</li></ul><p>对于非交织的CCE-to-REG映射，REG bundle大小等于6。UE可以假设一个REG bundle内的所有REGs上传输的PDCCH应用相同的预编码。</p><blockquote><p>批注：[对于非交织的CCE-to-REG映射，REG bundle大小等于6。] Can be updated if additional REG bundle sizes are defined for non-interleaved transmissions.</p></blockquote><p>每个CORESET包含一组从0到$ { {N}_{\text{CCE},q}}-1 $编号的CCEs，其中$ { {N}_{\text{CCE},q}} $是CORESET $q$中的CCEs个数。</p><p>UE所监听的PDCCH候选集定义在PDCCH UE特定搜索空间。PDCCH UE特定搜索空间在聚合等级$ L\in \left\{ 1, 2, 4, 8 \right\} $上定义为，对于CCE聚合等级$L$的一组PDCCH候选。对于一个DCI格式，UE在每个服务小区内通过高层参数[<em>Num-PDCCH-cand</em>]配置每个CCE聚合等级 下的一组PDCCH候选。</p><blockquote><p>批注：[UE特定搜索空间] Cross-carrier scheduling, including use of different numerologies, will be captured through the search space.</p></blockquote><p>对于连续接收（non-DRX）模式操作，UE在根据$ { {W}_{\text{PDCCH,} q}} $个符号周期，监听CORESET $q$中的PDCCH候选，其中对于CORESET $q$的$ { {W}_{\text{PDCCH,} q}} $由高层参数[<em>CORESET-monitor-period</em>]配置。</p><blockquote><p>批注：[CORESET-monitor-period] Need to determine how, based on configured periodicity, UE monitors PDCCH and whether it is a CORESET or a search space parameter. Allowed periodicity values (symbol, slot, etc.) are TBD (start from 1 symbol) and are to be included in RAN2 specifications (likely not visible in 38.213).</p></blockquote><p>服务小区中的UE，在UE特定的搜索空间监听PDCCH的候选，如果UE没有配置载波指示域，UE应在没有载波指示域的条件下监听PDCCH候选。服务小区中的UE，在UE 特定的搜索空间监听PDCCH的候选，如果UE配置了载波指示域，则UE应使用载波指示域监听PDCCH候选。</p><p>如果UE在另一个服务小区上被配置使用对应于secondary cell的载波指示来监听PDCCH候选，UE不希望在secondary cell上监听PDCCH候选。[对于服务小区中的UE监听PDCCH候选，UE应至少在同一个服务小区内监听PDCCH候选。]</p><h1 id="Bandwidth-part-operation"><a href="#Bandwidth-part-operation" class="headerlink" title="Bandwidth part operation"></a>Bandwidth part operation</h1><blockquote><p>批注：It will be attempted, as much as possible, to capture all BWP operation aspects in this Subclause while referring to other Subclauses. Potential overlaps will be resolved as the specifications progress.</p><p>批注：Text is subject to revisions as descriptions in 38.211 and 38.213 are aligned.</p></blockquote><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/101231694.png" alt="mark"></p><blockquote><p>批注：[BWP] Regarding the CSS, he agreement for its configuration is ambiguous. Which CSS configuration is it (e.g. is it for SIB scheduling, for GC-PDCCH, … )? Maybe multiple CSS configurations are applicable as in Subclause 10.1? Reference to primary cell in the agreement points to SIB scheduling but clarification is needed for what the CSS intends to do, whether the respective BWP is same as the BWP from initial access, ….</p></blockquote><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/101316284.png" alt="mark"></p><blockquote><p>批注：[transmissions] Activation/deactivation by DCI requires further details (e.g. it is FFS whether it is a DCI scheduling PDSCH/PUSCH in a configured BWP ot a separate DCI). Deactivation by a timer also requires further details (e.g. no separate specifications if it is the DRX timer). A separate timer may be described in RRC specifications as for the DRX timer.</p></blockquote><h1 id="Configurations-and-assumptions-independent-of-physical-channels-or-signals"><a href="#Configurations-and-assumptions-independent-of-physical-channels-or-signals" class="headerlink" title="Configurations and assumptions independent of physical channels or signals"></a>Configurations and assumptions independent of physical channels or signals</h1><blockquote><p>批注：[signals] To capture reserved resources, potential LTE-NR coexistence aspects, etc. For LTE-NR DC with single UL Tx, corresponding agreement regarding configuration of DL-reference UL/DL configuration affects only LTE operation, is suitable for LTE specifications, and is not captured (unless it is extended to NR-NR DC).</p></blockquote><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;同步过程&quot;&gt;&lt;a href=&quot;#同步过程&quot; class=&quot;headerlink&quot; title=&quot;同步过程&quot;&gt;&lt;/a&gt;同步过程&lt;/h1&gt;&lt;h2 id=&quot;小区搜索&quot;&gt;&lt;a href=&quot;#小区搜索&quot; class=&quot;headerlink&quot; title=&quot;小区搜索&quot;&gt;&lt;/a&gt;小区搜索&lt;/h2&gt;&lt;p&gt;&lt;br&gt;小区搜索过程是UE获得和小区时间和频率同步，并检测物理层小区ID的过程。&lt;/p&gt;&lt;p&gt;为进行小区搜索，UE需接收下列同步信号：主同步信号（PSS）和辅同步信号（SSS）。主辅同步信号在TS 38.211中定义。&lt;/p&gt;&lt;p&gt;UE应假设PBCH、PSS和SSS在连续的OFDM符号内接收，并且形成SS/PBCH块。&lt;/p&gt;&lt;p&gt;对于半帧中的SS/PBCH块，候选SS/PBCH块的OFDM 符号索引号和第1个OFDM符号索引根据下列情况确定：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;15 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{2, 8} + 14*n。对于载波频率小于等于3 GHz，有n=0, 1。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1, 2, 3。&lt;/li&gt;&lt;li&gt;30 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{4, 8, 16, 20} + 28*n。对于载波频率小于等于3 GHz，有n=0。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1。&lt;/li&gt;&lt;li&gt;30 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{2, 8} + 14*n。对于载波频率小于等于3 GHz，有n=0, 1。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1, 2, 3。&lt;/li&gt;&lt;li&gt;120 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{4, 8, 16, 20} + 28*n。对于载波频率大于6 GHz，有n=0, 1, 2, 3, 5, 6, 7, 8, 10, 11, 12, 13, 15, 16, 17, 18。&lt;/li&gt;&lt;li&gt;240 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{8, 12, 16, 20, 32, 36, 40, 44} + 56*n。对于载波频率大于6 GHz，有n=0, 1, 2, 3, 5, 6, 7, 8。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;一个半帧中的候选SS/PBCH块在时域上以升序从0到$ L-1 ]$进行编号。对于$ L=4 $或$ L&amp;gt;4 $，UE应根据与每个半帧内SS/PBCH块索引一一对应的PBCH中传输的DM-RS序列索引，分别确定SS/PBCH块索引的2或3个LSB比特。对于$ L=64 $，UE应根据高层参数[&lt;em&gt;SSB-index-explicit&lt;/em&gt;]确定每个半帧内SS/PBCH块索引的3 个MSB比特。&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>NR复用与信道编码</title>
    <link href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/"/>
    <id>http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/</id>
    <published>2017-09-10T14:23:31.000Z</published>
    <updated>2017-09-12T02:48:06.878Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><blockquote><p>Marshall注：本博文重点关注了与polar code相关的比特级处理。</p></blockquote><h1 id="物理信道映射"><a href="#物理信道映射" class="headerlink" title="物理信道映射"></a>物理信道映射</h1><h2 id="上行"><a href="#上行" class="headerlink" title="上行"></a>上行</h2><h2 id="下行"><a href="#下行" class="headerlink" title="下行"></a>下行</h2><h1 id="通用流程"><a href="#通用流程" class="headerlink" title="通用流程"></a>通用流程</h1><p><br>来自MAC层/向MAC层输出的数据和控制流经过编/解码，通过无线传输链路提供传输和控制服务。信道编码方案是错误检测、错误纠正、速率匹配、交织以及传输信道或控制信息向物理信道映射/从物理信道到传输信道控制信息解析或分离的组合方案。</p><h2 id="CRC计算"><a href="#CRC计算" class="headerlink" title="CRC计算"></a>CRC计算</h2><p><br>CRC计算单元的输入比特为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，奇偶校验比特为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $。$ A $是输入序列的长度，$ L $是校验比特数目。校验比特由下列循环生成多项式之一产生：</p><ul><li>$ { {g}_{\text{CRC24A}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{18}}+{ {D}^{17}}+{ {D}^{14}}+{ {D}^{11}}+{ {D}^{10}}+{ {D}^{7}}+{ {D}^{6}}+{ {D}^{5}}+{ {D}^{4}}+{ {D}^{3}}+D+1] $，CRC长度$ L=24 $；</li><li>$ { {g}_{\text{CRC24B}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{6}}+{ {D}^{5}}+D+1] $，CRC长度$ L=24 $；</li><li>$ { {g}_{\text{CRC24C}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{21}}+{ {D}^{20}}+{ {D}^{17}}+{ {D}^{15}}+{ {D}^{13}}+{ {D}^{12}}+{ {D}^{8}}+{ {D}^{4}}+{ {D}^{2}}+D+1] $，CRC长度$ L=24 $；</li><li>$ { {g}_{\text{CRC16}}}\left( D \right)=[{ {D}^{16}}+{ {D}^{12}}+{ {D}^{5}}+D+1] $，CRC长度$ L=16 $</li></ul><a id="more"></a><p>编码以系统方式进行，这意味着在二元域GF（2）中，多项式：</p><script type="math/tex;mode=display">{ {a}_{0}}{ {D}^{A+L-1}}+{ {a}_{1}}{ {D}^{A+L-2}}+...+{ {a}_{A-1}}{ {D}^{L}}+{ {p}_{0}}{ {D}^{L-1}}+{ {p}_{1}}{ {D}^{L-2}}+...+{ {p}_{L-2}}{ {D}^{1}}+{ {p}_{L-1}}</script><p>除以相应的CRC生成多项式时，余数等于0。</p><p>添加CRC之后的比特序列表示为$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $。$ { {a}_{k}} $和$ { {b}_{k}} $的关系如下：</p><p>$ { {b}_{k}}={ {a}_{k}} $，对于$ k=0,1,2,…,A-1 $</p><p>$ { {b}_{k}}={ {p}_{k-A}} $，对于$ k=A,A+1,A+2,…,A+L-1 $</p><h2 id="码块分段和CRC添加"><a href="#码块分段和CRC添加" class="headerlink" title="码块分段和CRC添加"></a>码块分段和CRC添加</h2><h3 id="LDPC码"><a href="#LDPC码" class="headerlink" title="LDPC码"></a>LDPC码</h3><p><br>码块分段单元的输入序列为$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B&gt;0 $]。如果$ B $大于最大码块大小$ { {K}_{\text{cb}}} $，则输入序列要进行分段操作，并且每个分段后的码块要添加一个$ L=24 $的CRC序列。最大码块大小为：</p><ul><li>$ { {K}_{\text{cb}}}=8448 $。</li></ul><p>码块总数C根据以下方法计算得到：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/224129593.png" alt="mark"></p><p>当$ C\ne 0 $时，码块分段的输出比特为$ { {c}_{r0}},{ {c}_{r1}},{ {c}_{r2}},{ {c}_{r3}},…,{ {c}_{r\left( { {K}_{r}}-1 \right)}} $，其中$ 0\le r&lt;C $为码块号，$ { {K}_{r}} $是码块$r$中的比特数。</p><p>每个码块中的比特数为（仅适用于$ C\ne 0 $的情况）：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/224305482.png" alt="mark"></p><blockquote><p>注：蓝色高亮部分是华为批注：K+ and K_ are kept for now. May update after TBS is finalized.</p></blockquote><p>在Table 5.3.2-1中所有列举的集合中找到Z的最小值，表示为$ { {Z}_{c}} $。$ { {K}_{b}}\cdot { {Z}_{c}}\ge { {K}_{+}} $且对于LDPC BG#1有$ K=22{ {Z}_{c}} $，对于LDPC BG#2有$ K=10{ {Z}_{c}} $。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/224439978.png" alt="mark"></p><h2 id="信道编码"><a href="#信道编码" class="headerlink" title="信道编码"></a>信道编码</h2><h3 id="Polar-coding"><a href="#Polar-coding" class="headerlink" title="Polar coding"></a>Polar coding</h3><p><br>对于给定的码块，信道编码器的输入序列为$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $，其中$ K $是编码器的输入比特数。编码后的比特序列表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $，其中$ N={ {2}^{n}} $并且$n$的值由下列方法决定：</p><p>$ E $表示速率匹配输出序列长度，由2.4.1节给出；</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/224919697.png" alt="mark"></p><p>比特序列$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $采用下列方法被交织成比特序列$ c_{0}^{‘},c_{1}^{‘},c_{2}^{‘},c_{3}^{‘},…,c_{K-1}^{‘} $:</p><p>$ { { {c}’}_{k}}={ {c}_{\Pi \left( k \right)}} $，$ k=0,1,…,K-1 $</p><p>其中交织pattern $ \Pi \left( k \right) $由下列方法确定：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/225102168.png" alt="mark"></p><p>其中$ \Pi _{IL}^{\max }\left( m \right) $由Table 5.3.1-1和$ K_{IL}^{\max } $给定。</p><blockquote><p>华为批注：The value of $ K_{IL}^{\max } $ equals to Kmax = max(140, max DCI payload size in Rel-15 + 20) + 24. The value of $ K_{IL}^{\max } $ should be the number of elements in Table 5.3.1-1, in the end. According to the current Tabel 5.3.1-1, $ K_{IL}^{\max }=224 $.</p></blockquote><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/225628499.png" alt="mark"></p><blockquote><p>华为批注：Contents of this table will be updated. Current working assumption is the pattern for nFAR=21 in R1-1712167.</p></blockquote><p>Polar序列$ \mathbf{Q}_{0}^{ { {N}_{\max }}-1}=\left\{ Q_{0}^{ { {N}_{\max }}},Q_{1}^{ { {N}_{\max }}},…,Q_{ { {N}_{\max }}-1}^{ { {N}_{\max }}} \right\} $由Table5.3.1-2给定，其中$ 0\le Q_{i}^{ { {N}_{\max }}}\le { {N}_{\max }}-1 $表示Polar编码前的一个比特索引，其中$ i=0,1,…,N-1 $，$ { {N}_{\max }}=1024 $。Polar序列$ \mathbf{Q}_{0}^{ { {N}_{\max }}-1} $按可靠性升序排列$ W\left( Q_{0}^{ { {N}_{\max }}} \right)&lt;W\left( Q_{1}^{ { {N}_{\max }}} \right)&lt;…&lt;W\left( Q_{ { {N}_{\max }}-1}^{ { {N}_{\max }}} \right) $，其中$ W\left( Q_{i}^{ { {N}_{\max }}} \right) $表示比特索引$ Q_{i}^{ { {N}_{\max }}} $的可靠性。</p><p>对任意码块编码为$ N $比特，都使用相同的Polar序列$ \mathbf{Q}_{0}^{N-1}=\left\{ Q_{0}^{N},Q_{1}^{N},Q_{2}^{N},…,Q_{N-1}^{N} \right\} $。Polar序列$ \mathbf{Q}_{0}^{N-1} $是Polar序列$ \mathbf{Q}_{0}^{ { {N}_{\max }}-1} $的子集，即值小于$ N $的所有$ Q_{i}^{ { {N}_{\max }}} $元素，并且按可靠性升序排列$ W\left( Q_{0}^{N} \right)&lt;W\left( Q_{1}^{N} \right)&lt;W\left( Q_{2}^{N} \right)&lt;…&lt;W\left( Q_{N-1}^{N} \right) $。</p><p>$ \mathbf{\bar{Q}}_{I}^{N} $是Polar序列$ \mathbf{Q}_{0}^{N-1} $中的一组比特索引，$ \mathbf{\bar{Q}}_{F}^{N} $是Polar序列$ \mathbf{Q}_{0}^{N-1} $中其他比特的索引，其中$ \mathbf{\bar{Q}}_{I}^{N} $和$ \mathbf{\bar{Q}}_{F}^{N} $由2.4.1.1节给定，$ \left| \mathbf{\bar{Q}}_{I}^{N} \right|=K+{ {n}_{PC}} $，$ \left| \mathbf{\bar{Q}}_{F}^{N} \right|=N-\left| \mathbf{\bar{Q}}_{I}^{N} \right| $，$ { {n}_{PC}} $是奇偶校验比特数。</p><p>$ { {\mathbf{G}}_{N}}={ {\left( { {\mathbf{G}}_{2}} \right)}^{\otimes n}} $表示矩阵$ { {\mathbf{G}}_{2}} $的$n$次克罗内克积，其中$ { {\mathbf{G}}_{2}}=\left[ \begin{matrix}<br>1 &amp; 0 \\<br>1 &amp; 1 \\<br>\end{matrix} \right] $。</p><p>$ { {\mathbf{g}}_{j}} $表示矩阵$ { {\mathbf{G}}_{N}} $的第$ j $行，比特索引$ j=0,1,…,N-1 $。$ w\left( { {\mathbf{g}}_{j}} \right) $表示$ { {\mathbf{g}}_{j}} $的行重，即$ { {\mathbf{g}}_{j}} $中1的个数。奇偶校验比特的索引集合表示为$ \mathbf{Q}_{PC}^{N} $，其中$ \left| \mathbf{Q}_{PC}^{N} \right|={ {n}_{PC}} $。$ \left( { {n}_{PC}}-n_{PC}^{wm} \right) $个奇偶校验比特位于$ \mathbf{\bar{Q}}_{I}^{N} $中的$ \left( { {n}_{PC}}-n_{PC}^{wm} \right) $个最不可靠的比特索引。其他$ n_{PC}^{wm} $个奇偶校验比特位于$ \mathbf{\tilde{Q}}_{I}^{N} $中行重最小的比特索引，其中$ \mathbf{\tilde{Q}}_{I}^{N} $表示$ \mathbf{\bar{Q}}_{I}^{N} $中$ \left( \left| \mathbf{\bar{Q}}_{I}^{N} \right|-{ {n}_{PC}} \right) $个最可靠的比特索引；如果$ \mathbf{\tilde{Q}}_{I}^{N} $中具有相同最小行重的比特索引大于$ n_{PC}^{wm} $，则其他$ n_{PC}^{wm} $个奇偶校验比特位于$ \mathbf{\tilde{Q}}_{I}^{N} $中可靠性最高且行重最小的$ n_{PC}^{wm} $个比特索引。</p><p>根据下列方法生成序列$ \mathbf{u}=\left[ { {u}_{0}}\text{ }{ {u}_{1}}\text{ }{ {u}_{2}}\text{ }…\text{ }{ {u}_{N-1}} \right] $：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230721744.png" alt="mark"></p><blockquote><p>注：粉色部分为华为批注：Need further agreements on how to set the values for frozen bits.</p></blockquote><p>通过$ \mathbf{d}=\mathbf{u}{ {\mathbf{G}}_{n}} $编码器得到输出序列，表示为$ \mathbf{d}=\left[ { {d}_{0}}\text{ }{ {d}_{1}}\text{ }{ {d}_{2}}\text{ }…\text{ }{ {d}_{N-1}} \right] $。编码在二元域GF（2）进行。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230838961.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230901215.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230923898.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230947989.png" alt="mark"></p><h3 id="LDPC码-1"><a href="#LDPC码-1" class="headerlink" title="LDPC码"></a>LDPC码</h3><h2 id="速率匹配"><a href="#速率匹配" class="headerlink" title="速率匹配"></a>速率匹配</h2><p><br>Polar code速率匹配包括子块交织、比特收集和比特交织。速率匹配的输入序列为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $，输出序列表示为$ { {f}_{0}},{ {f}_{1}},{ {f}_{2}},…,{ {f}_{E-1}} $。</p><h3 id="polar-code速率匹配"><a href="#polar-code速率匹配" class="headerlink" title="polar code速率匹配"></a>polar code速率匹配</h3><h4 id="子块交织"><a href="#子块交织" class="headerlink" title="子块交织"></a>子块交织</h4><p><br>编码比特$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $就是子块交织器的输入比特。编码比特$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $被分为32个子块。子块交织器的输出比特为$ { {y}_{0}},{ {y}_{1}},{ {y}_{2}},…,{ {y}_{N-1}} $，用以下方式生成：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/083917955.png" alt="mark"></p><p>其中子块交织pattern $ P\left( i \right) $由Table 5.4.1.1-1给定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084010857.png" alt="mark"></p><p>比特索引集合$ \mathbf{\bar{Q}}_{I}^{N} $和$ \mathbf{\bar{Q}}_{F}^{N} $由下列方法确定，其中$ K $，$ { {n}_{PC}} $和$ \mathbf{Q}_{0}^{N-1} $由2.3.1节定义：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084158930.png" alt="mark"></p><h4 id="比特选择"><a href="#比特选择" class="headerlink" title="比特选择"></a>比特选择</h4><p><br>$E$表示速率匹配输出序列的长度，速率匹配输出序列为$ { {e}_{k}} $，$ k=0,1,2,…,E-1 $由以下方法产生：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084308555.png" alt="mark"></p><h4 id="比特交织"><a href="#比特交织" class="headerlink" title="比特交织"></a>比特交织</h4><p><br>比特序列$ { {e}_{0}},{ {e}_{1}},{ {e}_{2}},…,{ {e}_{E-1}} $通过以下方法被交织为比特序列$ { {f}_{0}},{ {f}_{1}},{ {f}_{2}},…,{ {f}_{E-1}} $：</p><p>$ T $表示满足$ T\left( T+1 \right)/2\ge E $的最小整数；</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084452223.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084546055.png" alt="mark"></p><h3 id="LDPC-code速率匹配"><a href="#LDPC-code速率匹配" class="headerlink" title="LDPC code速率匹配"></a>LDPC code速率匹配</h3><h2 id="码块级联"><a href="#码块级联" class="headerlink" title="码块级联"></a>码块级联</h2><h1 id="上行传输信道和控制信息"><a href="#上行传输信道和控制信息" class="headerlink" title="上行传输信道和控制信息"></a>上行传输信道和控制信息</h1><h2 id="随机接入信道"><a href="#随机接入信道" class="headerlink" title="随机接入信道"></a>随机接入信道</h2><h2 id="上行共享信道"><a href="#上行共享信道" class="headerlink" title="上行共享信道"></a>上行共享信道</h2><h3 id="传输块CRC添加"><a href="#传输块CRC添加" class="headerlink" title="传输块CRC添加"></a>传输块CRC添加</h3><p><br>每个上行共享信道（UL-SCH）传输块都通过一个CRC来提供错误检测。</p><p>使用整个传输块来计算CRC校验比特。送到L1的一个传输块的比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$A$是传输块大小，$L$是校验比特数。按照TS 38.321规范中的定义，最低顺序信息比特$ { {a}_{0}} $被映射到最高有效位。</p><p>校验比特按照2.1节的描述进行计算并添加到UL-SCH传输块中，若$ A&gt;3824 $则设置$L$为24比特，使用生成多项式$ { {g}_{\text{CRC24A}}}\left( D \right) $；否则设置$ L $为16比特，使用生成多项式$ { {g}_{\text{CRC16}}}\left( D \right) $。</p><h3 id="码块分段及CRC添加"><a href="#码块分段及CRC添加" class="headerlink" title="码块分段及CRC添加"></a>码块分段及CRC添加</h3><p><br>码块分段的输入比特流记为$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$B$表示传输块的比特数目（包含CRC）。</p><p>码块分段及CRC添加根据2.2.1节中描述进行。</p><p>码块分段之后的比特流记为$ { {c}_{r0}},{ {c}_{r1}},{ {c}_{r2}},{ {c}_{r3}},…,{ {c}_{r\left( { {K}_{r}}-1 \right)}} $，其中$ r $是码块号，$ { {K}_{r}} $是码块$ r $的比特数。</p><h3 id="UL-SCH的信道编码"><a href="#UL-SCH的信道编码" class="headerlink" title="UL-SCH的信道编码"></a>UL-SCH的信道编码</h3><p><br>码块比特流送至信道编码模块。码块中的比特表示为$ { {c}_{r0}},{ {c}_{r1}},{ {c}_{r2}},{ {c}_{r3}},…,{ {c}_{r\left( { {K}_{r}}-1 \right)}} $，其中$r$是码块号，$ { {K}_{r}} $是码块$ r $的比特数。码块的总数表示为$ C $，每个码块根据2.3.2节的描述独立地进行LDPC编码。</p><p>编码之后的比特流表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $，其中对于LDPC BG#1，有$ N=66{ {Z}_{c}} $；对于LDPC BG#2，有$ N=50{ {Z}_{c}} $。$ { {Z}_{c}} $的值由2.2.1节给定。</p><h3 id="速率匹配-1"><a href="#速率匹配-1" class="headerlink" title="速率匹配"></a>速率匹配</h3><h3 id="码块级联-1"><a href="#码块级联-1" class="headerlink" title="码块级联"></a>码块级联</h3><h3 id="数据和控制复用"><a href="#数据和控制复用" class="headerlink" title="数据和控制复用"></a>数据和控制复用</h3><h3 id="信道交织"><a href="#信道交织" class="headerlink" title="信道交织"></a>信道交织</h3><h2 id="上行控制信息"><a href="#上行控制信息" class="headerlink" title="上行控制信息"></a>上行控制信息</h2><h3 id="PUCCH上的控制信息"><a href="#PUCCH上的控制信息" class="headerlink" title="PUCCH上的控制信息"></a>PUCCH上的控制信息</h3><h4 id="UCI比特序列生成"><a href="#UCI比特序列生成" class="headerlink" title="UCI比特序列生成"></a>UCI比特序列生成</h4><blockquote><p>[Editor notes: This section will capture how to generate the UCI bit stream $ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $.]</p></blockquote><h4 id="CRC添加"><a href="#CRC添加" class="headerlink" title="CRC添加"></a>CRC添加</h4><p><br>如果UCI负载大小$ A\ge { {A}_{0}} $，整个负载都用于计算CRC校验比特。负载比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特表示为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$A$是UCI负载大小，$L$是校验比特数。</p><blockquote><p>华为注：$ { {A}_{0}} $的值有待进一步确定。</p></blockquote><p>校验比特按照2.1节的描述进行计算并添加，并设置$ L $为X比特，得到添加CRC后的比特序列$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B=A+L $。</p><blockquote><p>对于X的值，华为注：Depending on further agreements, different CRC lengths may be applied for different payload sizes.</p><p>[Editor notes: need to define the relationship between $ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $ and $ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $.]</p></blockquote><h4 id="UCI的信道编码"><a href="#UCI的信道编码" class="headerlink" title="UCI的信道编码"></a>UCI的信道编码</h4><p><br>信息比特流送至信道编码模块。信息比特流表示为$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $，其中$ K $是比特数。</p><p>如果$ 12\le K\le 22 $，则信息比特根据2.3.1节通过Polar进行编码，若$ E-K&gt;192 $，则设置$ { {n}_{\max }}=10 $，$ { {I}_{IL}}=0 $，$ { {n}_{PC}}=3 $，$ n_{PC}^{wm}=1 $；<br>若$ E-K\le 192 $，则设置$ n_{PC}^{wm}=0 $，其中$E$是由3.3.1.4节给定的速率匹配输出序列长度。</p><blockquote><p>关于$ 12\le K\le 22 $，华为批注：Need to capture the agreements for K &lt; 12 in the future.</p></blockquote><p>如果$ K&gt;22 $，则信息比特根据2.3.1节通过Polar进行编码，设置$ { {n}_{\max }}=10 $，$ { {I}_{IL}}=0 $，$ { {n}_{PC}}=0 $，$ n_{PC}^{wm}=0 $。</p><p>编码之后的比特流表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},{ {d}_{3}},…,{ {d}_{N-1}} $，其中$N$是编码比特数。</p><h4 id="速率匹配-2"><a href="#速率匹配-2" class="headerlink" title="速率匹配"></a>速率匹配</h4><h3 id="PUSCH上的控制信息"><a href="#PUSCH上的控制信息" class="headerlink" title="PUSCH上的控制信息"></a>PUSCH上的控制信息</h3><h4 id="UCI比特序列生成-1"><a href="#UCI比特序列生成-1" class="headerlink" title="UCI比特序列生成"></a>UCI比特序列生成</h4><blockquote><p>[Editor notes: This section will capture how to generate the UCI bit stream $ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $.]</p></blockquote><h4 id="CRC添加-1"><a href="#CRC添加-1" class="headerlink" title="CRC添加"></a>CRC添加</h4><p><br>如果UCI负载大小$ A\ge { {A}_{0}} $，整个负载都用于计算CRC校验比特。负载比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特表示为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$A$是UCI负载大小，$L$是校验比特数。</p><blockquote><p>华为注：$ { {A}_{0}} $的值有待进一步确定。</p></blockquote><p>校验比特按照2.1节的描述进行计算并添加，并设置$L$为X比特，得到添加CRC后的比特序列$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B=A+L $。</p><blockquote><p>对于X的值，华为注：Depending on further agreements, different CRC lengths may be applied for different payload sizes.</p><p>[Editor notes: need to define the relationship between $ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $ and $ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $.]</p></blockquote><h4 id="UCI的信道编码-1"><a href="#UCI的信道编码-1" class="headerlink" title="UCI的信道编码"></a>UCI的信道编码</h4><p><br>信息比特流送至信道编码模块。信息比特流表示为$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $，其中$ K $是比特数。</p><p>如果$ 12\le K\le 22 $，则信息比特根据2.3.1节通过Polar进行编码，若$ E-K&gt;192 $，则设置$ { {n}_{\max }}=10 $，$ { {I}_{IL}}=0 $，$ { {n}_{PC}}=3 $，$ n_{PC}^{wm}=1 $；若$ E-K\le 192 $，则设置$ n_{PC}^{wm}=0 $，其中$E$是由3.3.2.4节给定的速率匹配输出序列长度。</p><blockquote><p>关于$ 12\le K\le 22 $，华为批注：Need to capture the agreements for K &lt; 12 in the future.</p></blockquote><p>如果$ K&gt;22 $，则信息比特根据2.3.1节通过Polar进行编码，设置$ { {n}_{\max }}=10 $，$ { {I}_{IL}}=0 $，$ { {n}_{PC}}=0 $，$ n_{PC}^{wm}=0 $。</p><p>编码之后的比特流表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},{ {d}_{3}},…,{ {d}_{N-1}} $，其中$N$是编码比特数。</p><h4 id="速率匹配-3"><a href="#速率匹配-3" class="headerlink" title="速率匹配"></a>速率匹配</h4><h1 id="下行传输和控制信息"><a href="#下行传输和控制信息" class="headerlink" title="下行传输和控制信息"></a>下行传输和控制信息</h1><h2 id="广播信息"><a href="#广播信息" class="headerlink" title="广播信息"></a>广播信息</h2><p><br>Figure 7.1-1给出了BCH传输信道的处理结构。到达编码单元的数据，每80ms最多有一个传输块，其编码流程如下：</p><ul><li>向传输块添加CRC</li><li>信道编码</li><li>速率匹配</li></ul><blockquote><p>华为批注：Will add the figure later.</p></blockquote><h3 id="传输块CRC添加-1"><a href="#传输块CRC添加-1" class="headerlink" title="传输块CRC添加"></a>传输块CRC添加</h3><p><br>BCH传输块都通过CRC来进行错误检测。</p><p>使用整个传输块来计算CRC校验比特。（<em>华为批注：This sentence may be updated depending on further agreements, e.g. if some PBCH payload bits are not used to generate CRC bits.</em>）送到L1的一个传输块的比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$A$是传输块大小，$L$是校验比特数。按照TS 38.321规范中的定义，最低顺序信息比特$ { {a}_{0}} $被映射到最高有效位。</p><p>校验比特按照2.1节的描述进行计算并添加到BCH传输块中，设置$ L $为24比特，使用生成多项式$ { {g}_{\text{CRC24C}}}\left( D \right) $，得到添加CRC后的序列为$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B=A+L $。</p><blockquote><p>[Editor notes: need to define the relationship between and , pending on further agreements.]</p></blockquote><h3 id="信道编码-1"><a href="#信道编码-1" class="headerlink" title="信道编码"></a>信道编码</h3><p><br>信息比特送至信道编码模块。信息比特表示为$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $，其中$K$为比特数。它们根据2.3.1节进行Polar编码，设置$ { {n}_{\max }}=9 $，$ { {I}_{IL}}=1 $，$ { {n}_{PC}}=0 $，$ n_{PC}^{wm}=0 $。</p><p>编码之后的比特序列表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},{ {d}_{3}},…,{ {d}_{N-1}} $，其中$N$为编码比特数。</p><h3 id="速率匹配-4"><a href="#速率匹配-4" class="headerlink" title="速率匹配"></a>速率匹配</h3><h2 id="下行共享信道和寻呼信道"><a href="#下行共享信道和寻呼信道" class="headerlink" title="下行共享信道和寻呼信道"></a>下行共享信道和寻呼信道</h2><h3 id="传输块CRC添加-2"><a href="#传输块CRC添加-2" class="headerlink" title="传输块CRC添加"></a>传输块CRC添加</h3><p><br>每个传输块都通过CRC来进行错误检测。</p><p>使用整个传输块来计算CRC校验比特。送到L1的一个传输块的比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$A$是传输块大小，$L$是校验比特数。按照TS 38.321规范中的定义，最低顺序信息比特$ { {a}_{0}} $被映射到最高有效位。</p><p>校验比特按照2.1节的描述进行计算并添加到UL-SCH传输块中，若$ A&gt;3824 $，则设置$ L $为24比特，使用生成多项式$ { {g}_{\text{CRC24A}}}\left( D \right) $；否则设置$ L $为16比特，使用生成多项式$ { {g}_{\text{CRC16}}}\left( D \right) $。</p><h3 id="码块分段及CRC添加-1"><a href="#码块分段及CRC添加-1" class="headerlink" title="码块分段及CRC添加"></a>码块分段及CRC添加</h3><p><br>码块分段的输入比特流记为$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B $表示传输块的比特数目（包含CRC）。</p><p>码块分段及CRC添加根据2.2.1节中描述进行。</p><p>码块分段之后的比特流记为$ { {c}_{r0}},{ {c}_{r1}},{ {c}_{r2}},{ {c}_{r3}},…,{ {c}_{r\left( { {K}_{r}}-1 \right)}} $，其中$r$是码块号，$ { {K}_{r}} $是码块$r$的比特数。</p><h3 id="信道编码-2"><a href="#信道编码-2" class="headerlink" title="信道编码"></a>信道编码</h3><p><br>码块比特流送至信道编码模块。码块中的比特表示为$ { {c}_{r0}},{ {c}_{r1}},{ {c}_{r2}},{ {c}_{r3}},…,{ {c}_{r\left( { {K}_{r}}-1 \right)}} $，其中$r$是码块号，$ { {K}_{r}} $是码块$r$的比特数。码块的总数表示为$ C $，每个码块根据2.3.2节的描述独立地进行LDPC编码。</p><p>编码之后的比特流表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $，其中对于LDPC BG#1，有$ N=66{ {Z}_{c}} $；对于LDPC BG#2，有$ N=50{ {Z}_{c}} $。$ { {Z}_{c}} $的值由2.2.1节给定。</p><h3 id="速率匹配-5"><a href="#速率匹配-5" class="headerlink" title="速率匹配"></a>速率匹配</h3><h2 id="下行控制信息"><a href="#下行控制信息" class="headerlink" title="下行控制信息"></a>下行控制信息</h2><p><br>DCI传输下行和上行调度信息，对非周期CQI报告的请求，或对一个小区和RNTI的上行功率控制命令。</p><blockquote><p>华为批注：This sentence will be updated later, pending on other agreed usages of DCI.</p></blockquote><p>Figure 7.3-1给出了DCI的处理结构。编码流程如下：</p><ul><li>信息单元复用</li><li>CRC添加</li><li>信道编码</li><li>速率匹配</li></ul><blockquote><p>华为批注：Will add the figure later.</p></blockquote><h3 id="DCI格式"><a href="#DCI格式" class="headerlink" title="DCI格式"></a>DCI格式</h3><h3 id="CRC添加-2"><a href="#CRC添加-2" class="headerlink" title="CRC添加"></a>CRC添加</h3><p><br>DCI传输通过CRC进行错误检测。</p><p>使用整个DCI负载计算CRC校验比特。DCI负载比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特表示为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$ A $为DCI负载比特大小，$ L $为校验比特数。</p><p>校验比特按照2.1节的描述进行计算并添加，并设置$L$为24比特，使用生成多项式$ { {g}_{\text{CRC24C}}}\left( D \right) $，得到添加CRC后的比特序列$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B=A+L $。</p><blockquote><p>[Editor notes: need to define the relationship between $ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $ and $ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $, pending on further agreements.]</p></blockquote><h3 id="信道编码-3"><a href="#信道编码-3" class="headerlink" title="信道编码"></a>信道编码</h3><p><br>信息比特送至信道编码模块。信息比特表示为$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $，其中$ K $是信息比特数，它们根据2.3.1节进行Polar编码，并设置$ { {n}_{\max }}=9 $，$ { {I}_{IL}}=1 $，$ { {n}_{PC}}=0 $，$ n_{PC}^{wm}=0 $。</p><p>编码之后的比特序列表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},{ {d}_{3}},…,{ {d}_{N-1}} $，其中$N$为编码比特数。</p><h3 id="速率匹配-6"><a href="#速率匹配-6" class="headerlink" title="速率匹配"></a>速率匹配</h3><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;blockquote&gt;&lt;p&gt;Marshall注：本博文重点关注了与polar code相关的比特级处理。&lt;/p&gt;&lt;/blockquote&gt;&lt;h1 id=&quot;物理信道映射&quot;&gt;&lt;a href=&quot;#物理信道映射&quot; class=&quot;headerlink&quot; title=&quot;物理信道映射&quot;&gt;&lt;/a&gt;物理信道映射&lt;/h1&gt;&lt;h2 id=&quot;上行&quot;&gt;&lt;a href=&quot;#上行&quot; class=&quot;headerlink&quot; title=&quot;上行&quot;&gt;&lt;/a&gt;上行&lt;/h2&gt;&lt;h2 id=&quot;下行&quot;&gt;&lt;a href=&quot;#下行&quot; class=&quot;headerlink&quot; title=&quot;下行&quot;&gt;&lt;/a&gt;下行&lt;/h2&gt;&lt;h1 id=&quot;通用流程&quot;&gt;&lt;a href=&quot;#通用流程&quot; class=&quot;headerlink&quot; title=&quot;通用流程&quot;&gt;&lt;/a&gt;通用流程&lt;/h1&gt;&lt;p&gt;&lt;br&gt;来自MAC层/向MAC层输出的数据和控制流经过编/解码，通过无线传输链路提供传输和控制服务。信道编码方案是错误检测、错误纠正、速率匹配、交织以及传输信道或控制信息向物理信道映射/从物理信道到传输信道控制信息解析或分离的组合方案。&lt;/p&gt;&lt;h2 id=&quot;CRC计算&quot;&gt;&lt;a href=&quot;#CRC计算&quot; class=&quot;headerlink&quot; title=&quot;CRC计算&quot;&gt;&lt;/a&gt;CRC计算&lt;/h2&gt;&lt;p&gt;&lt;br&gt;CRC计算单元的输入比特为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，奇偶校验比特为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $。$ A $是输入序列的长度，$ L $是校验比特数目。校验比特由下列循环生成多项式之一产生：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;$ { {g}_{\text{CRC24A}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{18}}+{ {D}^{17}}+{ {D}^{14}}+{ {D}^{11}}+{ {D}^{10}}+{ {D}^{7}}+{ {D}^{6}}+{ {D}^{5}}+{ {D}^{4}}+{ {D}^{3}}+D+1] $，CRC长度$ L=24 $；&lt;/li&gt;&lt;li&gt;$ { {g}_{\text{CRC24B}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{6}}+{ {D}^{5}}+D+1] $，CRC长度$ L=24 $；&lt;/li&gt;&lt;li&gt;$ { {g}_{\text{CRC24C}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{21}}+{ {D}^{20}}+{ {D}^{17}}+{ {D}^{15}}+{ {D}^{13}}+{ {D}^{12}}+{ {D}^{8}}+{ {D}^{4}}+{ {D}^{2}}+D+1] $，CRC长度$ L=24 $；&lt;/li&gt;&lt;li&gt;$ { {g}_{\text{CRC16}}}\left( D \right)=[{ {D}^{16}}+{ {D}^{12}}+{ {D}^{5}}+D+1] $，CRC长度$ L=16 $&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>NR物理信道与调制-下行链路</title>
    <link href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-dl/"/>
    <id>http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-dl/</id>
    <published>2017-09-09T11:28:07.000Z</published>
    <updated>2017-09-12T02:47:48.643Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><p><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/#下行链路">上接《NR物理信道与调制》下行链路</a></p><h1 id="下行链路"><a href="#下行链路" class="headerlink" title="下行链路"></a>下行链路</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="物理信道概述"><a href="#物理信道概述" class="headerlink" title="物理信道概述"></a>物理信道概述</h3><p><br>下行链路物理信道对应于一组资源元素（REs）的集合，用于承载源自高层的信息。本规范定义了如下下行信道：</p><ul><li>物理下行共享信道（PDSCH）</li><li>物理广播信道（PBCH）</li><li>物理下行控制信道（PDCCH）</li></ul><h3 id="物理信号概述"><a href="#物理信号概述" class="headerlink" title="物理信号概述"></a>物理信号概述</h3><p><br>下行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下下行物理信号：</p><ul><li>解调参考信号（Demodulation reference signals，DM-RS）</li><li>相位跟踪参考信号（Phase-tracking reference signals，PT-RS）</li><li>信道状态信息参考信号（Channel-state information reference signal，CSI-RS）</li><li>主同步信号（Primary synchronization signal，PSS）</li><li>辅同步信号（Secondary synchronization signal，SSS）</li></ul><a id="more"></a><h2 id="物理资源"><a href="#物理资源" class="headerlink" title="物理资源"></a>物理资源</h2><p><br>本规范定义了下列用于下行链路的天线端口：</p><ul><li>Antenna ports starting with 1000 for DM-RS associated with PDSCH</li><li>Antenna ports starting with 2000 for DM-RS associated with PDCCH</li><li>Antenna ports starting with 3000 for CSI-RS</li><li>Antenna ports starting with 4000 for SS/PBCH block transmission</li></ul><h2 id="物理信道"><a href="#物理信道" class="headerlink" title="物理信道"></a>物理信道</h2><h3 id="物理下行共享信道"><a href="#物理下行共享信道" class="headerlink" title="物理下行共享信道"></a>物理下行共享信道</h3><h4 id="加扰"><a href="#加扰" class="headerlink" title="加扰"></a>加扰</h4><p><br>对于每个码字$ q $，UE应假设比特块$ { {b}^{(q)}}(0),…,{ {b}^{(q)}}(M_{\text{bit}}^{(q)}-1) $应在调制前被加扰，其中$ M_{\text{bit}}^{(q)} $是在物理信道上传输的码字$ q $的比特数，加扰后的比特块为$ { {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1) $。根据如下公式进行加扰</p><script type="math/tex;mode=display">{ {\tilde{b}}^{(q)}}(i)=\left( { {b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2</script><p>其中加扰序列$ { {c}^{(q)}}(i) $由2.2节给出。</p><h4 id="调制"><a href="#调制" class="headerlink" title="调制"></a>调制</h4><p><br>对于每个码字$ q $，UE应假设加扰比特块$ { {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1) $根据Table 7.3.1.2-1中的调制方式进行调制，具体调制方法见《NR物理信道与调制》2.1节，得到复值调制符号块$ { {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1) $。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/195532388.png" alt="mark"></p><h4 id="层映射"><a href="#层映射" class="headerlink" title="层映射"></a>层映射</h4><p><br>UE假设每个码字的复值调制符号根据Table 7.3.1.3-1被映射到一层或多层上发送。码字$ q $的复值调制符号$ { {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1) $被映射到层$ x(i)={ {\left[ \begin{matrix}<br>{ {x}^{(0)}}(i) &amp; … &amp; { {x}^{(\upsilon -1)}}(i) \\<br>\end{matrix} \right]}^{T}} $，$ i=0,1,…,M_{\text{symb}}^{\text{layer}}-1 $，其中$ \upsilon $是层数，$ M_{\text{symb}}^{\text{layer}} $是每层的调制符号数。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/200219608.png" alt="mark"></p><h4 id="预编码"><a href="#预编码" class="headerlink" title="预编码"></a>预编码</h4><script type="math/tex;mode=display">\left[ \begin{matrix}
   { {y}^{(0)}}(i)  \\
   \vdots   \\
   { {y}^{(P-1)}}(i)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   { {x}^{(0)}}(i)  \\
   \vdots   \\
   { {x}^{(\upsilon -1)}}(i)  \\
\end{matrix} \right]</script><p>where $ P=\upsilon $.</p><h4 id="资源映射"><a href="#资源映射" class="headerlink" title="资源映射"></a>资源映射</h4><p><br>UE应假设对物理信道的传输所使用的每个天线端口，复值符号块$ { {y}^{(p)}}(0),…,{ {y}^{(p)}}(M_{\text{symb}}^{\text{ap}}-1) $应符合38.xxx下行功率分配的规定，并且从$ { {y}^{(p)}}(0) $开始映射到REs $ \left( k,l \right) $，REs满足以下所有条件：</p><ul><li>它们位于分配给传输的资源块中</li><li>根据TS 38.214，它们被声明可用于PDSCH</li></ul><p>向没有其他用途的REs $ { {\left( k,l \right)}_{p,\mu }} $上映射，以递增顺序先按天线端口索引$ p $，再按分配的物理资源索引$ k $，然后按索引$ l $映射，索引$ l $以TS 38.213规范的描述以$ l={ {l}_{0}} $为起始。</p><p>UE可以假设在一个PRB bundle内使用相同的预编码，一个PRB bundle由2个或4个PRBs组成。PRB bundle基于 absolute资源格定义。</p><h3 id="物理下行控制信道"><a href="#物理下行控制信道" class="headerlink" title="物理下行控制信道"></a>物理下行控制信道</h3><h4 id="控制信道单元"><a href="#控制信道单元" class="headerlink" title="控制信道单元"></a>控制信道单元</h4><p><br>物理下行控制信道由一个或多个控制信道单元（control-channel elements，CCE）组成，CCE数由Table 7.3.2.1-1指示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/202216219.png" alt="mark"></p><h4 id="控制资源集"><a href="#控制资源集" class="headerlink" title="控制资源集"></a>控制资源集</h4><p><br>一个控制资源集（Control-resource set，CORESET）由$ N_{\text{RB}}^{\text{CORESET}} $个频域RB和$ N_{\text{symb}}^{\text{CORESET}}\in \left\{ 1,2,3 \right\} $个时域符号组成，$ N_{\text{RB}}^{\text{CORESET}} $通过高层参数<em>CORESET-freq-dom</em>给定，$ N_{\text{symb}}^{\text{CORESET}} $通过高层参数<em>CORESET-time-dur</em>给定，其中仅当高层参数<em>DL-DMRS-typeA-pos</em> =3时支持$ N_{\text{symb}}^{\text{CORESET}}=3 $。</p><p>一个CCE由6个资源粒子组（resource-element group，REG）组成，一个REG等于一个OFDM符号上的RB。一个CORESET 内的REGs按时域优先的方式以递增顺序编号，在CORESET内从第1个OFDM符号且最低的RB以0开始编号。</p><p>UE可以配置多个CORESET。每个CORESET只与一个CCE-to-REG映射关联。</p><p>对于一个CORESET，CCE-to-REG映射可以交织（interleaved），也可以不交织（non- interleaved），这由高层参数<em>CORESET-Trans-type</em>来配置，并且由REG bundles来描述：</p><ul><li>REG bundle $ i $定义为REGs $ \left\{ iL,iL+1,…,iL+L-1 \right\} $，其中$ L $是REG bundle size，REG bundle size由高层参数<em>CORESET-REG-bundle-size</em>配置，$ i=0,1,…,{N_{\text{REG}}^{\text{CORESET}}}/{L}\;-1 $是CORESET内的REG数。</li><li>CCE $ j $由REG bundles $ \left\{ f({6j}/{L}\;),f({6j}/{L}\;+1),…,f({6j}/{L}\;+{6}/{L}\;-1) \right\} $组成，其中$ f(\cdot ) $是交织器。</li></ul><p>对于非交织的CCE-to-REG映射，$ L=6 $且$ f(j)=j $。</p><p>对于交织的CCE-to-REG映射，对于$ N_{\text{symb}}^{\text{CORESET}}=1 $，有$ L\in \left\{ 2,6 \right\} $；对于$ N_{\text{symb}}^{\text{CORESET}}\in \left\{ 2,3 \right\} $，有$ L\in \left\{ N_{\text{symb}}^{\text{CORSET}},6 \right\} $。</p><p>UE可假设在一个REG bundle内在频域上使用相同的预编码。</p><h4 id="加扰-1"><a href="#加扰-1" class="headerlink" title="加扰"></a>加扰</h4><h4 id="PDCCH调制"><a href="#PDCCH调制" class="headerlink" title="PDCCH调制"></a>PDCCH调制</h4><p><br>UE应假设比特块$ \tilde{b}(0),…,\tilde{b}({ {M}_{\text{bit}}}-1) $进行QPSK调制，QPSK调制采用《NR物理信道与调制》2.1.3节所描述的方法，得到复值调制符号块$ d(0),…,d({ {M}_{\text{symb}}}-1) $。</p><h4 id="资源映射-1"><a href="#资源映射-1" class="headerlink" title="资源映射"></a>资源映射</h4><p><br>UE应假设用于监测PDCCH的CCEs中，复值符号块$ d(0),…,d({ {M}_{\text{symb}}}-1) $乘以一个幅值因子$ { {\beta }_{\text{PDCCH}}} $，然后按照先$ l $后$k$的递增顺序映射到REs$ { {\left( k,l \right)}_{p,\mu }} $。</p><h3 id="物理广播信道"><a href="#物理广播信道" class="headerlink" title="物理广播信道"></a>物理广播信道</h3><h4 id="调制-1"><a href="#调制-1" class="headerlink" title="调制"></a>调制</h4><p><br>UE应假设比特块$ b(0),…,b({ {M}_{\text{bit}}}-1) $采用QPSK调制，QPSK调制采用《NR物理信道与调制》2.1节所描述的方法，得到复值调制符号块$ { {d}_{\text{PBCH}}}(0),…,{ {d}_{\text{PBCH}}}({ {M}_{\text{symb}}}-1) $。</p><h4 id="资源映射-2"><a href="#资源映射-2" class="headerlink" title="资源映射"></a>资源映射</h4><p><br>资源映射在本文1.4.3节中描述。</p><h2 id="物理信号"><a href="#物理信号" class="headerlink" title="物理信号"></a>物理信号</h2><h3 id="参考信号"><a href="#参考信号" class="headerlink" title="参考信号"></a>参考信号</h3><h4 id="用于PDSCH的DM-RS"><a href="#用于PDSCH的DM-RS" class="headerlink" title="用于PDSCH的DM-RS"></a>用于PDSCH的DM-RS</h4><h5 id="序列生成"><a href="#序列生成" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假设参考信号序列$ r(m) $定义为</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $在《NR物理信道与调制》2.2节中定义。</p><blockquote><p>Note: Sequence defined on a global scale relative to (FFS) SSBlock or RRC-configured reference point.</p></blockquote><h5 id="资源映射-3"><a href="#资源映射-3" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>UE应假设PDSCH DM-RS根据type 1或type 2映射到REs，DM-RS的类型由高层参数<em>DL-DMRS-config-type</em>给定。</p><p>UE应假设序列$ r(m) $根据如下公式映射到RE</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( 2m+{k}'+{ {m}_{0}} \right) \\ 
 \nonumber & k=\left\{ \begin{array}{*{35}{l}}
   { {k}_{\text{0}}}+4m+2{k}'+\Delta  & \text{Configuration type 1}  \\
   { {k}_{\text{0}}}+6m+{k}'+\Delta  & \text{Configuration type 2}  \\
\end{array} \right. \\ 
 \nonumber & {k}'=0,1 \\ 
\nonumber  & l=\bar{l}+{l}'  
\end{align}</script><p>其中$ l $定义为相对于时隙的起始，$ { {w}_{\text{f}}}\left( { {k}’} \right) $，$ { {w}_{\text{t}}}\left( { {l}’} \right) $和$ \Delta $由Tables 7.4.1.1.2-1 and 7.4.1.1.2-2给定。</p><p>时域索引$ {l}’ $和所支持的天线端口$p$依赖于DM-RS duration，DM-RS duration根据Table 7.4.1.1.2-3确定。$ \bar{l} $依赖于高层参数<em>DL-DMRS-add-pos</em>，<em>DL-DMRS-add-pos</em>由Table 7.4.1.1.2-4给定。$ { {l}_{0}} $依赖于映射类型：</p><ul><li>对于PDSCH映射类型A：如果高层参数<em>DL-DMRS-typeA-pos</em> =3则$ { {l}_{0}}=3 $，以及$ { {l}_{0}}=2 $</li><li>对于PDSCH映射类型B：$ { {l}_{0}} $是DM-RS映射到所调度的PDSCH资源中的第1个OFDM符号</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/213937051.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/214014814.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/214111058.png" alt="mark"></p><blockquote><p>Note: More than one additional DM_RS can be configured.</p></blockquote><h4 id="用于PDSCH的PT-RS"><a href="#用于PDSCH的PT-RS" class="headerlink" title="用于PDSCH的PT-RS"></a>用于PDSCH的PT-RS</h4><h5 id="序列生成-1"><a href="#序列生成-1" class="headerlink" title="序列生成"></a>序列生成</h5><h5 id="资源映射-4"><a href="#资源映射-4" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>UE应假设只有当高层参数<em>DL-PTRS-present</em>指示PT-RS被使用时，并且只在用于PDSCH的RBs中呈现。</p><p>如果呈现，UE应假设PDSCH PT-RS根据如下公式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{PTRS}}}r(m) \\ 
 \nonumber & l={ {l}_{\text{DMRS}}}+1+{ {L}_{\text{PTRS}}}\cdot {l}' \\ 
 \nonumber & l'=0,1,2,...  
\end{align}</script><p>每$ { {K}_{\text{PTRS}}} $个被调度的RBs中，当下列条件被满足时，从最低编号的RB开始调度（<em>Note: It may not be the lowest numbers RB, FFS if an offset is used.</em>）</p><ul><li>$l$在用于PDSCH传输的所分配的OFDM符号内</li><li>RE $ \left( k,l \right) $不用于DM-RS</li></ul><p>其中</p><ul><li>索引$k$是一个PRB内的子载波数</li><li>对于1个符号DM-RS，有$ { {l}_{\text{DM-RS}}}={ {l}_{0}} $；对于2个符号DM-RS，有$ { {l}_{\text{DM-RS}}}={ {l}_{0}}+1 $，其中$ { {l}_{0}} $由1.4.1.1.2节定义</li><li>$ { {K}_{\text{PTRS}}}\in \left\{ 2,4 \right\} $由[6, TS38.214]给定</li><li>$ { {L}_{\text{PT-RS}}}\in \left\{ 1,2,4 \right\} $由[6, TS38.214]给定</li></ul><h4 id="用于PDCCH的DM-RS"><a href="#用于PDCCH的DM-RS" class="headerlink" title="用于PDCCH的DM-RS"></a>用于PDCCH的DM-RS</h4><h4 id="用于PBCH的DM-RS"><a href="#用于PBCH的DM-RS" class="headerlink" title="用于PBCH的DM-RS"></a>用于PBCH的DM-RS</h4><h5 id="序列生成-2"><a href="#序列生成-2" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假设用于SS/PBCH的参考信号$ r(m) $由下式定义</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中$ c(n) $由《NR物理信道与调制》2.2节给定。加扰序列生成应在每个SS/PBCH块的起始处通过小区ID $ N_{\text{ID}}^{\text{cell}} $和$ { {n}_{\text{t}}} $被初始化，块时间索引由PBCH DM-RS承载。</p><h5 id="资源映射-5"><a href="#资源映射-5" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>资源映射在1.4.3节中描述。</p><h4 id="CSI-RS"><a href="#CSI-RS" class="headerlink" title="CSI-RS"></a>CSI-RS</h4><h5 id="序列生成-3"><a href="#序列生成-3" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假设参考信号序列$ r(m) $由下式定义</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $由《NR物理信道与调制》2.2节定义。</p><h5 id="资源映射-6"><a href="#资源映射-6" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>UE应假设序列$ r(m) $根据以下公式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{CSIRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( m \right) \\ 
 \nonumber & k=\bar{k}+{k}' \\ 
 \nonumber & l=\bar{l}+{l}'  
\end{align}</script><p>但有以下例外</p><ul><li>与所配置的CORESET重叠的REs应从CSI-RS传输中排除</li></ul><p>其中$l$定义为相对于时隙的起始，$ \bar{k} $和$ \bar{l} $由Table 7.4.1.5.2-1和$ { {w}_{\text{f}}}\left( { {k}’} \right),{ {w}_{\text{t}}}\left( { {l}’} \right)\in \left\{ \left[ \begin{matrix}<br>+1 &amp; +1 \\<br>\end{matrix} \right],\left[ \begin{matrix}<br>+1 &amp; -1 \\<br>\end{matrix} \right],\left[ \begin{matrix}<br>-1 &amp; +1 \\<br>\end{matrix} \right],\left[ \begin{matrix}<br>-1 &amp; -1 \\<br>\end{matrix} \right] \right\} $给定。对于每个$ \bar{l} $，有长度为6的bitmap $ \left[ { {b}_{5}}\cdots { {b}_{0}} \right] $]，其中比特$ { {b}_{i}} $隐含地以索引$ j $按递增顺序指示$ { {k}_{j}}=2i $。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/215953799.png" alt="mark"></p><h4 id="Tracking-RS"><a href="#Tracking-RS" class="headerlink" title="Tracking RS"></a>Tracking RS</h4><blockquote><p>Note: depending on future decisions, the TRS may become a realization of a CSI-RS in which case this section will be removed.</p></blockquote><h5 id="序列产生"><a href="#序列产生" class="headerlink" title="序列产生"></a>序列产生</h5><p><br>UE应假设参考信号序列$ r(m) $定义为</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $由《NR物理信道与调制》2.2节定义。</p><h5 id="资源映射-7"><a href="#资源映射-7" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>TRS burst由4个OFDM符号组成，并在2个连续时隙内发送。</p><p>UE应假设TRS在一个burst内根据以下公式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{TRS}}}r(m) \\ 
 \nonumber & k=4m+{ {k}_{0}}  
\end{align}</script><p>The UE may assume that a TRS burst is quasi co-located with respect to delay spread, average delay, Doppler shift, and Doppler spread with the PDSCH DM-RS.</p><h3 id="同步信号"><a href="#同步信号" class="headerlink" title="同步信号"></a>同步信号</h3><h4 id="物理层小区ID"><a href="#物理层小区ID" class="headerlink" title="物理层小区ID"></a>物理层小区ID</h4><p><br>1008个唯一的物理层小区ID通过下式给定</p><script type="math/tex;mode=display">N_{\text{ID}}^{\text{cell}}=3N_{\text{ID}}^{\text{(1)}}+N_{\text{ID}}^{\text{(2)}}</script><p>其中$ N_{\text{ID}}^{\text{(1)}}\in \left\{ 0,1,…,335 \right\} $且$ N_{\text{ID}}^{\text{(2)}}\in \left\{ 0,1,2 \right\} $。</p><h4 id="主同步信号"><a href="#主同步信号" class="headerlink" title="主同步信号"></a>主同步信号</h4><h5 id="序列产生-1"><a href="#序列产生-1" class="headerlink" title="序列产生"></a>序列产生</h5><p><br>主同步信号序列$ { {d}_{\text{PSS}}}(n) $定义为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & { {d}_{\text{PSS}}}\left( n \right)=1-2x\left( m \right) \\ 
 \nonumber & m=\left( n+43N_{\text{ID}}^{\text{(2)}} \right)\bmod 127 \\ 
 \nonumber  & 0\le n<127  
\end{align}</script><p>其中</p><script type="math/tex;mode=display">x\left( i+7 \right)=\left( x\left( i+4 \right)+x\left( i \right) \right)\bmod 2</script><p>且</p><script type="math/tex;mode=display">\left[ \begin{matrix}
   x\left( 6 \right) & x\left( 5 \right) & x\left( 4 \right) & x\left( 3 \right) & x\left( 2 \right) & x\left( 1 \right) & x\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   1 & 1 & 1 & 0 & 1 & 1 & 0  \\
\end{matrix} \right]</script><h5 id="资源映射-8"><a href="#资源映射-8" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>资源映射由1.4.3节描述。</p><h4 id="辅同步信号"><a href="#辅同步信号" class="headerlink" title="辅同步信号"></a>辅同步信号</h4><h5 id="序列产生-2"><a href="#序列产生-2" class="headerlink" title="序列产生"></a>序列产生</h5><p><br>辅同步信号序列$ { {d}_{\text{SSS}}}(n) $定义为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber  & { {d}_{\text{SSS}}}\left( n \right)=\left[ 1-2{ {x}_{0}}\left( \left( n+{ {m}_{0}} \right)\bmod 127 \right) \right]\left[ 1-2{ {x}_{1}}\left( \left( n+{ {m}_{1}} \right)\bmod 127 \right) \right] \\ 
 \nonumber & { {m}_{0}}=15\left\lfloor \frac{N_{\text{ID}}^{\text{(1)}}}{\text{112}} \right\rfloor +5N_{\text{ID}}^{\text{(2)}} \\ 
 \nonumber & { {m}_{1}}=N_{\text{ID}}^{\text{(1)}}\bmod 112 \\ 
 \nonumber & 0\le n<127  
\end{align}</script><p>其中</p><script type="math/tex;mode=display">\begin{align}
  \nonumber  & { {x}_{0}}\left( i+7 \right)=\left( { {x}_{0}}\left( i+4 \right)+x{}_{0}\left( i \right) \right)\bmod 2 \\ 
 \nonumber  & { {x}_{1}}\left( i+7 \right)=\left( { {x}_{1}}\left( i+1 \right)+x{}_{1}\left( i \right) \right)\bmod 2  
\end{align}</script><p>且</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & \left[ \begin{matrix}
   { {x}_{0}}\left( 6 \right) & { {x}_{0}}\left( 5 \right) & { {x}_{0}}\left( 4 \right) & { {x}_{0}}\left( 3 \right) & { {x}_{0}}\left( 2 \right) & { {x}_{0}}\left( 1 \right) & { {x}_{0}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 & 0 & 0 & 0 & 0 & 0 & 1  \\
\end{matrix} \right] \\ 
 \nonumber & \left[ \begin{matrix}
   { {x}_{1}}\left( 6 \right) & { {x}_{1}}\left( 5 \right) & { {x}_{1}}\left( 4 \right) & { {x}_{1}}\left( 3 \right) & { {x}_{1}}\left( 2 \right) & { {x}_{1}}\left( 1 \right) & { {x}_{1}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 & 0 & 0 & 0 & 0 & 0 & 1  \\
\end{matrix} \right]  
\end{align}</script><h5 id="资源映射-9"><a href="#资源映射-9" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>资源映射由1.4.3节描述。</p><h3 id="SS-PBCH块"><a href="#SS-PBCH块" class="headerlink" title="SS/PBCH块"></a>SS/PBCH块</h3><h4 id="SS-PBCH块的时频结构"><a href="#SS-PBCH块的时频结构" class="headerlink" title="SS/PBCH块的时频结构"></a>SS/PBCH块的时频结构</h4><p><br>在时域上，一个SS/PBCH块由4个OFDM符号组成，按递增顺序从0到3编号。在频域上，一个SS/PBCH块由24个连续RBs组成，其中的子载波按递增顺序从0到287编号，以编号最低的RB为起始。</p><p>UE应假设为了符合[TS 38.213]中的PSS功率分配规定，符号序列$ { {d}_{\text{PSS}}}(0),…,{ {d}_{\text{PSS}}}(126) $应乘以一个幅值因子$ { {\beta }_{\text{SS}}} $以构成主同步信号，并按照$k$递增的顺序映射到REs $ { {\left( k,l \right)}_{p,\mu }} $，其中$k$和$l$分别表示一个SS/PBCH块内频域和时域索引，并由Table 7.4.3.1-1给定。</p><p>UE应假设为了符合[TS 38.213]中的SSS功率分配规定，符号序列$ { {d}_{\text{SSS}}}(0),…,{ {d}_{\text{SSS}}}(126) $应乘以一个幅值因子$ { {\beta }_{\text{SS}}} $以构成辅同步信号，并按照$k$递增的顺序映射到REs $ { {\left( k,l \right)}_{p,\mu }} $，其中$k$和$l$分别表示一个SS/PBCH块内频域和时域索引，并由Table 7.4.3.1-1给定。</p><p>UE应假设为了符合[TS 38.213]中的PBCH功率分配规定，复值符号序列$ { {d}_{\text{PBCH}}}(0),…,{ {d}_{\text{PBCH}}}({ {M}_{\text{symb}}}-1) $应乘以一个幅值因子$ { {\beta }_{\text{PBCH}}}$以构成物理广播信道，并且从$ { {d}_{\text{PBCH}}}(0) $开始映射到REs $ { {\left( k,l \right)}_{p,\mu }} $，其中REs满足以下所有条件：</p><ul><li>它们不用于PBCH DM-RS</li></ul><p>向没有其他用途的REs $ { {\left( k,l \right)}_{p,\mu }} $上映射，以递增顺序先按$ k $再按$ l $映射，其中$ k $和$l$分别表示一个SS/PBCH块内的频域和时域索引，并由Table 7.4.3.1-1给定。</p><p>UE假设为了符合[TS 38.213]中的PBCH DM-RS功率分配规定，复值符号序列$ { {r}_{l}}(0),…,{ {r}_{l}}(143) $应乘以一个幅值因子$ \beta _{\text{PBCH}}^{\text{DMRS}} $以构成SS/PBCH块的DM-RS，并且以递增顺序先按$k$后按$l$映射到REs $ { {\left( k,l \right)}_{p,\mu }} $，其中$ k $和$l$分别表示一个SS/PBCH块内的频域和时域索引，并由Table 7.4.3.1-1和$ v=N_{\text{ID}}^{\text{cell}}\bmod 4 $给定。</p><p>对于SS/PBCH块，UE应假设</p><ul><li>天线端口$ p=4000 $，</li><li>子载波间隔配置$ \mu \in \left\{ 0,1,3,4 \right\} $，且</li><li>对于PSS，SSS和PBCH有相同的CP长度和子载波间隔</li></ul><p>The UE may assume that SS/PBCH blocks transmitted with the same block time index within a SS/PBCH burst set periodicity are quasi co-located with respect to Doppler spread, Doppler shift, average gain, average delay, and spatial Rx parameters. The UE shall not assume quasi co-location for any other SS/PBCH block transmissions.</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/221608824.png" alt="mark"></p><h4 id="SS-PBCH块的时域位置"><a href="#SS-PBCH块的时域位置" class="headerlink" title="SS/PBCH块的时域位置"></a>SS/PBCH块的时域位置</h4><p><br>UE应对可能的SS/PBCH块进行监测的时域位置在[TS38.213] 4.1节描述。</p><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/#下行链路&quot;&gt;上接《NR物理信道与调制》下行链路&lt;/a&gt;&lt;/p&gt;&lt;h1 id=&quot;下行链路&quot;&gt;&lt;a href=&quot;#下行链路&quot; class=&quot;headerlink&quot; title=&quot;下行链路&quot;&gt;&lt;/a&gt;下行链路&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;h3 id=&quot;物理信道概述&quot;&gt;&lt;a href=&quot;#物理信道概述&quot; class=&quot;headerlink&quot; title=&quot;物理信道概述&quot;&gt;&lt;/a&gt;物理信道概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;下行链路物理信道对应于一组资源元素（REs）的集合，用于承载源自高层的信息。本规范定义了如下下行信道：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;物理下行共享信道（PDSCH）&lt;/li&gt;&lt;li&gt;物理广播信道（PBCH）&lt;/li&gt;&lt;li&gt;物理下行控制信道（PDCCH）&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;物理信号概述&quot;&gt;&lt;a href=&quot;#物理信号概述&quot; class=&quot;headerlink&quot; title=&quot;物理信号概述&quot;&gt;&lt;/a&gt;物理信号概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;下行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下下行物理信号：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;解调参考信号（Demodulation reference signals，DM-RS）&lt;/li&gt;&lt;li&gt;相位跟踪参考信号（Phase-tracking reference signals，PT-RS）&lt;/li&gt;&lt;li&gt;信道状态信息参考信号（Channel-state information reference signal，CSI-RS）&lt;/li&gt;&lt;li&gt;主同步信号（Primary synchronization signal，PSS）&lt;/li&gt;&lt;li&gt;辅同步信号（Secondary synchronization signal，SSS）&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>NR物理信道与调制-上行链路</title>
    <link href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-ul/"/>
    <id>http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-ul/</id>
    <published>2017-09-09T09:16:48.000Z</published>
    <updated>2017-09-12T02:47:33.923Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><p><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/#上行链路">上接《NR物理信道与调制》上行链路</a></p><h1 id="上行链路"><a href="#上行链路" class="headerlink" title="上行链路"></a>上行链路</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="物理信道概述"><a href="#物理信道概述" class="headerlink" title="物理信道概述"></a>物理信道概述</h3><p><br>上行链路物理信道对应于一组资源元素（REs）的集合，用于承载源自高层的信息。本规范定义了如下上行信道：</p><ul><li>物理上行共享信道（PUSCH）</li><li>物理上行控制信道（PUCCH）</li><li>物理随机接入信道（PRACH）</li></ul><h3 id="物理信号概述"><a href="#物理信号概述" class="headerlink" title="物理信号概述"></a>物理信号概述</h3><p><br>上行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下上行物理信号：</p><ul><li>解调参考信号（Demodulation reference signals，DM-RS）</li><li>相位跟踪参考信号（Phase-tracking reference signals，PT-RS）</li><li>探测参考信号（Sounding reference signal，SRS）</li></ul><a id="more"></a><h2 id="物理资源"><a href="#物理资源" class="headerlink" title="物理资源"></a>物理资源</h2><p><br>本规范定义了下列用于上行链路的天线端口：</p><ul><li>Antenna ports starting with 1000 for DM-RS associated with PUSCH</li><li>Antenna ports starting with 2000 for DM-RS associated with PUCCH</li><li>Antenna ports starting with 3000 for SRS</li><li>Antenna port 4000 for PRACH</li></ul><h2 id="物理信道"><a href="#物理信道" class="headerlink" title="物理信道"></a>物理信道</h2><h3 id="物理上行共享信道"><a href="#物理上行共享信道" class="headerlink" title="物理上行共享信道"></a>物理上行共享信道</h3><h4 id="加扰"><a href="#加扰" class="headerlink" title="加扰"></a>加扰</h4><p><br>对于每个码字$q$，比特块${ {b}^{(q)}}(0),…,{ {b}^{(q)}}(M_{\text{bit}}^{(q)}-1)$应当在调制前被加扰，其中$M_{\text{bit}}^{(q)}$是在物理信道上传输的码字$q$的比特数，加扰后的比特块为${ {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1)$。根据如下公式进行加扰</p><script type="math/tex;mode=display">{ {\tilde{b}}^{(q)}}(i)=\left( { {b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2</script><p>其中加扰序列${ {c}^{(q)}}(i)$由2.2节中给定。</p><blockquote><p>注：RAN1还没有正式同意PUSCH加扰部分的内容，3.3.1.1和3.3.1.2节可能需要重新调整。</p></blockquote><h4 id="调制"><a href="#调制" class="headerlink" title="调制"></a>调制</h4><p><br>对于每个码字$q$，加扰比特块${ {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1)$根据Table 6.3.1.2-1中的调制方式进行调制，具体调制方法见2.1节，得到复值调制符号块${ {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1)$。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/172437037.png" alt="mark"></p><h4 id="层映射"><a href="#层映射" class="headerlink" title="层映射"></a>层映射</h4><p><br>每个码字的复值调制符号根据Table 7.3.1.3-1最多映射到4个层。码字$q$ 的复值调制符号${ {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1)$被映射到层$x(i)={ {\left[ \begin{matrix}<br>{ {x}^{(0)}}(i) &amp; … &amp; { {x}^{(\upsilon -1)}}(i) \\<br>\end{matrix} \right]}^{T}}$，$i=0,1,…,M_{\text{symb}}^{\text{layer}}-1$，其中$\upsilon $是层数，$M_{\text{symb}}^{\text{layer}}$是每层的调制符号数。</p><h4 id="变换预编码"><a href="#变换预编码" class="headerlink" title="变换预编码"></a>变换预编码</h4><p><br>如果变换预编码（transform precoding）不可用，对于层$\lambda =0,1,…,\upsilon -1$有${ {y}^{(\lambda )}}(i)={ {x}^{(\lambda )}}(i)$。</p><p>如果变换预编码可用，$\upsilon =1$且复值符号块${ {x}^{(0)}}(0),…,{ {x}^{(0)}}(M_{\text{symb}}^{\text{layer}}-1)$对于单层$\lambda =0$被分为${M_{\text{symb}}^{\text{layer}}}/{M_{\text{sc}}^{\text{PUSCH}}}\;$个集合，每个集合对应于一个OFDM符号。变换预编码根据如下公式进行</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & { {y}^{(0)}}(l\cdot M_{\text{sc}}^{\text{PUSCH}}+k)=\frac{1}{\sqrt{M_{\text{sc}}^{\text{PUSCH}}}}\sum\limits_{i=0}^{M_{\text{sc}}^{\text{PUSCH}}-1}{ { {x}^{(0)}}(l\cdot M_{\text{sc}}^{\text{PUSCH}}+i){ {e}^{-j\frac{2\pi ik}{M_{\text{sc}}^{\text{PUSCH}}}}}} \\ 
 \nonumber & k=0,...,M_{\text{sc}}^{\text{PUSCH}}-1 \\ 
 \nonumber & l=0,...,{M_{\text{symb}}^{\text{layer}}}/{M_{\text{sc}}^{\text{PUSCH}}}\;-1  
\end{align}</script><p>得到复值符号块${ {y}^{(0)}}(0),…,{ {y}^{(0)}}(M_{\text{symb}}^{\text{layer}}-1)$。$M_{\text{sc}}^{\text{PUSCH}}=M_{\text{RB}}^{\text{PUSCH}}\cdot N_{\text{sc}}^{\text{RB}}$，其中$M_{\text{RB}}^{\text{PUSCH}}$表示PUSCH就RB而言的带宽，并且满足</p><script type="math/tex;mode=display">M_{\text{RB}}^{\text{PUSCH}}={ {2}^{ { {\alpha }_{2}}}}\cdot { {3}^{ { {\alpha }_{3}}}}\cdot { {5}^{ { {\alpha }_{5}}}}\le N_{\text{RB}}^{\text{UL}}</script><p>其中${ {\alpha }_{2}},{ {\alpha }_{3}},{ {\alpha }_{5}}$是非负整数集合。</p><h4 id="预编码"><a href="#预编码" class="headerlink" title="预编码"></a>预编码</h4><p><br>根据如下公式对向量块${ {\left[ \begin{matrix}<br>{ {y}^{(0)}}(i) &amp; … &amp; { {y}^{(\upsilon -1)}}(i) \\<br>\end{matrix} \right]}^{T}}$，$i=0,1,…,M_{\text{symb}}^{\text{layer}}-1$进行预编码</p><script type="math/tex;mode=display">\left[ \begin{matrix}
   { {z}^{(0)}}(i)  \\
   \vdots   \\
   { {z}^{(P-1)}}(i)  \\
\end{matrix} \right]=W\left[ \begin{matrix}
   { {y}^{(0)}}(i)  \\
   \vdots   \\
   { {y}^{(\upsilon -1)}}(i)  \\
\end{matrix} \right]</script><p>其中$i=0,1,…,M_{\text{symb}}^{\text{ap}}-1$，$M_{\text{symb}}^{\text{ap}}=M_{\text{symb}}^{\text{layer}}$。</p><p>对基于非码本的传输，预编码矩阵$W$在TS 38.214规范中得到。</p><p>对基于码本的传输，预编码矩阵$W$由Table 6.3.1.5-1给定，其中TPMI索引由调度上行传输的DCI中获得。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/180222320.png" alt="mark"></p><h4 id="映射到物理资源"><a href="#映射到物理资源" class="headerlink" title="映射到物理资源"></a>映射到物理资源</h4><p><br>为满足TS 38.213规范对PUSCH传输功率${ {P}_{\text{PUSCH}}}$的要求，对于PUSCH传输所使用的每个天线端口，复值符号块${ {z}^{(p)}}(0),…,{ {z}^{(p)}}(M_{\text{symb}}^{\text{ap}}-1)$应当乘以一个幅值因子${ {\beta }_{\text{PUSCH}}}$，然后从${ {z}^{(p)}}(0)$开始依次映射到RE ${ {\left( k,l \right)}_{p,\mu }}$上，并且RE满足如下条件：</p><ul><li>它们位于用于传输所分配的资源中，且</li><li>它们不用于DM-RS相关的传输</li><li>they are not in the OFDM symbols used for transmission of the associated DM-RS in case of transform precoding not enabled.</li></ul><p>If transform precoding is not enabled, the mapping to resource elements ${ {\left( k,l \right)}_{p,\mu }}$ not reserved for other purposes shall be in increasing order of first the antenna port index $p$, then the index $k$ over the assigned physical resource blocks, and then the index $l$, starting with $l={ {l}_{0}}$.（注： ${ {l}_{0}}$ is the start of UL transmission. Need some reference to 213/214）</p><h3 id="物理上行控制信道"><a href="#物理上行控制信道" class="headerlink" title="物理上行控制信道"></a>物理上行控制信道</h3><p><br>PUCCH支持多种格式，如Table 6.3.2-1所示。对于单个UE，支持采用格式0或格式2的2个PUCCH同时传输，或支持采用格式1或格式3的其中一个PUCCH与采用格式0或格式2的其中一个PUCCH同时传输。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/180832948.png" alt="mark"></p><h4 id="PUCCH格式0"><a href="#PUCCH格式0" class="headerlink" title="PUCCH格式0"></a>PUCCH格式0</h4><h5 id="序列选择"><a href="#序列选择" class="headerlink" title="序列选择"></a>序列选择</h5><p><br>定义一组序列$\left\{ \begin{matrix}<br>{ {x}_{0}}(n) &amp; { {x}_{1}}(n) &amp; { {x}_{2}}(n) &amp; { {x}_{3}}(n) \\<br>\end{matrix} \right\}$，每组序列长度为12。</p><p>比特块$b(0),…,b({ {M}_{\text{bit}}}-1)$其中${ {M}_{\text{bit}}}\in \left\{ 1,2 \right\}$是PUCCH传输的比特数，根据下式选择序列</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & y(n)={ {x}_{j}}(n) \\ 
 \nonumber & j=\sum\nolimits_{i=0}^{ { {M}_{\text{bit}}}-1}{b(i)\cdot { {2}^{i}}}  
\end{align}</script><h5 id="映射到资源元素"><a href="#映射到资源元素" class="headerlink" title="映射到资源元素"></a>映射到资源元素</h5><p><br>为满足TS 38.213规范对PUCCH传输功率${ {P}_{\text{PUCCH,0}}}$的要求，序列$y(n)$应当乘以一个幅值因子${ {\beta }_{\text{PUCCH,0}}}$。在天线端口$p=2000$，先按$k$，再按$l$的递增顺序从$y(0)$开始映射到RE ${ {\left( k,l \right)}_{p,\mu }}$。</p><h4 id="PUCCH格式1"><a href="#PUCCH格式1" class="headerlink" title="PUCCH格式1"></a>PUCCH格式1</h4><h5 id="序列调制"><a href="#序列调制" class="headerlink" title="序列调制"></a>序列调制</h5><p><br>比特块$b(0),…,b({ {M}_{\text{bit}}}-1)$按照2.1节所述的方法进行调制，若${ {M}_{\text{bit}}}=1$，则使用BPSK，若${ {M}_{\text{bit}}}=2$，则使用QPSK，得到一个复值符号$d(0)$。</p><p>复值符号$d(0)$应根据下式乘以一个序列$r_{u,v}^{({ {\alpha }_{p}})}(n)$</p><script type="math/tex;mode=display">{ {y}^{(p)}}(n)=d(0)\cdot r_{u,v}^{({ {\alpha }_{p}})}(n),\text{          }n=0,1,...,N_{\text{seq}}^{\text{PUCCH}}-1</script><p>复值符号${ {y}^{(p)}}(0),…,{ {y}^{(p)}}(N_{\text{seq}}^{\text{PUCCH}}-1)$应根据下式采用正交序列${ {w}_{n_{\text{oc}}^{\text{(}p\text{)}}}}(i)$进行块扩展（block-wise spread）</p><script type="math/tex;mode=display">{ {z}^{(p)}}\left( m\cdot N_{\text{seq}}^{\text{PUCCH}}+n \right)={ {w}_{n_{\text{oc}}^{\text{(}p\text{)}}}}(m)\cdot { {y}^{(p)}}\left( n \right)</script><p>其中</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & m=0,...,N_{\text{SF}}^{\text{PUCCH}}-1 \\ 
 \nonumber & n=0,...,N_{\text{seq}}^{\text{PUCCH}}-1 \\ 
\end{align}</script><h5 id="映射到物理资源-1"><a href="#映射到物理资源-1" class="headerlink" title="映射到物理资源"></a>映射到物理资源</h5><p><br>为满足TS 38.213规范对PUCCH传输功率${ {P}_{\text{PUCCH,1}}}$的要求，序列${ {z}^{(p)}}(n)$应当乘以一个幅值因子${ {\beta }_{\text{PUCCH,1}}}$，序列从${ {z}^{(p)}}(0)$开始映射到RE ${ {\left( k,l \right)}_{p,\mu }}$，RE满足下列所有条件：</p><ul><li>它们位于用于传输的RB中，</li><li>它们不用于DM-RS相关的传输</li></ul><p>The mapping to resource elements ${ {\left( k,l \right)}_{p,\mu }}$ not reserved for other purposes shall be in increasing order of first the index $k$ over the assigned physical resource blocks, and then the index $l$.</p><h4 id="PUCCH格式2"><a href="#PUCCH格式2" class="headerlink" title="PUCCH格式2"></a>PUCCH格式2</h4><h4 id="PUCCH格式3"><a href="#PUCCH格式3" class="headerlink" title="PUCCH格式3"></a>PUCCH格式3</h4><h4 id="PUCCH格式4"><a href="#PUCCH格式4" class="headerlink" title="PUCCH格式4"></a>PUCCH格式4</h4><h3 id="物理随机接入信道"><a href="#物理随机接入信道" class="headerlink" title="物理随机接入信道"></a>物理随机接入信道</h3><h4 id="序列生成"><a href="#序列生成" class="headerlink" title="序列生成"></a>序列生成</h4><p><br>随机接入前导${ {x}_{u,v}}(n)$应根据下式生成</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & { {x}_{u,v}}(n)={ {x}_{u}}((n+{ {C}_{v}})\bmod { {L}_{\text{RA}}}) \\ 
 \nonumber & { {x}_{u}}(i)={ {e}^{-j\frac{\pi ui(i+1)}{ { {L}_{\text{RA}}}}}},i=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}</script><p>频域符号表示应根据下式生成</p><script type="math/tex;mode=display">{ {y}_{u,v}}(n)=\sum\limits_{m=0}^{ { {L}_{\text{RA}}}-1}{ { {x}_{u,v}}(m)\cdot { {e}^{-j\frac{2\pi mn}{ { {L}_{\text{RA}}}}}}}</script><p>其中${ {L}_{\text{RA}}}=839$或${ {L}_{\text{RA}}}=[127or139]$根据前导格式确定，前导格式由Tables 6.3.3.1-1和6.3.3.1-2给定。</p><p>循环移位${ {C}_{v}}$给定为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & C{}_{v}=\left\{ \begin{array}{*{35}{l}}
   v{ {N}_{\text{CS}}} & \text{v}=\text{0,1,}...\text{,}\left\lfloor { { {L}_{\text{RA}}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor -1,{ {N}_{\text{CS}}}\ne 0 & \text{for unrestricted sets}  \\
   \text{0} & { {N}_{\text{CS}}}=0 & \text{for unrestricted sets}  \\
   { {d}_{\text{start}}}\left\lfloor {v}/{n_{\text{shift}}^{\text{RA}}}\; \right\rfloor +\left( v\bmod n_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} & v=0,1,...,w-1 & \text{for restricted sets type A and B}  \\
   { { {\bar{\bar{d}}}}_{\text{start}}}+\left( v-w \right){ {N}_{\text{CS}}} & v=w,...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}-1 & \text{for restricted sets type B}  \\
   { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}+\left( v-w-\bar{\bar{n}}_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} & v=w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}},...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}+\bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}-1 & \text{for restricted sets type B}  \\
\end{array} \right. \\ 
 \nonumber & w=n_{\text{shift}}^{\text{RA}}n_{\text{group}}^{\text{RA}}+\bar{n}_{\text{shift}}^{\text{RA}}  
\end{align}</script><p>其中${ {N}_{\text{CS}}}$在Table 6.3.3.1-3中给定，高层参数<em>restrictedSetConfig</em>决定了受限集合的类型，6.3.3.1-1和6.3.3.1-2指示了对不同前导格式的受限集合的类型。</p><p>变量${ {d}_{u}}$给定为</p><script type="math/tex;mode=display">{ {d}_{u}}=\left\{ \begin{array}{*{35}{l}}
   q & 0\le q<{ { {L}_{\text{RA}}}}/{2}\;  \\
   { {L}_{\text{RA}}}-q & \text{otherwise}  \\
\end{array} \right.</script><p>其中$q$是满足$\left( qu \right)\bmod { {L}_{\text{RA}}}=1$的最小非负整数。循环移位的受限集合参数依赖于${ {d}_{u}}$。</p><ul><li>对于${ {N}_{\text{CS}}}\le { {d}_{u}}&lt;{ { {L}_{\text{RA}}}}/{3}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=2{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {({ {L}_{\text{RA}}}-2{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}</script><ul><li>对于 ${ { {L}_{\text{RA}}}}/{3}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{2}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max \left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}</script><p>对于受限集合类型B，参数规定为：</p><ul><li>对于$ { {N}_{\text{CS}}}\le { {d}_{u}}&lt;{ { {L}_{\text{RA}}}}/{5}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=4{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {({ {L}_{\text{RA}}}-4{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}</script><ul><li>对于$ { { {L}_{\text{RA}}}}/{5}\;\le { {d}_{u}}\le {\left( { {L}_{\text{RA}}}-{ {N}_{\text{CS}}} \right)}/{\text{4}}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( { {L}_{\text{RA}}}-4{ {d}_{u}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-4{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max \left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}</script><ul><li>对于$ {({ {L}_{\text{RA}}}+{ {N}_{\text{CS}}})}/{4}\;\le { {d}_{u}}&lt;{2{ {L}_{\text{RA}}}}/{7}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {(4{ {d}_{u}}-{ {L}_{\text{RA}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=4{ {d}_{u}}-{ {L}_{\text{RA}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}={ {L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}={ {L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( { {L}_{\text{RA}}}-3{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}},4{ {d}_{u}}-{ {L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( \left( 1-\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right) \right)\left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)+\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right)\left( 4{ {d}_{u}}-{ {L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right) \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor -\bar{\bar{n}}_{\text{shift}}^{\text{RA}}  
\end{align}</script><ul><li>对于$ {2{ {L}_{\text{RA}}}}/{7}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{3}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-3{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}={ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( 4{ {d}_{u}}-{ {L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}},{ {L}_{\text{RA}}}-3{ {d}_{u}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><ul><li>对于$ {({ {L}_{\text{RA}}}+{ {N}_{\text{CS}}})}/{3}\;\le { {d}_{u}}&lt;{2{ {L}_{\text{RA}}}}/{5}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {(3{ {d}_{u}}-{ {N}_{\text{ZC}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=3{ {d}_{u}}-{ {N}_{\text{ZC}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( { {L}_{\text{RA}}}-2{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><ul><li>对于$ {2{ {L}_{\text{RA}}}}/{5}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{2}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {N}_{\text{ZC}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=2({ {N}_{\text{ZC}}}-2{ {d}_{u}})+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-{ {d}_{u}})}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( 3{ {d}_{u}}-{ {L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><p>对于其他所有的$ { {d}_{u}} $值，受限集合不存在循环移位。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/190959609.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/191029404.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/191117976.png" alt="mark"></p><h4 id="映射到物理元素"><a href="#映射到物理元素" class="headerlink" title="映射到物理元素"></a>映射到物理元素</h4><p><br>前导序列应根据下式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k}^{(p,\text{RA})}={ {\beta }_{\text{PRACH}}}{ {y}_{u,v}}(k) \\ 
 \nonumber & k=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}</script><p>其中$ { {\beta }_{\text{PRACH}}} $是幅值因子，为满足TS 38.213规范对PRACH传输功率$ { {P}_{\text{PRACH}}} $的要求，前导序列应乘以$ { {\beta }_{\text{PRACH}}} $，$ p=4000 $是天线端口。基带信号应根据2.3节使用Table 6.3.3.1-1或Table 6.3.3.1-2的参数生成。</p><h2 id="物理信号"><a href="#物理信号" class="headerlink" title="物理信号"></a>物理信号</h2><h3 id="参考信号"><a href="#参考信号" class="headerlink" title="参考信号"></a>参考信号</h3><h4 id="用于PUSCH的DM-RS"><a href="#用于PUSCH的DM-RS" class="headerlink" title="用于PUSCH的DM-RS"></a>用于PUSCH的DM-RS</h4><h5 id="序列生成-1"><a href="#序列生成-1" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>若对PUSCH的转换预编码不启用，则参考信号序列$ r(m) $根据下式生成</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $在《NR物理信道与调制》2.2节中定义。</p><p>若对PUSCH的转换预编码启用，则参考信息$ r(m) $根据下式生成</p><script type="math/tex;mode=display">r(m)={ {e}^{-j\frac{\pi qm(m+1)}{L}}}</script><blockquote><p>Note: Agreement says “Support ZC-sequence for UL DFT-S-OFDM DMRS” but unclear if this refers to the sequences in LTE (ZC-derived/computer generated) or “pure” ZC.</p></blockquote><h5 id="资源映射"><a href="#资源映射" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>PUSCH DM-RS根据type 1或type 2映射到物理资源，DM-RS的类型由高层参数<em>UL-DMRS-config-type</em>给定。</p><p>UE应根据以下规则将序列$ r(m) $映射到REs</p><ul><li>if transform precoding is not enabled,</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( 2m+{k}'+{ {m}_{0}} \right) \\ 
 \nonumber & k=\left\{ \begin{matrix}
   { {k}_{\text{0}}}+4m+2{k}'+\Delta  & \text{Configuration type 1}  \\
   { {k}_{\text{0}}}+6m+{k}'+\Delta  & \text{Configuration type 2}  \\
\end{matrix} \right. \\ 
 \nonumber & {k}'=0,1 \\ 
 \nonumber & l=\bar{l}+{l}'  
\end{align}</script><ul><li>if transform precoding is enabled</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( 2m+{k}'+{ {m}_{0}} \right) \\ 
 \nonumber & k={ {k}_{\text{0}}}+4m+2{k}'+\Delta  \\ 
 \nonumber & {k}'=0,1 \\ 
\nonumber  & l=\bar{l}+{l}'  
\end{align}</script><p>其中$l$是指相对于PUSCH传输的起始，$ { {w}_{\text{f}}}\left( { {k}’} \right) $，$ { {w}_{\text{f}}}\left( { {k}’} \right) $，和$ \Delta $在Tables 6.4.1.1.2-1 and 6.4.1.1.2-2中给定。</p><p>时域索引$ {l}’ $和所支持的天线端口$p$根据Table 6.4.1.1.2-3中的DM-RS duration确定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/192118412.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/192207337.png" alt="mark"></p><h4 id="相位跟踪参考信号"><a href="#相位跟踪参考信号" class="headerlink" title="相位跟踪参考信号"></a>相位跟踪参考信号</h4><h5 id="序列生成-2"><a href="#序列生成-2" class="headerlink" title="序列生成"></a>序列生成</h5><h5 id="资源映射-1"><a href="#资源映射-1" class="headerlink" title="资源映射"></a>资源映射</h5><h4 id="用于PUCCH的DM-RS"><a href="#用于PUCCH的DM-RS" class="headerlink" title="用于PUCCH的DM-RS"></a>用于PUCCH的DM-RS</h4><h5 id="用于PUCCH格式1的DM-RS"><a href="#用于PUCCH格式1的DM-RS" class="headerlink" title="用于PUCCH格式1的DM-RS"></a>用于PUCCH格式1的DM-RS</h5><h4 id="探测参考信号"><a href="#探测参考信号" class="headerlink" title="探测参考信号"></a>探测参考信号</h4><h5 id="序列生成-3"><a href="#序列生成-3" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>探测参考信号序列根据下式生成</p><script type="math/tex;mode=display">r\left( m \right)=r_{u,v}^{(\alpha )}\left( m \right)</script><p>其中$ r_{u,v}^{(\alpha )}\left( n \right) $]由XXX给定。</p><h5 id="资源映射-2"><a href="#资源映射-2" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>探测参考信号应在上行天线端口$ 3000+i $上发送，其中$ i $是$ i=0 $或$ i=0,1 $或$ i=0,1,2,3 $其中之一。</p><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/#上行链路&quot;&gt;上接《NR物理信道与调制》上行链路&lt;/a&gt;&lt;/p&gt;&lt;h1 id=&quot;上行链路&quot;&gt;&lt;a href=&quot;#上行链路&quot; class=&quot;headerlink&quot; title=&quot;上行链路&quot;&gt;&lt;/a&gt;上行链路&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;h3 id=&quot;物理信道概述&quot;&gt;&lt;a href=&quot;#物理信道概述&quot; class=&quot;headerlink&quot; title=&quot;物理信道概述&quot;&gt;&lt;/a&gt;物理信道概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;上行链路物理信道对应于一组资源元素（REs）的集合，用于承载源自高层的信息。本规范定义了如下上行信道：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;物理上行共享信道（PUSCH）&lt;/li&gt;&lt;li&gt;物理上行控制信道（PUCCH）&lt;/li&gt;&lt;li&gt;物理随机接入信道（PRACH）&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;物理信号概述&quot;&gt;&lt;a href=&quot;#物理信号概述&quot; class=&quot;headerlink&quot; title=&quot;物理信号概述&quot;&gt;&lt;/a&gt;物理信号概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;上行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下上行物理信号：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;解调参考信号（Demodulation reference signals，DM-RS）&lt;/li&gt;&lt;li&gt;相位跟踪参考信号（Phase-tracking reference signals，PT-RS）&lt;/li&gt;&lt;li&gt;探测参考信号（Sounding reference signal，SRS）&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>NR物理信道与调制</title>
    <link href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/"/>
    <id>http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/</id>
    <published>2017-09-09T07:37:09.000Z</published>
    <updated>2017-09-12T02:47:19.575Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="帧结构与物理资源"><a href="#帧结构与物理资源" class="headerlink" title="帧结构与物理资源"></a>帧结构与物理资源</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><br>在本规范中，除非另有说明，在时域中的各个域的大小表示为若干时间单位${ {T}_{\text{s}}}={1}/{\left( \Delta { {f}_{\max }}\cdot { {N}_{\text{f}}} \right)}\;$，其中$\Delta { {f}_{\max }}=480\cdot { {10}^{3}}$ Hz，${ {N}_{\text{f}}}=4096$。常量$\kappa ={\Delta { {f}_{\text{max}}}{ {N}_{\text{f}}}}/{\left( \Delta { {f}_{\text{ref}}}{ {N}_{\text{f,ref}}} \right)}\;=64$，其中$\Delta { {f}_{\text{ref}}}=15\cdot { {10}^{3}}\text{ Hz}$，${ {N}_{\text{f,ref}}}=2048$。</p><h2 id="波形参数"><a href="#波形参数" class="headerlink" title="波形参数"></a>波形参数</h2><p><br>支持多种OFDM波形参数，如Table 4.2-1所示，其中载波带宽部分的$\mu$和CP由高层参数给定，下行链路由<em>DL_BWP_mu</em>和<em>DL_BWP_cp</em>给定，上行链路由<em>UL_BWP_mu</em>和<em>UL_BWP_cp</em>给定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/155018195.png" alt="mark"></p><a id="more"></a><h2 id="帧结构"><a href="#帧结构" class="headerlink" title="帧结构"></a>帧结构</h2><h3 id="帧和子帧"><a href="#帧和子帧" class="headerlink" title="帧和子帧"></a>帧和子帧</h3><p><br>下行与上行链路传输于帧中，一帧的时域为${ {T}_{\text{f}}}=\left( {\Delta { {f}_{\max }}{ {N}_{\text{f}}}}/{100}\; \right)\cdot { {T}_{\text{s}}}=10\text{ ms}$，一帧包含10个子帧，每个子帧时域为${ {T}_{\text{sf}}}=\left( {\Delta { {f}_{\max }}{ {N}_{\text{f}}}}/{1000}\; \right)\cdot { {T}_{\text{s}}}=1\text{ ms}$。每个子帧中的连续OFDM符号数为$N_{\text{symb}}^{\text{subframe},\mu }=N_{\text{symb}}^{\text{slot}}N_{\text{slot}}^{\text{subframe},\mu }$。每帧分为两个相等大小的半帧，每个半帧包含5个子帧。</p><p>There is one set of frames in the uplink and one set of frames in the downlink on a carrier.</p><p>来自UE的上行帧$i$应在UE对应的下行帧开始前${ {T}_{\text{TA}}}={ {N}_{\text{TA}}}{ {T}_{\text{s}}}$传输。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/155332915.png" title="Figure 4.3.1-1: Uplink-downlink timing relation"></p><h3 id="时隙"><a href="#时隙" class="headerlink" title="时隙"></a>时隙</h3><p><br>对于子载波间隔配置$\mu$，时隙在子帧内按递增顺序编号$n_{\text{s}}^{\mu }\in \left\{ 0,…,N_{\text{slot}}^{\text{subframe,}\mu }-1 \right\}$，在帧内按递增顺序编号$n_{\text{s,f}}^{\mu }\in \left\{ 0,…,N_{\text{slot}}^{\text{frame,}\mu }-1 \right\}$。一个时隙内有$N_{\text{symb}}^{\text{slot}}$个连续的OFDM符号，$N_{\text{symb}}^{\text{slot}}$依赖于CP长度，并且由Tables 4.3.2-1和4.3.2-2给定。子帧内的起始时隙$n_{\text{s}}^{\mu }$与子帧内起始OFDM符号$n_{\text{s}}^{\mu }N_{\text{symb}}^{\text{slot}}$在时间上对齐。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/160156375.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/160308810.png" alt="mark"></p><blockquote><p><strong>Agreements:</strong></p><ul><li>A slot can contain all downlink, all uplink, or {at least one downlink part and at least one uplink part}</li><li>There are also agreements on various semi-static configurations with different periodicities</li></ul></blockquote><h2 id="物理资源"><a href="#物理资源" class="headerlink" title="物理资源"></a>物理资源</h2><h3 id="天线端口"><a href="#天线端口" class="headerlink" title="天线端口"></a>天线端口</h3><p><br>天线端口定义为，在同一天线端口上，某一符号上的信道可以由另一符号上的信道推知。</p><p>如果一个天线端口上某一符号传输的信道的大尺度性能可以被另一天线端口上某一符号传输的信道所推知，则这两个天线端口被称为quasi co-located。大尺度性能包括一个或多个延时扩展，多普勒扩展，多普勒频移，平均增益，平均时延和空间接收参数。</p><h3 id="资源格"><a href="#资源格" class="headerlink" title="资源格"></a>资源格</h3><p><br>对于每种波形参数和载波，资源格由$N_{\text{RB,}x}^{\mu }N_{\text{sc}}^{\text{RB}}$个子载波和$N_{\text{symb}}^{\text{subframe},\mu }$个OFDM符号定义，其中$x$表示DL或UL，$N_{\text{RB,}x}^{\text{max,}\mu }$由Table 4.4.2-1给定。在不至于混淆的情况下，下标$x$可省略。每个天线端口$p$，每个子载波间隔配置$\mu$以及每个传输方向（上行或下行）对应一个资源格。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/161038568.png" alt="mark"></p><h3 id="资源元素"><a href="#资源元素" class="headerlink" title="资源元素"></a>资源元素</h3><p>天线端口$p$和子载波间隔配置$\mu$下的资源格中每个元素被称为资源元素（Resource Element，RE），它用索引对$\left( k,l \right)$唯一地标识，其中$k=0,…,N_{\text{RB}}^{\mu }N_{\text{sc}}^{\text{RB}}-1$是频域索引，$l$是时域符号索引。</p><p>天线端口$p$和子载波间隔配置$\mu$下的RE $\left( k,l \right)$表示为${ {\left( k,l \right)}_{p,\mu }}$，相应的复数值表示为$a_{k,l}^{(p,\mu )}$。在不至于混淆的情况下，或在没有特定的天线端口或子载波间隔的情况下，索引$p$和$\mu$可以省略，简写为$a_{k,l}^{(p)}$或${ {a}_{k,l}}$。</p><p>一个资源元素（RE）分为4类：‘uplink’, ‘downlink’, ‘flexible’, or ‘reserved’。</p><ul><li>如果RE被配置为‘reserved’， UE不应在上行链路中对该RE发送任何内容，也不对下行链路中的RE内容作出任何假设。</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/161511352.png" title="Figure 4.4.3-1: Resource grid and resource block"></p><h3 id="资源块"><a href="#资源块" class="headerlink" title="资源块"></a>资源块</h3><p><br>一个物理资源块（PRB）在频域上定义为$N_{\text{sc}}^{\text{RB}}=12$连续的子载波。</p><p>PRB在频域上从0到$N_{\text{RB}}^{\mu }-1$编号。频域上的PRB数${ {n}_{\text{PRB}}}$和RE $(k,l)$的关系由下式给定：</p><script type="math/tex;mode=display">{ {n}_{\text{PRB}}}=\left\lfloor \frac{k}{N_{\text{sc}}^{\text{RB}}} \right\rfloor</script><h3 id="载波带宽part"><a href="#载波带宽part" class="headerlink" title="载波带宽part"></a>载波带宽part</h3><p><br>对于给定的载波上的波形参数${ {\mu }_{i}}$，载波带宽part（bandwidth part，BWP）是一组连续的PRB。BWP中的RB从0到$N_{\text{RB,}x}^{\mu }-1$编号，其中$x$表示DL或UL，with $N_{\text{BWP}}^{i}$ being the offset between PRB 0 in the absolute resource block grid in clause 1.4.4 and PRB 0 in carrier bandwidth part number $i$。BWP中的RB数应满足$N_{\text{RB, }x}^{\text{min, }\mu }\le N_{\text{RB,}x}^{\mu }\le N_{\text{RB, }x}^{\text{max, }\mu }$，其中最小值和最大值在Table 4.4.2-1中给定。</p><p>下行链路中，UE可配置具有一个或多个载波BWP，所述载波BWP的子集在给带时间处于激活状态。UE不希望在BWP以外的频带接收PDSCH或PDCCH。</p><p>在上行链路中，UE可配置为具有一个或多个载波BWP，所述载波BWP的子集在给定时间处于激活状态。UE不希望在BWP以外的频带发送PUSCH或PUCCH。</p><h2 id="载波聚合"><a href="#载波聚合" class="headerlink" title="载波聚合"></a>载波聚合</h2><p><br>在多个小区中的传输可以被聚合，除了主小区外，最多可以使用15个辅小区。除非另有说明，本规范中的描述适用于多达16个服务小区中的每一个。</p><h1 id="通用函数"><a href="#通用函数" class="headerlink" title="通用函数"></a>通用函数</h1><h2 id="调制映射器"><a href="#调制映射器" class="headerlink" title="调制映射器"></a>调制映射器</h2><p><br>调制映射器采用二进制0或1作为输入，产生复值调制符号作为输出。</p><h3 id="π-2-BPSK"><a href="#π-2-BPSK" class="headerlink" title="π/2-BPSK"></a>π/2-BPSK</h3><p><br>对于π/2-BPSK调制，比特$b(i)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">x=\frac{ { {e}^{j{i\pi }/{2}\;}}}{\sqrt{2}}\left[ \left( 1-2b(i) \right)+j\left( 1-2b(i) \right) \right]</script><h3 id="BPSK"><a href="#BPSK" class="headerlink" title="BPSK"></a>BPSK</h3><p><br>对于BPSK调制，比特$b(i)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">x=\frac{1}{\sqrt{2}}\left[ \left( 1-2b(i) \right)+j\left( 1-2b(i) \right) \right]</script><h3 id="QPSK"><a href="#QPSK" class="headerlink" title="QPSK"></a>QPSK</h3><p><br>对于QPSK调制，成对比特$b(i),b(i+1)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">x=\frac{1}{\sqrt{2}}\left[ \left( 1-2b(i) \right)+j\left( 1-2b(i+1) \right) \right]</script><h3 id="16QAM"><a href="#16QAM" class="headerlink" title="16QAM"></a>16QAM</h3><p><br>对于16QAM调制，四位比特$b(i),b(i+1),b(i+2),b(i+3)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">x=\frac{1}{\sqrt{10}}\left[ \left( 1-2b(i) \right)\left( 2-\left( 1-2b(i+2) \right) \right)+j\left( 1-2b(i+1) \right)\left( 2-\left( 1-2b(i+3) \right) \right) \right]</script><h3 id="64QAM"><a href="#64QAM" class="headerlink" title="64QAM"></a>64QAM</h3><p><br>对于64QAM调制，六位比特$b(i),b(i+1),b(i+2),b(i+3),b(i+4),b(i+5)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & x=\frac{1}{\sqrt{42}}\left[ \left( 1-2b(i) \right)\left( 4-\left( 1-2b(i+2) \right)\left( 2-\left( 1-2b(i+4) \right) \right) \right) \right. \\ 
 \nonumber & \ \ \ \ \ \ \left. +j\left( 1-2b(i+1) \right)\left( 4-\left( 1-2b(i+3) \right)\left( 2-\left( 1-2b(i+5) \right) \right) \right) \right] \\ 
\end{align}</script><h3 id="256QAM"><a href="#256QAM" class="headerlink" title="256QAM"></a>256QAM</h3><p><br>对于256QAM调制，八位比特$b(i),b(i+1),b(i+2),b(i+3),b(i+4),b(i+5),b(i+6),b(i+7)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & x=\frac{1}{\sqrt{170}}\left[ \left( 1-2b(i) \right)\left( 8-\left( 1-2b(i+2) \right)\left( 4-\left( 1-2b(i+4) \right)\left( 2-\left( 1-2b(i+6) \right) \right) \right) \right) \right. \\ 
 \ \ \ \nonumber & \left. +j\left( 1-2b(i+1) \right)\left( 8-\left( 1-2b(i+3) \right)\left( 4-\left( 1-2b(i+5) \right)\left( 2-\left( 1-2b(i+7) \right) \right) \right) \right) \right]  
\end{align}</script><h2 id="伪随机序列生成"><a href="#伪随机序列生成" class="headerlink" title="伪随机序列生成"></a>伪随机序列生成</h2><p><br>伪随机序列由长度为31的Gold序列定义。长度为${ {M}_{\text{PN}}}$的输出序列$c(n)$，其中$n=0,1,…,{ {M}_{\text{PN}}}-1$，由下式定义</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & c(n)=\left( { {x}_{1}}(n+{ {N}_{C}})+{ {x}_{2}}(n+{ {N}_{C}}) \right)\bmod 2 \\ 
 \nonumber & { {x}_{1}}(n+31)=\left( { {x}_{1}}(n+3)+{ {x}_{1}}(n) \right)\bmod 2 \\ 
 \nonumber & { {x}_{2}}(n+31)=\left( { {x}_{2}}(n+3)+{ {x}_{2}}(n+2)+{ {x}_{2}}(n+1)+{ {x}_{2}}(n) \right)\bmod 2  
\end{align}</script><p>其中${ {N}_{C}}=1600$，第一m序列应由${ {x}_{1}}(0)=1,{ {x}_{1}}(n)=0,n=1,2,…,30$初始化。第二m序列的初始化由${ {c}_{\text{init}}}=\sum\nolimits_{i=0}^{30}{ { {x}_{2}}(i)\cdot { {2}^{i}}}$表示，其值取决于序列的应用。</p><h2 id="OFDM基带信号生成"><a href="#OFDM基带信号生成" class="headerlink" title="OFDM基带信号生成"></a>OFDM基带信号生成</h2><p><br>对除PRACH以外的任何物理信道或信号，对于一个子帧内的OFDM符号$l$，天线端口$p$和子载波间隔配置$\mu$下的时间连续信号$s_{l}^{(p,\mu )}\left( t \right)$定义为</p><script type="math/tex;mode=display">s_{l}^{(p,\mu )}\left( t \right)=\sum\limits_{k=-\left\lfloor N_{\text{RB}}^{\mu }N_{\text{sc}}^{\text{RB}}/2 \right\rfloor }^{ { {\left\lceil N_{\text{RB}}^{\mu }N_{\text{sc}}^{\text{RB}}/2 \right\rceil }^{ {}}}-1}{a_{ {k}',\bar{l}}^{(p,\mu )}\cdot { {e}^{j2\pi \left( k+{ {k}_{0}} \right)\Delta f\left( t-{ {N}_{\text{CP},\bar{l}}}\cdot { {T}_{\text{s}}} \right)}}}</script><p>其中$0\le t&lt;\left( { {N}_{\text{u}}}+N_{\text{CP},\bar{l}}^{\mu } \right){ {T}_{\text{s}}}$且${k}’=k+\left\lfloor {N_{\text{RB}}^{\mu }N_{\text{sc}}^{\text{RB}}}/{2}\; \right\rfloor $。The value of ${ {k}_{0}}$ is such that the lowest numbered subcarrier in a resource block for subcarrier spacing configuration $\mu$ coincides with the lowest numbered subcarrier in a resource block for any subcarrier spacing configuration less than $\mu$.</p><p>子载波间隔配置$\mu$下的OFDM符号$l$的起始位置为</p><script type="math/tex;mode=display">t_{\text{start},l}^{\mu }=\left\{ \begin{array}{*{35}{l}}
   0 & l=0  \\
   t_{\text{start},\bar{l}-1}^{\mu }+\left( { {N}_{\text{u}}}+N_{\text{CP,}l-1}^{\mu } \right)\cdot { {T}_{\text{s}}} & \text{otherwise}  \\
\end{array} \right.</script><p>其中</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & { {N}_{\text{u}}}=2048\kappa \cdot { {2}^{-\mu }} \\ 
 \nonumber & { {N}_{\text{CP},\bar{l}}}=\left\{ \begin{array}{*{35}{l}}
   512\kappa \cdot { {2}^{-\mu }} & \text{extended cyclic prefix}  \\
   144\kappa \cdot { {2}^{-\mu }}+16\kappa  & \text{normal cyclic prefix and }l=0\text{ or }l=7  \\
   144\kappa \cdot { {2}^{-\mu }} & \text{otherwise}  \\
\end{array} \right.\cdot { {2}^{\mu }} \\ 
\nonumber  &   
\end{align}</script><p>对于PRACH，天线端口$p$下的时间连续信号$s_{l}^{(p,\mu )}\left( t \right)$定义为</p><script type="math/tex;mode=display">s_{l}^{(p,\mu )}\left( t \right)=\sum\limits_{k=-\left\lfloor { {L}_{\text{RA}}}/2 \right\rfloor }^{ { {\left\lceil { {L}_{\text{RA}}}/2 \right\rceil }^{ {}}}-1}{a_{ { {k}'}}^{(p,\text{RA})}\cdot { {e}^{j2\pi \left( k+{ {k}_{0}} \right)\Delta { {f}_{\text{RA}}}\left( t-{ {N}_{\text{CP},l}}\cdot { {T}_{\text{s}}} \right)}}}</script><p>其中$0\le t&lt;\left( { {N}_{\text{u}}}+N_{\text{CP},l}^{\mu } \right){ {T}_{\text{s}}}$且${k}’=k+\left\lfloor { { {L}_{\text{RA}}}}/{2}\; \right\rfloor $。</p><p>一个子帧内PRACH前导的起始位置由$t_{\text{start}}^{\text{RA}}$给定，假设子帧始于$t=0$，其中</p><ul><li>对于$\Delta { {f}_{\text{RA}}}\in \left\{ 15,30,60,120 \right\}\text{ kHz}$，有$t_{\text{start}}^{\text{RA}}=t_{\text{start},l}^{\mu }$ for some $l$</li></ul><p>${ {L}_{\text{RA}}}$和${ {N}_{\text{u}}}$在3.3.3节给定，并且有${ {N}_{\text{CP},l}}=N_{\text{CP}}^{\text{RA}}+n\cdot 16\kappa $，其中</p><ul><li>对于$\Delta { {f}_{\text{RA}}}\in \left\{ 1.25,5 \right\}\text{ kHz}$，$n=0$</li><li>对于$\Delta { {f}_{\text{RA}}}\in \left\{ 15,30,60,120 \right\}\text{ kHz}$，$n$ is the number of times the interval $\left[ t_{\text{start}}^{\text{RA}},t_{\text{start}}^{\text{RA}}+\left( N_{\text{u}}^{\text{RA}}+N_{\text{CP}}^{\text{RA}} \right){ {T}_{\text{s}}} \right]$ overlaps with either time instance 0 or time instance $\left( {\Delta { {f}_{\max }}{ {N}_{\text{f}}}}/{500}\; \right)\cdot { {T}_{\text{s}}}=0.5\text{ ms}$ in a subframe</li></ul><h2 id="调制和上变频"><a href="#调制和上变频" class="headerlink" title="调制和上变频"></a>调制和上变频</h2><p><br>对于天线端口$p$和子载波间隔配置$\mu$，复值OFDM基带信号调制和上变频至载频${ {f}_{0}}$</p><script type="math/tex;mode=display">\operatorname{Re}\left\{ s_{l}^{(p,\mu )}\left( t \right)\cdot { {e}^{j2\pi { {f}_{0}}t}} \right\}</script><h1 id="上行链路"><a href="#上行链路" class="headerlink" title="上行链路"></a>上行链路</h1><p><br>为避免本页面过于冗长，<a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-ul/">上行链路另起一页</a>。</p><h1 id="下行链路"><a href="#下行链路" class="headerlink" title="下行链路"></a>下行链路</h1><p><br>为避免本页面过于冗长，<a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-dl/">下行链路另起一页</a>。</p><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;帧结构与物理资源&quot;&gt;&lt;a href=&quot;#帧结构与物理资源&quot; class=&quot;headerlink&quot; title=&quot;帧结构与物理资源&quot;&gt;&lt;/a&gt;帧结构与物理资源&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;&lt;br&gt;在本规范中，除非另有说明，在时域中的各个域的大小表示为若干时间单位${ {T}_{\text{s}}}={1}/{\left( \Delta { {f}_{\max }}\cdot { {N}_{\text{f}}} \right)}\;$，其中$\Delta { {f}_{\max }}=480\cdot { {10}^{3}}$ Hz，${ {N}_{\text{f}}}=4096$。常量$\kappa ={\Delta { {f}_{\text{max}}}{ {N}_{\text{f}}}}/{\left( \Delta { {f}_{\text{ref}}}{ {N}_{\text{f,ref}}} \right)}\;=64$，其中$\Delta { {f}_{\text{ref}}}=15\cdot { {10}^{3}}\text{ Hz}$，${ {N}_{\text{f,ref}}}=2048$。&lt;/p&gt;&lt;h2 id=&quot;波形参数&quot;&gt;&lt;a href=&quot;#波形参数&quot; class=&quot;headerlink&quot; title=&quot;波形参数&quot;&gt;&lt;/a&gt;波形参数&lt;/h2&gt;&lt;p&gt;&lt;br&gt;支持多种OFDM波形参数，如Table 4.2-1所示，其中载波带宽部分的$\mu$和CP由高层参数给定，下行链路由&lt;em&gt;DL_BWP_mu&lt;/em&gt;和&lt;em&gt;DL_BWP_cp&lt;/em&gt;给定，上行链路由&lt;em&gt;UL_BWP_mu&lt;/em&gt;和&lt;em&gt;UL_BWP_cp&lt;/em&gt;给定。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20170911/155018195.png&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>NR物理层提供的服务</title>
    <link href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/"/>
    <id>http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/</id>
    <published>2017-09-08T07:06:40.000Z</published>
    <updated>2017-09-12T02:46:32.525Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="物理层的服务和功能"><a href="#物理层的服务和功能" class="headerlink" title="物理层的服务和功能"></a>物理层的服务和功能</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><br>物理层向高层提供数据传输服务。</p><p>这些服务的接入是通过使用MAC子层的传输信道实现的。</p><p>传输块被定义为MAC层向物理层交付的数据，反之亦然。传输块在每一个TTI内进行交付（<em>注：这句话有待进一步讨论</em>）。</p><a id="more"></a><h2 id="L1功能概述"><a href="#L1功能概述" class="headerlink" title="L1功能概述"></a>L1功能概述</h2><p><br>正如3GPP TS 38.201规范中所提到的，物理层向高层提供数据传输服务。为了提供数据传输服务，物理层预期执行以下功能：</p><ul><li>传输信道的差错检测并指示给高层</li><li>传输信道的前向纠错（FEC）编码/解码</li><li>混合自动重传请求（HARQ）软合并</li><li>编码的传输信道到物理信道的速率匹配</li><li>编码的传输信道到物理信道的映射</li><li>物理信道的功率加权</li><li>物理信道的调制和解调</li><li>频域和时间同步</li><li>无线特性测量并指示给高层</li><li>MIMO天线处理</li><li>射频处理</li></ul><p>对于每个传输信道，L1功能的建模详见2.1和2.2节。</p><h1 id="UE的物理层模型"><a href="#UE的物理层模型" class="headerlink" title="UE的物理层模型"></a>UE的物理层模型</h1><p><br>5G-NR物理层模型capture以下与物理层相关的特性：</p><ul><li>向下传递到物理层或从物理层上传道高层数据的结构；</li><li>高层能够配置物理层的方法；</li><li>物理层向高层提供不同的指示（错误指示，信道质量指示等）</li></ul><h2 id="上行链路模型"><a href="#上行链路模型" class="headerlink" title="上行链路模型"></a>上行链路模型</h2><h3 id="上行共享信道"><a href="#上行共享信道" class="headerlink" title="上行共享信道"></a>上行共享信道</h3><p><br>上行共享信道（UL-SCH）传输的物理层模型基于PUSCH物理层处理的相应链路。如Figure 5.1.1-1所示，用蓝色突出显示的部分是高层可配置的。</p><ul><li>高层数据传到或来自物理层</li><li>CRC和传输块错误指示</li><li>FEC和速率匹配</li><li>数据调制</li><li>映射到物理资源</li><li>多天线处理</li><li>L1控制信令的支持</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/153200005.png" title="Figure 5.1.1-1: Physical-layer model for UL-SCH transmission"></p><h3 id="随机接入信道"><a href="#随机接入信道" class="headerlink" title="随机接入信道"></a>随机接入信道</h3><p><br>随机接入信道传输的物理层模型通过PRACH前导格式来表征。PRACH前导格式由循环前缀，前导和保护时间间隔组成。</p><h2 id="下行链路模型"><a href="#下行链路模型" class="headerlink" title="下行链路模型"></a>下行链路模型</h2><h3 id="下行共享信道"><a href="#下行共享信道" class="headerlink" title="下行共享信道"></a>下行共享信道</h3><p><br>下行共享信道传输的物理层模型基于PDSCH物理层处理的相应链路。如Figure 5.2.1-1所示，用蓝色突出显示的部分是高层可配置的。</p><ul><li>高层数据传到或来自物理层</li><li>CRC和传输块错误指示</li><li>FEC和速率匹配</li><li>数据调制</li><li>映射到物理资源</li><li>多天线处理</li><li>L1控制信令的支持</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/153239209.png" title="Figure 5.2.1-1: Physical-layer model for DL-SCH transmission"></p><h3 id="广播信道"><a href="#广播信道" class="headerlink" title="广播信道"></a>广播信道</h3><p><br>广播信道传输的物理层模型由一个固定预定义的传输格式来表征。BCH每80ms一个传输块。广播信道的物理层模型基于PBCH物理层处理的相应链路，如Figure 5.2.2-1所示。</p><ul><li>高层数据传到或来自物理层</li><li>CRC和传输块错误指示</li><li>FEC和速配匹配</li><li>数据调制</li><li>映射到物理资源</li><li>多天线处理</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/153353556.png" title="Figure 5.2.2-1: Physical-layer model for BCH transmission"></p><h3 id="寻呼信道"><a href="#寻呼信道" class="headerlink" title="寻呼信道"></a>寻呼信道</h3><h1 id="Parallel-transmission-of-simultaneous-Physical-channels-and-SRS"><a href="#Parallel-transmission-of-simultaneous-Physical-channels-and-SRS" class="headerlink" title="Parallel transmission of simultaneous Physical channels and SRS"></a>Parallel transmission of simultaneous Physical channels and SRS</h1><p><br>This clause describes the requirements from the UE to send and receive on multiple Physical and Transport Channels and SRS simultaneously depending on the service capabilities and requirements.</p><h2 id="上行链路"><a href="#上行链路" class="headerlink" title="上行链路"></a>上行链路</h2><h2 id="下行链路"><a href="#下行链路" class="headerlink" title="下行链路"></a>下行链路</h2><h1 id="物理层提供的测量"><a href="#物理层提供的测量" class="headerlink" title="物理层提供的测量"></a>物理层提供的测量</h1><h2 id="UE测量"><a href="#UE测量" class="headerlink" title="UE测量"></a>UE测量</h2><p><br>UE测量的列表和定义提供在3GPP TS 38.215中。</p><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;物理层的服务和功能&quot;&gt;&lt;a href=&quot;#物理层的服务和功能&quot; class=&quot;headerlink&quot; title=&quot;物理层的服务和功能&quot;&gt;&lt;/a&gt;物理层的服务和功能&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;&lt;br&gt;物理层向高层提供数据传输服务。&lt;/p&gt;&lt;p&gt;这些服务的接入是通过使用MAC子层的传输信道实现的。&lt;/p&gt;&lt;p&gt;传输块被定义为MAC层向物理层交付的数据，反之亦然。传输块在每一个TTI内进行交付（&lt;em&gt;注：这句话有待进一步讨论&lt;/em&gt;）。&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>NR物理层概述</title>
    <link href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/"/>
    <id>http://marshallcomm.cn/2017/09/08/nr-v100-general-description/</id>
    <published>2017-09-08T06:40:21.000Z</published>
    <updated>2017-09-12T02:44:40.036Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><p><br>5G-NR物理层协议由如下7个规范构成。</p><ul><li>[1] <a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">3GPP TS 38.201: “NR物理层概述”</a></li><li>[2] <a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">3GPP TS 38.202: “NR物理层提供的服务”</a></li><li>[3] <a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">3GPP TS 38.211: “NR物理信道与调制”</a></li><li>[4] <a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">3GPP TS 38.212: “NR复用与信道编码”</a></li><li>[5] <a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">3GPP TS 38.213: “NR物理层过程（控制）”</a></li><li>[6] 3GPP TS 38.214: “NR物理层过程（数据）”</li><li>[7] 3GPP TS 38.215: “NR物理层测量”</li></ul><p>其中[1]是概述性文档，其他六个是具体规范文档。与LTE规范不同的是，物理层提供的服务单独为一个文档，物理层过程一分为二，分为控制和数据两个部分。</p><a id="more"></a><p>本文的依据是 3GPP TS 38.200系列2017-09版本。</p><h1 id="NR物理层概述"><a href="#NR物理层概述" class="headerlink" title="NR物理层概述"></a>NR物理层概述</h1><h2 id="与其他层的关系"><a href="#与其他层的关系" class="headerlink" title="与其他层的关系"></a>与其他层的关系</h2><h3 id="总体协议架构"><a href="#总体协议架构" class="headerlink" title="总体协议架构"></a>总体协议架构</h3><p><br>本部分描述的无线接口指用户终端（UE）和网络之间的接口，包括L1，L2和L3。3GPP TS 38.200系列规范对L1（物理层）进行描述。L2和L3的描述见TS 38.300系列规范。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/152910916.png" title="图 1 无线接口协议体系结构"></p><p>图1显示的是与物理层相关的NR无线接口协议体系结构。物理层连接L2的媒体介入控制子层（MAC）、以及L3的无线资源控制（RRC）层。图中不同层/子层之间的圈表示服务接入点（SAPs）。物理层向MAC层提供传输信道。传输信道的特性通过信息在无线接入口上的传输方式确定。MAC向L2的无线链路控制（RLC）子层提供不同的逻辑信道。逻辑信道的特性通过传输信息的类型确定。</p><h3 id="提供给上层的服务"><a href="#提供给上层的服务" class="headerlink" title="提供给上层的服务"></a>提供给上层的服务</h3><p><br>物理层向高层提供数据传输服务，这些服务的接入是通过使用MAC子层的传输信道实现的。具体内容详见[2]。</p><h2 id="物理层概述"><a href="#物理层概述" class="headerlink" title="物理层概述"></a>物理层概述</h2><h3 id="多址接入"><a href="#多址接入" class="headerlink" title="多址接入"></a>多址接入</h3><p><br>NR物理层多址接入方案基于OFDM+CP。上行链路支持DFT-s-OFDM（Discrete Fourier Transform-spread-OFDM）+CP。为支持成对和不成对的频谱，FDD和TDD都被支持。</p><p>L1基于资源块以带宽不可知的方式定义，从而允许NR L1适用于不同频谱分配。一个资源块（RB）以给定的子载波间隔占用12个子载波。</p><p>一个无线帧时域为10ms，由10个子帧组成，每个子帧为1ms。一个子帧包含1个或多个相邻的时隙，每个时隙有7或14个相邻的符号。帧结构的进一步细节详见[2]。</p><h3 id="物理信道与调制"><a href="#物理信道与调制" class="headerlink" title="物理信道与调制"></a>物理信道与调制</h3><p><br>下行定义的物理信道如下：</p><ul><li>物理下行共享信道（PDSCH）</li><li>物理下行控制信道（PDCCH）</li><li>物理广播信道（PBCH）</li></ul><p>上行定义的物理信道如下：</p><ul><li>物理随机接入信道（PRACH）</li><li>物理上行共享信道（PUSCH）</li><li>物理上行控制信道（PUCCH）</li></ul><p>定义的信号包括：参考信号、主和辅同步信号</p><p>支持的调制方式有：</p><ul><li>下行支持QPSK，16QAM，256QAM</li><li>上行支持：对于OFDM+CP有QPSK, 16QAM, 64QAM，256QAM；对于DFT-s-OFDM+CP有π/2-BPSK, QPSK, 16QAM, 64QAM，256QAM</li></ul><h3 id="信道编码与交织"><a href="#信道编码与交织" class="headerlink" title="信道编码与交织"></a>信道编码与交织</h3><p><br>传输块的信道编码方案采用准循环LDPC（quasi-cyclic LDPC）码，QC-LDPC采用2个BG（base graphs），每个BG 8个奇偶校验矩阵集合。One base graph is used for code blocks larger than a certain size or with initial transmission code rate higher than a threshold; otherwise, the other base graph is used. Before the LDPC coding for large transport blocks, the transport block is segmented into multiple code blocks. 对于比较大的传输块，在LDPC编码前要先传输块分割为多个码块。PBCH和控制信息的编码方案采用基于嵌套序列的极化码（Polar coding）。支持三种速配匹配方案：Puncturing, shortening and repetition are used for rate matching。信道编码方案的进一步细节详见[4]。</p><h3 id="物理层过程"><a href="#物理层过程" class="headerlink" title="物理层过程"></a>物理层过程</h3><p><br>涉及多个物理层过程。物理层所涵盖的此类过程有：</p><ul><li>小区搜索</li><li>功率控制</li><li>上行同步和上行定时控制</li><li>随机接入相关过程</li><li>HARQ相关过程</li><li>波束管理和CSI相关过程</li></ul><p>通过对物理层资源在频域、时域和功率域的控制，隐式地支持干扰协调。</p><h3 id="物理层测量"><a href="#物理层测量" class="headerlink" title="物理层测量"></a>物理层测量</h3><p><br>无线特性由UE和网络测量并上报到高层。这些措施包括，例如，测量频率内和频率间切换、RAT间切换，定时测量，RRM测量。</p><p>对RAT间切换的策略定义为对切换到E-UTRA的支持。</p><h1 id="物理层规范的文档结构"><a href="#物理层规范的文档结构" class="headerlink" title="物理层规范的文档结构"></a>物理层规范的文档结构</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><br>物理层规范由一个概述文档（TS 38.201）和六个具体文档（TS 38.202和38.211-38.215）构成。通过高层的关联，物理层各部分规范之间的关系如图2所示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/153052684.png" title="图 2 物理层规范各部分之间的关系"></p><h2 id="TS-38-201：物理层概述"><a href="#TS-38-201：物理层概述" class="headerlink" title="TS 38.201：物理层概述"></a>TS 38.201：物理层概述</h2><p><br>描述范围：</p><ul><li>物理层的内容</li><li>在何处查找信息</li></ul><h2 id="TS-38-202：物理层提供的服务"><a href="#TS-38-202：物理层提供的服务" class="headerlink" title="TS 38.202：物理层提供的服务"></a>TS 38.202：物理层提供的服务</h2><p><br>描述范围是物理层提供的服务，规定以下内容：</p><ul><li>物理层的服务和功能；</li><li>UE的物理层模型；</li><li>物理信道和SRS的并行传输；</li><li>物理层提供的测量</li></ul><h2 id="TS-38-211：物理层信道与调制"><a href="#TS-38-211：物理层信道与调制" class="headerlink" title="TS 38.211：物理层信道与调制"></a>TS 38.211：物理层信道与调制</h2><p><br>该部分确立物理层信道的特性，物理层信号的生成和调制，规定以下内容：</p><ul><li>上行和下行物理信道的定义；</li><li>帧结构和物理资源；</li><li>调制映射（BPSK，QPSK等）</li><li>OFDM符号生成；</li><li>加扰、调制和上变频；</li><li>层映射和预编码；</li><li>上行和下行物理共享信道；</li><li>上行和下行参考信号；</li><li>物理随机接入信道；</li><li>主、辅同步信号</li></ul><h2 id="TS-38-212：复用和信道编码"><a href="#TS-38-212：复用和信道编码" class="headerlink" title="TS 38.212：复用和信道编码"></a>TS 38.212：复用和信道编码</h2><p><br>该部分描述传输信道和控制信道数据的处理，包括复用技术，信道编码和交织，规定以下内容：</p><ul><li>信道编码方案；</li><li>速率匹配；</li><li>上行传输信道和L1/L2控制信息的编码；</li><li>下行传输信道和L1/L2控制信息的编码</li></ul><h2 id="TS-38-213：物理层过程（控制）"><a href="#TS-38-213：物理层过程（控制）" class="headerlink" title="TS 38.213：物理层过程（控制）"></a>TS 38.213：物理层过程（控制）</h2><p><br>该部分确立用于控制的物理层过程的特性，规定以下内容：</p><ul><li>同步过程；</li><li>上行功率控制；</li><li>随机接入过程；</li><li>用于报告控制信息的UE过程；</li><li>用于接收控制信息的UE过程</li></ul><h2 id="TS-38-214物理层过程（数据）"><a href="#TS-38-214物理层过程（数据）" class="headerlink" title="TS 38.214物理层过程（数据）"></a>TS 38.214物理层过程（数据）</h2><p><br>该部分确立用于数据的过程层过程的特性，规定以下内容：</p><ul><li>功率控制；</li><li>物理下行共享信道相关过程；</li><li>物理上行共享信道相关过程；</li></ul><h2 id="TS-38-215物理层测量"><a href="#TS-38-215物理层测量" class="headerlink" title="TS 38.215物理层测量"></a>TS 38.215物理层测量</h2><p><br>该部分确立物理层测量的特性，规定以下内容：</p><ul><li>UE/NG-RAN的控制测量；</li><li>对NR能力的测量</li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;br&gt;5G-NR物理层协议由如下7个规范构成。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;[1] &lt;a href=&quot;http://marshallcomm.cn/2017/09/08/nr-v100-general-description/&quot;&gt;3GPP TS 38.201: “NR物理层概述”&lt;/a&gt;&lt;/li&gt;&lt;li&gt;[2] &lt;a href=&quot;http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/&quot;&gt;3GPP TS 38.202: “NR物理层提供的服务”&lt;/a&gt;&lt;/li&gt;&lt;li&gt;[3] &lt;a href=&quot;http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/&quot;&gt;3GPP TS 38.211: “NR物理信道与调制”&lt;/a&gt;&lt;/li&gt;&lt;li&gt;[4] &lt;a href=&quot;http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/&quot;&gt;3GPP TS 38.212: “NR复用与信道编码”&lt;/a&gt;&lt;/li&gt;&lt;li&gt;[5] &lt;a href=&quot;http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/&quot;&gt;3GPP TS 38.213: “NR物理层过程（控制）”&lt;/a&gt;&lt;/li&gt;&lt;li&gt;[6] 3GPP TS 38.214: “NR物理层过程（数据）”&lt;/li&gt;&lt;li&gt;[7] 3GPP TS 38.215: “NR物理层测量”&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;其中[1]是概述性文档，其他六个是具体规范文档。与LTE规范不同的是，物理层提供的服务单独为一个文档，物理层过程一分为二，分为控制和数据两个部分。&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（19）当我们谈论design-snr时我们在谈论什么</title>
    <link href="http://marshallcomm.cn/2017/08/26/polar-code-19-design-snr/"/>
    <id>http://marshallcomm.cn/2017/08/26/polar-code-19-design-snr/</id>
    <published>2017-08-26T08:26:26.000Z</published>
    <updated>2017-08-26T08:33:37.136Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>本文对论文“A Comparative Study of Polar Code Constructions for the AWGN Channel”进行解读。</p><h1 id="极化码构造"><a href="#极化码构造" class="headerlink" title="极化码构造"></a>极化码构造</h1><p><br>论文首先锁定了讨论的范围是<strong>极化码构造</strong>。极化码是线性分组码，极化码的码长N一旦确定，其生成矩阵随之确定；此时，比特信道的选择就完全地定义了一个极化码，不同的比特信道位置，其对应的编码结果不同。因此将比特信道的选择过程称为<strong>“极化码构造”（polar code construction）</strong>。</p><a id="more"></a><p>极化码构造对于有限码长的最佳性能至关重要。极化码的构造在理论上有明确地定义，无非是从N个比特信道中选择最可靠的K个子信道。但现实的挑战是，你怎么知道哪些子信道是最可靠的？——极化信道的可靠性估计。于是引出了许多估计方法，如巴氏参数界法、蒙特卡洛估计法、TPM估计法、高斯近似法。</p><h1 id="design-snr"><a href="#design-snr" class="headerlink" title="design-snr"></a>design-snr</h1><p><br>极化码有个重要特性就是它的<strong>非普遍性（non-universality）</strong>。不同的极化码在给定的不同SNR下是不同的。实际的无线信道，其SNR是可能变化的。但我们不希望编码总是跟着信道SNR变化。因此我们希望有一个“一劳永逸”的解决方案，只设定一个SNR值，让它能够适用于一定范围内变化的SNR。这个SNR值被称为design-snr。</p><p>那么design-snr值究竟是多少呢？它等于多少时才使极化码性能达到最优呢？能够使极化码性能最优的design-snr就是the best design-snr。本论文的目的，就是找到the best design-snr。</p><p>作者指出极化码性能取决于三个因素，码率、码长和码构造算法。这意味着不同的码率、不同的码长、不同的码构造算法，the best design-snr也可能不同。再进一步明确本论文的目的，在规定的码率和码长（R=0.5，N=2048）下，分别找到不同码构造算法对应的最优design-snr。</p><h1 id="the-best-design-snr"><a href="#the-best-design-snr" class="headerlink" title="the best design-snr"></a>the best design-snr</h1><p><br>怎么找？作者给出了一个搜索算法，其实就是试数法。假如我们感兴趣的SNR范围是{S1,S2,…,Sm}。令design-snr依次取每一个Si值，看看在哪个Si下，对应的码构造算法性能最优。使性能最优的那个Si值就是我们要找的the best design-snr。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170826/163041818.png" alt="mark"></p><p>如上图所示，高斯近似法在N=2048，R=0.5的条件下，性能最好的是那条蓝色实线，其对应的design-snr=-1.5917dB。这就是要找的the best design-snr。</p><p>也就是说，在感兴趣的SNR={-1.5917,0,1,2,…,10}dB中，使高斯近似法性能达到最优的design-snr=-1.5917dB。So, -1.5917 dB is the best design-snr for GA.</p><p>反过来看，这个最佳design-snr对大多范围内的SNR有效呢？上图的横坐标是EbN0，纵坐标是BER。如果要使BER性能达到10-3以下，在给定最佳design-snr下，EbN0大约只需2.4dB。</p><p>对需要满足的BER性能指标，所需EbN0越小越好。而众多感兴趣的SNR值中，只有在最佳design-snr下，所需EbN0是最小的。换句话说，如果所用的 design-snr不是最佳design-snr，要满足一定的BER性能，所需要的EbN0就要更大一些，这意味着对信道条件的要求更苛刻一些。</p><p>$SNR=\frac{ { {E}_{s}}}{ { {N}_{0}}}=R\cdot \frac{ { {E}_{b}}}{ { {N}_{0}}}$</p><p>写成dB形成：</p><p>$SNR\left( dB \right)=EbN0\left( dB \right)+10\log 10\left( R \right)$</p><p>$SNR\left( dB \right)=2.4+10\log 10\left( 0.5 \right)=-0.6dB$</p><p>也就是说，对于高斯近似法，在最佳design-snr=-1.5917dB下，要达到BER=10-3的性能，所需SNR只要-0.6dB。换言之，对于高斯近似法，要达到BER=10-3的性能，对于N=2048，R=0.5，只要信道SNR大于-0.6dB，这个最佳design-snr值就是适用的。</p><p>如此看来，design-snr意义非凡。</p><h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p><br>[1] Vangala H, Viterbo E, Hong Y. A comparative study of polar code constructions for the AWGN channel[J]. arXiv preprint arXiv:1501.02473, 2015.</p><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/08/24/polar-code-18-select-bitchannel/">Polar Code（18）比特信道的选择</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;本文对论文“A Comparative Study of Polar Code Constructions for the AWGN Channel”进行解读。&lt;/p&gt;&lt;h1 id=&quot;极化码构造&quot;&gt;&lt;a href=&quot;#极化码构造&quot; class=&quot;headerlink&quot; title=&quot;极化码构造&quot;&gt;&lt;/a&gt;极化码构造&lt;/h1&gt;&lt;p&gt;&lt;br&gt;论文首先锁定了讨论的范围是&lt;strong&gt;极化码构造&lt;/strong&gt;。极化码是线性分组码，极化码的码长N一旦确定，其生成矩阵随之确定；此时，比特信道的选择就完全地定义了一个极化码，不同的比特信道位置，其对应的编码结果不同。因此将比特信道的选择过程称为&lt;strong&gt;“极化码构造”（polar code construction）&lt;/strong&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/categories/Polar-Code/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（18）比特信道的选择</title>
    <link href="http://marshallcomm.cn/2017/08/24/polar-code-18-select-bitchannel/"/>
    <id>http://marshallcomm.cn/2017/08/24/polar-code-18-select-bitchannel/</id>
    <published>2017-08-24T08:39:07.000Z</published>
    <updated>2017-08-26T08:40:01.892Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>本文源于<a href="http://marshallcomm.cn/2017/03/13/polar-code-6-sc-decoder/">《Polar Code（6）SC译码算法》</a>评论区的讨论，受到启发后重新梳理了关于巴氏参数法、高斯近似、degign-snr的认识。</p><h1 id="极化码构造原则"><a href="#极化码构造原则" class="headerlink" title="极化码构造原则"></a>极化码构造原则</h1><p><br>Arikan在论文[1]指出极化码构造原则：</p><blockquote><p><strong>Polar code construction rule</strong>. To construct an $\left( N,K \right)$ polar code for a B-DMC $W$, we select $A$ as the subset of indices $A\subset \left\{ 1,…,N \right\}$ such that $\left| A \right|=K$ and for each $i\in A$, the value $Z\left( W_{N}^{\left( i \right)} \right)$ is among the smallest $K$ values in the set $\left\{ Z\left( W_{N}^{\left( i \right)} \right):j=1,…,N \right\}$. The choice of the frozen vector $f_{1}^{\left| { {A}^{c}} \right|}$ is unspecified; any choice $\left( A,f_{1}^{\left| { {A}^{c}} \right|} \right)$ defines a polar code.</p></blockquote><a id="more"></a><p>巴氏参数$Z\left( W \right)$，对任意B-DMC $W$ 定义为：</p><script type="math/tex;mode=display">\begin{align}
Z\left( W \right)=\sum\limits_{y\in Y}{\sqrt{W\left( y|0 \right)W\left( y|1 \right)}}
\end{align}</script><p>$Z\left( W \right)$与信道容量$I\left( W_{N}^{\left( i \right)} \right)$成反比，$I\left( W_{N}^{\left( i \right)} \right)$越大，$Z\left( W_{N}^{\left( i \right)} \right)$越小。信道极化的特性是，一部分子信道的容量趋于1，一部分子信道的容量趋于0。构造极化码时自然要选择容量较大的子信道来放置信息比特，也就是选择$Z\left( W_{N}^{\left( i \right)} \right)$最小的$K$个子信道。这就是Arikan定义的极化码构造原则。但问题是巴氏参数如何计算？</p><h1 id="巴氏参数的计算"><a href="#巴氏参数的计算" class="headerlink" title="巴氏参数的计算"></a>巴氏参数的计算</h1><p><br>在B-DMC $W$ 下，有结论：</p><script type="math/tex;mode=display">\begin{align}
Z\left( W_{2N}^{\left( 2i-1 \right)} \right)\le 2Z\left( W_{N}^{\left( i \right)} \right)-Z{ {\left( W_{N}^{\left( i \right)} \right)}^{2}}
\end{align}</script><script type="math/tex;mode=display">\begin{align}
Z\left( W_{2N}^{\left( 2i \right)} \right)\text{=}Z{ {\left( W_{N}^{\left( i \right)} \right)}^{2}}
\end{align}</script><p>当且仅当$W$是BEC时，式（2）等号成立。</p><p>在BEC下，信道转移概率$W_{N}^{\left( i \right)}$可由BEC的删除概率得到：</p><script type="math/tex;mode=display">\begin{align}
\varepsilon _{2k}^{\left( 2j-1 \right)}=2\varepsilon _{k}^{\left( j \right)}-{ {\left[ \varepsilon _{k}^{\left( j \right)} \right]}^{2}}
\end{align}</script><script type="math/tex;mode=display">\begin{align}
\varepsilon _{2k}^{\left( 2j \right)}\text{=}{ {\left[ \varepsilon _{k}^{\left( j \right)} \right]}^{2}}
\end{align}</script><p>递归初始值为$\varepsilon _{1}^{\left( 1 \right)}=\varepsilon $。</p><p>注意此时信道条件已经由B-DMC缩小到BEC。$Z\left( W_{N}^{\left( i \right)} \right)$由$W_{N}^{\left( i \right)}$得到，而$W_{N}^{\left( i \right)}$由$\varepsilon $得到。<strong>那么$\varepsilon $从何而来？答案是自己给定。</strong>这和实际不相符啊，在实际的信道编码中怎么自己给定？这个问题先存疑，先叙述后面的内容。</p><p>只有在BEC时，才能按照式（1）求解巴氏参数。不是BEC的情况下，式（2）是不等式，没办法精确求解。这就是为什么说巴氏参数法不适用于非BEC信道。但此路不通，可以绕着走。</p><h1 id="巴氏参数界"><a href="#巴氏参数界" class="headerlink" title="巴氏参数界"></a>巴氏参数界</h1><p><br>观察不等式（2），$Z\left( W_{2N}^{\left( 2i-1 \right)} \right)$的上界是$2Z\left( W_{N}^{\left( i \right)} \right)-Z{ {\left( W_{N}^{\left( i \right)} \right)}^{2}}$,只有当BEC信道时达到上界。换句话说，式（2~3）表达的是巴氏参数界。式（1~5）是按正向思维的推导，得出了巴氏参数界。下面就是逆向思维的应用了。巴氏参数界有如此良好的特性，这正是我们所需要的。</p><p>不用搭梯子，直接空降。直接利用巴氏参数界的结论，是对巴氏参数计算的一种简化，跳出了BEC的限制条件，让它适用于更广泛的信道。这就是论文[2]关于PCC-0所说的：</p><blockquote><p>A pair of <strong>upper bounds</strong> on the Bhattacharyya parameters of bit-channels evolve as simply as $\left\{ z,z \right\}\to \left\{ 2z-{ {z}^{2}},{ {z}^{2}} \right\}$ at each polarizing transform $F$. Due to its <strong>simplicity</strong>, this construction has been widely used, and produced good polar codes.</p></blockquote><p>看来重要的是利用这个结论，使计算得到简化。否则，按正向思维从式（1）到式（5），对于其他信道而言，计算不等式将是非常麻烦的。</p><p>有文献说“巴氏参数”只适用于BEC信道，这是对的。脱离了BEC，等号就是不能成立，就是不能计算。正向思维受阻。</p><p>有文献说“巴氏参数界”适用于BWAGN信道，这也是对的。直接利用结论，对巴氏参数的计算进行简化，照样可以计算。简化思维突破限制。</p><p>这两种说法都对，但说的不是一回事。后者是前者的演进（evolution）。</p><h1 id="高斯近似"><a href="#高斯近似" class="headerlink" title="高斯近似"></a>高斯近似</h1><p><br>比特信道的选择，除了利用巴氏参数，更广泛采用的是高斯近似法。三个递归式：</p><script type="math/tex;mode=display">\begin{align}
m_{2N}^{\left( 2i\text{-}1 \right)}={ {\varphi }^{-1}}\left( 1-{ {\left[ 1-\varphi \left( m_{N}^{\left( i \right)} \right) \right]}^{2}} \right)
\end{align}</script><script type="math/tex;mode=display">\begin{align}
m_{2N}^{\left( 2i \right)}=2m_{N}^{\left( i \right)}
\end{align}</script><script type="math/tex;mode=display">\begin{align}
m_{1}^{\left( 1 \right)}={2}/{ { {\sigma }^{2}}}\;
\end{align}</script><p>这里有两个高斯随机变量，一个是原始信道，一个LLR。LLR是所要构造的高斯随机变量，满足方差是均值的2倍。即LLR的方差由其均值m得到，其均值m由式（6~8）递归得到。其中${ {\sigma }^{2}}$是原始信道的方差。<strong>那么${ {\sigma }^{2}}$从何而来？答案是自己给定。</strong></p><p>前面说巴氏参数计算的时候，$\varepsilon $就需要自己给定；而高斯近似法，${ {\sigma }^{2}}$也需要自己给定。这些参数共同点，都是原始信道的参数。极化码必须要事先假定原始信道参数，在每个瞬间，无线信道参数都可能不同，使用不同原始信道参数得到的极化码也不同。这就是极化码的特点。因此论文[2]说：</p><blockquote><p>An important characteristic of polar codes is their <strong>non-universality</strong>. That is, different polar codes are generated depending on the specified value of signal-to-noise ratio (SNR), known as the <strong>design-SNR</strong>. A change in operating SNR is possible in practice but a change in code according to SNR is not desirable. Therefore we wish to construct a polar code at one design-SNR and use it for a range of possible SNRs.</p></blockquote><p>在实际信道中SNR就是变化的，但根据每一种SNR来改变编码则是困难的。我们不希望由于无线信道的不断变化而在编码时做出频繁地调整，因此作者提出在design-SNR的框架下，能够实现“一对多”，即一个design-SNR值能够适用于在一定范围内变化的SNR。这篇论文的目的就是找到最优的design-SNR值。</p><h1 id="design-snr"><a href="#design-snr" class="headerlink" title="design-snr"></a>design-snr</h1><p><br>design-snr用于极化码的设计，它和实际信道的SNR不是一回事，而是“一对多”的关系。希望用一个design-snr适配于一定范围的SNR。design-snr有如下定义：</p><script type="math/tex;mode=display">\begin{align}
design-snr=R\cdot \frac{ { {E}_{b}}}{ { {N}_{0}}}=\frac{K}{N}\cdot \frac{ { {E}_{b}}}{ { {N}_{0}}}
\end{align}</script><p>文献[2]在design-snr的框架下，分别对以下4种算法重新进行了定义：</p><blockquote><p>Algorithm PCC-0 : The Bhattacharyya bounds<br>Algorithm PCC-1 : The Monte-Carlo estimation<br>Algorithm PCC-2 : The full TPM estimation<br>Algorithm PCC-3 : The Gaussian approximation</p></blockquote><p>design-snr不是通过计算得来的，而是直接给定。作者指出，最优design-snr是码率、码长和构造算法的函数。得到最优design-snr并不容易，作者是通过搜索算法进行大量的仿真试验，得到了这四种构造算法分别对应的最优design-snr：</p><blockquote><p>PCC-0 @ 0dB<br>PCC-1 @ 1dB<br>PCC-2 @ -1.5917dB<br>PCC-3 @ -1.5917dB</p></blockquote><p>也就是说，design-snr是基于大量仿真的经验值。在各自最优的design-snr下，四种算法的BER性能非常接近，性能都非常好。根据这个经验值，使用不同的构造方法，选择对应的最优design-snr值即可。</p><p>这是个“一劳永逸”的办法，一次性完成比特信道的选择，此后无论信道SNR环境如何变化（当然也是在一定范围内变化），都按照这个最优design-snr来安排比特位置。当选用其中一种算法后，决定design-snr的因素就只剩下码率和码长。在实际编码中，可在发送端和接收端都建立一张二维列表，根据不同的码率和码长，选用相应的design-snr。当然这张表格中的值都是基于大量仿真结果的经验值。</p><p>把SNR与编码的强相关变成弱相关，直至变成不相关。把极化码的非通用性向着通用性方向改造。这是对极化编码非常重要的简化。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><br>design-snr和高斯近似是一个比较好的极化码构造方案。你只需要考虑把${ {\sigma }^{2}}$构造为design-snr的函数，设定了一个design-snr，就意味着设定了${ {\sigma }^{2}}$。</p><p>论文[2]的重要意义在于，design-snr可以与实际信道的SNR解耦。起初极化码的确要考虑实际信道的SNR，但现在有了design-snr，那么在比特信道选择阶段就可以不必过于关注SNR的变化。这张design-snr表格的值只与码率和码长有关，但这些值是基于大量仿真的经验值。论文[2]仅给出了一种码率和码长（R=0.5，N=2048）条件下的<strong>最优design-snr</strong>。不同的码率和码长，其值应该是有所不同的。</p><p>design-snr已经是相当程度上的简化操作，让编码和译码器不必每时每刻都关注SNR，而只关注design-snr。</p><h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p><br>[1] Arikan E. Channel polarization: A method for constructing capacity-achieving codes[C]//Information Theory, 2008. ISIT 2008. IEEE International Symposium on. IEEE, 2008: 1173-1177.<br>[2] Vangala H, Viterbo E, Hong Y. A comparative study of polar code constructions for the AWGN channel[J]. arXiv preprint arXiv:1501.02473, 2015.</p><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/03/13/polar-code-6-sc-decoder/">Polar Code（6）SC译码算法</a><br><a href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">Polar Code（8）高斯近似</a><br><a href="http://marshallcomm.cn/2017/08/26/polar-code-19-design-snr/">Polar Code（19）当我们谈论design-snr时我们在谈论什么</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;本文源于&lt;a href=&quot;http://marshallcomm.cn/2017/03/13/polar-code-6-sc-decoder/&quot;&gt;《Polar Code（6）SC译码算法》&lt;/a&gt;评论区的讨论，受到启发后重新梳理了关于巴氏参数法、高斯近似、degign-snr的认识。&lt;/p&gt;&lt;h1 id=&quot;极化码构造原则&quot;&gt;&lt;a href=&quot;#极化码构造原则&quot; class=&quot;headerlink&quot; title=&quot;极化码构造原则&quot;&gt;&lt;/a&gt;极化码构造原则&lt;/h1&gt;&lt;p&gt;&lt;br&gt;Arikan在论文[1]指出极化码构造原则：&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Polar code construction rule&lt;/strong&gt;. To construct an $\left( N,K \right)$ polar code for a B-DMC $W$, we select $A$ as the subset of indices $A\subset \left\{ 1,…,N \right\}$ such that $\left| A \right|=K$ and for each $i\in A$, the value $Z\left( W_{N}^{\left( i \right)} \right)$ is among the smallest $K$ values in the set $\left\{ Z\left( W_{N}^{\left( i \right)} \right):j=1,…,N \right\}$. The choice of the frozen vector $f_{1}^{\left| { {A}^{c}} \right|}$ is unspecified; any choice $\left( A,f_{1}^{\left| { {A}^{c}} \right|} \right)$ defines a polar code.&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/categories/Polar-Code/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（17）高斯近似（2）</title>
    <link href="http://marshallcomm.cn/2017/08/04/polar-code-17-gaussian-approximation2/"/>
    <id>http://marshallcomm.cn/2017/08/04/polar-code-17-gaussian-approximation2/</id>
    <published>2017-08-04T07:51:43.000Z</published>
    <updated>2017-08-24T08:39:38.966Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>“假设全零发送”，这个看似简单以至于在许多论文里都一笔带过的假设，却引发了最近的一段思考。这个话题源于<a href="http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/">《Polar Code（4）编码之极化信道可靠性估计》</a>一文评论区的讨论。这段讨论是十分有益的，并把这一话题不断地引向了深入。</p><h1 id="由个别到一般"><a href="#由个别到一般" class="headerlink" title="由个别到一般"></a>由个别到一般</h1><p><br>从基本的高斯信道说起，对于一个BAWGN信道，其接收符号$y$表示为：</p><script type="math/tex;mode=display">\begin{align}
y=s+z
\end{align}</script><p>其中$z$为服从$N\left( 0,{ {\sigma }^{2}} \right)$的高斯白噪声，$s$为调制符号，调制方式采用BPSK。$s=1-2x$或者$s=2x-1$取决于怎样定义BPSK映射。若定义BPSK映射规则为：</p><p>\begin{align}<br>s=\left\{ \begin{matrix}<br>+1, x=0 \\<br>-1, x=1 \\<br>\end{matrix} \right.<br>\end{align}</p><p>其中$x\in \left\{ 0,1 \right\}$为编码比特，则接收符号$y$重写为：</p><script type="math/tex;mode=display">\begin{align}
y=\left( 1-2x \right)+z
\end{align}</script><a id="more"></a><p>下面考察接收符号$y$的对数似然比LLR：</p><script type="math/tex;mode=display">\begin{align}
LLR\left( y \right)=\ln \frac{p\left( y|x=0 \right)}{p\left( y|x=1 \right)}=\ln \frac{\frac{1}{\sqrt{2\pi { {\sigma }^{2}}}}{ {e}^{-\frac{\left( y-\left( 1-2x \right) \right)}{2{ {\sigma }^{2}}}}}\left| x=0 \right.}{\frac{1}{\sqrt{2\pi { {\sigma }^{2}}}}{ {e}^{-\frac{\left( y-\left( 1-2x \right) \right)}{2{ {\sigma }^{2}}}}}|x=1}=\frac{2}{ { {\sigma }^{2}}}y
\end{align}</script><p>接收符号$y$是服从$N\left( a,{ {\sigma }^{2}} \right)$的高斯随机变量，$a=E\left( y \right)$为$y$的均值，而$LLR\left( y \right)$也是一个高斯随机变量，其均值和方差取决于接收符号$y$的均值和方差。下面考察$y=\left( 1-2x \right)+z$的均值和方差。</p><p>现在已知：$E\left( z \right)=0,Var\left( z \right)={ {\sigma }^{2}}$。</p><h2 id="y的均值"><a href="#y的均值" class="headerlink" title="y的均值"></a>y的均值</h2><p><br><script type="math/tex">\begin{align}
E\left( y \right)=E\left( 1-2x \right)+E\left( z \right)=E\left( 1-2x \right)
\end{align}</script></p><p>目前$x$还是未知的，要想求出$E\left( y \right)$，就得进一步具体化，到现在就不得不做个假设了。其中一个最简单的假设就是，“假设全零发送”。于是$y$的均值为：</p><script type="math/tex;mode=display">\begin{align}
E\left( y \right)=E\left( 1-2x \right)=1
\end{align}</script><h2 id="y的方差"><a href="#y的方差" class="headerlink" title="y的方差"></a>y的方差</h2><p><br>在全零发送的假设下，$\left( 1-2x \right)$总是等于1，$z$在$y$中是唯一的变量，则</p><script type="math/tex;mode=display">\begin{align}
Var\left( y \right)=Var\left( z \right)={ {\sigma }^{2}}
\end{align}</script><p>现在已经得到$E\left( y \right)$和$Var\left( y \right)$，下面继续考察$LLR\left( y \right)$的均值和方差。</p><h2 id="LLR-y-的均值"><a href="#LLR-y-的均值" class="headerlink" title="LLR(y)的均值"></a>LLR(y)的均值</h2><p><br><script type="math/tex">\begin{align}
E\left[ LLR\left( y \right) \right]=E\left( \frac{2}{ { {\sigma }^{2}}}y \right)=\frac{2}{ { {\sigma }^{2}}}E\left( y \right)=\frac{2}{ { {\sigma }^{2}}}
\end{align}</script></p><h2 id="LLR-y-的方差"><a href="#LLR-y-的方差" class="headerlink" title="LLR(y)的方差"></a>LLR(y)的方差</h2><p><br><script type="math/tex">\begin{align}
Var\left[ LLR\left( y \right) \right]=Var\left( \frac{2}{ { {\sigma }^{2}}}y \right)={ {\left( \frac{2}{ { {\sigma }^{2}}} \right)}^{2}}Var\left( y \right)= & \frac{4}{ { {\sigma }^{4}}}\cdot { {\sigma }^{2}}=\frac{4}{ { {\sigma }^{2}}}
\end{align}</script></p><p>观察式（8）和（9），怎么这么巧：</p><p><br><script type="math/tex">\begin{align}
Var\left[ LLR\left( y \right) \right]=2E\left[ LLR\left( y \right) \right]
\end{align}</script></p><p>上式说明$LLR\left( y \right)$的方差是其均值的2倍。</p><p><strong>小结1</strong>：在式（2）所示的BPSK映射规则下，只有在“全零发送”的假设条件下，式（10）才成立。否则，假如把全零序列中某几个元素替换为1，变成混合的0/1序列，式（10）就不一定成立了。若1的个数大于0的个数，则$y$的均值将会是负值；若为全1序列，则$y$的均值为-1。</p><p>“全零发送”的假设作为一个特例，得到$LLR\left( y \right)$的方差是其均值的2倍的结论，有什么意义呢？个人认为，许多论文叙述这一段，是为了引出“高斯近似”。但以上的叙述都不是高斯近似，而是作为铺垫，作为利用高斯近似的引子。</p><p><strong>小结2</strong>：上文由全零发送的假设，得到了一个特例之下的结论：<strong>$LLR\left( y \right)$方差是其均值的2倍</strong>。这个结论好像在哪听说过，对，是高斯近似。高斯近似法脱胎于密度进化法，必然要满足密度进化法的对称条件，该对称条件可简化为${ {\sigma }^{2}}=2m$，即<strong>$LLR\left( y \right)$方差是其均值的2倍</strong>。一不小心，全零发送假设的特例下，满足了高斯近似的条件，如下图所示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170804/162218468.jpg" alt="mark"></p><p>这仅仅是个特例。这是由个别指向了一般规律，但反过来还不能成立。</p><h1 id="由一般到个别"><a href="#由一般到个别" class="headerlink" title="由一般到个别"></a>由一般到个别</h1><p><br>现在要想让这个一般规律适用于所有的事例，则需要另一个假设：<strong>令每个子信道的LLR都服从方差为均值2倍的高斯分布</strong>，即</p><p><br><script type="math/tex">\begin{align}
L_{N}^{\left( i \right)}\sim N\left( m_{N}^{\left( i \right)},2m_{N}^{\left( i \right)} \right)
\end{align}</script></p><p>其中，$m_{1}^{\left( 1 \right)}=\frac{2}{ { {\sigma }^{2}}}$。这就是“<strong>高斯近似假设</strong>”。</p><p>每个子信道（每个比特）都服从这个一般规律，那么上面那张图就可以改为：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170804/162521216.jpg" alt="mark"></p><p>这是由一般规律指向个别，以至于指向了所有可能的比特组合。</p><p>利用这个一般规律来重新构造各个子信道。具体的构造方法就是通过式（12~14）计算各个子信道的均值，由此得到各个子信道的方差，从而得到各个子信道的概率密度函数，最后进一步求得各个子信道的错误概率。</p><script type="math/tex;mode=display">\begin{align}
m_{2N}^{\left( 2i\text{-}1 \right)}={ {\varphi }^{-1}}\left( 1-{ {\left[ 1-\varphi \left( m_{N}^{\left( i \right)} \right) \right]}^{2}} \right)
\end{align}</script><script type="math/tex;mode=display">\begin{align}
m_{2N}^{\left( 2i \right)}=2m_{N}^{\left( i \right)}
\end{align}</script><script type="math/tex;mode=display">\begin{align}
m_{1}^{\left( 1 \right)}={2}/{ { {\sigma }^{2}}}\;
\end{align}</script><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><br>如此，由一个个别现象指向了一个特例之下的结论。恰好，这个结论正是一个一般规律。我们正好希望用这个一般规律来构造所有的子信道，让所有子信道都适用于这个一般规律。更进一步地，把高斯近似假设和信道极化原理相结合，就是式（12~14）所呈现的样子。</p><p>个人认为，即使没有“由个别到一般”的那些叙述，而是一上来直接利用高斯近似假设来构造子信道都是可以的。所以，有关于全零假设的那些叙述可有可无，删掉也无妨，不要被这段叙述所迷惑。</p><h1 id="相关链接："><a href="#相关链接：" class="headerlink" title="相关链接："></a>相关链接：</h1><p><br><a href="http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/">《Polar Code（4）编码之极化信道可靠性估计》</a><br><a href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">《Polar Code（8）高斯近似》</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;“假设全零发送”，这个看似简单以至于在许多论文里都一笔带过的假设，却引发了最近的一段思考。这个话题源于&lt;a href=&quot;http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/&quot;&gt;《Polar Code（4）编码之极化信道可靠性估计》&lt;/a&gt;一文评论区的讨论。这段讨论是十分有益的，并把这一话题不断地引向了深入。&lt;/p&gt;&lt;h1 id=&quot;由个别到一般&quot;&gt;&lt;a href=&quot;#由个别到一般&quot; class=&quot;headerlink&quot; title=&quot;由个别到一般&quot;&gt;&lt;/a&gt;由个别到一般&lt;/h1&gt;&lt;p&gt;&lt;br&gt;从基本的高斯信道说起，对于一个BAWGN信道，其接收符号$y$表示为：&lt;/p&gt;&lt;script type=&quot;math/tex;mode=display&quot;&gt;\begin{align}
y=s+z
\end{align}&lt;/script&gt;&lt;p&gt;其中$z$为服从$N\left( 0,{ {\sigma }^{2}} \right)$的高斯白噪声，$s$为调制符号，调制方式采用BPSK。$s=1-2x$或者$s=2x-1$取决于怎样定义BPSK映射。若定义BPSK映射规则为：&lt;/p&gt;&lt;p&gt;\begin{align}&lt;br&gt;s=\left\{ \begin{matrix}&lt;br&gt;+1, x=0 \\&lt;br&gt;-1, x=1 \\&lt;br&gt;\end{matrix} \right.&lt;br&gt;\end{align}&lt;/p&gt;&lt;p&gt;其中$x\in \left\{ 0,1 \right\}$为编码比特，则接收符号$y$重写为：&lt;/p&gt;&lt;script type=&quot;math/tex;mode=display&quot;&gt;\begin{align}
y=\left( 1-2x \right)+z
\end{align}&lt;/script&gt;
    
    </summary>
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/categories/Polar-Code/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
  </entry>
  
  <entry>
    <title>更换评论系统</title>
    <link href="http://marshallcomm.cn/2017/07/27/change-comment-system/"/>
    <id>http://marshallcomm.cn/2017/07/27/change-comment-system/</id>
    <published>2017-07-27T02:08:40.000Z</published>
    <updated>2017-08-22T08:50:27.398Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><p>本博客使用了第三方评论系统，网易云跟帖将在2017年8月1日关闭，也就是说云跟帖倒闭了。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170727/101036290.png" alt="mark"></p><p>今天更换了评论系统，朋友们可以继续留言。但遗憾是，由于新的评论系统不支持数据导入，意味着从前所有的评论数据将丢失。</p><p>评论系统对一个博客来说还是比较重要的，它给人们提供了交流的平台。在过去的几个月里，许多研究极化码的朋友在博客里参与讨论，我也从中获益良多。许多朋友也指出我的错误，我了解到以后也一一改正，使文章更完善。</p><p>感谢所有曾经参与评论的朋友。</p><hr><p>2017年8月22日更新</p><p>适用来必力评论系统一段时间，由于服务器在韩国，评论加载速度太慢，还是弃用了。切换到畅言评论系统，如果畅言不倒闭，今后就一直使用了。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;本博客使用了第三方评论系统，网易云跟帖将在2017年8月1日关闭，也就是说云跟帖倒闭了。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl84
    
    </summary>
    
      <category term="Blog" scheme="http://marshallcomm.cn/categories/Blog/"/>
    
    
      <category term="Blog" scheme="http://marshallcomm.cn/tags/Blog/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（16）3GPP RAN1 adhoc#2</title>
    <link href="http://marshallcomm.cn/2017/07/01/polar-code-16-3gpp-ran1-adhoc2/"/>
    <id>http://marshallcomm.cn/2017/07/01/polar-code-16-3gpp-ran1-adhoc2/</id>
    <published>2017-07-01T02:20:29.000Z</published>
    <updated>2017-08-04T09:06:29.919Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><p>3GPP RAN1 ad hoc#2会议于6月27~30日在青岛召开。关于Polar Code达成如下结论：</p><h1 id="Code-construction"><a href="#Code-construction" class="headerlink" title="Code construction"></a>Code construction</h1><p><br><img src="http://olyzl8414.bkt.clouddn.com/blog/20170704/102252079.png" alt="mark"></p><a id="more"></a><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170704/102419678.png" alt="mark"></p><h1 id="Sequence-design"><a href="#Sequence-design" class="headerlink" title="Sequence design"></a>Sequence design</h1><p><br><img src="http://olyzl8414.bkt.clouddn.com/blog/20170704/102453611.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170704/102504190.png" alt="mark"></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;3GPP RAN1 ad hoc#2会议于6月27~30日在青岛召开。关于Polar Code达成如下结论：&lt;/p&gt;&lt;h1 id=&quot;Code-construction&quot;&gt;&lt;a href=&quot;#Code-construction&quot; class=&quot;headerlink&quot; title=&quot;Code construction&quot;&gt;&lt;/a&gt;Code construction&lt;/h1&gt;&lt;p&gt;&lt;br&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20170704/102252079.png&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="3GPP_PolarCode" scheme="http://marshallcomm.cn/categories/3GPP-PolarCode/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（15）3GPP RAN1#89</title>
    <link href="http://marshallcomm.cn/2017/05/19/polar-code-15-3gpp-ran1-89/"/>
    <id>http://marshallcomm.cn/2017/05/19/polar-code-15-3gpp-ran1-89/</id>
    <published>2017-05-19T01:53:07.000Z</published>
    <updated>2017-08-04T09:06:23.250Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>3GPP标准化会议于5月15~19日在杭州召开。本周在杭州参加3GPP RAN1 #89次会议，亲历了5G标准化进程中的一个时间点。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170529/095532334.JPG" title="3GPP RAN1#89 主会场（杭州）"></p><a id="more"></a><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170529/095722749.JPG" title="3GPP RAN1#89 信道编码分会场"></p><p>本文简要介绍polar code在3GPP 5G NR讨论的最新进展。</p><h1 id="Code-construction"><a href="#Code-construction" class="headerlink" title="Code construction"></a>Code construction</h1><p><br>本周召开的RAN1 #89会议，<strong>关于Code construction达成的结论为：</strong></p><p><strong>对于下行链路：</strong></p><ul><li>J’的长度为3或6（下次会议再进一步做出选择）；</li><li>若J’=6，工作假设：J+J’bits以分布式的方式分布（在编码结构中支持Early termination）（不排除非分布式的方式）；</li><li>若J’=3，J+J’bits是否采用分布式的方式分布（在编码结构中支持Early termination）有待进一步研究。</li></ul><p>在编码结构中，J+J’bits以分布式的方式插入到信息比特中以实现Early termination的方案：</p><ul><li>支持者：DCM, Nokia, HW, ZTE, CATT, IDC, CL, NEC, Mediatek, Accelercomm, Spreadtrum</li><li>反对者：Intel, LG, QC, Eri, Sams, Fuji, ETRI, Tsofun, IAESI</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170529/100741806.PNG" alt="mark"></p><h1 id="Sequence-design"><a href="#Sequence-design" class="headerlink" title="Sequence design"></a>Sequence design</h1><p><br><strong>关于Sequence design本次会议达成的结论为：</strong></p><ul><li><strong>工作假设（1）</strong>：一个母码长度对应一个single fixed sequence，以提供信息比特和冻结比特的选择</li><li>多个不同母码长度对应着一个固定序列（fixed sequences）的集合，这些固定序列来源于“single reference mother code size”，<ul><li>单参考母码长度的最大值为512或64（下次会议进一步确定）。</li><li>如果修改上述<strong>工作假设（1）</strong>，使得对于最大母码长度存在多于一个的序列，则由其他母码长度派生出额外的序列集合。</li></ul></li><li>选择序列时，至少考虑已知的CCE大小，如果可能，考虑到典型的有效载荷。</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170529/101358568.JPG" alt="mark"></p><h1 id="Rate-matching"><a href="#Rate-matching" class="headerlink" title="Rate matching"></a>Rate matching</h1><p><br><strong>关于速率匹配方案RAN1今后使用的术语：</strong></p><p><strong>Puncturing</strong>：凿孔比特是指那些不传输的编码比特，接收端对于这些不传输的比特是<strong>未知的</strong>，相应的LLR被设置为0；</p><p><strong>Shortening</strong>：将输入比特设定为已知，接收端对于这些不传输的比特是<strong>已知的</strong>，相应的LLR设置为一个较大的值。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170529/101526024.JPG" alt="mark"></p><p>关于这两种凿孔方案有必要再交代一下。博文<a href="http://marshallcomm.cn/2017/03/21/polar-code-10-rcpp/">《Polar Code（10）速率适配的凿孔极化码》</a>中提到过，极化码的凿孔方案分为两类：一类被称为“C0”（capacity-zero）凿孔模式，就是RAN1在此定义的Puncturing方案；另一类被称为“C1”（capacity-one）凿孔模式，就是RAN1在此定义的Shortening方案。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170529/101624100.JPG" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170529/101659864.JPG" alt="mark"></p><p><strong>本次会议关于速率匹配达成的结论：</strong></p><p>码块分段之后（如果有的话）：</p><ul><li>$K$是信息比特数（包括CRC）</li><li>$M$是传输的编码比特数</li><li>${ {N}_{DM}}$是满足2的幂次方并且大于等于$M$的最小值</li><li>${ {N}_{M}}$是<ul><li>${ { {N}_{DM}}}/{2}\;$，如果$M&lt;\beta *{ { {N}_{DM}}}/{2}\;$且${K}/{M}\;&lt;{ {R}_{repthr}},1\le \beta &lt;2$（准确的$\beta $有待进一步研究；不排除$\beta $是${ {N}_{DM}}$的函数）</li><li>否则，${ {N}_{DM}}$</li><li>${ {R}_{repthr}}$的值有待进一步研究；不排除${ {R}_{repthr}}=0$</li></ul></li><li>${ {N}_{R}}$是满足2的幂次方并且大于等于${K}/{ { {R}_{\min }}}\;$的最小值<ul><li>${ {R}_{\min }}$是所支持的最小码率</li><li>$\sim {1}/{12\le }\;{ {R}_{\min }}\le \sim {1}/{5}\;$，准确值有待进一步研究</li></ul></li><li>${ {N}_{\max }}$是所支持的最大母码长度</li><li>母码长度$N$由$\min \left( { {N}_{M}},{ {N}_{R}},{ {N}_{\max }} \right)$确定</li><li>当$M&gt;N$时，采用重复（<strong>Repetition</strong>）编码</li><li>当$M&lt;N$时，采用Puncturing or Shortening：<ul><li>低码率时采用<strong>Puncturing</strong>，例如当码率小于等于${ {R}_{psthr}}$时，和或其他条件</li><li>高码率时采用<strong>Shortening</strong>，例如当码率大于${ {R}_{psthr}}$时，和或其他条件</li><li>${ {R}_{psthr}}$的值有待进一步研究</li></ul></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;3GPP标准化会议于5月15~19日在杭州召开。本周在杭州参加3GPP RAN1 #89次会议，亲历了5G标准化进程中的一个时间点。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20170529/095532334.JPG&quot; title=&quot;3GPP RAN1#89 主会场（杭州）&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="3GPP_PolarCode" scheme="http://marshallcomm.cn/categories/3GPP-PolarCode/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（14）3GPP RAN1#88bis</title>
    <link href="http://marshallcomm.cn/2017/05/15/polar-code-14-3gpp-ran1-88b/"/>
    <id>http://marshallcomm.cn/2017/05/15/polar-code-14-3gpp-ran1-88b/</id>
    <published>2017-05-15T01:25:33.000Z</published>
    <updated>2017-08-04T09:06:05.657Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>RAN1#87次会议已将Polar code确定为eMBB场景下控制信道的信道编码，因此3GPP对极化码的讨论并不是在单纯地讨论编码理论，而是在讨论极化码在5G NR控制信道框架下的应用。所以随着3GPP对极化码讨论的深入，关于极化码达成的结论会自然地和控制信道的特性结合在一起。也就是说，你所看到的3GPP关于极化码达成的结论，未必是Polar code本身应该具有的，但它一定是<strong>5G NR控制信道下的Polar code</strong>应该具有的。所以仍然有必要把学术界研究的极化码与工程界研究的极化码做个区分。</p><p>言归正传，从3GPP RAN1#88bis次会议开始，对极化码的讨论分为两个部分：一是Code construction，二是Sequence design。</p><a id="more"></a><h1 id="Code-construction"><a href="#Code-construction" class="headerlink" title="Code construction"></a>Code construction</h1><p><br>Code construction讨论的是编码结构，犹如一个盒子，$k$比特输入，$N$比特输出。只要这个盒子的内部结构确定，输入任意$k$个信息比特，都可以得到$N$比特的极化码编码序列。这个编码结构简略地说就是“<strong>J+J’检错比特 + basic polar</strong>”的控制信道编码结构。J bits是CRC，主要用于错误检测，但也可以用于辅助译码。J’ bits用于辅助译码。</p><p>根据Arikan的结论，极化码在码长趋于无穷长时，由于信道极化完全而能够达到香农容量。但实际的码长是有限长的，采用SC/SCL译码算法并不能达到理想的译码性能。添加一些检错比特以辅助译码，则能够以较低的复杂度提高译码检错能力，从而提高译码性能。3GPP所讨论的主要是基于辅助的极化码方案，目前有CRC-polar、PC-polar和Hash-polar三种方案，甚至是它们的组合。所以J’ bits可以是CRC或PC或Hash code，或它们的组合。</p><p>此外，极化码编码结构要考虑Early termination，在不降低BLRE性能或增加时延的前提下，不必等到译出全部比特才去判断该码字是否正确，而是在译出一部分比特的时候就可以提前发现错误。这样做的好处，一是在译码过程中能够尽早发现译码错误，减少译码复杂度；二是对于控制信道可以减少盲检测的数量。</p><h1 id="Sequence-design"><a href="#Sequence-design" class="headerlink" title="Sequence design"></a>Sequence design</h1><p><br>Sequence design涉及极化码信息比特和冻结比特位置的选择问题。对极化码而言，由于信道极化特性，某些比特位置（子信道）总是比其他比特位置更可靠。构造极化码时，需要一个基于可靠性度量的比特位置顺序序列（ordered sequence），指示信息比特和检错比特放置在可靠性较高的比特位置上，冻结比特放置在可靠性较低的比特位置上。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170529/094419143.jpg" title="The structure of Polar codes for NR"></p><p>上图红色方框表示的序列就是ordered sequence。有了“<strong>J+J’检错比特 + basic polar</strong>”的编码结构，加上指示信息比特/冻结比特位置的<strong>ordered sequence</strong>，最后加上<strong>速率匹配方案</strong>以突破码长$N$必须为2的幂次方的限制，最终构成了一套适用于NR-PDCCH的极化码编码方案。</p><p>关于Sequence design，本次会议并没有达成任何实质性结论。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;RAN1#87次会议已将Polar code确定为eMBB场景下控制信道的信道编码，因此3GPP对极化码的讨论并不是在单纯地讨论编码理论，而是在讨论极化码在5G NR控制信道框架下的应用。所以随着3GPP对极化码讨论的深入，关于极化码达成的结论会自然地和控制信道的特性结合在一起。也就是说，你所看到的3GPP关于极化码达成的结论，未必是Polar code本身应该具有的，但它一定是&lt;strong&gt;5G NR控制信道下的Polar code&lt;/strong&gt;应该具有的。所以仍然有必要把学术界研究的极化码与工程界研究的极化码做个区分。&lt;/p&gt;&lt;p&gt;言归正传，从3GPP RAN1#88bis次会议开始，对极化码的讨论分为两个部分：一是Code construction，二是Sequence design。&lt;/p&gt;
    
    </summary>
    
      <category term="3GPP_PolarCode" scheme="http://marshallcomm.cn/categories/3GPP-PolarCode/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（13）信道极化</title>
    <link href="http://marshallcomm.cn/2017/05/04/Polar-Code-13-channel-polarization/"/>
    <id>http://marshallcomm.cn/2017/05/04/Polar-Code-13-channel-polarization/</id>
    <published>2017-05-04T08:28:28.000Z</published>
    <updated>2017-08-04T09:05:49.132Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170505/114130398.jpg" title="图 1 信道${W_{4}}$"></p><a id="more"></a><p><strong>1、</strong> 信道极化是一种现象，把它看作一种原理，而极化码编码则是对这一原理的应用。理解极化码可以分两部分，一部分是理论，一部分是应用。</p><p><strong>2、</strong> 从图上看，信道极化过程是一目了然的。但从数学上看，信道极化要分两个阶段，第一阶段是信道联合，第二阶段就是信道分裂。信道分裂是信道极化的一部分。</p><p><strong>3、</strong> 信道极化作为一种原理，它也有它的结构。它的结构就是：原本$N$条平行线，互不相交，谁和谁都没有联系，换句话说，是$N$条原始信道的独立副本；经过各种连线、模二加，连来连去，连成了现在的样子；现在是$N$条线彼此都有联系。这个过程就是信道联合，把原本相互独立的$N$条细线扭成一条粗线。</p><p><strong>4、</strong> 信道联合是从宏观的角度观察，把信道极化过程看作一个整体，输入是$N$比特，输出也是$N$比特。经过联合的信道总是以整体的形式表达，如联合信道${ {W}_{4}}:{ {X}^{4}}\to { {Y}^{4}}$，以及联合信道的转移概率${ {W}_{4}}\left( y_{1}^{4}|u_{1}^{4} \right)$。</p><p><strong>5、</strong> 但只有信道联合是不够的，你无法确知各个子信道的输入和输出是什么关系。这就需要对信道极化过程有一个微观的表达，这个微观表达是通过信道分裂过程来实现的。到信道联合这一步还看不出“极化”的概念，必须经过信道分裂才能体现出极化现象。</p><p><strong>6、</strong> 信道分裂使已经扭成一条粗线的联合信道又重新一条一条地展现在世人面前，就好比两条绳子打结（信道联合），然后再区分出两端谁是谁（信道分裂）。经过分裂的信道总是以单个的形式表达，如分裂子信道$W_{N}^{\left( i \right)}:X\to { {Y}^{N}}\times { {X}^{i-1}}$，以及分裂子信道的转移概率$W_{N}^{\left( i \right)}\left( y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}} \right)$。</p><p><strong>7、</strong> 宏观和微观合在一起就构成了对信道极化过程的完整表达。我们的目的不只是观其大概，更要搞清楚各个子信道，求分裂子信道的转移概率。<a href="http://marshallcomm.cn/2017/04/09/Polar-Code-12-BDMC-Symmetric-Capacity/">《Polar Code（12）B-DMC对称容量》</a>一文中提到，输入符号概率、输出符号概率和转移概率完整地定义了一种信道。不搞清楚各分裂子信道的转移概率就无法完成对分裂信道的定义。从以下定义式就可以看出联合信道和分裂子信道的关系了：</p><script type="math/tex;mode=display">\begin{align}
W_{N}^{\left( i \right)}\left( y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}} \right)\triangleq \sum\limits_{u_{i+1}^{N}\in { {X}^{N-i}}}{\frac{1}{ { {2}^{N-1}}}{ {W}_{N}}\left( y_{1}^{N}|u_{1}^{N} \right)}
\end{align}</script><p><strong>8、</strong> 但式（1）是不易求的。观察图1，整个信道极化过程恰好是一种递归形式。因此用两个递归式来计算各个分裂子信道的转移概率：</p><script type="math/tex;mode=display">\begin{align}
W_{N}^{\left( 2i-1 \right)}\left( y_{1}^{N},u_{1}^{2i-2}|{ {u}_{2i-1}} \right)=\sum\limits_{ { {u}_{2i}}}{\frac{1}{2}W_{ {N}/{2}\;}^{\left( i \right)}\left( y_{1}^{ {N}/{2}\;},u_{1,o}^{2i-2}\oplus u_{1,e}^{2i-2}|{ {u}_{2i-1}}\oplus { {u}_{2i}} \right)\cdot W_{ {N}/{2}\;}^{\left( i \right)}\left( y_{ {N}/{2}\;+1}^{N},u_{1,e}^{2i-2}|{ {u}_{2i}} \right)}
\end{align}</script><script type="math/tex;mode=display">\begin{align}
W_{N}^{\left( 2i \right)}\left( y_{1}^{N},u_{1}^{2i-1}|{ {u}_{2i}} \right)=\frac{1}{2}W_{ {N}/{2}\;}^{\left( i \right)}\left( y_{1}^{ {N}/{2}\;},u_{1,o}^{2i-2}\oplus u_{1,e}^{2i-2}|{ {u}_{2i-1}}\oplus { {u}_{2i}} \right)\cdot W_{ {N}/{2}\;}^{\left( i \right)}\left( y_{ {N}/{2}\;+1}^{N},u_{1,e}^{2i-2}|{ {u}_{2i}} \right)
\end{align}</script><p><strong>9、</strong> 求得各个分裂子信道的转移概率有什么用？在实际编译码中并没有直接用。当我在3月12日那个时间点上写<a href="http://marshallcomm.cn/2017/03/12/polar-code-5-encoding-chan-trans-prob/">《Polar Code（5）编码之信道转移概率》</a>的时候，认为转移概率是有用的，并且认为在编码端和译码端都会直接使用，至少对于BEC信道计算巴氏参数时会直接使用。但随着研究的深入，尤其在研究了密度进化和高斯近似之后，对此的认识得到了更新：</p><ol><li>转移概率是有用的，但并不直接使用，而是使用两个转移概率的之比的对数，即对数似然比（LLR）;</li><li>高斯近似法令转移概率为服从高斯分布的随机变量，并使用对数似然比，直接规避了计算（2）式和（3）式，所以转移概率的两个式子就沦为了铺路者；</li><li>但式（2~3）的递归形式是十分有用的，译码时计算LLR就利用这种递归形式。</li></ol><p>有关高斯近似详见<a href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">《Polar Code（8）高斯近似》</a>，而<a href="http://marshallcomm.cn/2017/03/12/polar-code-5-encoding-chan-trans-prob/">《Polar Code（5）编码之信道转移概率》</a>通过分析转移概率的计算过程也能更好的理解编码过程。</p><p><strong>10、</strong> 编码。极化码是对信道极化原理的应用。然而编码过程又是基于另一套思路，它沿着线性分组码的编码思路，用生成矩阵的方式产生极化码。而生成矩阵的构造又体现着信道极化的原理，用递归形式来构造生成矩阵。</p><p>书不尽言，言不尽意。以上几点，是我对信道极化的理解。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20170505/114130398.jpg&quot; title=&quot;图 1 信道${W_{4}}$&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/categories/Polar-Code/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（12）B-DMC对称容量</title>
    <link href="http://marshallcomm.cn/2017/04/09/Polar-Code-12-BDMC-Symmetric-Capacity/"/>
    <id>http://marshallcomm.cn/2017/04/09/Polar-Code-12-BDMC-Symmetric-Capacity/</id>
    <published>2017-04-09T12:15:27.000Z</published>
    <updated>2017-08-04T09:05:39.461Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>任何一本信息论书籍讲到离散信道容量时都会涉及形如$I\left( X;Y \right)=\sum\limits_{i,j}{ { {p}_{i}}{ {p}_{ij}}\log \frac{ { {p}_{ij}}}{ { {q}_{j}}}}$的公式。但这个公式，我理解是经过转化得来的，不是直接得到的。怎么转化呢？请继续阅读。</p><p>输入符号概率${ {p}_{i}}=p\left( { {x}_{i}} \right)$，输出符号概率${ {q}_{j}}=q\left( { {y}_{j}} \right)$，输入符号到输出符号的转移概率${ {p}_{ij}}=p\left( { {y}_{j}}|{ {x}_{i}} \right)$，这三种概率完全地表达了一个信道。对于信道容量，第一个概念是互信息量。</p><a id="more"></a><h1 id="互信息量"><a href="#互信息量" class="headerlink" title="互信息量"></a>互信息量</h1><p><br>互信息量定义为<strong>后验概率与先验概率比值的对数</strong>。虽然有这个定义，但必须先要明确观察者的角度才能进一步确定后验概率是谁，先验概率是谁。$I\left( X;Y \right)$是站在接收端的角度观察，是$Y$对$X$的平均互信息量；而$I\left( Y;X \right)$是站在发送端角度观察，是$X$对$Y$的平均互信息量。我们只说第一种角度，即以接收者的视角来观察信道。</p><p>通常接收端可以预知信息$X$发出的各个符号的集合，以及它们的概率分布，也就是说发送符号概率$p\left( { {x}_{i}} \right)$是<strong>先验概率</strong>。当接收端收到一个符号${ {y}_{j}}$后，接收端可以计算发送端消息的条件概率$p\left( { {x}_{i}}|{ {y}_{j}} \right)$，这种条件概率就是<strong>后验概率</strong>。根据互信息量定义，${ {y}_{j}}$对${ {x}_{i}}$的互信息量为：</p><script type="math/tex;mode=display">\begin{align}
I\left( { {x}_{i}};{ {y}_{j}} \right)=\log \frac{p\left( { {x}_{i}}|{ {y}_{j}} \right)}{p\left( { {x}_{i}} \right)}
\end{align}</script><h1 id="平均互信息量"><a href="#平均互信息量" class="headerlink" title="平均互信息量"></a>平均互信息量</h1><p><br>只有$I\left( { {x}_{i}};{ {y}_{j}} \right)$是没有意义的，因为通常无法确定$p\left( { {x}_{i}}|{ {y}_{j}} \right)$和$p\left( { {x}_{i}} \right)$的大小关系，$I\left( { {x}_{i}};{ {y}_{j}} \right)$不一定大于或等于0。由于发送符号$X$和接收符号$Y$都是随机变量，要探知$Y$对$X$的互信息量得用统计的方法去计算$I\left( { {x}_{i}};{ {y}_{j}} \right)$的平均值，准确地说是计算$I\left( { {x}_{i}};{ {y}_{j}} \right)$在发送符号集合$X$和接收符号集合$Y$上的概率加权统计平均值，这就是平均互信息量：</p><script type="math/tex;mode=display">\begin{align}
I\left( X;Y \right)=\sum\limits_{i}{\sum\limits_{j}{p\left( { {x}_{i}}{ {y}_{j}} \right)}\log }\frac{p\left( { {x}_{i}}|{ {y}_{j}} \right)}{p\left( { {x}_{i}} \right)}
\end{align}</script><p>其中$p\left( { {x}_{i}}{ {y}_{j}} \right)$是发送符号${ {x}_{i}}$与接收符号${ {y}_{j}}$的联合概率。</p><h1 id="联合概率、后验概率与转移概率的关系"><a href="#联合概率、后验概率与转移概率的关系" class="headerlink" title="联合概率、后验概率与转移概率的关系"></a>联合概率、后验概率与转移概率的关系</h1><script type="math/tex;mode=display">\begin{align}
p\left( { {x}_{i}}{ {y}_{j}} \right)=p\left( { {x}_{i}} \right)p\left( { {y}_{j}}|{ {x}_{i}} \right)=p\left( { {y}_{j}} \right)p\left( { {x}_{i}}|{ {y}_{j}} \right)
\end{align}</script><p>这个关系式相当重要！它打通了前向与后向之间的联系。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170409/202751865.jpg" alt="mark"></p><p>研究互信息量自然离不开对信道的定义。而信道是由输入符号、输出符号和转移概率三者确定的。转移概率$p\left( { {y}_{j}}|{ {x}_{i}} \right)$是站在发送端的角度观察，方向是$X\to Y$，因此也称为<strong>前向概率</strong>。后验概率$p\left( { {x}_{i}}|{ {y}_{j}} \right)$是站在接收端的角度观察，方向是$Y\to X$，因此也称为<strong>后向概率</strong>。后验概率是逆向思维，不仅难以理解而且还不易求，既然如此那就全部按正向来吧。根据关系式（3），把<strong>后验概率用转移概率来表示</strong>：</p><script type="math/tex;mode=display">\begin{align}
p\left( { {x}_{i}}|{ {y}_{j}} \right)=\frac{p\left( { {x}_{i}} \right)p\left( { {y}_{j}}|{ {x}_{i}} \right)}{p\left( { {y}_{j}} \right)}
\end{align}</script><p>带入式（2）则平均互信息量$I\left( X;Y \right)$用转移概率可重新表示为：</p><script type="math/tex;mode=display">\begin{align}
I\left( X;Y \right)=\sum\limits_{i}{\sum\limits_{j}{p\left( { {x}_{i}} \right)p\left( { {y}_{j}}|{ {x}_{i}} \right)}\log }\frac{p\left( { {y}_{j}}|{ {x}_{i}} \right)}{p\left( { {y}_{j}} \right)}
\end{align}</script><p>其中$p\left( { {x}_{i}} \right)$是先验概率自不必说，$p\left( { {y}_{j}} \right)$是接收符号概率也可以用转移概率表示：</p><script type="math/tex;mode=display">\begin{align}
p\left( { {y}_{j}} \right)=\sum\limits_{i}{p\left( { {x}_{i}} \right)}p\left( { {y}_{j}}|{ {x}_{i}} \right)
\end{align}</script><p>通过式（5~6）可以看出，在信道给定的情况下，平均互信息量$I\left( X;Y \right)$的大小由输入符号的概率分布$p\left( { {x}_{i}} \right)$来确定。</p><h1 id="信道容量"><a href="#信道容量" class="headerlink" title="信道容量"></a>信道容量</h1><p><br>进一步，<strong>信道容量</strong>定义为平均互信息量$I\left( X;Y \right)$的最大值，用符号$C$来表示，即</p><script type="math/tex;mode=display">\begin{align}
C=\underset{p\left( { {x}_{i}} \right)}{\mathop{\max }}\,I\left( X;Y \right)=\underset{p\left( { {x}_{i}} \right)}{\mathop{\max }}\,\sum\limits_{i}{\sum\limits_{j}{p\left( { {x}_{i}} \right)p\left( { {y}_{j}}|{ {x}_{i}} \right)}\log }\frac{p\left( { {y}_{j}}|{ {x}_{i}} \right)}{\sum\limits_{i}{p\left( { {x}_{i}} \right)}p\left( { {y}_{j}}|{ {x}_{i}} \right)}
\end{align}</script><p>什么时候$I\left( X;Y \right)$取得最大值呢？——<strong>发送符号等概率时</strong>。</p><h1 id="B-DMC信道容量"><a href="#B-DMC信道容量" class="headerlink" title="B-DMC信道容量"></a>B-DMC信道容量</h1><p><br>对于二进制的离散无记忆信道，信源符号以等概率发送时有$p\left( 0 \right)=p\left( 1 \right)=\frac{1}{2}$，带入式（7）得到：</p><script type="math/tex;mode=display">\begin{align}
C=I\left( X;Y \right)=\sum\limits_{i}{\sum\limits_{j}{\frac{1}{2}p\left( { {y}_{j}}|{ {x}_{i}} \right)}\log }\frac{p\left( { {y}_{j}}|{ {x}_{i}} \right)}{\sum\limits_{i}{p\left( { {x}_{i}} \right)}p\left( { {y}_{j}}|{ {x}_{i}} \right)}
\end{align}</script><p>分母展开$\sum\limits_{i}{p\left( { {x}_{i}} \right)}p\left( { {y}_{j}}|{ {x}_{i}} \right)=\frac{1}{2}p\left( { {y}_{j}}|0 \right)+\frac{1}{2}p\left( { {y}_{j}}|1 \right)$，并带入式（8）得到B-DMC信道容量为：</p><script type="math/tex;mode=display">\begin{align}
I\left( X;Y \right)=\sum\limits_{i}{\sum\limits_{j}{\frac{1}{2}p\left( { {y}_{j}}|{ {x}_{i}} \right)}\log \frac{p\left( { {y}_{j}}|{ {x}_{i}} \right)}{\frac{1}{2}p\left( { {y}_{j}}|0 \right)+\frac{1}{2}p\left( { {y}_{j}}|1 \right)}}
\end{align}</script><h1 id="对称信道容量"><a href="#对称信道容量" class="headerlink" title="对称信道容量"></a>对称信道容量</h1><p><br>如果转移概率矩阵$\mathbf{P}$的每一行都是第一行的置换，称该矩阵是输入对称的；如果转移概率矩阵$\mathbf{P}$的每一列都是第一列的置换，称该矩阵是输出对称的；如果输入、输出都对称，则称该DMC为<strong>对称的DMC信道</strong>。</p><p>满足对称条件的B-DMC有两个典型例子：BSC和BEC。其中BSC的转移概率矩阵为</p><script type="math/tex;mode=display">\begin{align}
\mathbf{P}=\left[ \begin{matrix}
   p & 1-p  \\
   1-p & p  \\
\end{matrix} \right]
\end{align}</script><p>显然式（10）的每一行、每一列都分别是第一行、第一列的置换，因此转移概率满足式（10）的信道是一种对称信道。把BSC转移概率带入式（9）就得到了<strong>BSC的对称信道容量</strong>：</p><script type="math/tex;mode=display">\begin{align}
I\left( X;Y \right)=p\log 2p+\left( 1-p \right)\log 2\left( 1-p \right)
\end{align}</script><h1 id="理解"><a href="#理解" class="headerlink" title="理解"></a>理解</h1><p><br>既然是离散信道，其输入、输出必然都是离散的。为什么输出符号是任意的？站在发送端的角度去看，发送端唯一确知的就是自己能够发什么，发送符号取值范围是{0,1}，这是明确的。我发的信号我做主，发送端只管得了自己，但它不并知道信道是什么样的，也不知道接收端能收到什么。所以对于发送端而言，信道和接收符号都是未知的、任意的。概率也仅仅表达了一种可能性。弓箭手射箭，一旦射出，箭就不由弓箭手所控制了。</p><p>为什么Arikan由B-DMC直接给出了对称容量？式（9）给出的就是B-DMC的信道容量，此时还没涉及对称的概念。注意，式（9）是一个不完整的计算式，它有4个转移概率值仍是未知的。因此你必须对B-DMC有进一步的定义，而此时式（9）的值则完全取决于信道类型。转移概率满足什么样的特性，它就定义了什么样的信道类型。当满足$P\left( 0|0 \right)=P\left( 1|1 \right)=p$、$P\left( 1|0 \right)=P\left( 0|1 \right)=1-p$时，B-DMC就是BSC信道。对称，发0的情况和发1的情况完全相同，这就是对称。BSC是研究二元编解码最简单，最常用的信道模型。</p><p>研究编解码离不开具体的信道模型，只谈B-DMC是不够的，它还有4个概率值需要进一步给出定义。当进一步研究编码时不可能凭空讨论，一定要更加具体，是B-DMC下的BSC，还是B-DMC下的BEC？如此这般才构成讨论的基础。为什么一定要对称？因为它是最简单最基础的模型。定义就是定义，不需要纠结于为什么要这么定义。一上来就给出讨论的前提，在这种定义的框架下去讨论编码问题。</p><p>说“BSC的对称容量”、“BEC的对称容量”都没问题，因为BSC和BEC都是对称信道。说“B-DMC的对称容量”，其实是隐含地指出了B-DMC满足对称性，要么是BSC，要么是BEC。</p><p>BSC和BEC的相关链接：</p><p><a href="http://marshallcomm.cn/2017/03/12/polar-code-5-encoding-chan-trans-prob/">Polar Code（5）编码之信道转移概率</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;任何一本信息论书籍讲到离散信道容量时都会涉及形如$I\left( X;Y \right)=\sum\limits_{i,j}{ { {p}_{i}}{ {p}_{ij}}\log \frac{ { {p}_{ij}}}{ { {q}_{j}}}}$的公式。但这个公式，我理解是经过转化得来的，不是直接得到的。怎么转化呢？请继续阅读。&lt;/p&gt;&lt;p&gt;输入符号概率${ {p}_{i}}=p\left( { {x}_{i}} \right)$，输出符号概率${ {q}_{j}}=q\left( { {y}_{j}} \right)$，输入符号到输出符号的转移概率${ {p}_{ij}}=p\left( { {y}_{j}}|{ {x}_{i}} \right)$，这三种概率完全地表达了一个信道。对于信道容量，第一个概念是互信息量。&lt;/p&gt;
    
    </summary>
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/categories/Polar-Code/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
  </entry>
  
  <entry>
    <title>写作即思考</title>
    <link href="http://marshallcomm.cn/2017/03/31/writing-is-thinking/"/>
    <id>http://marshallcomm.cn/2017/03/31/writing-is-thinking/</id>
    <published>2017-03-31T11:25:56.000Z</published>
    <updated>2017-03-31T11:39:07.185Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --><p>除了“问题即答案”，“写作即思考”是另一个关键过程。思考不是写作，但写作一定是思考的结果。其实在读研时就该这么做了，直到最近我才开始付诸实践。</p><p>书写，记录，把思考变为叙述。当问题A牵引出问题B，问题B牵引出问题C，C牵引出D，D牵引出E，你的大脑能缓存几级？我开始反复告诫自己，不要太相信自己的大脑，用不了多久你就会混乱，当你提取知识点时，你提取的不是点，也不是面，而是面掺了水的一团浆糊。</p><a id="more"></a><p>书写的重要作用在于清空大脑缓存。思考问题时，必然有一部分内存用于缓存ABCD，然后剩余的内存用来集中思考当前的问题E。记忆缓存太多，必然压缩思考内存，导致思考力不足，而且容易产生概念混淆。清空缓存，不是清空记忆。把记忆缓存整理输出，清清楚楚，明明白白。</p><p>开始发觉输出的重要性，追求有价值的输出，倒逼有价值的输入。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Oct 20 2017 11:39:26 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;除了“问题即答案”，“写作即思考”是另一个关键过程。思考不是写作，但写作一定是思考的结果。其实在读研时就该这么做了，直到最近我才开始付诸实践。&lt;/p&gt;&lt;p&gt;书写，记录，把思考变为叙述。当问题A牵引出问题B，问题B牵引出问题C，C牵引出D，D牵引出E，你的大脑能缓存几级？我开始反复告诫自己，不要太相信自己的大脑，用不了多久你就会混乱，当你提取知识点时，你提取的不是点，也不是面，而是面掺了水的一团浆糊。&lt;/p&gt;
    
    </summary>
    
      <category term="随笔一记" scheme="http://marshallcomm.cn/categories/%E9%9A%8F%E7%AC%94%E4%B8%80%E8%AE%B0/"/>
    
    
  </entry>
  
</feed>
