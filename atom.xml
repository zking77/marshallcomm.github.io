<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Marshall</title>
  <subtitle>Comm. Tech. Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://marshallcomm.cn/"/>
  <updated>2017-12-31T10:03:19.146Z</updated>
  <id>http://marshallcomm.cn/</id>
  
  <author>
    <name>Marshall</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>2017年博文汇总</title>
    <link href="http://marshallcomm.cn/2017/12/31/archives-2017/"/>
    <id>http://marshallcomm.cn/2017/12/31/archives-2017/</id>
    <published>2017-12-31T09:40:53.000Z</published>
    <updated>2017-12-31T10:03:19.146Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="Polar-Code信道编码"><a href="#Polar-Code信道编码" class="headerlink" title="Polar Code信道编码"></a>Polar Code信道编码</h1><p><br><a href="http://marshallcomm.cn/2017/03/01/polar-code-1-summary/">Polar Code（1）概述</a><br><a href="http://marshallcomm.cn/2017/03/04/polar-code-2-encoding-principle/">Polar Code（2）编码原理</a><br><a href="http://marshallcomm.cn/2017/03/05/polar-code-3-encoding-example/">Polar Code（3）编码实例</a><br><a href="http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/">Polar Code（4）编码之极化信道可靠性估计</a><br><a href="http://marshallcomm.cn/2017/03/12/polar-code-5-encoding-chan-trans-prob/">Polar Code（5）编码之信道转移概率</a><br><a href="http://marshallcomm.cn/2017/03/13/polar-code-6-sc-decoder/">Polar Code（6）SC译码算法</a><br><a href="http://marshallcomm.cn/2017/03/15/polar-code-7-scl-decoder/">Polar Code（7）SCL译码算法</a><br><a href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">Polar Code（8）高斯近似</a><br><a href="http://marshallcomm.cn/2017/03/18/polar-code-9-ca-scl-decoder/">Polar Code（9）CA-SCL译码算法</a><br><a href="http://marshallcomm.cn/2017/03/21/polar-code-10-rcpp/">Polar Code（10）速率适配的凿孔极化码</a><br><a href="http://marshallcomm.cn/2017/04/09/Polar-Code-12-BDMC-Symmetric-Capacity/">Polar Code（12）B-DMC对称容量</a><br><a href="http://marshallcomm.cn/2017/05/04/Polar-Code-13-channel-polarization/">Polar Code（13）信道极化</a><br><a href="http://marshallcomm.cn/2017/08/24/polar-code-18-select-bitchannel/">Polar Code（18）比特信道的选择</a><br><a href="http://marshallcomm.cn/2017/08/26/polar-code-19-design-snr/">Polar Code（19）当我们谈论design-snr时我们在谈论什么</a><br><a href="http://marshallcomm.cn/2017/09/19/polar-code-20-beta-expansion/">Polar Code（20）Beta-expansion</a><br><a href="http://marshallcomm.cn/2017/12/25/polar-code-24-brief-summary/">Polar Code（24）小结</a></p><a id="more"></a><h2 id="答疑"><a href="#答疑" class="headerlink" title="答疑"></a>答疑</h2><p><a href="http://marshallcomm.cn/2017/03/07/answer-polar-code-def-error-prob/">Answer-Polar Code-定义错误概率</a><br><a href="http://marshallcomm.cn/2017/11/02/answer-polar-code-ga-inverse-phix/">Answer-Polar Code-高斯近似之φ(x)反函数</a></p><h1 id="Polar-Code-之5G标准化"><a href="#Polar-Code-之5G标准化" class="headerlink" title="Polar Code 之5G标准化"></a>Polar Code 之5G标准化</h1><p><a href="http://marshallcomm.cn/2017/03/22/polar-code-11-3gpp-standard-1/">Polar Code（11）3GPP标准化进展</a><br><a href="http://marshallcomm.cn/2017/05/15/polar-code-14-3gpp-ran1-88b/">Polar Code（14）3GPP RAN1#88bis</a><br><a href="http://marshallcomm.cn/2017/05/19/polar-code-15-3gpp-ran1-89/">Polar Code（15）3GPP RAN1#89</a><br><a href="http://marshallcomm.cn/2017/07/01/polar-code-16-3gpp-ran1-adhoc2/">Polar Code（16）3GPP RAN1 adhoc#2</a><br><a href="http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/">Polar Code（21）3GPP RAN1#90</a><br><a href="http://marshallcomm.cn/2017/10/20/polar-code-22-3gpp-ran1-adhoc3/">Polar Code（22）3GPP RAN1 adhoc#3</a><br><a href="http://marshallcomm.cn/2017/10/20/polar-code-23-3gpp-ran1-90b/">Polar Code（23）3GPP RAN1#90bis</a></p><h1 id="3GPP-5G物理层规范"><a href="#3GPP-5G物理层规范" class="headerlink" title="3GPP 5G物理层规范"></a>3GPP 5G物理层规范</h1><h2 id="v1-0-0（2017-09）"><a href="#v1-0-0（2017-09）" class="headerlink" title="v1.0.0（2017-09）"></a>v1.0.0（2017-09）</h2><p><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">5G-NR物理层概述v1.0.0</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">5G-NR物理层提供的服务v1.0.0</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">5G-NR物理信道与调制v1.0.0</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-ul/">5G-NR物理信道与调制-上行链路v1.0.0</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-dl/">5G-NR物理信道与调制-下行链路v1.0.0</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">5G-NR复用与信道编码v1.0.0</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">5G-NR物理层过程（控制）v1.0.0</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/">5G-NR物理层协议v1.0.0</a></p><h2 id="v1-1-0（2017-10）"><a href="#v1-1-0（2017-10）" class="headerlink" title="v1.1.0（2017-10）"></a>v1.1.0（2017-10）</h2><p><a href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation/">5G-NR物理信道与调制v1.1.0</a><br><a href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation-ul/">5G-NR物理信道与调制-上行链路v1.1.0</a><br><a href="http://marshallcomm.cn/2017/10/24/nr-v110-l1-channel-modulation-dl/">5G-NR物理信道与调制-下行链路v1.1.0</a></p><h2 id="v2-0-0（2017-12）——5G-NSA版本协议"><a href="#v2-0-0（2017-12）——5G-NSA版本协议" class="headerlink" title="v2.0.0（2017-12）——5G NSA版本协议"></a>v2.0.0（2017-12）——5G NSA版本协议</h2><p><a href="http://marshallcomm.cn/2017/12/31/nr-v200-l1-index/">5G NSA物理层协议</a><br><a href="http://marshallcomm.cn/2017/12/17/nr-v200-l1-channel-modulation/">5G 帧结构、物理资源与物理信道</a><br><a href="http://marshallcomm.cn/2017/12/29/nr-v200-l1-ssb/">5G SSB与小区搜索</a><br><a href="http://marshallcomm.cn/2017/12/29/nr-v200-l1-prach/">5G PRACH与随机接入</a><br><a href="http://marshallcomm.cn/2017/12/30/nr-v200-l1-pdcch/">5G PDCCH</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;Polar-Code信道编码&quot;&gt;&lt;a href=&quot;#Polar-Code信道编码&quot; class=&quot;headerlink&quot; title=&quot;Polar Code信道编码&quot;&gt;&lt;/a&gt;Polar Code信道编码&lt;/h1&gt;&lt;p&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/01/polar-code-1-summary/&quot;&gt;Polar Code（1）概述&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/04/polar-code-2-encoding-principle/&quot;&gt;Polar Code（2）编码原理&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/05/polar-code-3-encoding-example/&quot;&gt;Polar Code（3）编码实例&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/&quot;&gt;Polar Code（4）编码之极化信道可靠性估计&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/12/polar-code-5-encoding-chan-trans-prob/&quot;&gt;Polar Code（5）编码之信道转移概率&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/13/polar-code-6-sc-decoder/&quot;&gt;Polar Code（6）SC译码算法&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/15/polar-code-7-scl-decoder/&quot;&gt;Polar Code（7）SCL译码算法&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/&quot;&gt;Polar Code（8）高斯近似&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/18/polar-code-9-ca-scl-decoder/&quot;&gt;Polar Code（9）CA-SCL译码算法&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/21/polar-code-10-rcpp/&quot;&gt;Polar Code（10）速率适配的凿孔极化码&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/04/09/Polar-Code-12-BDMC-Symmetric-Capacity/&quot;&gt;Polar Code（12）B-DMC对称容量&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/05/04/Polar-Code-13-channel-polarization/&quot;&gt;Polar Code（13）信道极化&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/08/24/polar-code-18-select-bitchannel/&quot;&gt;Polar Code（18）比特信道的选择&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/08/26/polar-code-19-design-snr/&quot;&gt;Polar Code（19）当我们谈论design-snr时我们在谈论什么&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/19/polar-code-20-beta-expansion/&quot;&gt;Polar Code（20）Beta-expansion&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/12/25/polar-code-24-brief-summary/&quot;&gt;Polar Code（24）小结&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>5G NSA物理层协议</title>
    <link href="http://marshallcomm.cn/2017/12/31/nr-v200-l1-index/"/>
    <id>http://marshallcomm.cn/2017/12/31/nr-v200-l1-index/</id>
    <published>2017-12-31T09:30:32.000Z</published>
    <updated>2017-12-31T10:03:41.219Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="NSA"><a href="#NSA" class="headerlink" title="NSA"></a>NSA</h1><p><br><strong>5G NSA物理层规范——v2.0.0（201712）</strong></p><p><a href="http://marshallcomm.cn/2017/12/17/nr-v200-l1-channel-modulation/">5G 帧结构、物理资源与物理信道</a></p><p><a href="http://marshallcomm.cn/2017/12/29/nr-v200-l1-ssb/">5G SSB与小区搜索</a></p><p><a href="http://marshallcomm.cn/2017/12/29/nr-v200-l1-prach/">5G PRACH与随机接入</a></p><p><a href="http://marshallcomm.cn/2017/12/30/nr-v200-l1-pdcch/">5G PDCCH</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;NSA&quot;&gt;&lt;a href=&quot;#NSA&quot; class=&quot;headerlink&quot; title=&quot;NSA&quot;&gt;&lt;/a&gt;NSA&lt;/h1&gt;&lt;p&gt;&lt;br&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
      <category term="2017-12" scheme="http://marshallcomm.cn/tags/2017-12/"/>
    
  </entry>
  
  <entry>
    <title>5G PDCCH</title>
    <link href="http://marshallcomm.cn/2017/12/30/nr-v200-l1-pdcch/"/>
    <id>http://marshallcomm.cn/2017/12/30/nr-v200-l1-pdcch/</id>
    <published>2017-12-30T02:56:56.000Z</published>
    <updated>2017-12-31T06:26:43.954Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="PDCCH"><a href="#PDCCH" class="headerlink" title="PDCCH"></a>PDCCH</h1><h2 id="CCE"><a href="#CCE" class="headerlink" title="CCE"></a>CCE</h2><p><br>PDCCH由一个或多个控制信道单元（control-channel element，CCE）组成，见Table 7.3.2.1-1。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171230/110738019.png" alt="mark"></p><h2 id="CORESET"><a href="#CORESET" class="headerlink" title="CORESET"></a>CORESET</h2><p><br>控制资源集（control-resource set，CORESET）由$ N_{\text{RB}}^{\text{CORESET}} $个频域RBs和$ N_{\text{symb}}^{\text{CORESET}}\in \left\{ 1,2,3 \right\} $个时域符号组成，$ N_{\text{RB}}^{\text{CORESET}} $的值由高层参数 <em>CORESET-freq-dom</em> 给定，$ N_{\text{symb}}^{\text{CORESET}} $的值由高层参数 <em>CORESET-time-dur</em> 给定，其中仅当高层参数 <em>DL-DMRS-typeA-pos=3</em> 时才支持$ N_{\text{symb}}^{\text{CORESET}}=3 $。</p><p>1个CCE由6个资源粒子组（resource-element group，REG）组成，1个REG等于1个OFDM符号上的1个RB。CORESET内的REGs以时域优先的方式按升序编号，从CORESET中第1个OFDM符号且编号最小的RB以0开始编号。</p><p>UE可配置多个CORESETs，每个CORESET仅对应一种CCE-to-REG映射。</p><p>CORESET中CCE-to-REG映射可以是交织的或非交织的，这由高层参数 <em>CORESET-CCE-REG-mapping-type</em> 来配置，并且由REG捆绑（REG bundle）来描述：</p><ul><li>REG bundle $ i $ 定义为一组REGs $ \left\{ iL,iL+1,…,iL+L-1 \right\} $，其中$ L $是REG bundle大小，$ i=0,1,…,{N_{\text{REG}}^{\text{CORESET}}}/{L}\;-1 $，且$ N_{\text{REG}}^{\text{CORESET}}=N_{\text{RB}}^{\text{CORESET}}N_{\text{symb}}^{\text{CORESET}} $是CORESET中REG的数目；</li><li>CCE $ j $由一组REG bundles $ \left\{ f({6j}/{L}\;),f({6j}/{L}\;+1),…,f({6j}/{L}\;+{6}/{L}\;-1) \right\} $组成，其中$ f(\cdot ) $是交织器</li></ul><p>对于非交织CEE-to-REG映射，$ L=6 $且$ f(j)=j $。</p><p>对于交织CEE-to-REG映射，当$ N_{\text{symb}}^{\text{CORESET}}=1 $时，有$ L\in \left\{ 2,6 \right\} $；当$ N_{\text{symb}}^{\text{CORESET}}\in \left\{ 2,3 \right\} $时，有$ L\in \left\{ N_{\text{symb}}^{\text{CORSET}},6 \right\} $，其中$ L $由高层参数<em>CORESET-REG-bundle-size</em>配置。交织器定义为</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & f(j)=\left( rC+c+{ {n}_{\text{shift}}} \right)\bmod \left( {N_{\text{REG}}^{\text{CORESET}}}/{L}\; \right) \\ 
 \nonumber & j=cR+r \\ 
\nonumber  & r=0,1,...,R-1 \\ 
 \nonumber & c=0,1,...,C-1 \\ 
 \nonumber & C=\left\lceil {N_{\text{REG}}^{\text{CORESET}}}/{\left( LR \right)}\; \right\rceil   
\end{align}</script><p>其中$ R\in \left\{ 2,3,6 \right\} $由高层参数 <em>CORESET-interleaver-size</em> 给定，且</p><ul><li>$ { {n}_{\text{shift}}} $是物理层小区ID $ N_{\text{ID}}^{\text{cell}} $ 的函数</li><li>$ { {n}_{\text{shift}}}\in \left\{ 0,1,…,274 \right\} $是高层参数 <em>CORESET-shift-index</em> 的函数</li></ul><p>UE可假定（频域预编码颗粒度）</p><ul><li>如果高层参数 <em>CORESET-precoder-granularity</em> 等于CORESET-REG-bundle-size，则在REG bundle中，在频域上使用相同的预编码；</li><li>如果高层参数 <em>CORESET-precoder-granularity</em> 等于CORESET频域大小，则在CORESET中的连续RBs内的所有REGs中，在频域上使用相同的预编码</li></ul><p>对于PBCH配置的CORESET，$ L=6 $。</p><a id="more"></a><h2 id="加扰"><a href="#加扰" class="headerlink" title="加扰"></a>加扰</h2><p><br>UE应假定比特块$ b(0),…,b(M_{\text{bit}}^{ {}}-1) $在调制前进行加扰，其中$ M_{\text{bit}}^{ {}} $是PDCCH传输的比特数，加扰后的比特块为$ \tilde{b}(0),…,\tilde{b}(M_{\text{bit}}^{ {}}-1) $</p><script type="math/tex;mode=display">\tilde{b}(i)=\left( b(i)+c(i) \right)\bmod 2</script><p>其中扰码序列$ c(i) $在38.211的5.2.1节给定。</p><h2 id="调制"><a href="#调制" class="headerlink" title="调制"></a>调制</h2><p><br>UE应假定比特块$ \tilde{b}(0),…,\tilde{b}({ {M}_{\text{bit}}}-1) $采用QPSK调制，得到复值调制符号块$ d(0),…,d({ {M}_{\text{symb}}}-1) $。QPSK调制见38.211的5.1.3节。</p><h2 id="物理资源映射"><a href="#物理资源映射" class="headerlink" title="物理资源映射"></a>物理资源映射</h2><p><br>在用于所监测的PDCCH的REGs中，UE应假定复值符号块$ d(0),…,d({ {M}_{\text{symb}}}-1) $乘以幅值因子$ { {\beta }_{\text{PDCCH}}} $，并按照先$ k $再$ l $的递增顺序依次映射到资源粒子$ { {\left( k,l \right)}_{p,\mu }} $。</p><h1 id="UE接收控制信息的过程"><a href="#UE接收控制信息的过程" class="headerlink" title="UE接收控制信息的过程"></a>UE接收控制信息的过程</h1><p><br>如果UE配置了辅小区群（Secondary Cell Group，SCG），则UE应对主小区群（Master Cell Group，MCG）和SCG应用本章所描述的过程</p><ul><li>当这一过程应用于<strong>MCG</strong>时，本章所提及的‘secondary cell’，‘secondary cells’，‘serving cell’，‘serving cells’是分别属于<strong>MCG</strong>的secondary cell，secondary cells，serving cell，serving cells。</li><li>当这一过程应用于<strong>SCG</strong>时，本章所提及的‘secondary cell’，‘secondary cells’，‘serving cell’，‘serving cells’是分别属于<strong>SCG</strong>的secondary cell，secondary cells（不包括PSCell），serving cell，serving cells。本章所提及的‘primary cell’指的是SCG的PSCell。</li></ul><p>UE将根据对应的搜索空间，监测每个激活的服务小区上激活的DL BWP上的一个或多个CORESET（控制资源集）中的一组PDCCH候选。监测搜索空间意味着UE根据所监测的DCI格式对每个PDCCH候选进行译码。</p><p>UE可以通过高层参数 <em>SSB-periodicity-serving-cell</em> 配置用于在服务小区中发送SSB的半帧的周期。如果UE接收到 <em>SSB-transmitted-SIB1</em> 但未接收到 <em>SSB-transmitted</em> ，并且如果用于PDCCH接收的RE与对应于由 <em>SSB-transmitted-SIB1</em> 指示的SSB索引的RE重叠，则UE通过排除与由 <em>SSB-transmitted-SIB1</em> 指示的SSB索引相对应的RE来接收PDCCH。如果UE接收到 <em>SSB-transmitted</em> ，并且如果用于PDCCH接收的RE与对应于由 <em>SSB-transmitted</em> 指示的SSB索引的RE重叠，则UE通过排除与 <em>SSB-transmitted</em> 所指示的SSB索引相对应的RE来接收PDCCH。</p><h2 id="确定PDCCH分配的UE过程"><a href="#确定PDCCH分配的UE过程" class="headerlink" title="确定PDCCH分配的UE过程"></a>确定PDCCH分配的UE过程</h2><p><br>PDCCH搜索空间定义为UE监测的一组PDCCH候选。搜索空间可以是公共搜索空间（CSS）或UE特定搜索空间（USS）。UE将在以下一个或多个搜索空间中的连续接收时隙中监测PDCCH候选</p><ul><li>在PCell上，CRC通过SI-RNTI加扰的DCI格式的Type0-PDCCH公共搜索空间</li><li>在PCell上，CRC通过SI-RNTI加扰的DCI格式的Type0A-PDCCH公共搜索空间</li><li>在PCell上，CRC通过RA-RNTI或TC-RNTI或C-RNTI加扰的DCI格式的Type1-PDCCH公共搜索空间</li><li>在PCell上，CRC通过P-RNTI加扰的DCI格式的Type2-PDCCH公共搜索空间</li><li>在PCell上，CRC通过INT-RNTI或SFI-RNTI或TPC-PUSCH-RNTI或TPC-PUCCH-RNTI或TPC-SRS-RNTI或C-RNTI或CS-RNTI(s)加扰的DCI格式的Type3-PDCCH公共搜索空间</li><li>CRC通过C-RNTI或CS-RNTI(s)加扰的DCI格式的UE特定搜索空间</li></ul><p>通过用于PDCCH接收的高层参数 <em>RMSI-PDCCH-Config</em> 和 <em>RMSI-sc</em> 提供的子载波间隔，为UE提供用于Type0-PDCCH公共搜索空间的CORESET的配置。UE确定Type0-PDCCH公共搜索空间的CORESET和监测时机。Type0-PDCCH公共搜索空间由表10.1-1中给出的CCE聚合等级和每个CCE聚合等级的候选数量来定义。</p><p>UE可假定与Type0-PDCCH和Type2-PDCCH公共搜索空间中的PDCCH接收和相应的PDSCH接收相关联的DM-RS天线端口，以及与SSB接收相关联的DM-RS天线端口是关于延迟扩展，多普勒扩展，多普勒频移，平均延迟和空间Rx参数QCL的。</p><p>Type0A-PDCCH或Type-2 PDCCH公共搜索空间的CORESET与Type0-PDCCH公共搜索空间的CORESET相同。UE通过高层参数 <em>osi-SearchSpace</em> 获得Type0A-PDCCH公共搜索空间的配置。UE通过高层参数 <em>paging-SearchSpace</em> 获得Type2-PDCCH公共搜索空间的配置。</p><p>用于Type0A-PDCCH或Type1-PDCCH或Type-2公共搜索空间的PDCCH子载波间隔和CP长度与用于Type0-PDCCH公共搜索空间的PDCCH相同。</p><p>UE可假定与Type0A-PDCCH公共搜索空间中的PDCCH接收相关联的DM-RS天线端口和与SSB接收相关联的DM-RS天线端口是关于延迟扩展，多普勒扩展，多普勒频移，平均延迟和空间Rx参数QCL的。</p><p>UE可假定在Type1-PDCCH公共搜索空间中，与PDCCH接收和相应的PDSCH接收相关联的DM-RS天线端口，和相应的PRACH相关联的SSB接收的DM-RS天线端口是QCL的。</p><p>如果SIB1中的参数 <em>PDCCH-DMRS-Scrambling-ID</em> 未提供用于Type0A-PDCCH或Type1-PDCCH或Type-2 PDCCH公共搜索空间的DM-RS加扰序列初始化的值，则该加扰序列初始化值为小区ID。</p><p>如果UE被配置用于DL BWP操作，则公共搜索空间的上述配置适用于初始激活DL BWP。除了初始激活DL BWP以外，UE可另外为PCell上的每个DL BWP配置Type0-PDCCH，Type0A-PDCCH，Type1-PDCCH或Type2-PDCCH公共搜索空间的CORESET。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/132155978.png" alt="mark"></p><p>对于一个服务小区，高层信令为UE提供$ P $个CORESET。对于映射有UE特定搜索空间，Type2-PDCCH或Type3-PDCCH公共搜索空间的CORESET $ P $，$ 0\le p&lt;P $，高层信令提供：</p><ul><li>高层参数 <em>CORESET-ID</em> 提供的CORESET索引；</li><li>高层参数 <em>PDCCH-DMRS-Scrambling-ID</em> 提供的DM-RS加扰序列初始化值；</li><li>高层参数 <em>CORESET-time-duration</em> 提供的连续符号数目；</li><li>高层参数 <em>CORESET-freq-dom</em> 提供的RB数目；</li><li>高层参数 <em>CORESET-CCE-to-REG-mapping-type</em> 提供的CCE-to-REG映射类型；</li><li>高层参数 <em>CORESET-REG-bundle-size</em> 提供的CCE-to-REG交织映射下的REG bundle大小；</li><li>高层参数 <em>CORESET-shift-index</em> 提供的REG bundle交织器的循环移位；</li><li>天线端口QCL（高层参数TCI-StatesPDCCH提供的一组天线端口QCLs）指示用于PDCCH接收的DM-RS天线端口的QCL信息;</li><li>通过高层参数 <em>TCI-PresentInDCI</em> 指示由CORESET $ p $中通过PDCCH发送的DCI format1_0或DCI format1_1的传输配置指示（TCI）字段的存在或不存在</li></ul><p>对于在服务小区的DL BWP中设置的每个CORESET，相应的高层参数 <em>CORESET-freq-dom</em> 提供了一个位图（bitmap）。该bitmap的比特与若干非重叠的PRB组具有一对一映射，其中每个PRB组有6个PRBs。带宽为$ N_{\text{RB}}^{\text{BWP}} $个PRBs的DL BWP中的PRB索引按升序编号，其中第一组的第一个PRB的索引为$ 6\cdot \left\lceil {N_{\text{RB}}^{\text{BWP}}}/{6}\; \right\rceil $。</p><p>如果UE没有从 <em>TCI-StatesPDCCH</em> 提供的一组天线端口QCL中接收到天线端口QCL的指示，则UE假定UE特定搜索空间中与PDCCH接收相关联的DM-RS天线端口与PBCH接收相关联的DM-RS天线端口关于延迟扩展，多普勒扩展，多普勒频移，平均延迟和空间Rx参数是QCL的。</p><p>对于UE被配置为在Type0-PDCCH公共搜索空间之外的搜索空间中监测PDCCH的每个服务小区，UE配置如下：</p><ul><li>高层参数 <em>search-space-config</em> 提供的搜索空间集的数目；</li><li>对于CORESET $p$中的每个搜索空间集<ul><li>高层参数 <em>Common-search-space-flag</em> 提供的所述搜索空间集为公共搜索空间集或UE特定搜索空间集的指示；</li><li>每个CCE聚合等级$L$下的PDCCH候选数目$ M_{p}^{(L)} $，其中聚合等级1、2、4、8、16分别由高层参数 <em>Aggregation-level-1</em>、<em>Aggregation-level-2</em>、<em>Aggregation-level-4</em>、<em>Aggregation-level-8</em> 和 <em>Aggregation-level-16</em> 指示。</li><li>高层参数 <em>Monitoring-periodicity-PDCCH-slot</em> 提供的PDCCH监测周期$ { {k}_{p}} $个时隙</li><li>高层参数 <em>Monitoring-symbols-PDCCH-within-slot</em> 提供的PDCCH在时隙内的监测模式，用于指示PDCCH监测时隙内CORESET的第一个符号</li></ul></li></ul><p>UE根据时隙内的PDCCH监测周期，PDCCH监测偏移和PDCCH监测模式来确定PDCCH监测时机。</p><p>CCE聚合等级$ L\in \left\{ 1, 2, 4, 8, 16 \right\} $下的PDCCH UE特定搜索空间$ S_{ { {k}_{p}}}^{(L)} $定义为一组CCE聚合等级为$L$的PDCCH候选。</p><p>如果UE为服务小区配置了高层参数 <em>CrossCarrierSchedulingConfig</em> ，则载波指示域的值有对应的 <em>CrossCarrierSchedulingConfig</em> 的值指示。</p><p>对于UE在UE特定搜索空间上监测PDCCH候选的服务小区，如果UE没有配置载波指示域，则UE应在无载波指示域条件下监测PDCCH候选。对于UE在UE特定搜索空间上监测PDCCH候选的服务小区，如果UE配置有载波指示域，则UE将在具有载波指示域条件下监测PDCCH候选。</p><p>如果UE被配置为监测具有与另一个服务小区中的SCell相对应的载波指示域的PDCCH候选，则UE不期望监测SCell上的PDCCH候选。对于UE监测PDCCH候选的服务小区，UE至少要监测同一个服务小区的PDCCH候选。</p><p>对于CORESET $p$，与载波指示域的值对应的服务小区的搜索空间的PDCCH候选所对应的CCEs由下式给出：</p><script type="math/tex;mode=display">L\cdot \left\{ \left( { {Y}_{p,{ {k}_{p}}}}+\left\lfloor \frac{ { {m}_{ { {n}_{CI}}}}\cdot { {N}_{\text{CCE},p}}}{L\cdot M_{p,\text{max}}^{(L)}} \right\rfloor +{ {n}_{CI}} \right)\bmod \left\lfloor { { {N}_{\text{CCE},p}}}/{L}\; \right\rfloor  \right\}+i</script><p>其中</p><p>对于任何公共搜索空间，$ { {Y}_{p,{ {k}_{p}}}}=0 $；</p><p>对于UE特定搜索空间，$ { {Y}_{p,{ {k}_{p}}}}=\left( { {A}_{p}}\cdot { {Y}_{p,{ {k}_{p}}-1}} \right)\bmod D $，$ { {Y}_{p,-1}}={ {n}_{\text{RNTI}}}\ne 0 $，$ { {A}_{0}}=39827 $，$ { {A}_{1}}=39829 $，$ D=65537 $；</p><p>$ i=0,\,\cdots ,\,L-1 $；</p><p>如果UE配置有监测PDCCH的服务小区的载波指示域，则$ { {n}_{CI}} $是载波指示域的值；否则，$ { {n}_{CI}}=0 $（包括任何公共搜索空间）；</p><p>$ { {N}_{\text{CCE},p}} $是CORESET $p$内的CCE数量，编号从0到$ { {N}_{\text{CCE},p}}-1 $；</p><p>$ { {m}_{ { {n}_{CI}}}}=0,\,…,\,M_{p,{ {n}_{CI}}}^{(L)}-1 $，其中$ M_{p,{ {n}_{CI}}}^{(L)} $是UE被配置为监测$ { {n}_{CI}} $对应的服务小区的聚合等级$L$的PDCCH候选的数量；</p><p>对于任何公共搜索空间，$ M_{p,\text{max}}^{(L)}=M_{p,0}^{(L)} $；</p><p>对于UE特定搜索空间，$ M_{p,\text{max}}^{(L)} $是$ M_{p,{ {n}_{CI}}}^{(L)} $的最大值，</p><p>$ M_{p,\text{max}}^{(L)} $是CORESET $p$中CCE聚合等级$L$的所有配置$ { {n}_{CI}} $值的所有对应DCI格式的$ M_{p,{ {n}_{CI}}}^{(L)} $的最大值；</p><p>RNTI的值$ { {n}_{\text{RNTI}}} $在38.212和38.214中定义。</p><p>UE配置为在DCI格式大小具有载波指示域和由C-RNTI加扰的CRC的服务小区中监测PDCCH候选，PDCCH候选对于DCI格式大小可以具有载波指示域的一个或多个可能值，应假定具有DCI格式大小的PDCCH候选可以在对应于DCI格式大小的载波指示域的任何可能值的任何PDCCH UE特定搜索空间中的服务小区中被发送。</p><h1 id="监测Type0-PDCCH公共搜索空间的UE过程"><a href="#监测Type0-PDCCH公共搜索空间的UE过程" class="headerlink" title="监测Type0-PDCCH公共搜索空间的UE过程"></a>监测Type0-PDCCH公共搜索空间的UE过程</h1><p><br>UE从表13-1至表13-8中描述的 <em>RMSI-PDCCH-Config</em> 的前4个比特中确定Type0-PDCCH公共搜索空间的CORESET的连续RB的数量和连续符号的数量；如表13-9至表13-13中所述，从 <em>RMSI-PDCCH-Config</em> 的后4位确定PDCCH监测时机，其中，$ \text{SF}{ {\text{N}}_{\text{C}}} $和$ { {n}_{\text{C}}} $分别是CORESET的SFN和时隙，$ \text{SF}{ {\text{N}}_{\text{SSB}}} $和$ { {n}_{\text{SSB}}} $分别是SSB的SFN和时隙。</p><p>表13-1至表13-8中的偏移量是根据CORESET的子载波间隔定义的，该偏移量是SSB的最小RB索引与用于Type0-PDCCH公共搜索空间的CORESET的最小RB索引之间的差值。表13-1至13-8中的条件A或条件B分别对应于SSB RBs和Type0-PDCCH公共搜索空间的CORESET RBs之间的PRG [38.214]对齐或不对齐的情况。</p><p>对于第一个SSB和CORESET复用模式，UE在两个连续时隙$ \left\{ { {n}_{\text{0}}},\,{ {n}_{\text{0}}}+1 \right\} $上监测Type0-PDCCH公共搜索空间中的PDCCH。对于具有索引$i$的SSB，UE决定第一个时隙的索引$ { {n}_{\text{0}}} $位于一定的系统帧号（SFN），且$ { {n}_{\text{0}}}=\left( O\cdot { {2}^{\mu }}+\left\lfloor i\cdot M \right\rfloor \right)\bmod N_{\text{slot}}^{\text{frame},\mu } $。若$ \left\lfloor {\left( O\cdot { {2}^{\mu }}+\left\lfloor i\cdot M \right\rfloor \right)}/{N_{\text{slot}}^{\text{frame},\mu }}\; \right\rfloor =0 $，则该系统帧号满足$ \text{SFN}\bmod 2=0 $；若$ \left\lfloor {\left( O\cdot { {2}^{\mu }}+\left\lfloor i\cdot M \right\rfloor \right)}/{N_{\text{slot}}^{\text{frame},\mu }}\; \right\rfloor =1 $，则该系统帧号满足$ \text{SFN}\bmod 2=1 $。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/135655440.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/135734082.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/135823895.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/135853964.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/140008216.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/140121486.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/140208704.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/140245627.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/140336520.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/140439064.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/140920630.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/140959705.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/141044288.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171231/141110766.png" alt="mark"></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;PDCCH&quot;&gt;&lt;a href=&quot;#PDCCH&quot; class=&quot;headerlink&quot; title=&quot;PDCCH&quot;&gt;&lt;/a&gt;PDCCH&lt;/h1&gt;&lt;h2 id=&quot;CCE&quot;&gt;&lt;a href=&quot;#CCE&quot; class=&quot;headerlink&quot; title=&quot;CCE&quot;&gt;&lt;/a&gt;CCE&lt;/h2&gt;&lt;p&gt;&lt;br&gt;PDCCH由一个或多个控制信道单元（control-channel element，CCE）组成，见Table 7.3.2.1-1。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20171230/110738019.png&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;&lt;h2 id=&quot;CORESET&quot;&gt;&lt;a href=&quot;#CORESET&quot; class=&quot;headerlink&quot; title=&quot;CORESET&quot;&gt;&lt;/a&gt;CORESET&lt;/h2&gt;&lt;p&gt;&lt;br&gt;控制资源集（control-resource set，CORESET）由$ N_{\text{RB}}^{\text{CORESET}} $个频域RBs和$ N_{\text{symb}}^{\text{CORESET}}\in \left\{ 1,2,3 \right\} $个时域符号组成，$ N_{\text{RB}}^{\text{CORESET}} $的值由高层参数 &lt;em&gt;CORESET-freq-dom&lt;/em&gt; 给定，$ N_{\text{symb}}^{\text{CORESET}} $的值由高层参数 &lt;em&gt;CORESET-time-dur&lt;/em&gt; 给定，其中仅当高层参数 &lt;em&gt;DL-DMRS-typeA-pos=3&lt;/em&gt; 时才支持$ N_{\text{symb}}^{\text{CORESET}}=3 $。&lt;/p&gt;&lt;p&gt;1个CCE由6个资源粒子组（resource-element group，REG）组成，1个REG等于1个OFDM符号上的1个RB。CORESET内的REGs以时域优先的方式按升序编号，从CORESET中第1个OFDM符号且编号最小的RB以0开始编号。&lt;/p&gt;&lt;p&gt;UE可配置多个CORESETs，每个CORESET仅对应一种CCE-to-REG映射。&lt;/p&gt;&lt;p&gt;CORESET中CCE-to-REG映射可以是交织的或非交织的，这由高层参数 &lt;em&gt;CORESET-CCE-REG-mapping-type&lt;/em&gt; 来配置，并且由REG捆绑（REG bundle）来描述：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;REG bundle $ i $ 定义为一组REGs $ \left\{ iL,iL+1,…,iL+L-1 \right\} $，其中$ L $是REG bundle大小，$ i=0,1,…,{N_{\text{REG}}^{\text{CORESET}}}/{L}\;-1 $，且$ N_{\text{REG}}^{\text{CORESET}}=N_{\text{RB}}^{\text{CORESET}}N_{\text{symb}}^{\text{CORESET}} $是CORESET中REG的数目；&lt;/li&gt;&lt;li&gt;CCE $ j $由一组REG bundles $ \left\{ f({6j}/{L}\;),f({6j}/{L}\;+1),…,f({6j}/{L}\;+{6}/{L}\;-1) \right\} $组成，其中$ f(\cdot ) $是交织器&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;对于非交织CEE-to-REG映射，$ L=6 $且$ f(j)=j $。&lt;/p&gt;&lt;p&gt;对于交织CEE-to-REG映射，当$ N_{\text{symb}}^{\text{CORESET}}=1 $时，有$ L\in \left\{ 2,6 \right\} $；当$ N_{\text{symb}}^{\text{CORESET}}\in \left\{ 2,3 \right\} $时，有$ L\in \left\{ N_{\text{symb}}^{\text{CORSET}},6 \right\} $，其中$ L $由高层参数&lt;em&gt;CORESET-REG-bundle-size&lt;/em&gt;配置。交织器定义为&lt;/p&gt;&lt;script type=&quot;math/tex;mode=display&quot;&gt;\begin{align}
 \nonumber &amp; f(j)=\left( rC+c+{ {n}_{\text{shift}}} \right)\bmod \left( {N_{\text{REG}}^{\text{CORESET}}}/{L}\; \right) \\ 
 \nonumber &amp; j=cR+r \\ 
\nonumber  &amp; r=0,1,...,R-1 \\ 
 \nonumber &amp; c=0,1,...,C-1 \\ 
 \nonumber &amp; C=\left\lceil {N_{\text{REG}}^{\text{CORESET}}}/{\left( LR \right)}\; \right\rceil   
\end{align}&lt;/script&gt;&lt;p&gt;其中$ R\in \left\{ 2,3,6 \right\} $由高层参数 &lt;em&gt;CORESET-interleaver-size&lt;/em&gt; 给定，且&lt;/p&gt;&lt;ul&gt;&lt;li&gt;$ { {n}_{\text{shift}}} $是物理层小区ID $ N_{\text{ID}}^{\text{cell}} $ 的函数&lt;/li&gt;&lt;li&gt;$ { {n}_{\text{shift}}}\in \left\{ 0,1,…,274 \right\} $是高层参数 &lt;em&gt;CORESET-shift-index&lt;/em&gt; 的函数&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;UE可假定（频域预编码颗粒度）&lt;/p&gt;&lt;ul&gt;&lt;li&gt;如果高层参数 &lt;em&gt;CORESET-precoder-granularity&lt;/em&gt; 等于CORESET-REG-bundle-size，则在REG bundle中，在频域上使用相同的预编码；&lt;/li&gt;&lt;li&gt;如果高层参数 &lt;em&gt;CORESET-precoder-granularity&lt;/em&gt; 等于CORESET频域大小，则在CORESET中的连续RBs内的所有REGs中，在频域上使用相同的预编码&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;对于PBCH配置的CORESET，$ L=6 $。&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
      <category term="2017-12" scheme="http://marshallcomm.cn/tags/2017-12/"/>
    
  </entry>
  
  <entry>
    <title>5G PRACH与随机接入</title>
    <link href="http://marshallcomm.cn/2017/12/29/nr-v200-l1-prach/"/>
    <id>http://marshallcomm.cn/2017/12/29/nr-v200-l1-prach/</id>
    <published>2017-12-29T02:52:39.000Z</published>
    <updated>2017-12-30T02:51:04.234Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="PRACH"><a href="#PRACH" class="headerlink" title="PRACH"></a>PRACH</h1><h2 id="序列生成"><a href="#序列生成" class="headerlink" title="序列生成"></a>序列生成</h2><p><br>随机接入前导$ { {x}_{u,v}}(n) $应根据以下方式生成</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & { {x}_{u,v}}(n)={ {x}_{u}}((n+{ {C}_{v}})\bmod { {L}_{\text{RA}}}) \\ 
 \nonumber  & { {x}_{u}}(i)={ {e}^{-j\frac{\pi ui(i+1)}{ { {L}_{\text{RA}}}}}},i=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}</script><p>从而进一步生成频域表示</p><script type="math/tex;mode=display">{ {y}_{u,v}}(n)=\sum\limits_{m=0}^{ { {L}_{\text{RA}}}-1}{ { {x}_{u,v}}(m)\cdot { {e}^{-j\frac{2\pi mn}{ { {L}_{\text{RA}}}}}}}</script><p>其中$ { {L}_{\text{RA}}}=839 $或$ { {L}_{\text{RA}}}=139 $取决于表6.3.3.1-1和6.3.3.1-2给定的PRACH前导格式。序列号$ u $根据表6.3.3.1-3和6.3.3.1-4由高层参数 <em>PRACHRootSequenceIndex</em> 获得。</p><a id="more"></a><p>循环移位$ { {C}_{v}} $为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & C{}_{v}=\left\{ \begin{array}{*{35}{l}}
   v{ {N}_{\text{CS}}} & \text{v}=\text{0,1,}...\text{,}\left\lfloor { { {L}_{\text{RA}}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor -1,{ {N}_{\text{CS}}}\ne 0 & \text{for unrestricted sets}  \\
   \text{0} & { {N}_{\text{CS}}}=0 & \text{for unrestricted sets}  \\
   { {d}_{\text{start}}}\left\lfloor {v}/{n_{\text{shift}}^{\text{RA}}}\; \right\rfloor +\left( v\bmod n_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} \nonumber & v=0,1,...,w-1 & \text{for restricted sets type A and B}  \\
   { { {\bar{\bar{d}}}}_{\text{start}}}+\left( v-w \right){ {N}_{\text{CS}}} & v=w,...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}-1 & \text{for restricted sets type B}  \\
   { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}+\left( v-w-\bar{\bar{n}}_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} & v=w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}},...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}+\bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}-1 & \text{for restricted sets type B}  \\
\end{array} \right. \\ 
 \nonumber & w=n_{\text{shift}}^{\text{RA}}n_{\text{group}}^{\text{RA}}+\bar{n}_{\text{shift}}^{\text{RA}}  
\end{align}</script><p>其中$ { {N}_{\text{CS}}} $由表6.3.3.1-5到6.3.3.1-7提供，高层参数 <em>restrictedSetConfig</em> 决定限制集类型（非限制集，限制集A，限制集B），表6.3.3.1-1和6.3.3.1-2指示不同前导格式所支持的限制集类型。</p><p>变量$ { {d}_{u}} $为</p><script type="math/tex;mode=display">{ {d}_{u}}=\left\{ \begin{array}{*{35}{l}}
   q & 0\le q<{ { {L}_{\text{RA}}}}/{2}\;  \\
   { {L}_{\text{RA}}}-q & \text{otherwise}  \\
\end{array} \right.</script><p>其中$q$是满足$ \left( qu \right)\bmod { {L}_{\text{RA}}}=1 $的最小非负整数。循环移位的限制集参数取决于$ { {d}_{u}} $的值。</p><p>对于限制集A，参数给定为</p><ul><li>for $ { {N}_{\text{CS}}}\le { {d}_{u}}&lt;{ { {L}_{\text{RA}}}}/{3}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
 \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=2{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {({ {L}_{\text{RA}}}-2{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}</script><ul><li>for $ { { {L}_{\text{RA}}}}/{3}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{2}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max \left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}</script><p>对于限制集B，参数给定为</p><ul><li>for $ { {N}_{\text{CS}}}\le { {d}_{u}}&lt;{ { {L}_{\text{RA}}}}/{5}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
 \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=4{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {({ {L}_{\text{RA}}}-4{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}</script><ul><li>for $ { { {L}_{\text{RA}}}}/{5}\;\le { {d}_{u}}\le {\left( { {L}_{\text{RA}}}-{ {N}_{\text{CS}}} \right)}/{\text{4}}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( { {L}_{\text{RA}}}-4{ {d}_{u}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-4{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max \left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}</script><ul><li>for $ {({ {L}_{\text{RA}}}+{ {N}_{\text{CS}}})}/{4}\;\le { {d}_{u}}&lt;{2{ {L}_{\text{RA}}}}/{7}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
 \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {(4{ {d}_{u}}-{ {L}_{\text{RA}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=4{ {d}_{u}}-{ {L}_{\text{RA}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}={ {L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}={ {L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( { {L}_{\text{RA}}}-3{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}},4{ {d}_{u}}-{ {L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( \left( 1-\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right) \right)\left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)+\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right)\left( 4{ {d}_{u}}-{ {L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right) \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor -\bar{\bar{n}}_{\text{shift}}^{\text{RA}}  
\end{align}</script><ul><li>for $ {2{ {L}_{\text{RA}}}}/{7}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{3}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
 \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-3{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}={ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( 4{ {d}_{u}}-{ {L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}},{ {L}_{\text{RA}}}-3{ {d}_{u}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><ul><li>for $ {({ {L}_{\text{RA}}}+{ {N}_{\text{CS}}})}/{3}\;\le { {d}_{u}}&lt;{2{ {L}_{\text{RA}}}}/{5}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
 \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {(3{ {d}_{u}}-{ {N}_{\text{ZC}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=3{ {d}_{u}}-{ {N}_{\text{ZC}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( { {L}_{\text{RA}}}-2{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><ul><li>for $ {2{ {L}_{\text{RA}}}}/{5}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{2}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {N}_{\text{ZC}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=2({ {N}_{\text{ZC}}}-2{ {d}_{u}})+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\ 
 \nonumber  & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-{ {d}_{u}})}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( 3{ {d}_{u}}-{ {L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><p>对于所有其他$ { {d}_{u}} $的值，限制集中无循环移位。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/112954192.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/113036188.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/113143413.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/113251910.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/113318908.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/113341808.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/113400040.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/113418389.png" alt="mark"></p><h2 id="物理资源映射"><a href="#物理资源映射" class="headerlink" title="物理资源映射"></a>物理资源映射</h2><p><br>前导序列应根据以下方式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & a_{k}^{(p,\text{RA})}={ {\beta }_{\text{PRACH}}}{ {y}_{u,v}}(k) \\ 
 \nonumber & k=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}</script><p>其中与声明为“保留”的资源重叠的物理资源应计入映射过程但不用于传输，$ { {\beta }_{\text{PRACH}}} $是幅值因子，天线端口$ p=4000 $。基带信号的产生应按照38.211的5.3节进行，使用表6.3.3.1-1或表6.3.3.1-2中的参数，$ \bar{k} $由表6.3.3.2-1给出。</p><p>随机接入前导只能根据表6.3.3.2-2的高层参数 <em>PRACHConfigurationIndex</em> 给定的时间和频率资源上进行传输。该表取决于38.101中定义的FR1或FR2（频率范围FR的定义见本文附录）以及频谱类型。为了表中的时隙编号的目的，应该假定下面的子载波间隔：</p><ul><li>$ 15\text{ kHz} $用于PRACH前导格式0-3</li><li>$ 15\cdot { {2}^{\mu }}\text{ kHz} $用于PRACH前导格式A1，A2，A3，B1，B2，B3，B4，C0，C2，其中$ \mu $是PRACH子载波间隔配置</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/150255196.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/150334167.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/150402629.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/150424741.png" alt="mark"></p><h1 id="随机接入过程"><a href="#随机接入过程" class="headerlink" title="随机接入过程"></a>随机接入过程</h1><p><br>在开始物理随机接入过程之前，L1必须从高层接收一组SSB索引，并且应该向高层提供相应的一组RSRP测量值。</p><p>在开始物理随机接入过程之前，L1应从高层接收以下信息：</p><ul><li>物理随机接入信道（PRACH）传输参数（用于PRACH传输的PRACH前导格式，时间资源和频率资源）的配置。</li><li>用于确定PRACH前导序列集合中的根序列及其循环移位的参数（逻辑根序列索引表，循环移位（ ）和集合类型（非限制集，限制集A或限制集B））</li></ul><p>从物理层的角度来看，L1随机接入过程包括PRACH中的随机接入前导（Msg1）的传输，PDSCH（Msg2）中的随机接入响应（RAR），Msg3 PUSCH和PDSCH中的竞争解决（Msg4）。</p><p>如果UE没有被配置有两个UL载波，并且通过“PDCCH order”向UE发起随机接入过程，则随机接入前导传输与由高层发起的随机接入前导传输具有相同的子载波间隔。</p><p>如果UE配置有针对服务小区的两个UL载波，并且UE检测到“PDCCH order”，则UE使用检测到的“PDCCH order”的UL/SUL指示域的值来确定用于对应的随机接入前导传输的UL载波，和随机接入前导传输与UE被配置用于对应UL载波的子载波间隔。</p><h2 id="随机接入前导"><a href="#随机接入前导" class="headerlink" title="随机接入前导"></a>随机接入前导</h2><p><br>L1过程在高层请求PRACH传输时被触发。PRACH传输的高层配置包括以下内容：</p><ul><li>用于PRACH传输的配置[TS38.211]</li><li>前导索引，前导子载波间隔，$ { {P}_{\text{PRACH,target}}} $，相应的RA-RNTI和PRACH资源</li></ul><p>在所指示的PRACH资源上，使用所选择的PRACH格式和发送功率$ { {P}_{\text{PRACH}}} $发送前导序列。</p><p>UE确定传输周期$i$服务小区$c$载波$f$上的PRACH的传输功率为：</p><script type="math/tex;mode=display">{ {P}_{\text{PRACH,}f,c}}(i)=\min { {\left\{ { {P}_{\text{CMAX},f,c}}(i),\ { {P}_{\text{PRACH,target}}}+P{ {L}_{f,c}} \right\}}^{ {}}}  dBm</script><p>其中$ { {P}_{\text{CMAX,}f,c}}(i) $是在38.101中定义的传输周期$i$服务小区$c$载波$f$上的UE发送功率，$ { {P}_{\text{PRACH,target}}} $是由高层参数 <em>preambleReceivedTargetPower</em> 提供的PRACH目标接收功率，$ P{ {L}_{f,c}} $是由UE计算的服务小区$c$载波$f$上的路径损耗，以dB为单位计算为<em>referenceSignalPower</em>——高层滤波器RSRP，其中RSRP在38.215中定义，高层滤波器的配置则在38.331中定义。<em>referenceSignalPower</em> 等于 <em>SS-PBCHBlockPower</em>，其中 <em>SS-PBCHBlockPower</em> 由SIB1提供。</p><p>如果UE发送PRACH以传送链路重配置请求，如38.213第6章所述，$ { {P}_{\text{PRACH,target}}} $由高层参数<em>preambleReceivedTargetPower-BFR</em>提供。</p><p>如果在随机接入响应窗口内，如2.2节所述，若UE未收到包含着与UE发送的前导序列相对应的前导ID的随机接入响应，则UE应当确定后续PRACH传输的传输功率（如果有的话，如38.321所述）。</p><h2 id="随机接入响应（RAR"><a href="#随机接入响应（RAR" class="headerlink" title="随机接入响应（RAR)"></a>随机接入响应（RAR)</h2><p><br>对PRACH响应的传输，UE在高层（38.321）控制的窗口期间尝试检测具有相应RA-RNTI的PDCCH。窗口从Type1-PDCCH公共搜索空间的最早的CORESET的第一个符号开始，也即在前导序列传输的最后一个符号之后$ { {\left\lceil {\left( \Delta \cdot N_{\text{slot}}^{\text{subframe,}\text{. }\mu\text{ }}\cdot N_{\text{symb}}^{\text{slot}} \right)}/{ { {T}_{sf}}}\; \right\rceil }^{ {}}}\cdot { { {T}_{sf}}}/{\left( N_{\text{slot}}^{\text{subframe,}\text{. }\mu\text{ }}\cdot N_{\text{symb}}^{\text{slot}} \right)}\; $个符号。基于Type0-PDCCH公共搜索空间的子载波间隔和CP，窗口长度的时隙数由高层参数 <em>rar-WindowLength</em> 提供。</p><p>如果UE在窗口内检测到具有对应的RA-RNTI的PDCCH和相应的DL-SCH传输块，则UE将传输块传递到高层。高层针对与PRACH传输相关联的随机接入前导标识（RAPID）解析传输块，并且如果RAPID被识别，则向物理层指示上行授权。UE应接收PDCCH和PDSCH，其中PDSCH包含的DL-SCH传输块具有与PDCCH Type0-PDCCH公共搜索空间的接收相同的子载波间隔和相同的循环前缀，并且与DM-RS天线端口具有QCL性质（38.214）。</p><p>除非UE已配置子载波间隔，否则UE使用与提供RAR的PDSCH相同的子载波间隔以接收后续的PDSCH。</p><p>如果UE在窗口内未检测到PDDCH或对应的DL-SCH传输块，则UE过程如38.321中所述。</p><h2 id="Msg3-PUSCH"><a href="#Msg3-PUSCH" class="headerlink" title="Msg3 PUSCH"></a>Msg3 PUSCH</h2><p><br>高层参数 <em>msg3-tp</em> 向UE指示UE是否应当对Msg3 PUSCH传输应用变换预编码（如38.211中所述）。</p><p>Msg3 PUSCH传输的子载波间隔由高层参数 <em>msg3-scs</em> 提供。UE将在同一个服务小区上发送PRACH和Msg3 PUSCH。</p><p>用于Msg3 PUSCH传输的UL BWP由SIB1指示。</p><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/151344428.png" alt="mark"></p><blockquote><p>本文参考3GPP TS38.211 V2.0.0 (2017-12)</p></blockquote><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;PRACH&quot;&gt;&lt;a href=&quot;#PRACH&quot; class=&quot;headerlink&quot; title=&quot;PRACH&quot;&gt;&lt;/a&gt;PRACH&lt;/h1&gt;&lt;h2 id=&quot;序列生成&quot;&gt;&lt;a href=&quot;#序列生成&quot; class=&quot;headerlink&quot; title=&quot;序列生成&quot;&gt;&lt;/a&gt;序列生成&lt;/h2&gt;&lt;p&gt;&lt;br&gt;随机接入前导$ { {x}_{u,v}}(n) $应根据以下方式生成&lt;/p&gt;&lt;script type=&quot;math/tex;mode=display&quot;&gt;\begin{align}
 \nonumber &amp; { {x}_{u,v}}(n)={ {x}_{u}}((n+{ {C}_{v}})\bmod { {L}_{\text{RA}}}) \\ 
 \nonumber  &amp; { {x}_{u}}(i)={ {e}^{-j\frac{\pi ui(i+1)}{ { {L}_{\text{RA}}}}}},i=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}&lt;/script&gt;&lt;p&gt;从而进一步生成频域表示&lt;/p&gt;&lt;script type=&quot;math/tex;mode=display&quot;&gt;{ {y}_{u,v}}(n)=\sum\limits_{m=0}^{ { {L}_{\text{RA}}}-1}{ { {x}_{u,v}}(m)\cdot { {e}^{-j\frac{2\pi mn}{ { {L}_{\text{RA}}}}}}}&lt;/script&gt;&lt;p&gt;其中$ { {L}_{\text{RA}}}=839 $或$ { {L}_{\text{RA}}}=139 $取决于表6.3.3.1-1和6.3.3.1-2给定的PRACH前导格式。序列号$ u $根据表6.3.3.1-3和6.3.3.1-4由高层参数 &lt;em&gt;PRACHRootSequenceIndex&lt;/em&gt; 获得。&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
      <category term="2017-12" scheme="http://marshallcomm.cn/tags/2017-12/"/>
    
  </entry>
  
  <entry>
    <title>5G SSB与小区搜索</title>
    <link href="http://marshallcomm.cn/2017/12/29/nr-v200-l1-ssb/"/>
    <id>http://marshallcomm.cn/2017/12/29/nr-v200-l1-ssb/</id>
    <published>2017-12-29T01:21:26.000Z</published>
    <updated>2017-12-30T02:50:48.066Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>在5G NR中，主同步信号（PSS）、辅同步信号（SSS）和PBCH共同构成一个SSB（SS/PBCH block），SSB在时域上共占用4个OFDM符号，频域共占用240个子载波（20个PRB）。本文分别介绍PSS、SSS、PBCH、SSB以及小区搜索。</p><h1 id="同步信号（SS）"><a href="#同步信号（SS）" class="headerlink" title="同步信号（SS）"></a>同步信号（SS）</h1><h2 id="物理层小区ID"><a href="#物理层小区ID" class="headerlink" title="物理层小区ID"></a>物理层小区ID</h2><p><br>1008个唯一的物理层小区ID根据如下公式确定</p><script type="math/tex;mode=display">N_{\text{ID}}^{\text{cell}}=3N_{\text{ID}}^{\text{(1)}}+N_{\text{ID}}^{\text{(2)}}</script><p>其中$ N_{\text{ID}}^{\text{(1)}}\in \left\{ 0,1,…,335 \right\} $，$ N_{\text{ID}}^{\text{(2)}}\in \left\{ 0,1,2 \right\} $。</p><a id="more"></a><h2 id="主同步信号（PSS）"><a href="#主同步信号（PSS）" class="headerlink" title="主同步信号（PSS）"></a>主同步信号（PSS）</h2><h3 id="序列生成"><a href="#序列生成" class="headerlink" title="序列生成"></a>序列生成</h3><p>PSS序列$ { {d}_{\text{PSS}}}(n) $根据如下公式生成</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & { {d}_{\text{PSS}}}\left( n \right)=1-2x\left( m \right) \\ 
 \nonumber & m=\left( n+43N_{\text{ID}}^{\text{(2)}} \right)\bmod 127 \\ 
 \nonumber & 0\le n<127  
\end{align}</script><p>其中</p><script type="math/tex;mode=display">x\left( i+7 \right)=\left( x\left( i+4 \right)+x\left( i \right) \right)\bmod 2</script><p>且</p><script type="math/tex;mode=display">\left[ \begin{matrix}
   x\left( 6 \right) & x\left( 5 \right) & x\left( 4 \right) & x\left( 3 \right) & x\left( 2 \right) & x\left( 1 \right) & x\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   1 & 1 & 1 & 0 & 1 & 1 & 0  \\
\end{matrix} \right]</script><h3 id="物理资源映射"><a href="#物理资源映射" class="headerlink" title="物理资源映射"></a>物理资源映射</h3><p><br>物理资源映射见本文SSB。</p><h2 id="辅同步信号（SSS）"><a href="#辅同步信号（SSS）" class="headerlink" title="辅同步信号（SSS）"></a>辅同步信号（SSS）</h2><h3 id="序列生成-1"><a href="#序列生成-1" class="headerlink" title="序列生成"></a>序列生成</h3><p><br>SSS序列$ { {d}_{\text{SSS}}}(n) $根据如下公式生成</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & { {d}_{\text{SSS}}}\left( n \right)=\left[ 1-2{ {x}_{0}}\left( \left( n+{ {m}_{0}} \right)\bmod 127 \right) \right]\left[ 1-2{ {x}_{1}}\left( \left( n+{ {m}_{1}} \right)\bmod 127 \right) \right] \\ 
 \nonumber & { {m}_{0}}=15\left\lfloor \frac{N_{\text{ID}}^{\text{(1)}}}{\text{112}} \right\rfloor +5N_{\text{ID}}^{\text{(2)}} \\ 
 \nonumber & { {m}_{1}}=N_{\text{ID}}^{\text{(1)}}\bmod 112 \\ 
 \nonumber & 0\le n<127  
\end{align}</script><p>其中</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & { {x}_{0}}\left( i+7 \right)=\left( { {x}_{0}}\left( i+4 \right)+x{}_{0}\left( i \right) \right)\bmod 2 \\ 
 \nonumber & { {x}_{1}}\left( i+7 \right)=\left( { {x}_{1}}\left( i+1 \right)+x{}_{1}\left( i \right) \right)\bmod 2  
\end{align}</script><p>且</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & \left[ \begin{matrix}
   { {x}_{0}}\left( 6 \right) & { {x}_{0}}\left( 5 \right) & { {x}_{0}}\left( 4 \right) & { {x}_{0}}\left( 3 \right) & { {x}_{0}}\left( 2 \right) & { {x}_{0}}\left( 1 \right) & { {x}_{0}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 & 0 & 0 & 0 & 0 & 0 & 1  \\
\end{matrix} \right] \\ 
  \nonumber & \left[ \begin{matrix}
   { {x}_{1}}\left( 6 \right) & { {x}_{1}}\left( 5 \right) & { {x}_{1}}\left( 4 \right) & { {x}_{1}}\left( 3 \right) & { {x}_{1}}\left( 2 \right) & { {x}_{1}}\left( 1 \right) & { {x}_{1}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 & 0 & 0 & 0 & 0 & 0 & 1  \\
\end{matrix} \right]  
\end{align}</script><h3 id="物理资源映射-1"><a href="#物理资源映射-1" class="headerlink" title="物理资源映射"></a>物理资源映射</h3><p><br>物理资源映射见“SSB的时域结构”一节。</p><h1 id="物理广播信道（PBCH）"><a href="#物理广播信道（PBCH）" class="headerlink" title="物理广播信道（PBCH）"></a>物理广播信道（PBCH）</h1><h2 id="加扰"><a href="#加扰" class="headerlink" title="加扰"></a>加扰</h2><p><br>UE应假定比特块$ b(0),…,b(M_{\text{bit}}^{ {}}-1) $在调制前进行加扰，其中$ { {M}_{\text{bit}}} $是PBCH传输的比特数，加扰后的比特块为$ \tilde{b}(0),…,\tilde{b}({ {M}_{\text{bit}}}-1) $</p><script type="math/tex;mode=display">\tilde{b}(i)=\left( b(i)+c(i+v{ {M}_{\text{bit}}}) \right)\bmod 2</script><p>其中扰码序列$ c(i) $由38.211的5.2节给定。扰码序列应在每个SSB的开始时根据$ { {c}_{\text{init}}}=N_{\text{ID}}^{\text{cell}} $进行初始化</p><ul><li>对于$ { {L}_{\max }}=4 $，$ v $是SSB索引的2个最低有效位</li><li>对于$ { {L}_{\max }}=8 $或$ { {L}_{\max }}=64 $，$ v $是SSB索引的3 个最低有效位</li></ul><p>其中$ { {L}_{\max }} $是38.104给出的特定频带的SS/PBCH周期中的SSB的最大数目。</p><h2 id="调制"><a href="#调制" class="headerlink" title="调制"></a>调制</h2><p><br>UE应假定比特块$ \tilde{b}(0),…,\tilde{b}({ {M}_{\text{bit}}}-1) $采用QPSK调制，得到复值调制符号块$ { {d}_{\text{PBCH}}}(0),…,{ {d}_{\text{PBCH}}}({ {M}_{\text{symb}}}-1) $，QPSK见38.211的5.1.3节。</p><h2 id="物理资源映射-2"><a href="#物理资源映射-2" class="headerlink" title="物理资源映射"></a>物理资源映射</h2><p><br>物理资源映射见“SSB的时域结构”一节。</p><h1 id="解调参考信号（DM-RS）"><a href="#解调参考信号（DM-RS）" class="headerlink" title="解调参考信号（DM-RS）"></a>解调参考信号（DM-RS）</h1><h2 id="序列生成-2"><a href="#序列生成-2" class="headerlink" title="序列生成"></a>序列生成</h2><p><br>UE应假定SSB的参考信号序列$ r(m) $定义为</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中加扰序列$ c(n) $在38.211的5.2节定义。扰码序列生成器应在每个SSB 机会的开始处进行初始化</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & { {c}_{\text{init}}}={ {2}^{11}}\left( { { {\bar{i}}}_{\text{SSB}}}+1 \right)\left( \left\lfloor {N_{\text{ID}}^{\text{cell}}}/{\text{4}}\; \right\rfloor +1 \right)+{ {2}^{6}}\left( { { {\bar{i}}}_{\text{SSB}}}+1 \right)+\left( N_{\text{ID}}^{\text{cell}}\bmod 4 \right) \\ 
 \nonumber & { { {\bar{i}}}_{\text{SSB}}}=4{ {i}_{\text{SSB}}}+n{}_{\text{hf}} \\ 
\end{align}</script><p>其中</p><ul><li>若$ { {L}_{\max }}=4 $，则$ { {n}_{\text{hf}}} $是发送PBCH的半帧数目，$ { {i}_{\text{SSB}}} $是SSB索引的2个LSB比特</li><li>若$ { {L}_{\max }}=8 $或$ { {L}_{\max }}=64 $，则$ { {n}_{\text{hf}}}=0 $，$ { {i}_{\text{SSB}}} $是SSB索引的3个LSB比特</li></ul><p>其中$ { {L}_{\max }} $是特定带宽下的SSB周期中SSB的最大数量。</p><h2 id="物理资源映射-3"><a href="#物理资源映射-3" class="headerlink" title="物理资源映射"></a>物理资源映射</h2><p><br>物理资源映射见“SSB的时域结构”一节。</p><h1 id="SSB"><a href="#SSB" class="headerlink" title="SSB"></a>SSB</h1><h2 id="SSB的时域结构"><a href="#SSB的时域结构" class="headerlink" title="SSB的时域结构"></a>SSB的时域结构</h2><p><br>在时域上，1个SSB由4个OFDM符号组成，符号在SSB内从0到3增序编号。如表7.4.3.1-1所示，PSS、SSS、PBCH及其DM-RS占用不同的符号。</p><p>在频域上，1个SSB由240个连续子载波组成，子载波在SSB内从0到239增序编号。$ k $和$ l $分别表示SSB内的频域索引和时域索引。UE可假定表7.4.3.1-1中的“Set to 0”的资源粒子（RE）被设置为零。SSB的子载波0对应于公共资源块$ N_{\text{CRB}}^{\text{SSB}} $的子载波$ { {k}_{0}} $，其中$ N_{\text{CRB}}^{\text{SSB}} $由高层参数 <em>offset-ref-low-scs-ref-PRB</em> 得到。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/094753857.png" title="图 1 SS/PBCH block时频域结构"></p><p>与SSB部分或完全重叠的任何公共资源块应当被视为被占用，并且不被用于PDSCH或PDCCH传输。UE可假定不用于SS/PBCH传输的资源粒子，将部分重叠的公共资源的一部分设置为零。</p><p>对于SSB，UE应假定</p><ul><li>天线端口$ p=4000 $，</li><li>PSS、SSS和PBCH具有相同的CP长度和子载波间隔，</li><li>对于SSB type A，$ { {k}_{0}}\in \left\{ \text{0, 1, 2, }…\text{, 23} \right\} $，$ { {k}_{0}}\in \left\{ \text{0, 1, 2, }…\text{, 23} \right\} $，$ N_{\text{CRB}}^{\text{SSB}} $是就15kHz子载波间隔而言的表示，</li><li>对于SSB type B，$ { {k}_{0}}\in \left\{ \text{0, 1, 2, }…\text{, 11} \right\} $，$ \mu \in \left\{ \text{3,4} \right\} $，$ N_{\text{CRB}}^{\text{SSB}} $是就60kHz子载波间隔而言的表示</li></ul><p>UE可假定相同的块索引所发送的SSB关于多普勒扩展，多普勒频移，平均增益，平均延迟和空间Rx参数是准共同定位（quasi co-located，QCL）的。对于任何其他SSB传输，UE不应假定QCL。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/095600758.png" alt="mark"></p><h3 id="SSB中的PSS映射"><a href="#SSB中的PSS映射" class="headerlink" title="SSB中的PSS映射"></a>SSB中的PSS映射</h3><p><br>UE应假定组成PSS的符号序列$ { {d}_{\text{PSS}}}(0),…,{ {d}_{\text{PSS}}}(126) $乘以幅值因子$ { {\beta }_{\text{PSS}}} $，以符合TS 38.213中规定的PSS功率分配。符号序列按$ k $增序映射到RE $ { {\left( k,l \right)}_{p,\mu }} $，其中$ k $和$ l $由表7.4.3.1-1给定，分为表示SSB中的频域索引和时域索引。</p><h3 id="SSB中的SSS映射"><a href="#SSB中的SSS映射" class="headerlink" title="SSB中的SSS映射"></a>SSB中的SSS映射</h3><p><br>UE应假定组成PSS的符号序列$ { {d}_{\text{SSS}}}(0),…,{ {d}_{\text{SSS}}}(126) $乘以幅值因子$ { {\beta }_{\text{ }!!\grave{ }!!\text{ PBCH}}} $，并按$ k $增序映射到RE $ { {\left( k,l \right)}_{p,\mu }} $，其中$ k $和$ l $由表7.4.3.1-1给定，分为表示SSB内的频域索引和时域索引。</p><h3 id="SSB中的PBCH和DM-RS映射"><a href="#SSB中的PBCH和DM-RS映射" class="headerlink" title="SSB中的PBCH和DM-RS映射"></a>SSB中的PBCH和DM-RS映射</h3><p><br>UE应假定组成PBCH的符号序列$ { {d}_{\text{PBCH}}}(0),…,{ {d}_{\text{PBCH}}}({ {M}_{\text{symb}}}-1) $乘以幅值因子$ { {\beta }_{\text{ }!!\grave{ }!!\text{ PBCH}}} $，以符合TS 38.213中规定的PBCH功率分配。符号序列从$ { {d}_{\text{PBCH}}}(0) $开始映射到RE $ { {\left( k,l \right)}_{p,\mu }} $，并满足下列条件：</p><ul><li>这些RE不用于PDCCH DM-RS</li></ul><p>对于不为PBCH DM-RS保留的RE的映射，按递增顺序先$ k $后$l$映射，其中$ k $和$l$分别是SSB内的频域和时域索引，并由表7.4.3.1-1给定。</p><p>UE应假定SSB的DM-RS复值符号序列$ { {r}_{l}}(0),…,{ {r}_{l}}(143) $乘以幅值因子$ \beta _{\text{PBCH}}^{ {}} $，以符合TS38.213中规定的PBCH功率分配，并按递增顺序先$k$后$l$映射到资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，其中$k$和$l$分别是SSB内的频域和时域索引，并由Table 7.4.3.1-1给定，其中 $v=N_{\text{ID}}^{\text{cell}}\bmod 4$。</p><h2 id="SSB的时域位置"><a href="#SSB的时域位置" class="headerlink" title="SSB的时域位置"></a>SSB的时域位置</h2><p><br>在下一章描述UE将监测的可能的SSB时域位置。</p><h1 id="小区搜索"><a href="#小区搜索" class="headerlink" title="小区搜索"></a>小区搜索</h1><p><br>小区搜索是UE获取与小区的时间和频率同步，并检测该小区的物理层小区ID的过程。</p><p>UE接收以下同步信号（SS）以执行小区搜索：TS38.211中定义的主同步信号（PSS）和辅同步信号（SSS）。</p><p>UE应假定PBCH、PSS和SSS在连续的符号中接收，并形成SS/PBCH block（如TS38.211中所定义）。UE应假定SSS和PBCH DM-RS具有相同的EPRE。</p><p>对于具有SSB的半帧，候选SSB的数目和第一个符号索引位置根据SSB的子载波间隔确定如下：</p><ul><li>Case A - 15 kHz子载波间隔：候选SSB的第一个符号的索引为{2, 8} + 14*n。对于载频小于或等于3 GHz的情况，n=0,1。对于载频大于3 GHz且小于或等于6 GHz的情况，n=0,1,2,3。</li><li>CaseB - 30 kHz子载波间隔：候选SSB的第一个符号的索引为{4, 8, 16, 20} + 28*n。对于载频小于或等于3 GHz的情况，n=0。对于载频大于3 GHz且小于或等于6 GHz的情况，n=0,1。</li><li>Case C - 30 kHz子载波间隔：候选SSB的第一个符号的索引为{2, 8} + 14*n。对于载频小于或等于3 GHz的情况，n=0,1。对于载频大于3 GHz且小于或等于6 GHz的情况，n=0,1,2,3。</li><li>Case D - 120 kHz子载波间隔：候选SSB的第一个符号的索引为{4, 8, 16, 20} + 28*n。对于载频大于6 GHz的情况，n=0, 1, 2, 3, 5, 6, 7, 8, 10, 11, 12, 13, 15, 16, 17, 18。</li><li>Case E - 240 kHz子载波间隔：候选SSB的第一个符号的索引为{8, 12, 16, 20, 32, 36, 40, 44} + 56*n。对于载频对于6 GHz的情况，n=0, 1, 2, 3, 5, 6, 7, 8。</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/101842369.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171229/101923796.png" alt="mark"></p><p>半帧中的候选SSB索引在时间上从0到$ L-1 $升序编号。在PBCH中发送的DM-RS序列的索引与每半帧中的SSB索引形成一一映射，若$ L=4 $，则UE应从DM-RS序列索引中确定半帧中SSB索引的2个低有效位；若$ L&gt;4 $，则UE应从DM-RS索引中确定半帧中SSB索引的3个低有效位。若$ L=64 $，UE应从高层参数 <em>SSB-index-explicit</em> 确定每半帧中的SSB索引的3个高有效位。</p><p>UE可以通过参数 <em>SSB-transmitted-SIB1</em> 得到配置，UE不应接收与SSB对应的RE重叠的RE中的其他信号或信道的SSB索引。UE也可以通过高层参数 <em>SSB-transmitted</em> 按照每个服务小区得到配置，UE不应接收与SSB对应的RE重叠的RE中的其他信号或信道的SSB索引。 <em>SSB-transmitted</em> 的配置覆盖 <em>SSB-transmitted-SIB1</em> 的配置。UE可以通过高层参数 <em>SSB-timing</em> 为每个服务小区配置用于接收每个服务小区的SSB的半帧的周期。如果UE没有配置接收SSB的半帧的周期，则UE将假定周期为半帧。UE应该假定服务小区中的所有SSB的周期是相同的。</p><p>对于初始小区选择，UE可假定具有SSB的半帧以2个帧为周期。</p><p>对于没有发送SSB的服务小区，UE基于服务小区的小区群的PCell或PSCell上的SSB的接收来获取与服务小区的时间和频率同步。</p><blockquote><p>本文参考3GPP TS38.211 V2.0.0 (2017-12)</p></blockquote><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;在5G NR中，主同步信号（PSS）、辅同步信号（SSS）和PBCH共同构成一个SSB（SS/PBCH block），SSB在时域上共占用4个OFDM符号，频域共占用240个子载波（20个PRB）。本文分别介绍PSS、SSS、PBCH、SSB以及小区搜索。&lt;/p&gt;&lt;h1 id=&quot;同步信号（SS）&quot;&gt;&lt;a href=&quot;#同步信号（SS）&quot; class=&quot;headerlink&quot; title=&quot;同步信号（SS）&quot;&gt;&lt;/a&gt;同步信号（SS）&lt;/h1&gt;&lt;h2 id=&quot;物理层小区ID&quot;&gt;&lt;a href=&quot;#物理层小区ID&quot; class=&quot;headerlink&quot; title=&quot;物理层小区ID&quot;&gt;&lt;/a&gt;物理层小区ID&lt;/h2&gt;&lt;p&gt;&lt;br&gt;1008个唯一的物理层小区ID根据如下公式确定&lt;/p&gt;&lt;script type=&quot;math/tex;mode=display&quot;&gt;N_{\text{ID}}^{\text{cell}}=3N_{\text{ID}}^{\text{(1)}}+N_{\text{ID}}^{\text{(2)}}&lt;/script&gt;&lt;p&gt;其中$ N_{\text{ID}}^{\text{(1)}}\in \left\{ 0,1,…,335 \right\} $，$ N_{\text{ID}}^{\text{(2)}}\in \left\{ 0,1,2 \right\} $。&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
      <category term="2017-12" scheme="http://marshallcomm.cn/tags/2017-12/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（24）小结</title>
    <link href="http://marshallcomm.cn/2017/12/25/polar-code-24-brief-summary/"/>
    <id>http://marshallcomm.cn/2017/12/25/polar-code-24-brief-summary/</id>
    <published>2017-12-25T11:00:16.000Z</published>
    <updated>2017-12-25T11:11:37.811Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><p>本文可能是最后一篇<a href="http://marshallcomm.cn/tags/Polar-Code/">Polar Code</a>系列文章，用以结束2017年对极化码的研究。</p><p>极化码和无线信道的特征是相关联的，这是极化码有别于其他信道编码的一个特点。其他信道编码通常编码就是编码，信道就是信道，两者是独立的。然而决定极化码子信道可靠性的因素有两个，一是它自身的结构（“蝶形图”结构），二是无线信道特征（表征参数可以是SNR或转移概率）。</p><p>第一个概念是“信道极化”，如果比特信道采用这种“蝶形图”方法构造，那么导致的结果就是一些子信道的容量趋于1，另一些子信道的容量趋于0。这种向两级分化的现象就是信道极化现象。</p><p>第二个概念是线性分组码，线性分组码可以通过生成矩阵相乘的方式得到编码，$\mathbf{x}=\mathbf{uG}$。</p><p>若将这两个概念融合在一起，利用了信息极化原理的线性分组码自然就成为“极化码”。如何利用？可视化的解释是“蝶形图”结构，数学化的解释是$\mathbf{x}=\mathbf{uG}$，$\mathbf{G}={ {\mathbf{F}}^{\otimes n}}$。两种解释完全等价，信道极化过程体现在生成矩阵$\mathbf{G}$里。</p><p>码长N一旦确定，那么“蝶形图”的结构就确定了，或者说，生成矩阵$\mathbf{G}$就唯一确定了。而生成矩阵一旦确定，剩下的事儿就是构造输入序列的顺序了。</p><a id="more"></a><p>一方面，极化码自身的结构（“蝶形图”结构）使得子信道呈现出向两级分化的特点。无论无线信道是何种类型，它都呈现出信道极化现象，这是极化码固有特点。例如，假设此时有比特信道1、3、5的容量趋于1，比特信道2、4、6的容量趋于0。按可靠性从高到低排序，则比特信道索引为1、3、5、2、4、6。</p><p>另一方面，无线信道本身的特征也影响着这些子信道的排序，不同原始信道转移概率（或SNR）也造成子信道可靠性顺序可能发生变化。例如，原始信道的转移概率是p1，子信道顺序为1、5、3、2、4、6；若原始信道转移概率是p2，则子信道顺序可能变为1、5、3、4、2、6。</p><p>因此在编码时不得不考虑无线信道的知识（SNR或转移概率），难道每次编码都要估计信道？这也太不经济了。从理论到应用，极化码编码和无线信道特征之间的关系有这样一个趋势：从紧密耦合逐渐到解耦（个人观点）。</p><p>高斯近似是个不错的方法，然而以今天的视角，似乎有点原始。design-snr的思路则向前迈进了一大步，一个最佳design-snr可适用于一定范围的snr，它让编码和无线信道联系得不是那么紧密了。3GPP则更加彻底，甩掉了snr的包袱，用极化权重来表征子信道可靠性，针对N=1024给出了一张比特权重表，直接拿来用。</p><p>当然，如果认为极化编码和无线信道就此彻底断绝联系也是不对的。回顾开篇处，“极化码和无线信道的特征是相关联的，这是极化码有别于其他信道编码的一个特点”。恐怕这一点是绕不过去的。3GPP给出了一张比特权重表，表面上看和无线信道没关系，可那张表怎么来的呢？表格的背后其实隐含着无线信道的影响。表格之所以是现在的型态，已经考虑了无线信道的影响，在N&lt;=1024的范围内可直接使用。</p><p>3GPP 5G标准的第一个版本确定了，polar code在5G上的应用就是这个样子。然而在学术领域，polar code应不终结于3GPP，更先进的编译码算法还有待人们去挖掘。而所谓有始有终，我的极化码之旅暂时告一段落。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;本文可能是最后一篇&lt;a href=&quot;http://marshallcomm.cn/tags/Polar-Code/&quot;&gt;Polar Code&lt;/a&gt;系列文章，用以结束2017年对极化码的研究。&lt;/p&gt;&lt;p&gt;极化码和无线信道的特征是相关联的，这是极化码有别于其他信道编码的一个特点。其他信道编码通常编码就是编码，信道就是信道，两者是独立的。然而决定极化码子信道可靠性的因素有两个，一是它自身的结构（“蝶形图”结构），二是无线信道特征（表征参数可以是SNR或转移概率）。&lt;/p&gt;&lt;p&gt;第一个概念是“信道极化”，如果比特信道采用这种“蝶形图”方法构造，那么导致的结果就是一些子信道的容量趋于1，另一些子信道的容量趋于0。这种向两级分化的现象就是信道极化现象。&lt;/p&gt;&lt;p&gt;第二个概念是线性分组码，线性分组码可以通过生成矩阵相乘的方式得到编码，$\mathbf{x}=\mathbf{uG}$。&lt;/p&gt;&lt;p&gt;若将这两个概念融合在一起，利用了信息极化原理的线性分组码自然就成为“极化码”。如何利用？可视化的解释是“蝶形图”结构，数学化的解释是$\mathbf{x}=\mathbf{uG}$，$\mathbf{G}={ {\mathbf{F}}^{\otimes n}}$。两种解释完全等价，信道极化过程体现在生成矩阵$\mathbf{G}$里。&lt;/p&gt;&lt;p&gt;码长N一旦确定，那么“蝶形图”的结构就确定了，或者说，生成矩阵$\mathbf{G}$就唯一确定了。而生成矩阵一旦确定，剩下的事儿就是构造输入序列的顺序了。&lt;/p&gt;
    
    </summary>
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/categories/Polar-Code/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
  </entry>
  
  <entry>
    <title>5G 帧结构、物理资源与物理信道</title>
    <link href="http://marshallcomm.cn/2017/12/17/nr-v200-l1-channel-modulation/"/>
    <id>http://marshallcomm.cn/2017/12/17/nr-v200-l1-channel-modulation/</id>
    <published>2017-12-17T02:23:52.000Z</published>
    <updated>2017-12-30T02:44:05.102Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h1><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><h1 id="Definitions-symbols-and-abbreviations"><a href="#Definitions-symbols-and-abbreviations" class="headerlink" title="Definitions, symbols and abbreviations"></a>Definitions, symbols and abbreviations</h1><h1 id="帧结构与物理资源"><a href="#帧结构与物理资源" class="headerlink" title="帧结构与物理资源"></a>帧结构与物理资源</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><br>在本规范中，除非另有说明，时域中各个域的大小表示为若干时间单位$ { {T}_{\text{c}}}={1}/{\left( \Delta { {f}_{\max }}\cdot { {N}_{\text{f}}} \right)}\; $，其中$ \Delta { {f}_{\max }}=480\cdot { {10}^{3}}\text{ Hz} $，$ { {N}_{\text{f}}}=4096 $。常量$ \kappa ={ { {T}_{\text{s}}}}/{ { {T}_{\text{c}}}}\;=64 $，其中$ { {T}_{\text{s}}}={1}/{\left( \Delta { {f}_{\text{ref}}}\cdot { {N}_{\text{f,ref}}} \right)}\; $，$ \Delta { {f}_{\text{ref}}}=15\cdot { {10}^{3}}\text{ Hz} $，$ { {N}_{\text{f,ref}}}=2048 $。</p><h2 id="参数集"><a href="#参数集" class="headerlink" title="参数集"></a>参数集</h2><p><br>如Table 4.2-1所示，NR支持多种OFDM参数集。部分载波带宽（carrier bandwidth part，BWP）的$\mu $和CP由高层参数给定，其中下行链路由 <em>DL_BWP_mu</em> 和 <em>DL_BWP_cp</em> 给定，上行链路由 <em>UL_BWP_mu</em> 和 <em>UL_BWP_cp</em> 给定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171217/103110923.png" alt="mark"></p><a id="more"></a><h2 id="帧结构"><a href="#帧结构" class="headerlink" title="帧结构"></a>帧结构</h2><h3 id="帧和子帧"><a href="#帧和子帧" class="headerlink" title="帧和子帧"></a>帧和子帧</h3><p><br>一帧的时域为$ { {T}_{\text{f}}}=\left( {\Delta { {f}_{\max }}{ {N}_{\text{f}}}}/{100}\; \right)\cdot { {T}_{\text{c}}}=10\text{ ms} $，一帧包含10个子帧，每个子帧时域为$ { {T}_{\text{sf}}}=\left( {\Delta { {f}_{\max }}{ {N}_{\text{f}}}}/{1000}\; \right)\cdot { {T}_{\text{c}}}=1\text{ ms} $。每个子帧内连续的OFDM符号数为$ N_{\text{symb}}^{\text{subframe},\mu }=N_{\text{symb}}^{\text{slot}}N_{\text{slot}}^{\text{subframe},\mu } $。每帧分为两个相等大小的半帧，每个半帧包含5个子帧，即半帧0由子帧0-4组成，半帧1由子帧5-9组成。</p><p>根据[38.133]，来自UE的上行帧应在UE对应的下行帧开始前传输。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171217/103249131.png" alt="mark"></p><h3 id="时隙"><a href="#时隙" class="headerlink" title="时隙"></a>时隙</h3><p><br>对于子载波间隔配置$\mu $，时隙在子帧内按递增顺序编号为$ n_{\text{s}}^{\mu }\in \left\{ 0,…,N_{\text{slot}}^{\text{subframe,}\mu }-1 \right\} $，在帧内按递增顺序编号为$ n_{\text{s,f}}^{\mu }\in \left\{ 0,…,N_{\text{slot}}^{\text{frame,}\mu }-1 \right\} $。一个时隙内有$ N_{\text{symb}}^{\text{slot}} $个连续的OFDM符号，其中$ N_{\text{symb}}^{\text{slot}} $的值取决于CP长度，CP长度由Tables 4.3.2-1 and 4.3.2-2给定。一个子帧内的起始时隙与这个子帧内起始OFDM符号在时间上对齐。</p><p>时隙内的OFDM符号被分为“downlink”（在Table 4.3.2-3中表示为D）、“flexible”（表示为X）或“uplink”（表示为U）。</p><p>在下行时隙，UE应假定下行传输仅发生在downlink符号或flexible符号。</p><p>在上行时隙，UE应仅在uplink符号或flexible符号发送。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171217/103550091.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171217/103613538.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171217/103715352.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171217/103753007.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171217/103829112.png" alt="mark"></p><h2 id="物理资源"><a href="#物理资源" class="headerlink" title="物理资源"></a>物理资源</h2><h3 id="天线端口"><a href="#天线端口" class="headerlink" title="天线端口"></a>天线端口</h3><p><br>天线端口定义为，在同一个天线端口上，传输某一符号的信道可以从传输另一个符号的信道推知。</p><p>若在一个天线端口上传输的某一符号的信道的大尺度特性，可以从另一个天线端口上传输的某一符号的信道推知，则这两个天线端口被称为是<strong>准共定位（quasi co-located，QCL）</strong>的。大尺度特性包括一个或多个时延扩展，多普勒扩展，多普勒频移，平均增益，平均时延，空间Rx参数。</p><h3 id="资源格"><a href="#资源格" class="headerlink" title="资源格"></a>资源格</h3><p><br>对于每个参数集和载波，资源格（Resource grid）定义为$ N_{\text{grid,}x}^{\text{size,}\mu }N_{\text{sc}}^{\text{RB}} $个子载波和$ N_{\text{symb}}^{\text{subframe},\mu } $个OFDM符号，起始公共资源块（common resource block）$ N_{\text{grid}}^{\text{start},\mu } $由高层信令指示。表示DL（downlink）或UL（uplink），在不会产生混淆时，下标可省略。每个天线端口$ p $、每个子载波间隔配置$\mu $以及每个传输方向（上行或下行），对应一个资源格。</p><h3 id="资源粒子"><a href="#资源粒子" class="headerlink" title="资源粒子"></a>资源粒子</h3><p><br>天线端口$ p $和子载波间隔配置$\mu $的资源格中的每个元素被称为资源粒子（resource element），并且由索引对$ { {\left( k,l \right)}_{p,\mu }} $唯一地标识，其中$ k $是频域索引，$ l $是时域符号索引。资源粒子$ { {\left( k,l \right)}_{p,\mu }} $对应的复数值为$ a_{k,l}^{(p,\mu )} $。在不会产生混淆时，或在没有指定某一天线端口或子载波间隔时，索引$ p $和$\mu $可以省略，表示为$ a_{k,l}^{(p)} $或$ { {a}_{k,l}} $。</p><h3 id="资源块"><a href="#资源块" class="headerlink" title="资源块"></a>资源块</h3><h4 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h4><p><br>资源块（resource block）定义为$ N_{\text{sc}}^{\text{RB}}=12 $个连续频域子载波。</p><h4 id="参考资源块"><a href="#参考资源块" class="headerlink" title="参考资源块"></a>参考资源块</h4><p><br>参考资源块（reference resource block）在频域上从0开始编号。参考资源块0的子载波0对于所有的子载波配置 是公共的，也被称为“参考点A”，并且用作其他资源块格的公共参考点。参考点A从以下高层参数获得</p><ul><li><em>PRB-index-DL-common</em> for a PCell downlink</li><li><em>PRB-index-UL-common</em> for a PCell uplink</li><li><em>PRB-index-DL-Dedicated</em> for an SCell downlink</li><li><em>PRB-index-UL-Dedicated</em> for an SCell uplink</li><li><em>PRB-index-SUL-common</em> for a supplementary uplink</li></ul><h4 id="公共资源块"><a href="#公共资源块" class="headerlink" title="公共资源块"></a>公共资源块</h4><p><br>公共资源块（common resource block）在子载波间隔配置$\mu $的频域上从0开始编号。子载波间隔配置$\mu $下的公共资源块0的子载波0与“参考点A”一致。</p><p>对于子载波间隔配置$\mu $，频域上的公共资源块号$ { {n}_{\text{CRB}}} $与资源粒子$ (k,l) $的关系为</p><script type="math/tex;mode=display">n_{\text{CRB}}^{\mu }=\left\lfloor \frac{k}{N_{\text{sc}}^{\text{RB}}} \right\rfloor</script><p>其中$ k $是相对于子载波间隔配置$\mu $下的资源格0的子载波0定义的。</p><h4 id="物理资源块"><a href="#物理资源块" class="headerlink" title="物理资源块"></a>物理资源块</h4><p><br>物理资源块（physical resource block）在BWP中定义，编号为从0到$ N_{\text{BWP,}i}^{\text{size}}-1 $，其中$ i $是BWP数。在BWP $ i $内，PRB与CRB的关系为</p><script type="math/tex;mode=display">{ {n}_{\text{CRB}}}=n_{\text{PRB}}^{ {}}+N_{\text{BWP,}i}^{\text{start}}</script><p>其中$ N_{\text{BWP,}i}^{\text{start}} $是BWP相对于公共资源块0的起始资源块。</p><h4 id="虚拟资源块"><a href="#虚拟资源块" class="headerlink" title="虚拟资源块"></a>虚拟资源块</h4><p><br>虚拟资源块（virtual resource block）在BWP中定义，编号为从0到$ N_{\text{BWP,}i}^{\text{size}}-1 $，其中$ i $是BWP数。</p><h3 id="BWP"><a href="#BWP" class="headerlink" title="BWP"></a>BWP</h3><p><br>BWP是在给定参数集和给定载波上的一组连续的物理资源块。BWP的起始位置$ N_{\text{BWP,}i}^{\text{start}}\ge 0 $和资源块数$ N_{\text{BWP,}i}^{\text{size}}&gt;0 $应满足$ 0\le N_{\text{BWP,}i}^{\text{size,}\mu }&lt;N_{\text{grid,}x}^{\text{size,}\mu } $。</p><p>UE可以在下行链路中被配置多达四个BWP，并且在给定时间内只有一个DL BWP处于激活状态。UE不应在激活的BWP之外接收PDSCH，PDCCH，CSI-RS或TRS。</p><p>UE可以在上行链路中被配置多达四个BWP，并且在给定时间内只有一个UL BWP处于激活状态。如果UE配置有辅助（supplementary）上行链路，则UE可以在辅助上行链路中另外配置多达四个BWP，并且在给定时间内只有一个辅助UL BWP处于激活状态。UE不应在激活的BWP之外传输PUSCH或PUCCH。</p><h2 id="载波聚合"><a href="#载波聚合" class="headerlink" title="载波聚合"></a>载波聚合</h2><p><br>多个小区的传输可以被聚合起来，除了主小区之外最多可聚合15个次级小区。除非另有说明，本规范中的描述适用于多达16个服务小区中的每一个。</p><h1 id="通用函数"><a href="#通用函数" class="headerlink" title="通用函数"></a>通用函数</h1><h1 id="上行链路"><a href="#上行链路" class="headerlink" title="上行链路"></a>上行链路</h1><h2 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h2><h3 id="物理信道概述"><a href="#物理信道概述" class="headerlink" title="物理信道概述"></a>物理信道概述</h3><ul><li>物理上行共享信道（PUSCH）</li><li>物理上行控制信道（PUCCH）</li><li>物理随机接入信道（PRACH）</li></ul><h3 id="物理信号概述"><a href="#物理信号概述" class="headerlink" title="物理信号概述"></a>物理信号概述</h3><ul><li>解调参考信号（DM-RS）</li><li>相位跟踪参考信号（PT-RS）</li><li>探测参考信号（SRS）</li></ul><h2 id="物理资源-1"><a href="#物理资源-1" class="headerlink" title="物理资源"></a>物理资源</h2><p><br>当UE进行上行传输时，使用的帧结构和物理资源在第4章定义。</p><p>定义下列天线端口用于上行链路：</p><ul><li>PUSCH相关的DMRS使用以1000为起始的天线端口</li><li>PUCCH相关的DMRS使用以2000为起始的天线端口</li><li>PRACH使用天线端口4000</li></ul><h1 id="下行链路"><a href="#下行链路" class="headerlink" title="下行链路"></a>下行链路</h1><h2 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h2><h3 id="物理信道概述-1"><a href="#物理信道概述-1" class="headerlink" title="物理信道概述"></a>物理信道概述</h3><ul><li>物理下行共享信道（PDSCH）</li><li>物理广播信号（PBCH）</li><li>物理下行控制信道（PDCCH）</li></ul><h3 id="物理信号概述-1"><a href="#物理信号概述-1" class="headerlink" title="物理信号概述"></a>物理信号概述</h3><ul><li>解调参考信号（DM-RS）</li><li>相位跟踪参考信号（PT-RS）</li><li>信道状态信号参考信号（CSI-RS）</li><li>主同步信号（PSS）</li><li>辅同步信号（SSS）</li></ul><h2 id="物理资源-2"><a href="#物理资源-2" class="headerlink" title="物理资源"></a>物理资源</h2><p><br>当接收下行链路发送的数据时，UE应假定采用第4章定义的帧结构和物理资源。</p><p>定义下列天线端口用于下行链路：</p><ul><li>PDSCH相关的DM-RS使用以1000为起始的天线端口</li><li>PDCCH相关的DM-RS使用以2000为起始的天线端口</li><li>CSI-RS使用以3000为起始的天线端口</li><li>SS/PBCH块传输使用以4000为起始的天线端口</li></ul><blockquote><p>本文参考3GPP TS38.211 V2.0.0 (2017-12)</p></blockquote><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;Scope&quot;&gt;&lt;a href=&quot;#Scope&quot; class=&quot;headerlink&quot; title=&quot;Scope&quot;&gt;&lt;/a&gt;Scope&lt;/h1&gt;&lt;h1 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h1&gt;&lt;h1 id=&quot;Definitions-symbols-and-abbreviations&quot;&gt;&lt;a href=&quot;#Definitions-symbols-and-abbreviations&quot; class=&quot;headerlink&quot; title=&quot;Definitions, symbols and abbreviations&quot;&gt;&lt;/a&gt;Definitions, symbols and abbreviations&lt;/h1&gt;&lt;h1 id=&quot;帧结构与物理资源&quot;&gt;&lt;a href=&quot;#帧结构与物理资源&quot; class=&quot;headerlink&quot; title=&quot;帧结构与物理资源&quot;&gt;&lt;/a&gt;帧结构与物理资源&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;&lt;br&gt;在本规范中，除非另有说明，时域中各个域的大小表示为若干时间单位$ { {T}_{\text{c}}}={1}/{\left( \Delta { {f}_{\max }}\cdot { {N}_{\text{f}}} \right)}\; $，其中$ \Delta { {f}_{\max }}=480\cdot { {10}^{3}}\text{ Hz} $，$ { {N}_{\text{f}}}=4096 $。常量$ \kappa ={ { {T}_{\text{s}}}}/{ { {T}_{\text{c}}}}\;=64 $，其中$ { {T}_{\text{s}}}={1}/{\left( \Delta { {f}_{\text{ref}}}\cdot { {N}_{\text{f,ref}}} \right)}\; $，$ \Delta { {f}_{\text{ref}}}=15\cdot { {10}^{3}}\text{ Hz} $，$ { {N}_{\text{f,ref}}}=2048 $。&lt;/p&gt;&lt;h2 id=&quot;参数集&quot;&gt;&lt;a href=&quot;#参数集&quot; class=&quot;headerlink&quot; title=&quot;参数集&quot;&gt;&lt;/a&gt;参数集&lt;/h2&gt;&lt;p&gt;&lt;br&gt;如Table 4.2-1所示，NR支持多种OFDM参数集。部分载波带宽（carrier bandwidth part，BWP）的$\mu $和CP由高层参数给定，其中下行链路由 &lt;em&gt;DL_BWP_mu&lt;/em&gt; 和 &lt;em&gt;DL_BWP_cp&lt;/em&gt; 给定，上行链路由 &lt;em&gt;UL_BWP_mu&lt;/em&gt; 和 &lt;em&gt;UL_BWP_cp&lt;/em&gt; 给定。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20171217/103110923.png&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
      <category term="2017-12" scheme="http://marshallcomm.cn/tags/2017-12/"/>
    
  </entry>
  
  <entry>
    <title>Answer-Polar Code-高斯近似之$\varphi \left( x \right)$反函数</title>
    <link href="http://marshallcomm.cn/2017/11/02/answer-polar-code-ga-inverse-phix/"/>
    <id>http://marshallcomm.cn/2017/11/02/answer-polar-code-ga-inverse-phix/</id>
    <published>2017-11-02T06:50:14.000Z</published>
    <updated>2017-11-02T07:18:07.179Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br><a href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">《Polar Code（8）高斯近似》</a>中$\varphi \left( x \right)$的反函数，计算式（8）比较困难，而式（9）、式（10）比较容易。本文以式（9）为例详述$\varphi \left( x \right)$的反函数。</p><script type="math/tex;mode=display">\begin{align}
 { {\varphi }_{AGA-2}}\left( x \right)=\left\{ \begin{matrix}
   { {e}^{0.0116{ {x}^{2}}-0.4212x}},\ 0<x\le 7.0633  \\
   { {e}^{-0.2944x-0.3169}},\ x>7.0633  \\
\end{matrix} \right. 
\end{align}</script><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171102/145443437.png" alt="mark"></p><a id="more"></a><p><br></p><h1 id="y-1-e-0-0116-x-2-0-4212x-x-in-left-0-7-0633-right-的反函数"><a href="#y-1-e-0-0116-x-2-0-4212x-x-in-left-0-7-0633-right-的反函数" class="headerlink" title="$ { {y}_{1}}={ {e}^{0.0116{ {x}^{2}}-0.4212x}},x\in \left( 0,7.0633 \right] $的反函数"></a>$ { {y}_{1}}={ {e}^{0.0116{ {x}^{2}}-0.4212x}},x\in \left( 0,7.0633 \right] $的反函数</h1><p><br></p><script type="math/tex;mode=display">\begin{align}
 \ln { {y}_{1}}=0.0116{ {x}^{2}}-0.4212x 
\end{align}</script><script type="math/tex;mode=display">\begin{align}
0.0116{ {x}^{2}}-0.4212x-\ln { {y}_{1}}=0
\end{align}</script><p>一元二次方程的根为</p><script type="math/tex;mode=display">\begin{align}
 x=\frac{-b\pm \sqrt{ { {b}^{2}}-4ac}}{2a}=\frac{0.4212\pm \sqrt{ { {0.4212}^{2}}+4\times 0.0116\times \ln { {y}_{1}}}}{2\times 0.0116} 
\end{align}</script><p>其中$a=0.0116,b=-0.4212,c=-\ln { {y}_{1}}$，而$\pm $的选取要做一番比较：</p><script type="math/tex;mode=display">\begin{align}
\sqrt{ { {b}^{2}}-4ac}=\sqrt{ { {0.4212}^{2}}+4\times 0.0116\times \ln { {y}_{1}}}
\end{align}</script><p>根据定义域$ x\in \left( 0,7.0633 \right] $，得到${ {y}_{1}}$的值域${ {y}_{1}}\in \left[ \text{0}\text{.0911},1 \right)$，则有</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & -\text{2}\text{.3963}\le \ln { {y}_{1}}<0 \\ 
 \nonumber & \text{ 0}\text{.0662}\le { {b}^{2}}-4ac\text{0}\text{.1774} \\ 
 \nonumber & \text{0}\text{.2573}\le \sqrt{ { {b}^{2}}-4ac}<\text{0}\text{.4212} \\ 
\end{align}</script><p>若取“+”号，则有</p><script type="math/tex;mode=display">\text{29}\text{.2457}\le \frac{-b+\sqrt{ { {b}^{2}}-4ac}}{2a}<\text{36}\text{.3103}</script><p>此时方程的根远远超出了$ x\in \left( 0,7.0633 \right] $的范围，所以“+”号不可取。</p><p>若取“-”号，则有</p><script type="math/tex;mode=display">0<\frac{-b-\sqrt{ { {b}^{2}}-4ac}}{2a}\le 7.0633</script><p>此时方程根恰好满足$ x\in \left( 0,7.0633 \right] $，所以应取“-”号。</p><p>综上所述，一元二次方程（3）的根为</p><script type="math/tex;mode=display">\begin{align}
 x=\frac{-b-\sqrt{ { {b}^{2}}-4ac}}{2a}=\frac{0.4212-\sqrt{ { {0.4212}^{2}}+4\times 0.0116\times \ln { {y}_{1}}}}{2\times 0.0116} 
\end{align}</script><p>即反函数为</p><script type="math/tex;mode=display">\begin{align}
{ {\varphi }^{-1}}\left( x \right)=\frac{0.4212-\sqrt{ { {0.4212}^{2}}+4\times 0.0116\times \ln y}}{2\times 0.0116},y\in \left[ \text{0}\text{.0911},1 \right)
\end{align}</script><p><br></p><h1 id="y-2-e-0-2944x-0-3169-x-in-left-7-0633-infty-right-的反函数"><a href="#y-2-e-0-2944x-0-3169-x-in-left-7-0633-infty-right-的反函数" class="headerlink" title="$ { {y}_{2}}={ {e}^{-0.2944x-0.3169}},x\in \left( 7.0633,+\infty  \right) $的反函数"></a>$ { {y}_{2}}={ {e}^{-0.2944x-0.3169}},x\in \left( 7.0633,+\infty \right) $的反函数</h1><p><br>根据$ x\in \left( 7.0633,+\infty \right) $，得到${ {y}_{2}}$的值域${ {y}_{2}}\in \left( \text{0,0}\text{.0911} \right)$。</p><script type="math/tex;mode=display">\begin{align}
\ln { {y}_{2}}=-0.2944x-0.3169
\end{align}</script><script type="math/tex;mode=display">\begin{align}
x=-\frac{\ln { {y}_{2}}+0.3169}{0.2944}
\end{align}</script><p>即反函数</p><script type="math/tex;mode=display">\begin{align}
{ {\varphi }^{-1}}\left( x \right)=-\frac{\ln y+0.3169}{0.2944},y\in \left( \text{0,0}\text{.0911} \right)
\end{align}</script><p>将两段反函数合并<strong>得到$\varphi \left( x \right)$的反函数</strong></p><script type="math/tex;mode=display">\begin{align}
 { {\varphi }^{-1}}\left( x \right)=\left\{ \begin{matrix}
   -\frac{\ln y+0.3169}{0.2944},y\in \left( \text{0,0}\text{.0911} \right)  \\
   \frac{0.4212-\sqrt{ { {0.4212}^{2}}+4\times 0.0116\times \ln y}}{2\times 0.0116},y\in \left[ \text{0}\text{.0911},1 \right)  \\
\end{matrix} \right. 
\end{align}</script><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171102/150354891.png" alt="mark"></p><p><br></p><h1 id="验证-varphi-left-x-right-和-varphi-1-left-x-right-是否关于y-x对称"><a href="#验证-varphi-left-x-right-和-varphi-1-left-x-right-是否关于y-x对称" class="headerlink" title="验证$\varphi \left( x \right)$和${ {\varphi }^{-1}}\left( x \right)$是否关于y=x对称"></a>验证$\varphi \left( x \right)$和${ {\varphi }^{-1}}\left( x \right)$是否关于y=x对称</h1><p><br><img src="http://olyzl8414.bkt.clouddn.com/blog/20171102/150439302.png" alt="mark"></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/&quot;&gt;《Polar Code（8）高斯近似》&lt;/a&gt;中$\varphi \left( x \right)$的反函数，计算式（8）比较困难，而式（9）、式（10）比较容易。本文以式（9）为例详述$\varphi \left( x \right)$的反函数。&lt;/p&gt;&lt;script type=&quot;math/tex;mode=display&quot;&gt;\begin{align}
 { {\varphi }_{AGA-2}}\left( x \right)=\left\{ \begin{matrix}
   { {e}^{0.0116{ {x}^{2}}-0.4212x}},\ 0&lt;x\le 7.0633  \\
   { {e}^{-0.2944x-0.3169}},\ x&gt;7.0633  \\
\end{matrix} \right. 
\end{align}&lt;/script&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20171102/145443437.png&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/categories/Polar-Code/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
      <category term="answer" scheme="http://marshallcomm.cn/tags/answer/"/>
    
  </entry>
  
  <entry>
    <title>5G-NR物理信道与调制-下行链路v1.1.0</title>
    <link href="http://marshallcomm.cn/2017/10/24/nr-v110-l1-channel-modulation-dl/"/>
    <id>http://marshallcomm.cn/2017/10/24/nr-v110-l1-channel-modulation-dl/</id>
    <published>2017-10-24T11:37:33.000Z</published>
    <updated>2017-10-26T06:40:44.574Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><p>上接<a href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation/#下行链路">《5G-NR物理信道与调制v1.1.0》下行链路</a></p><h1 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h1><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><h1 id="Definitions-symbols-and-abbreviations"><a href="#Definitions-symbols-and-abbreviations" class="headerlink" title="Definitions, symbols and abbreviations"></a>Definitions, symbols and abbreviations</h1><h1 id="帧结构与物理资源"><a href="#帧结构与物理资源" class="headerlink" title="帧结构与物理资源"></a>帧结构与物理资源</h1><h1 id="通用函数"><a href="#通用函数" class="headerlink" title="通用函数"></a>通用函数</h1><h1 id="上行链路"><a href="#上行链路" class="headerlink" title="上行链路"></a>上行链路</h1><p><br><a href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation-ul/">5G-NR物理信道与调制-上行链路v1.1.0</a></p><h1 id="下行链路"><a href="#下行链路" class="headerlink" title="下行链路"></a>下行链路</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="物理信道概述"><a href="#物理信道概述" class="headerlink" title="物理信道概述"></a>物理信道概述</h3><p><br>下行链路物理信道对应于一组资源粒子（REs）的集合，用于承载源自高层的信息。本规范定义了如下下行信道：</p><ul><li>物理下行共享信道（PDSCH）</li><li>物理广播信道（PBCH）</li><li>物理下行控制信道（PDCCH）</li></ul><h3 id="物理信号概述"><a href="#物理信号概述" class="headerlink" title="物理信号概述"></a>物理信号概述</h3><p><br>下行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下下行物理信号：</p><ul><li>解调参考信号（Demodulation reference signals，DM-RS）</li><li>相位跟踪参考信号（Phase-tracking reference signals，PT-RS）</li><li>信道状态信息参考信号（Channel-state information reference signal，CSI-RS）</li><li>主同步信号（Primary synchronization signal，PSS）</li><li>辅同步信号（Secondary synchronization signal，SSS）</li></ul><a id="more"></a><h2 id="物理资源"><a href="#物理资源" class="headerlink" title="物理资源"></a>物理资源</h2><p><br>当接收下行链路发送的数据时，UE应假定采用第4章定义的帧结构和物理资源。</p><p>定义下列天线端口用于下行链路：</p><ul><li>PDSCH相关的DM-RS使用以1000为起始的天线端口</li><li>PDCCH相关的DM-RS使用以2000为起始的天线端口</li><li>CSI-RS使用以3000为起始的天线端口</li><li>SS/PBCH块传输使用以4000为起始的天线端口</li></ul><h2 id="物理信道"><a href="#物理信道" class="headerlink" title="物理信道"></a>物理信道</h2><h3 id="PDSCH"><a href="#PDSCH" class="headerlink" title="PDSCH"></a>PDSCH</h3><h4 id="加扰"><a href="#加扰" class="headerlink" title="加扰"></a>加扰</h4><p><br>对于每个码字$ q $，UE应假定比特块$ { {b}^{(q)}}(0),…,{ {b}^{(q)}}(M_{\text{bit}}^{(q)}-1) $，其中$ M_{\text{bit}}^{(q)} $物理信道发送的码字$ q $的比特数，在调制之前被加扰，根据以下方式得到加扰比特块$ { {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1) $</p><script type="math/tex;mode=display">{ {\tilde{b}}^{(q)}}(i)=\left( { {b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2</script><p>其中加扰序列$ { {c}^{(q)}}(i) $由5.2节给定。</p><h4 id="调制"><a href="#调制" class="headerlink" title="调制"></a>调制</h4><p><br>对于每个码字$ q $，UE应假定加扰比特块$ { {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1) $按照5.1节的描述进行调制，调制方案详见Table 7.3.1.2-1，得到复值调制符号块$ { {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1) $。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171024/194746226.png" alt="mark"></p><h4 id="层映射"><a href="#层映射" class="headerlink" title="层映射"></a>层映射</h4><p><br>UE应假定每个码字的复值调制符号根据Table 7.3.1.3-1被映射到1个或多个层。码字$ q $的复值调制符号$ { {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1) $应被映射到层$ x(i)={ {\left[ \begin{matrix}<br>{ {x}^{(0)}}(i) &amp; … &amp; { {x}^{(\upsilon -1)}}(i) \\<br>\end{matrix} \right]}^{T}} $，$ i=0,1,…,M_{\text{symb}}^{\text{layer}}-1 $，其中$ \upsilon $是层数，$ M_{\text{symb}}^{\text{layer}} $是每层的调制符号数。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171026/130637932.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171026/130648907.png" alt="mark"></p><h4 id="预编码"><a href="#预编码" class="headerlink" title="预编码"></a>预编码</h4><p><br>预编码是透明的，</p><script type="math/tex;mode=display">\left[ \begin{matrix}
   \vdots   \\
   { {y}^{(p)}}(i)  \\
   \vdots   \\
\end{matrix} \right]=\left[ \begin{matrix}
   { {x}^{(0)}}(i)  \\
   \vdots   \\
   { {x}^{(\upsilon -1)}}(i)  \\
\end{matrix} \right]</script><p>其中$ P=\upsilon $。</p><h4 id="物理资源映射"><a href="#物理资源映射" class="headerlink" title="物理资源映射"></a>物理资源映射</h4><p><br>UE应假定用于物理信道传输的每个天线端口，复值符号块$ { {y}^{(p)}}(0),…,{ {y}^{(p)}}(M_{\text{symb}}^{\text{ap}}-1) $符合TS38.214中的下行功率分配规定，并从$ { {y}^{(p)}}(0) $开始映射到资源粒子$ \left( k,l \right) $，这些REs应满足下列所有条件：</p><ul><li>它们在已分配的用于传输的RB中</li><li>根据TS38.214中5.1.2.2.3节，它们被声明为可用于PDSCH</li><li>根据7.4.1.5节，它们不能用于CSI-RS</li><li>根据TS38.214中5.1节，它们不为SS/PBCH保留</li></ul><p>映射过程中不保留用于其他目的资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，并按递增顺序先$k$后$l$映射，起始符号$ l={ {l}_{0}} $根据TS38.213的描述得到。</p><p>UE可假定在一个PRB bundle内在频域上使用相同的预编码，1个PRB bundle由2个或4个PRBs组成，PRB bundle基于绝对资源格进行定义。PRB bundle大小如果由高层参数配置，那么由参数<em>PDSCH-bundle-size</em>进行配置，否则通过DCI调度传输配置。</p><h3 id="PDCCH"><a href="#PDCCH" class="headerlink" title="PDCCH"></a>PDCCH</h3><h4 id="控制信道单元（CCE）"><a href="#控制信道单元（CCE）" class="headerlink" title="控制信道单元（CCE）"></a>控制信道单元（CCE）</h4><p><br>PDCCH有1个或多个CCE组成，如Table 7.3.2.1-1所示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171026/132353562.png" alt="mark"></p><h4 id="控制资源集（CORESET）"><a href="#控制资源集（CORESET）" class="headerlink" title="控制资源集（CORESET）"></a>控制资源集（CORESET）</h4><p><br>控制资源集（CORESET）在频域上由$ N_{\text{RB}}^{\text{CORESET}} $个RB组成，在时域上由$ N_{\text{symb}}^{\text{CORESET}}\in \left\{ 1,2,3 \right\} $个符号组成。$ N_{\text{RB}}^{\text{CORESET}} $由高层参数<em>CORESET-freq-dom</em>给定，$ N_{\text{symb}}^{\text{CORESET}} $由高层参数<em>CORESET-time-dur</em>给定。仅当高层参数<em>DL-DMRS-typeA-pos</em> = 3时，支持$ N_{\text{symb}}^{\text{CORESET}}=3 $。</p><p>1个CCE由6个REGs组成，1个REG等于1个OFDM符号上的1个RB。CORESET内的REGs按时域优先的顺序编号，从第1个OFDM符号且最低编号的RB以0开始编号。</p><p>UE可配置多个CORESETs，每个CORESET只与一个种CCE-to-REG映射关联。</p><p>在CORESET内，CCE-to-REG映射可以交织也可以不交织，这由高层参数<em>CORESET-Trans-type</em>来配置，并且由REG bundles来描述：</p><ul><li>REG bundle $i$ 定义为一组REGs $ \left\{ iL,iL+1,…,iL+L-1 \right\} $，其中REG bundle大小$ L $由高层参数<em>CORESET-REG-bundle-size</em>来配置，$ i=0,1,…,{N_{\text{REG}}^{\text{CORESET}}}/{L}\;-1 $是CORESET内REGs的数目。</li><li>CCE $j$ 由REG bundles $ \left\{ f({6j}/{L}\;),f({6j}/{L}\;+1),…,f({6j}/{L}\;+{6}/{L}\;-1) \right\} $组成，其中$ f(\cdot ) $是交织器。</li></ul><p>对于非交织的CCE-to-REG映射，有$ L=6 $且$ f(j)=j $。</p><p>对于交织的CCE-to-REG映射，对于$ N_{\text{symb}}^{\text{CORESET}}=1 $，有$ L\in \left\{ 2,6 \right\} $；对于$ N_{\text{symb}}^{\text{CORESET}}\in \left\{ 2,3 \right\} $，有$ L\in \left\{ N_{\text{symb}}^{\text{CORSET}},6 \right\} $。</p><p>UE可假定</p><ul><li>如果高层参数<em>CORESET-wideband-bundle</em>没有对CORESET进行设置，那么在1个REG bundle内的频域上使用相同的预编码</li><li>如果高层参数<em>CORESET-wideband-bundle</em>对CORESET进行了设置，那么在整个CORESET内的频域上使用相同的预编码</li></ul><h4 id="加扰-1"><a href="#加扰-1" class="headerlink" title="加扰"></a>加扰</h4><h4 id="调制-1"><a href="#调制-1" class="headerlink" title="调制"></a>调制</h4><p><br>UE应假定比特块$ \tilde{b}(0),…,\tilde{b}({ {M}_{\text{bit}}}-1) $按照5.1.3节的描述进行QPSK调制，得到复值调制符号块$ d(0),…,d({ {M}_{\text{symb}}}-1) $。</p><h4 id="物理资源映射-1"><a href="#物理资源映射-1" class="headerlink" title="物理资源映射"></a>物理资源映射</h4><p><br>UE应假定复值调制符号块$ d(0),…,d({ {M}_{\text{symb}}}-1) $乘以一个幅值因子$ { {\beta }_{\text{PDCCH}}} $，并在用于监测PDCCH的CCEs上先$ l $后$k$按递增顺序映射到资源粒子$ { {\left( k,l \right)}_{p,\mu }} $。</p><h3 id="PBCH"><a href="#PBCH" class="headerlink" title="PBCH"></a>PBCH</h3><h4 id="加扰-2"><a href="#加扰-2" class="headerlink" title="加扰"></a>加扰</h4><p><br>UE应假定比特块$ { {b}^{(q)}}(0),…,{ {b}^{(q)}}(M_{\text{bit}}^{(q)}-1) $，其中$ { {M}_{\text{bit}}} $是PBCH发送的比特数，应根据以下方式在调制之前进行加扰，得到加扰比特块$ \tilde{b}(0),…,\tilde{b}({ {M}_{\text{bit}}}-1) $</p><script type="math/tex;mode=display">{ {\tilde{b}}^{(q)}}(i)=\left( { {b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2</script><p>其中加扰序列$ { {c}^{(q)}}(i) $由5.2节给定。</p><h4 id="调制-2"><a href="#调制-2" class="headerlink" title="调制"></a>调制</h4><p><br>UE应假定比特块$ \tilde{b}(0),…,\tilde{b}({ {M}_{\text{bit}}}-1) $按照5.1节的描述进行QPSK调制，得到复值调制符号块$ { {d}_{\text{PBCH}}}(0),…,{ {d}_{\text{PBCH}}}({ {M}_{\text{symb}}}-1) $。</p><h4 id="物理资源映射-2"><a href="#物理资源映射-2" class="headerlink" title="物理资源映射"></a>物理资源映射</h4><p><br>物理资源映射在7.4.3节中描述。</p><h2 id="物理信号"><a href="#物理信号" class="headerlink" title="物理信号"></a>物理信号</h2><h3 id="参考信号"><a href="#参考信号" class="headerlink" title="参考信号"></a>参考信号</h3><h4 id="PDSCH-DM-RS"><a href="#PDSCH-DM-RS" class="headerlink" title="PDSCH DM-RS"></a>PDSCH DM-RS</h4><h5 id="序列生成"><a href="#序列生成" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假定参考信号序列$ r(m) $定义为</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $在5.2节中定义。</p><h5 id="物理资源映射-3"><a href="#物理资源映射-3" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>UE应假定PDSCH DM-RS根据高层参数<em>DL-DMRS-config-type</em>给定的类型1或类型2进行物理资源映射。</p><p>UE应假定序列$ r(m) $根据以下方式进行物理资源映射</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( 2m+{k}'+{ {m}_{0}} \right) \\ 
 \nonumber & k=\left\{ \begin{array}{*{35}{l}}
   { {k}_{\text{0}}}+4m+2{k}'+\Delta  & \text{Configuration type 1}  \\
   { {k}_{\text{0}}}+6m+{k}'+\Delta  & \text{Configuration type 2}  \\
\end{array} \right. \\ 
\nonumber & {k}'=0,1 \\ 
\nonumber  & l=\left\{ { {l}_{0}},\bar{l} \right\}+{l}'  
\end{align}</script><p>其中$ { {w}_{\text{f}}}\left( { {k}’} \right) $，$ { {w}_{\text{t}}}\left( { {l}’} \right) $和$ \Delta $由Tables 7.4.1.1.2-1和7.4.1.1.2-2给定。</p><p>第1个DM-RS符号的参考点$l$和位置$ { {l}_{0}} $依赖于映射类型（mapping type）：</p><ul><li>对于PDSCH映射类型A：<ul><li>$ l $定义为起始时隙</li><li>如果高层参数<em>DL-DMRS-typeA-pos</em> = 3，则$ { {l}_{0}}=3 $；否则，$ { {l}_{0}}=2 $</li></ul></li><li>对于PDSCH映射类型B:<ul><li>$ l $定义为被调度的PDSCH资源的起始</li><li>$ { {l}_{0}}=0 $</li></ul></li></ul><p>附加的DM-RS符号的位置由 和时隙内最后一个用于PDSCH的OFDM符号确定，详见Tables 7.4.1.1.2-3和7.4.1.1.2-4。</p><p>时域索引$ {l}’ $和所支持的天线端口$ p $根据<em>DL-DMRS-len</em>和Table 7.4.1.1.2-5得到。</p><p>在未给定CSI-RS或TRS配置的情况下，UE应假定PDSCH DM-RS和SS/PBCH块是关于多普勒频移、平均时延、时延扩展和空间RX准共定位的（quasi co-located）。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171026/135602719.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171026/135635903.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171026/135708921.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171026/135739647.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171026/135803943.png" alt="mark"></p><h4 id="PDSCH-PT-RS"><a href="#PDSCH-PT-RS" class="headerlink" title="PDSCH PT-RS"></a>PDSCH PT-RS</h4><h5 id="序列生成-1"><a href="#序列生成-1" class="headerlink" title="序列生成"></a>序列生成</h5><h5 id="物理资源映射-4"><a href="#物理资源映射-4" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>UE应假定仅当高层参数<em>DL-PTRS-presen</em>t指示PT-RS被使用时，PT-RS仅呈现在用于PDSCH的RB中。</p><p>如果PT-RS呈现，UE应假定PDSCH PT-RS按以下方式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{PTRS}}}r(m) \\ 
 \nonumber & l={ {l}_{\text{DMRS}}}+1+{ {L}_{\text{PTRS}}}\cdot {l}' \\ 
 \nonumber & l'=0,1,2,...  
\end{align}</script><p>在每$ { {K}_{\text{PTRS}}} $个被调度的RBs中，当满足下列条件时，PT-RS在最低编号的被调度的RB上传输</p><ul><li>$ l $在被分配的用于传输PDSCH的OFDM符号内</li><li>资源粒子$ \left( k,l \right) $不用于DM-RS</li></ul><p>其中</p><ul><li>$k$是RB内的子载波索引</li><li>对于1个符号的DM-RS，有$ { {l}_{\text{DM-RS}}}={ {l}_{0}} $；对于2个符号的DM-RS，有$ { {l}_{\text{DM-RS}}}={ {l}_{0}}+1 $，其中$ { {l}_{0}}+1 $在7.4.1.1.2中定义</li><li>$ { {K}_{\text{PTRS}}}\in \left\{ 2,4 \right\} $由TS38.214给定</li><li>$ { {L}_{\text{PT-RS}}}\in \left\{ 1,2,4 \right\} $由TS38.214给定</li></ul><h4 id="PDCCH-DM-RS"><a href="#PDCCH-DM-RS" class="headerlink" title="PDCCH DM-RS"></a>PDCCH DM-RS</h4><h5 id="序列生成-2"><a href="#序列生成-2" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假定参考信号序列$ r(m) $定义为</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $在5.2节中定义。</p><h5 id="物理资源映射-5"><a href="#物理资源映射-5" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>UE应假定序列$ r(m) $根据以下方式映射到物理资源</p><script type="math/tex;mode=display">a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}\cdot r\left( m \right)</script><p>其中$ k=1,5,9 $，$ l=0 $分别是在一组REGs内的频域和时域索引，这组REGs等于</p><ul><li>如果高层参数<em>CORESET-wideband-bundle</em>没有对CORESET进行设置，那么这组REGs是UE尝试译码的构成PDCCH的REGs</li><li>如果高层参数<em>CORESET-wideband-bundle</em>对CORESET进行了设置，那么这组REGs是UE尝试译码的在整个CORESET内的所有REGs</li></ul><h4 id="PBCH-DM-RS"><a href="#PBCH-DM-RS" class="headerlink" title="PBCH DM-RS"></a>PBCH DM-RS</h4><h5 id="序列生成-3"><a href="#序列生成-3" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假定用于SS/PBCH块的参考信号序列$ r(m) $定义为</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中$ c(n) $由5.2节给定。加扰序列生成器应在每个SS/PBCH块的开始处通过小区ID $ N_{\text{ID}}^{\text{cell}} $和$ { {n}_{\text{t}}} $被初始化，SS/PBCH块时间索引由PBCH DM-RS承载。</p><h5 id="物理资源映射-6"><a href="#物理资源映射-6" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>物理资源映射在7.4.3节中定义。</p><h4 id="CSI-RS"><a href="#CSI-RS" class="headerlink" title="CSI-RS"></a>CSI-RS</h4><h5 id="序列生成-4"><a href="#序列生成-4" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假定参考信号序列$ r(m) $定义为</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $在5.2节中定义。</p><h5 id="物理资源映射-7"><a href="#物理资源映射-7" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>对于每个CSI-RS成员配置，UE应假定序列$ r(m) $按以下方式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{CSIRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( m \right) \\ 
 \nonumber& k=\bar{k}+{k}' \\ 
 \nonumber& l=\bar{l}+{l}'  
\end{align}</script><p>下列情况除外</p><ul><li>与所配置的CORESET重叠的REs应从CSI-RS发送中排除</li></ul><p>$ {k}’ $和$ {l}’ $由Table 7.4.1.5.2-1和<br>$ { {w}_{\text{f}}}\left( { {k}’} \right),{ {w}_{\text{t}}}\left( { {l}’} \right)\in \left\{ \left[ \begin{matrix}<br>+1 &amp; +1 \\<br>\end{matrix} \right],\left[ \begin{matrix}<br>+1 &amp; -1 \\<br>\end{matrix} \right],\left[ \begin{matrix}<br>-1 &amp; +1 \\<br>\end{matrix} \right],\left[ \begin{matrix}<br>-1 &amp; -1 \\<br>\end{matrix} \right] \right\}<br>$确定。</p><p>时域位置$ l $定义为起始时隙，其中$ \bar{l}\in \left\{ 5,6,12,13 \right\} $是时隙内CSI-RS的起始符号位置，$ \bar{l} $由高层参数<em>CSI-RS-ResourceMapping</em>配置。</p><p>除单端口之外，频域位置由位图$ \left[ { {b}_{5}}\cdots { {b}_{0}} \right]or\left[ { {b}_{11}}\cdots { {b}_{0}} \right] $通过高层参数<em>CSI-RS-ResourceMapping</em>给定，Table 7.4.1.5.2-1中的$ { {k}_{i}} $对应于位图中从$ { {b}_{0}} $开始的第$i$个集合点，$ { {k}_{i}} $的值由$ { {k}_{i}}=\left[ 1or2 \right]f\left( i \right) $给定，其中$ f\left( i \right) $是第$i$个集合点的位图中的比特号。CSI-RS频域位置在所配置的PRBs上重复。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171026/141325803.png" alt="mark"></p><h4 id="TRS"><a href="#TRS" class="headerlink" title="TRS"></a>TRS</h4><h5 id="序列生成-5"><a href="#序列生成-5" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假定参考信号序列$ r(m) $定义为</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $在5.2节中定义。</p><h5 id="物理资源映射-8"><a href="#物理资源映射-8" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>TRS（tracking reference signal） burst由4个OFDM符号组成，在2个连续时隙内发送。</p><p>UE应假定TRS在1个burst中根据以下方式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
\nonumber  & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{TRS}}}r(m) \\ 
\nonumber  & k=4m+{ {k}_{0}}  
\end{align}</script><p>The UE may assume that a TRS burst is quasi co-located with respect to delay spread, average delay, Doppler shift, and Doppler spread with the PDSCH DM-RS.</p><h3 id="同步信号"><a href="#同步信号" class="headerlink" title="同步信号"></a>同步信号</h3><h4 id="物理层小区ID"><a href="#物理层小区ID" class="headerlink" title="物理层小区ID"></a>物理层小区ID</h4><p><br>NR有1008个唯一的物理层小区ID，根据下式得到</p><script type="math/tex;mode=display">N_{\text{ID}}^{\text{cell}}=3N_{\text{ID}}^{\text{(1)}}+N_{\text{ID}}^{\text{(2)}}</script><p>其中$ N_{\text{ID}}^{\text{(1)}}\in \left\{ 0,1,…,335 \right\} $且$ N_{\text{ID}}^{\text{(2)}}\in \left\{ 0,1,2 \right\} $。</p><h4 id="PSS"><a href="#PSS" class="headerlink" title="PSS"></a>PSS</h4><h5 id="序列生成-6"><a href="#序列生成-6" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>主同步信号序列$ { {d}_{\text{PSS}}}(n) $定义为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & { {d}_{\text{PSS}}}\left( n \right)=1-2x\left( m \right) \\ 
 \nonumber & m=\left( n+43N_{\text{ID}}^{\text{(2)}} \right)\bmod 127 \\ 
 \nonumber & 0\le n<127  
\end{align}</script><p>其中</p><script type="math/tex;mode=display">x\left( i+7 \right)=\left( x\left( i+4 \right)+x\left( i \right) \right)\bmod 2</script><p>且</p><script type="math/tex;mode=display">\left[ \begin{matrix}
   x\left( 6 \right) & x\left( 5 \right) & x\left( 4 \right) & x\left( 3 \right) \nonumber & x\left( 2 \right) & x\left( 1 \right) & x\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   1 & 1 & 1 & 0 & 1 & 1 & 0  \\
\end{matrix} \right]</script><h5 id="物理资源映射-9"><a href="#物理资源映射-9" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>物理资源映射在7.4.3节描述。</p><h4 id="SSS"><a href="#SSS" class="headerlink" title="SSS"></a>SSS</h4><h5 id="序列生成-7"><a href="#序列生成-7" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>辅同步信号序列$ { {d}_{\text{SSS}}}(n) $定义为</p><script type="math/tex;mode=display">\begin{align}
 \nonumber  & { {d}_{\text{SSS}}}\left( n \right)=\left[ 1-2{ {x}_{0}}\left( \left( n+{ {m}_{0}} \right)\bmod 127 \right) \right]\left[ 1-2{ {x}_{1}}\left( \left( n+{ {m}_{1}} \right)\bmod 127 \right) \right] \\ 
\nonumber  & { {m}_{0}}=15\left\lfloor \frac{N_{\text{ID}}^{\text{(1)}}}{\text{112}} \right\rfloor +5N_{\text{ID}}^{\text{(2)}} \\ 
 \nonumber & { {m}_{1}}=N_{\text{ID}}^{\text{(1)}}\bmod 112 \\ 
 \nonumber & 0\le n<127  
\end{align}</script><p>其中</p><script type="math/tex;mode=display">\begin{align}
 \nonumber  & { {x}_{0}}\left( i+7 \right)=\left( { {x}_{0}}\left( i+4 \right)+x{}_{0}\left( i \right) \right)\bmod 2 \\ 
\nonumber  & { {x}_{1}}\left( i+7 \right)=\left( { {x}_{1}}\left( i+1 \right)+x{}_{1}\left( i \right) \right)\bmod 2  
\end{align}</script><p>且</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & \left[ \begin{matrix}
   { {x}_{0}}\left( 6 \right) & { {x}_{0}}\left( 5 \right) & { {x}_{0}}\left( 4 \right) & { {x}_{0}}\left( 3 \right) & { {x}_{0}}\left( 2 \right) & { {x}_{0}}\left( 1 \right) & { {x}_{0}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 & 0 & 0 & 0 & 0 & 0 & 1  \\
\end{matrix} \right] \\ 
\nonumber  & \left[ \begin{matrix}
   { {x}_{1}}\left( 6 \right) & { {x}_{1}}\left( 5 \right) & { {x}_{1}}\left( 4 \right) & { {x}_{1}}\left( 3 \right) & { {x}_{1}}\left( 2 \right) & { {x}_{1}}\left( 1 \right) & { {x}_{1}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 & 0 & 0 & 0 & 0 & 0 & 1  \\
\end{matrix} \right]  
\end{align}</script><h5 id="物理资源映射-10"><a href="#物理资源映射-10" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>物理资源映射在7.4.3节描述。</p><h3 id="SS-PBCH-Block"><a href="#SS-PBCH-Block" class="headerlink" title="SS/PBCH Block"></a>SS/PBCH Block</h3><h4 id="SS-PBCH块的时频域结构"><a href="#SS-PBCH块的时频域结构" class="headerlink" title="SS/PBCH块的时频域结构"></a>SS/PBCH块的时频域结构</h4><p><br>在时域上，1个SS/PBCH块由4个OFDM符号组成，在SS/PBCH块内符号按增序从0到3编号，其中PSS、SSS、PBCH以及和PBCH相关的DM-RS位于不同的符号，详见Table 7.4.3.1-1。</p><p>在频域上，1个SS/PBCH块由288个连续子载波组成，在SS/PBCH块内子载波按增序从0到287编号。SS/PBCH块内的子载波$k$对应于资源块$ n_{\text{PRB}}^{\text{SSB}} $的子载波$ n_{\text{PRB}}^{\text{SSB}}N_{\text{sc}}^{\text{RB}}+{ {k}_{0}} $，其中$ { {k}_{0}}\in \left\{ \text{0, 1, 2, }…\text{, 11} \right\} $。</p><p>对于1个SS/PBCH块，UE应假定</p><ul><li>天线端口$ p=4000 $</li><li>子载波间隔配置$ \mu \in \left\{ 0,1,3,4 \right\} $</li><li>PSS、SSS和PBCH具有相同的CP长度和子载波间隔</li></ul><p>UE应假定在SS/PBCH burst set内的同一块时间索引下发送的SS/PBCH blocks是关于多普勒扩展、多普勒频移、平均增益、平均时延和空间RX参数准共定位的。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171026/142651702.png" alt="mark"></p><h5 id="SS-PBCH块内PSS的映射"><a href="#SS-PBCH块内PSS的映射" class="headerlink" title="SS/PBCH块内PSS的映射"></a>SS/PBCH块内PSS的映射</h5><p><br>UE应假定PSS符号序列$ { {d}_{\text{PSS}}}(0),…,{ {d}_{\text{PSS}}}(126) $乘以一个幅值因子$ { {\beta }_{\text{SS}}} $，以符合TS38.213对PSS功率分配的规定，并按$k$的递增顺序映射到资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，其中$k$和$l$在Table 7.4.3.1-1中给定，$k$和$l$分别表示SS/PBCH块内的频域和时域索引。</p><h5 id="SS-PBCH块内SSS的映射"><a href="#SS-PBCH块内SSS的映射" class="headerlink" title="SS/PBCH块内SSS的映射"></a>SS/PBCH块内SSS的映射</h5><p><br>UE应假定SSS符号序列$ { {d}_{\text{SSS}}}(0),…,{ {d}_{\text{SSS}}}(126) $乘以一个幅值因子$ { {\beta }_{\text{SS}}} $，以符合TS38.213对SSS功率分配的规定，并按$k$的递增顺序映射到资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，其中$k$和$l$在Table 7.4.3.1-1中给定，$k$和$l$分别表示SS/PBCH块内的频域和时域索引。</p><h5 id="SS-PBCH块内PBCH的映射"><a href="#SS-PBCH块内PBCH的映射" class="headerlink" title="SS/PBCH块内PBCH的映射"></a>SS/PBCH块内PBCH的映射</h5><p><br>UE应假定PBCH复值符号序列$ { {d}_{\text{PBCH}}}(0),…,{ {d}_{\text{PBCH}}}({ {M}_{\text{symb}}}-1) $乘以一个幅值因子$ { {\beta }_{\text{ }!!\grave{ }!!\text{ PBCH}}} $，以符合TS38.213对PBCH功率分配的规定，并从$ { {d}_{\text{PBCH}}}(0) $开始映射到资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，这些REs满足下列条件：</p><ul><li>它们不用于PBCH DM-RS</li></ul><p>映射过程中不保留用于其他目的资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，并按递增顺序先$ k $后$l$映射，其中$k$和$l$分别是SS/PBCH块内的频域和时域索引，并由Table 7.4.3.1-1给定。</p><p>UE应假定SS/PBCH块的DM-RS复值符号序列$ { {r}_{l}}(0),…,{ {r}_{l}}(143) $乘以一个幅值因子$ \beta _{\text{PBCH}}^{\text{DMRS}} $，以符合TS38.213对PBCH DM-RS功率分配的规定，并按递增顺序先$ k $后$l$映射到资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，其中$k$和$l$分别是SS/PBCH块内的频域和时域索引，并由Table 7.4.3.1-1给定，其中$ v=N_{\text{ID}}^{\text{cell}}\bmod 4 $。</p><h4 id="SS-PBCH块的时域位置"><a href="#SS-PBCH块的时域位置" class="headerlink" title="SS/PBCH块的时域位置"></a>SS/PBCH块的时域位置</h4><p><br>UE应对可能的时域位置上的SS/PBCH块进行监测，在TS38.213中描述。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;上接&lt;a href=&quot;http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation/#下行链路&quot;&gt;《5G-NR物理信道与调制v1.1.0》下行链路&lt;/a&gt;&lt;/p&gt;&lt;h1 id=&quot;Scope&quot;&gt;&lt;a href=&quot;#Scope&quot; class=&quot;headerlink&quot; title=&quot;Scope&quot;&gt;&lt;/a&gt;Scope&lt;/h1&gt;&lt;h1 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h1&gt;&lt;h1 id=&quot;Definitions-symbols-and-abbreviations&quot;&gt;&lt;a href=&quot;#Definitions-symbols-and-abbreviations&quot; class=&quot;headerlink&quot; title=&quot;Definitions, symbols and abbreviations&quot;&gt;&lt;/a&gt;Definitions, symbols and abbreviations&lt;/h1&gt;&lt;h1 id=&quot;帧结构与物理资源&quot;&gt;&lt;a href=&quot;#帧结构与物理资源&quot; class=&quot;headerlink&quot; title=&quot;帧结构与物理资源&quot;&gt;&lt;/a&gt;帧结构与物理资源&lt;/h1&gt;&lt;h1 id=&quot;通用函数&quot;&gt;&lt;a href=&quot;#通用函数&quot; class=&quot;headerlink&quot; title=&quot;通用函数&quot;&gt;&lt;/a&gt;通用函数&lt;/h1&gt;&lt;h1 id=&quot;上行链路&quot;&gt;&lt;a href=&quot;#上行链路&quot; class=&quot;headerlink&quot; title=&quot;上行链路&quot;&gt;&lt;/a&gt;上行链路&lt;/h1&gt;&lt;p&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation-ul/&quot;&gt;5G-NR物理信道与调制-上行链路v1.1.0&lt;/a&gt;&lt;/p&gt;&lt;h1 id=&quot;下行链路&quot;&gt;&lt;a href=&quot;#下行链路&quot; class=&quot;headerlink&quot; title=&quot;下行链路&quot;&gt;&lt;/a&gt;下行链路&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;h3 id=&quot;物理信道概述&quot;&gt;&lt;a href=&quot;#物理信道概述&quot; class=&quot;headerlink&quot; title=&quot;物理信道概述&quot;&gt;&lt;/a&gt;物理信道概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;下行链路物理信道对应于一组资源粒子（REs）的集合，用于承载源自高层的信息。本规范定义了如下下行信道：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;物理下行共享信道（PDSCH）&lt;/li&gt;&lt;li&gt;物理广播信道（PBCH）&lt;/li&gt;&lt;li&gt;物理下行控制信道（PDCCH）&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;物理信号概述&quot;&gt;&lt;a href=&quot;#物理信号概述&quot; class=&quot;headerlink&quot; title=&quot;物理信号概述&quot;&gt;&lt;/a&gt;物理信号概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;下行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下下行物理信号：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;解调参考信号（Demodulation reference signals，DM-RS）&lt;/li&gt;&lt;li&gt;相位跟踪参考信号（Phase-tracking reference signals，PT-RS）&lt;/li&gt;&lt;li&gt;信道状态信息参考信号（Channel-state information reference signal，CSI-RS）&lt;/li&gt;&lt;li&gt;主同步信号（Primary synchronization signal，PSS）&lt;/li&gt;&lt;li&gt;辅同步信号（Secondary synchronization signal，SSS）&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
      <category term="2017-10" scheme="http://marshallcomm.cn/tags/2017-10/"/>
    
  </entry>
  
  <entry>
    <title>5G-NR物理信道与调制-上行链路v1.1.0</title>
    <link href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation-ul/"/>
    <id>http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation-ul/</id>
    <published>2017-10-23T10:30:09.000Z</published>
    <updated>2017-10-26T06:40:20.787Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><p>上接<a href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation/#上行链路">《5G-NR物理信道与调制v1.1.0》上行链路</a></p><h1 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h1><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><h1 id="Definitions-symbols-and-abbreviations"><a href="#Definitions-symbols-and-abbreviations" class="headerlink" title="Definitions, symbols and abbreviations"></a>Definitions, symbols and abbreviations</h1><h1 id="帧结构与物理资源"><a href="#帧结构与物理资源" class="headerlink" title="帧结构与物理资源"></a>帧结构与物理资源</h1><h1 id="通用函数"><a href="#通用函数" class="headerlink" title="通用函数"></a>通用函数</h1><h1 id="上行链路"><a href="#上行链路" class="headerlink" title="上行链路"></a>上行链路</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="物理信道概述"><a href="#物理信道概述" class="headerlink" title="物理信道概述"></a>物理信道概述</h3><p><br>上行链路物理信道对应于一组资源粒子（REs）的集合，用于承载源自高层的信息。本规范定义了如下上行信道：</p><ul><li>物理上行共享信道（PUSCH）</li><li>物理上行控制信道（PUCCH）</li><li>物理随机接入信道（PRACH）</li></ul><h3 id="物理信号概述"><a href="#物理信号概述" class="headerlink" title="物理信号概述"></a>物理信号概述</h3><p><br>上行物理信号是物理层使用的，但不承载任何来自高层信息的信号。本规范定义了如下上行物理信号：</p><ul><li>解调参考信号（Demodulation reference signals，DM-RS）</li><li>相位跟踪参考信号（Phase-tracking reference signals，PT-RS）</li><li>探测参考信号（Sounding reference signal，SRS）</li></ul><a id="more"></a><h3 id="物理资源"><a href="#物理资源" class="headerlink" title="物理资源"></a>物理资源</h3><p><br>当UE进行上行传输时，使用的帧结构和物理资源在第4章定义。</p><p>定义下列天线端口用于上行链路：</p><ul><li>PUSCH相关的DMRS使用以1000为起始的天线端口</li><li>PUCCH相关的DMRS使用以2000为起始的天线端口</li><li>SRS使用以3000为起始的天线端口</li><li>PRACH使用天线端口4000</li></ul><h2 id="物理信道"><a href="#物理信道" class="headerlink" title="物理信道"></a>物理信道</h2><h3 id="PUSCH"><a href="#PUSCH" class="headerlink" title="PUSCH"></a>PUSCH</h3><h4 id="加扰"><a href="#加扰" class="headerlink" title="加扰"></a>加扰</h4><p><br>对于每个码字$ q $，比特块$ { {b}^{(q)}}(0),…,{ {b}^{(q)}}(M_{\text{bit}}^{(q)}-1) $在调制之前应当被加扰，其中$ M_{\text{bit}}^{(q)} $是在物理信道上传输的码字$ q $的比特数。加扰的比特块$ { {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1) $由下式得到</p><script type="math/tex;mode=display">{ {\tilde{b}}^{(q)}}(i)=\left( { {b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2</script><p>其中加扰序列$ { {c}^{(q)}}(i) $在5.2节给定。</p><h4 id="调制"><a href="#调制" class="headerlink" title="调制"></a>调制</h4><p><br>对于每个码字$ q $，加扰比特块$ { {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1) $应按照5.1节所描述的方法进行调制，调制方案见Table 6.3.1.2-1，得到复值调制符号块$ { {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1) $。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/184452630.png" alt="mark"></p><h4 id="层映射"><a href="#层映射" class="headerlink" title="层映射"></a>层映射</h4><p><br>每个码字的复值调制符号根据Table 7.3.1.3-1应被映射到至多4个层。码字$ q $的复值调制符号$ { {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1) $应被映射到层$ x(i)={ {\left[ \begin{matrix}<br>{ {x}^{(0)}}(i) &amp; … &amp; { {x}^{(\upsilon -1)}}(i) \\<br>\end{matrix} \right]}^{T}} $，$ i=0,1,…,M_{\text{symb}}^{\text{layer}}-1 $，其中$ \upsilon $是层数，$ M_{\text{symb}}^{\text{layer}} $是每层的调制符号数。</p><h4 id="TF预编码"><a href="#TF预编码" class="headerlink" title="TF预编码"></a>TF预编码</h4><p><br>如果不启用TF预编码（transform precoding），对于每个$ \lambda =0,1,…,\upsilon -1 $有$ { {y}^{(\lambda )}}(i)={ {x}^{(\lambda )}}(i) $。</p><p>如果启用TF预编码，此时$ \upsilon =1 $，则单层$ \lambda =0 $下复值符号块$ { {x}^{(0)}}(0),…,{ {x}^{(0)}}(M_{\text{symb}}^{\text{layer}}-1) $被分为$ {M_{\text{symb}}^{\text{layer}}}/{M_{\text{sc}}^{\text{PUSCH}}}\; $个集，每个集对应1个OFDM符号。TF预编码由下列方法得到</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & { {y}^{(0)}}(l\cdot M_{\text{sc}}^{\text{PUSCH}}+k)=\frac{1}{\sqrt{M_{\text{sc}}^{\text{PUSCH}}}}\sum\limits_{i=0}^{M_{\text{sc}}^{\text{PUSCH}}-1}{ { {x}^{(0)}}(l\cdot M_{\text{sc}}^{\text{PUSCH}}+i){ {e}^{-j\frac{2\pi ik}{M_{\text{sc}}^{\text{PUSCH}}}}}} \\ 
 \nonumber & k=0,...,M_{\text{sc}}^{\text{PUSCH}}-1 \\ 
 \nonumber & l=0,...,{M_{\text{symb}}^{\text{layer}}}/{M_{\text{sc}}^{\text{PUSCH}}}\;-1  
\end{align}</script><p>得到复值符号块$ { {y}^{(0)}}(0),…,{ {y}^{(0)}}(M_{\text{symb}}^{\text{layer}}-1) $。$ M_{\text{sc}}^{\text{PUSCH}}=M_{\text{RB}}^{\text{PUSCH}}\cdot N_{\text{sc}}^{\text{RB}} $，其中$ M_{\text{RB}}^{\text{PUSCH}} $表示PUSCH带宽（RB），应满足</p><script type="math/tex;mode=display">M_{RB}^{PUSCH}={ {2}^{ { {\alpha }_{2}}}}\cdot { {3}^{ { {\alpha }_{3}}}}\cdot { {5}^{ { {\alpha }_{5}}}}</script><p>其中$ { {\alpha }_{2}},{ {\alpha }_{3}},{ {\alpha }_{5}} $是非负整数集。</p><h4 id="预编码"><a href="#预编码" class="headerlink" title="预编码"></a>预编码</h4><p><br>矢量块$ { {\left[ \begin{matrix}<br>{ {y}^{(0)}}(i) &amp; … &amp; { {y}^{(\upsilon -1)}}(i) \\<br>\end{matrix} \right]}^{T}}<br>$，$ i=0,1,…,M_{\text{symb}}^{\text{layer}}-1 $应根据下式进行预编码</p><script type="math/tex;mode=display">\left[ \begin{matrix}
   { {z}^{(0)}}(i)  \\
   \vdots   \\
   { {z}^{(P-1)}}(i)  \\
\end{matrix} \right]=W\left[ \begin{matrix}
   { {y}^{(0)}}(i)  \\
   \vdots   \\
   { {y}^{(\upsilon -1)}}(i)  \\
\end{matrix} \right]</script><p>其中，$ i=0,1,…,M_{\text{symb}}^{\text{ap}}-1 $，$ M_{\text{symb}}^{\text{ap}}=M_{\text{symb}}^{\text{layer}} $。</p><p>对基于非码本的传输，预编码矩阵$ W $根据TS38.214中6.1.1节的描述得到。</p><p>对基于码本的传输，预编码矩阵$ W $由Table 6.3.1.5-1给定，其中TPMI index从调度上行传输的DCI中获得。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/185715105.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/185758254.png" alt="mark"></p><h4 id="物理资源映射"><a href="#物理资源映射" class="headerlink" title="物理资源映射"></a>物理资源映射</h4><p><br>对于PUSCH传输所使用的每个天线端口，复值符号块$ { {z}^{(p)}}(0),…,{ {z}^{(p)}}(M_{\text{symb}}^{\text{ap}}-1) $应乘以一个幅值因子$ { {\beta }_{\text{PUSCH}}} $，以符合TS38.213对发送功率$ { {P}_{\text{PUSCH}}} $的规定，并且从$ { {z}^{(p)}}(0) $开始映射到资源粒子$ { {\left( k,l \right)}_{p,\mu }} $。这些REs满足下列条件：</p><ul><li>这些REs存在于用于传输的已分配的资源中，</li><li>如果启用TF预编码，they are not in the OFDM symbols used for transmission</li><li>如果不启用TF预编码，they are not in the OFDM symbols used for transmission of the associated DM-RS</li></ul><p>如果不启用TF预编码，或者如果是TF预编码但不进行跳频，那么对于其他目的的资源粒子$ { {\left( k,l \right)}_{p,\mu }} $映射是不进行保留的，资源映射顺序为先天线端口$ p $，再频域子载波索引$ k $，然后是时域符号索引$ l $，初始值$ l={ {l}_{0}} $。</p><h3 id="PUCCH"><a href="#PUCCH" class="headerlink" title="PUCCH"></a>PUCCH</h3><p><br>PUCCH支持多种格式，如Table 6.3.2-1所示。对于单个UE，支持采用格式0或格式2的2个PUCCH同时传输，或支持采用格式1或格式3的其中一个PUCCH与采用格式0或格式2的其中一个PUCCH同时传输。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/193240943.png" alt="mark"></p><h4 id="PUCCH格式0"><a href="#PUCCH格式0" class="headerlink" title="PUCCH格式0"></a>PUCCH格式0</h4><h5 id="序列选择"><a href="#序列选择" class="headerlink" title="序列选择"></a>序列选择</h5><p><br>定义一组序列$ \left\{ \begin{matrix}<br>{ {x}_{0}}(n) &amp; { {x}_{1}}(n) &amp; { {x}_{2}}(n) &amp; { {x}_{3}}(n) \\<br>\end{matrix} \right\}<br>$，每组序列长度为12。</p><p>比特块$ b(0),…,b({ {M}_{\text{bit}}}-1) $，其中$ { {M}_{\text{bit}}}\in \left\{ 1,2 \right\} $是PUCCH发送的比特数，应根据下列方法选择发送序列</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & y(n)={ {x}_{j}}(n) \\ 
 \nonumber & j=\sum\nolimits_{i=0}^{ { {M}_{\text{bit}}}-1}{b(i)\cdot { {2}^{i}}}  
\end{align}</script><h5 id="物理资源映射-1"><a href="#物理资源映射-1" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>序列$ y(n) $应乘以一个幅值因子$ { {\beta }_{\text{PUCCH,0}}} $，以符合TS38.213对发送功率$ { {P}_{\text{PUCCH,0}}} $的规定，并且从$ y(0) $开始映射到资源粒子$开始映射到资源粒子$，在天线端口$ p=2000 $上，按递增顺序先$k$后$l$映射。</p><h4 id="PUCCH格式1"><a href="#PUCCH格式1" class="headerlink" title="PUCCH格式1"></a>PUCCH格式1</h4><h5 id="序列调制"><a href="#序列调制" class="headerlink" title="序列调制"></a>序列调制</h5><p><br>比特块$ b(0),…,b({ {M}_{\text{bit}}}-1) $应按5.1节的描述进行调制，若$ { {M}_{\text{bit}}}=1 $则使用BPSK，若$ { {M}_{\text{bit}}}=2 $则使用QPSK，得到复值符号$ d(0) $。</p><p>复值符号$ d(0) $按如下方式乘以序列$ r_{u,v}^{({ {\alpha }_{p}})}(n) $</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & y(n)=d(0)\cdot r_{u,v}^{(\alpha )}(n) \\ 
 \nonumber & n=0,1,...,{ {N}_{\text{seq}}}-1  
\end{align}</script><p>复值符号块$ y(0),…,y({ {N}_{\text{seq}}}-1) $应根据如下方式使用正交序列$ { {w}_{i}}(m) $进行块扩展（block-wise spread）</p><script type="math/tex;mode=display">\begin{align}
 \nonumber  & z\left( {m}'{ {N}_{\text{seq}}}{ {N}_{\text{SF}}}+m{ {N}_{\text{seq}}}+n \right)={ {w}_{i}}(m)\cdot y\left( n \right) \\ 
 \nonumber & n=0,1,...,{ {N}_{\text{seq}}}-1 \\ 
\nonumber  & m=0,1,...,N_{\text{SF}}^{ { {m}'}}-1 \\ 
\nonumber  & {m}'=\left\{ \begin{array}{*{35}{l}}
   0 & \text{no frequency hopping}  \\
   0,1 & \text{frequency hopping enabled}  \\
\end{array} \right.  
\end{align}</script><p>其中$ { {N}_{\text{seq}}}=N_{\text{sc}}^{\text{RB}} $。</p><p>正交序列$ { {w}_{i}}(m) $在Table 6.3.2.2.1-1中给定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/193946445.png" alt="mark"></p><h5 id="物理资源映射-2"><a href="#物理资源映射-2" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>序列$ { {z}^{(p)}}(n) $应乘以一个幅值因子$ { {\beta }_{\text{PUCCH,1}}} $，以符合TS38.213对发送功率$ { {P}_{\text{PUCCH,1}}} $的规定，并从$ { {z}^{(p)}}(0) $开始映射到资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，这些REs应满足下列条件：</p><ul><li>它们在被分配的用于传输的RB中</li><li>它们不能被DM-RS所使用</li></ul><p>映射过程中不保留用于其他目的资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，在天线端口$ p=2000 $上，按递增顺序先$ k $后$ l $映射。</p><h4 id="PUCCH格式2"><a href="#PUCCH格式2" class="headerlink" title="PUCCH格式2"></a>PUCCH格式2</h4><h5 id="加扰-1"><a href="#加扰-1" class="headerlink" title="加扰"></a>加扰</h5><p><br>比特块$ b(0),…,b(M_{\text{bit}}^{ {}}-1) $，其中$ M_{\text{bit}}^{ {}} $是物理信道发送的比特数，应在调制前按如下方式被加扰，得到加扰比特块$ \tilde{b}(0),…,\tilde{b}({ {M}_{\text{bit}}}-1) $</p><script type="math/tex;mode=display">{ {\tilde{b}}^{(q)}}(i)=\left( { {b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2</script><p>其中加扰序列$ { {c}^{(q)}}(i) $由5.2节给定。</p><h5 id="调制-1"><a href="#调制-1" class="headerlink" title="调制"></a>调制</h5><p><br>加扰比特块$ \tilde{b}(0),…,\tilde{b}({ {M}_{\text{bit}}}-1) $应按5.1节的描述进行QPSK调制，得到复值调制符号块$ d(0),…,d({ {M}_{\text{symb}}}-1) $。</p><h5 id="物理资源映射-3"><a href="#物理资源映射-3" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>调制符号块$ d(0),…,d({ {M}_{\text{symb}}}-1) $应乘以一个幅值因子$ { {\beta }_{\text{PUCCH,2}}} $，以符合TS38.213对发送功率$ { {P}_{\text{PUCCH,2}}} $的规定，并从$ d(0) $开始映射到资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，这些REs应满足下列条件：</p><ul><li>它们在被分配的用于传输的RB中</li><li>它们不能被DM-RS所使用</li></ul><p>映射过程中不保留用于其他目的资源粒子$ { {\left( k,l \right)}_{p,\mu }} $，在天线端口$ p=2000 $上，按递增顺序先$ k $后$ l $映射。</p><h4 id="PUCCH格式3"><a href="#PUCCH格式3" class="headerlink" title="PUCCH格式3"></a>PUCCH格式3</h4><h3 id="PRACH"><a href="#PRACH" class="headerlink" title="PRACH"></a>PRACH</h3><h4 id="序列生成"><a href="#序列生成" class="headerlink" title="序列生成"></a>序列生成</h4><p><br>随机接入前导$ { {x}_{u,v}}(n) $按如下方式生成</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & { {x}_{u,v}}(n)={ {x}_{u}}((n+{ {C}_{v}})\bmod { {L}_{\text{RA}}}) \\ 
 \nonumber & { {x}_{u}}(i)={ {e}^{-j\frac{\pi ui(i+1)}{ { {L}_{\text{RA}}}}}},i=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}</script><p>频域表示按以下方式生成</p><script type="math/tex;mode=display">{ {y}_{u,v}}(n)=\sum\limits_{m=0}^{ { {L}_{\text{RA}}}-1}{ { {x}_{u,v}}(m)\cdot { {e}^{-j\frac{2\pi mn}{ { {L}_{\text{RA}}}}}}}</script><p>其中$ { {L}_{\text{RA}}}=839 $或$ { {L}_{\text{RA}}}=139 $，并根据随机接入前导格式来确定，详见Tables 6.3.3.1-1 and 6.3.3.1-2。循环移位$ { {C}_{v}} $为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & C{}_{v}=\left\{ \begin{array}{*{35}{l}}
   v{ {N}_{\text{CS}}} & \text{v}=\text{0,1,}...\text{,}\left\lfloor { { {L}_{\text{RA}}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor -1,{ {N}_{\text{CS}}}\ne 0 & \text{for unrestricted sets}  \\
   \text{0} & { {N}_{\text{CS}}}=0 & \text{for unrestricted sets}  \\
   { {d}_{\text{start}}}\left\lfloor {v}/{n_{\text{shift}}^{\text{RA}}}\; \right\rfloor +\left( v\bmod n_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} \nonumber & v=0,1,...,w-1 & \text{for restricted sets type A and B}  \\
   { { {\bar{\bar{d}}}}_{\text{start}}}+\left( v-w \right){ {N}_{\text{CS}}} & v=w,...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}-1 & \text{for restricted sets type B}  \\
   { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}+\left( v-w-\bar{\bar{n}}_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} & v=w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}},...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}+\bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}-1 & \text{for restricted sets type B}  \\
\end{array} \right. \\ 
 \nonumber  & w=n_{\text{shift}}^{\text{RA}}n_{\text{group}}^{\text{RA}}+\bar{n}_{\text{shift}}^{\text{RA}}  
\end{align}</script><p>其中$ { {N}_{\text{CS}}} $由Tables 6.3.3.1-3到6.3.3.1-5给定，高层参数<em>restrictedSetConfig</em>决定受限集合类型，Tables 6.3.3.1-1和6.3.3.1-2指示不同前导格式下所支持的受限集合类型。</p><p>$ { {d}_{u}} $的值为</p><script type="math/tex;mode=display">{ {d}_{u}}=\left\{ \begin{array}{*{35}{l}}
   q & 0\le q<{ { {L}_{\text{RA}}}}/{2}\;  \\
   { {L}_{\text{RA}}}-q & \text{otherwise}  \\
\end{array} \right.</script><p>其中$ q $是满足$ \left( qu \right)\bmod { {L}_{\text{RA}}}=1 $的最小非负整数。循环移位的受限集合参数依赖于$ { {d}_{u}} $。</p><p>对于受限集合类型A，参数由下式给定：</p><ul><li>对于$ { {N}_{\text{CS}}}\le { {d}_{u}}&lt;{ { {L}_{\text{RA}}}}/{3}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=2{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
\nonumber  & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {({ {L}_{\text{RA}}}-2{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}</script><ul><li>对于$ { { {L}_{\text{RA}}}}/{3}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{2}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max \left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}</script><p>对于受限集合类型B，参数由下式给定：</p><ul><li>对于$ { {N}_{\text{CS}}}\le { {d}_{u}}&lt;{ { {L}_{\text{RA}}}}/{5}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=4{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {({ {L}_{\text{RA}}}-4{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}</script><ul><li>对于$ { { {L}_{\text{RA}}}}/{5}\;\le { {d}_{u}}\le {\left( { {L}_{\text{RA}}}-{ {N}_{\text{CS}}} \right)}/{\text{4}}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( { {L}_{\text{RA}}}-4{ {d}_{u}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-4{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
\nonumber  & \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max \left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}</script><ul><li>对于$ {({ {L}_{\text{RA}}}+{ {N}_{\text{CS}}})}/{4}\;\le { {d}_{u}}&lt;{2{ {L}_{\text{RA}}}}/{7}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
 \nonumber   & n_{\text{shift}}^{\text{RA}}=\left\lfloor {(4{ {d}_{u}}-{ {L}_{\text{RA}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber  & { {d}_{\text{start}}}=4{ {d}_{u}}-{ {L}_{\text{RA}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber  & { { {\bar{\bar{d}}}}_{\text{start}}}={ {L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber  & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}={ {L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber  & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber  & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( { {L}_{\text{RA}}}-3{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber  & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}},4{ {d}_{u}}-{ {L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber  & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( \left( 1-\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right) \right)\left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)+\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right)\left( 4{ {d}_{u}}-{ {L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right) \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor -\bar{\bar{n}}_{\text{shift}}^{\text{RA}}  
\end{align}</script><ul><li>对于$ {2{ {L}_{\text{RA}}}}/{7}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{3}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-3{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}={ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( 4{ {d}_{u}}-{ {L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}},{ {L}_{\text{RA}}}-3{ {d}_{u}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><ul><li>对于$ {({ {L}_{\text{RA}}}+{ {N}_{\text{CS}}})}/{3}\;\le { {d}_{u}}&lt;{2{ {L}_{\text{RA}}}}/{5}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {(3{ {d}_{u}}-{ {N}_{\text{ZC}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=3{ {d}_{u}}-{ {N}_{\text{ZC}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( { {L}_{\text{RA}}}-2{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><ul><li>对于$ {2{ {L}_{\text{RA}}}}/{5}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{2}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {N}_{\text{ZC}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=2({ {N}_{\text{ZC}}}-2{ {d}_{u}})+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-{ {d}_{u}})}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( 3{ {d}_{u}}-{ {L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><p>对于其他所有的$ { {d}_{u}} $值，受限集合则不存在循环移位。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/200450560.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/200548356.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/200639881.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/200723042.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/200800085.png" alt="mark"></p><h4 id="物理资源映射-4"><a href="#物理资源映射-4" class="headerlink" title="物理资源映射"></a>物理资源映射</h4><p><br>前导序列应根据以下方式应到到物理资源</p><script type="math/tex;mode=display">\begin{align}
 \nonumber  & a_{k}^{(p,\text{RA})}={ {\beta }_{\text{PRACH}}}{ {y}_{u,v}}(k) \\ 
 \nonumber & k=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}</script><p>其中$ { {\beta }_{\text{PRACH}}} $是幅值因子，用以满足TS38.213对发送功率$ { {P}_{\text{PRACH}}} $的规定，$ p=4000 $是天线端口。基带信号根据5.3节并使用Table 6.3.3.1-1或Table 6.3.3.1-2中的参数生成。</p><h2 id="物理信号"><a href="#物理信号" class="headerlink" title="物理信号"></a>物理信号</h2><h3 id="参考信号"><a href="#参考信号" class="headerlink" title="参考信号"></a>参考信号</h3><h4 id="PUSCH-DM-RS"><a href="#PUSCH-DM-RS" class="headerlink" title="PUSCH DM-RS"></a>PUSCH DM-RS</h4><h5 id="序列生成-1"><a href="#序列生成-1" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>如果PUSCH不启用TF预编码，则参考信号序列$ r(m) $应根据以下方式生成</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $在5.2节中定义。</p><p>如果PUSCH启用TF预编码，则参考信号序列$ r(m) $应根据以下方式生成</p><script type="math/tex;mode=display">{ {r}^{(p)}}\left( m \right)=r_{u,v}^{(\alpha )}\left( m \right)</script><p>其中$ { {r}^{(p)}}\left( m \right)=r_{u,v}^{(\alpha )}\left( m \right) $在5.3节中给定。</p><h5 id="物理资源映射-5"><a href="#物理资源映射-5" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>PUSCH DM-RS应根据高层参数<em>UL-DMRS-config-type</em>所配置的类型1或类型2进行物理资源映射。</p><p>UE应根据以下方式将序列$ r(m) $映射到物理资源：</p><ul><li>如果不启用TF预编码，</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( 2m+{k}'+{ {m}_{0}} \right) \\ 
 \nonumber & k=\left\{ \begin{matrix}
   { {k}_{\text{0}}}+4m+2{k}'+\Delta  & \text{Configuration type 1}  \\
   { {k}_{\text{0}}}+6m+{k}'+\Delta  & \text{Configuration type 2}  \\
\end{matrix} \right. \\ 
 \nonumber & {k}'=0,1 \\ 
 \nonumber & l=\left\{ { {l}_{0}},\bar{l} \right\}+{l}'  
\end{align}</script><ul><li>如果启用TF预编码，</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{ {w}_{\text{t}}}\left( { {l}'} \right)\cdot r_{u,v}^{(\alpha )}\left( 2m+{k}'+{ {m}_{0}} \right) \\ 
 \nonumber & k={ {k}_{\text{0}}}+4m+2{k}'+\Delta  \\ 
 \nonumber & {k}'=0,1 \\ 
 \nonumber & l=\left\{ { {l}_{0}},\bar{l} \right\}+{l}'  
\end{align}</script><p>其中$ { {w}_{\text{f}}}\left( { {k}’} \right) $、$ { {w}_{\text{t}}}\left( { {l}’} \right) $和$ \Delta $由Tables 6.4.1.1.2-1和6.4.1.1.2-2给定。</p><p>$ l $是PUSCH传输的起始符号，$ { {l}_{0}} $是DM-RS的第1个符号。</p><p>附加的DM-RS符号的位置由$ \bar{l} $和时隙内最后一个用于PUSCH的OFDM符号确定，详见Tables 6.4.1.1.2-3和6.4.1.1.2-4。</p><p>时域索引$ {l}’ $和所支持的天线端口$ p $根据<em>UL-DMRS-len</em>和Table 6.4.1.1.2-5确定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171024/082322325.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171024/082356056.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171024/082436027.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171024/082509888.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171024/084919864.png" alt="mark"></p><h4 id="PT-RS"><a href="#PT-RS" class="headerlink" title="PT-RS"></a>PT-RS</h4><h5 id="序列生成-2"><a href="#序列生成-2" class="headerlink" title="序列生成"></a>序列生成</h5><h5 id="物理资源映射-6"><a href="#物理资源映射-6" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><h4 id="PUCCH-DM-RS"><a href="#PUCCH-DM-RS" class="headerlink" title="PUCCH DM-RS"></a>PUCCH DM-RS</h4><h5 id="PUCCH格式1-DM-RS"><a href="#PUCCH格式1-DM-RS" class="headerlink" title="PUCCH格式1 DM-RS"></a>PUCCH格式1 DM-RS</h5><h6 id="序列生成-3"><a href="#序列生成-3" class="headerlink" title="序列生成"></a>序列生成</h6><p><br>参考信号序列定义为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & r\left( {m}'{ {N}_{\text{seq}}}{ {N}_{\text{SF}}}+m{ {N}_{\text{seq}}}+n \right)={ {w}_{i}}(m)\cdot r_{u,v}^{(\alpha )}\left( n \right) \\ 
 \nonumber & n=0,1,...,{ {N}_{\text{seq}}}-1 \\ 
 \nonumber & m=0,1,...,N_{\text{SF}}^{ { {m}'}}-1 \\ 
 \nonumber & {m}'=\left\{ \begin{array}{*{35}{l}}
   0 & \text{no frequency hopping}  \\
   0,1 & \text{frequency hopping enabled}  \\
\end{array} \right.  
\end{align}</script><p>其中$ { {N}_{\text{seq}}}=N_{\text{sc}}^{\text{RB}} $。正交序列$ { {w}_{i}}(m) $由Table 6.3.2.2.1-1给定。</p><h6 id="物理资源映射-7"><a href="#物理资源映射-7" class="headerlink" title="物理资源映射"></a>物理资源映射</h6><p><br>参考信号序列应乘以一个幅值因子$ \beta _{\text{DMRS}}^{\text{PUCCH1}} $，以符合TS38.213对发送功率$ P_{\text{DMRS}}^{\text{PUCCH1}} $并在时隙内在天线端口$ p $上，按以下方式从$ r(0) $开始映射到资源粒子$ (k,l) $</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}=\beta _{\text{DMRS}}^{\text{PUCCH1}}r(m) \\ 
 \nonumber & l=0,2,4,...  
\end{align}</script><p>其中$ l=0 $对应于PUCCH发送的第1个OFDM符号。</p><h5 id="PUCCH格式2-DM-RS"><a href="#PUCCH格式2-DM-RS" class="headerlink" title="PUCCH格式2 DM-RS"></a>PUCCH格式2 DM-RS</h5><h6 id="序列生成-4"><a href="#序列生成-4" class="headerlink" title="序列生成"></a>序列生成</h6><p><br>参考信号序列$ r(m) $应按以下方式生成</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $在5.2节定义。</p><h6 id="物理资源映射-8"><a href="#物理资源映射-8" class="headerlink" title="物理资源映射"></a>物理资源映射</h6><p><br>参考信号序列应乘以一个幅值因子$ \beta _{\text{DMRS}}^{\text{PUCCH2}} $，以符合TS38.213对发送功率$ P_{\text{DMRS}}^{\text{PUCCH2}} $的规定，并在时隙内在天线端口$ p $上，按以下方式从$ r(0) $开始映射到资源粒子$ (k,l) $</p><script type="math/tex;mode=display">\begin{align}
 \nonumber  & a_{k,l}^{(p,\mu )}=\beta _{\text{DMRS}}^{\text{PUCCH2}}r(m) \\ 
 \nonumber & k=3m+1  
\end{align}</script><p>其中$ k $是指相对于发送PUCCH所使用的最低编号的RB。</p><h4 id="SRS"><a href="#SRS" class="headerlink" title="SRS"></a>SRS</h4><h5 id="序列生成-5"><a href="#序列生成-5" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>探测参考信号序列应按以下方式生成</p><script type="math/tex;mode=display">\begin{align}
 \nonumber   & { {r}^{(p)}}\left( n \right)=r_{u,v}^{(\alpha )}\left( n \right) \\ 
 \nonumber  & 0\le n\le 272\cdot N_{\text{sc}}^{\text{RB}}  
\end{align}</script><p>其中$ r_{u,v}^{(\alpha )}\left( n \right) $由5.2.2节给定。</p><h5 id="物理资源映射-9"><a href="#物理资源映射-9" class="headerlink" title="物理资源映射"></a>物理资源映射</h5><p><br>根据TS38.214中6.2.1节，当SRS发送时，序列$ { {r}^{(p)}}\left( n \right) $应乘以一个幅值因子$ { {\beta }_{\text{SRS}}} $，以符合TS38.213对发送功率的规定，并在时隙内在天线端口$ p $上，按以下方式从$ r_{\text{SRS}}^{\text{(}p\text{)}}(0) $开始映射到资源粒子$ (k,l) $</p><script type="math/tex;mode=display">a_{ { {K}_{\text{TC}}}k'+k_{0}^{(p)},l}^{(p)}=\left\{ \begin{array}{*{35}{l}}
   \frac{1}{\sqrt{ { {N}_{\text{ap}}}}}{ {\beta }_{\text{SRS}}}r_{SRS}^{(p)}(k') & k'=0,1,\ldots ,M_{\text{sc},b}^{\text{RS}}-1  \\
   0 & \text{otherwise}  \\
\end{array} \right.</script><p>其中$ { {N}_{\text{ap}}}\in \left\{ 1,2,4 \right\} $是用于发送SRS的天线端口数。</p><p>探测参考信号应在上行天线端口$ 3000+i $上发送，其中$ i $是$ i=0 $，$ i=0,1 $或$ i=0,1,2,3 $之一。</p><p>$ k_{0}^{(p)} $是天线端口$ p $上的SRS频域起始位置。SRS序列长度为</p><script type="math/tex;mode=display">M_{\text{sc,}b}^{\text{RS}}={ { {m}_{\text{SRS,}b}}N_{\text{sc}}^{\text{RB}}}/{ { {K}_{\text{TC}}}}\;</script><p>其中$ b={ {B}_{\text{SRS}}} $和$ { {m}_{\text{SRS,}b}} $由Table 5.5.3.2-1给定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171024/083715829.png" alt="mark"></p><h1 id="下行链路"><a href="#下行链路" class="headerlink" title="下行链路"></a>下行链路</h1><p><br><a href="http://marshallcomm.cn/2017/10/24/nr-v110-l1-channel-modulation-dl/">5G-NR物理信道与调制-下行链路v1.1.0</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;上接&lt;a href=&quot;http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation/#上行链路&quot;&gt;《5G-NR物理信道与调制v1.1.0》上行链路&lt;/a&gt;&lt;/p&gt;&lt;h1 id=&quot;Scope&quot;&gt;&lt;a href=&quot;#Scope&quot; class=&quot;headerlink&quot; title=&quot;Scope&quot;&gt;&lt;/a&gt;Scope&lt;/h1&gt;&lt;h1 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h1&gt;&lt;h1 id=&quot;Definitions-symbols-and-abbreviations&quot;&gt;&lt;a href=&quot;#Definitions-symbols-and-abbreviations&quot; class=&quot;headerlink&quot; title=&quot;Definitions, symbols and abbreviations&quot;&gt;&lt;/a&gt;Definitions, symbols and abbreviations&lt;/h1&gt;&lt;h1 id=&quot;帧结构与物理资源&quot;&gt;&lt;a href=&quot;#帧结构与物理资源&quot; class=&quot;headerlink&quot; title=&quot;帧结构与物理资源&quot;&gt;&lt;/a&gt;帧结构与物理资源&lt;/h1&gt;&lt;h1 id=&quot;通用函数&quot;&gt;&lt;a href=&quot;#通用函数&quot; class=&quot;headerlink&quot; title=&quot;通用函数&quot;&gt;&lt;/a&gt;通用函数&lt;/h1&gt;&lt;h1 id=&quot;上行链路&quot;&gt;&lt;a href=&quot;#上行链路&quot; class=&quot;headerlink&quot; title=&quot;上行链路&quot;&gt;&lt;/a&gt;上行链路&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;h3 id=&quot;物理信道概述&quot;&gt;&lt;a href=&quot;#物理信道概述&quot; class=&quot;headerlink&quot; title=&quot;物理信道概述&quot;&gt;&lt;/a&gt;物理信道概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;上行链路物理信道对应于一组资源粒子（REs）的集合，用于承载源自高层的信息。本规范定义了如下上行信道：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;物理上行共享信道（PUSCH）&lt;/li&gt;&lt;li&gt;物理上行控制信道（PUCCH）&lt;/li&gt;&lt;li&gt;物理随机接入信道（PRACH）&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;物理信号概述&quot;&gt;&lt;a href=&quot;#物理信号概述&quot; class=&quot;headerlink&quot; title=&quot;物理信号概述&quot;&gt;&lt;/a&gt;物理信号概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;上行物理信号是物理层使用的，但不承载任何来自高层信息的信号。本规范定义了如下上行物理信号：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;解调参考信号（Demodulation reference signals，DM-RS）&lt;/li&gt;&lt;li&gt;相位跟踪参考信号（Phase-tracking reference signals，PT-RS）&lt;/li&gt;&lt;li&gt;探测参考信号（Sounding reference signal，SRS）&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
      <category term="2017-10" scheme="http://marshallcomm.cn/tags/2017-10/"/>
    
  </entry>
  
  <entry>
    <title>5G-NR物理信道与调制v1.1.0</title>
    <link href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation/"/>
    <id>http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation/</id>
    <published>2017-10-23T06:05:43.000Z</published>
    <updated>2017-10-26T06:39:44.131Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><blockquote><p><strong>Marshall：</strong>5G NR物理层规范已更新到<a href="http://marshallcomm.cn/tags/2017-10/">v1.1.0版本</a>，本文整理了38.211规范v1.1.0版，同时宣告<a href="http://marshallcomm.cn/tags/2017-09/">v1.0.0版本</a>过时。</p></blockquote><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/151427236.png" alt="mark"></p><h1 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h1><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><h1 id="Definitions-symbols-and-abbreviations"><a href="#Definitions-symbols-and-abbreviations" class="headerlink" title="Definitions, symbols and abbreviations"></a>Definitions, symbols and abbreviations</h1><h1 id="帧结构与物理资源"><a href="#帧结构与物理资源" class="headerlink" title="帧结构与物理资源"></a>帧结构与物理资源</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><br>在本规范中，除非另有说明，时域中各个域的大小表示为若干时间单位${ {T}_{\text{c}}}={1}/{\left( \Delta { {f}_{\max }}\cdot { {N}_{\text{f}}} \right)}\;$，其中$\Delta { {f}_{\max }}=480\cdot { {10}^{3}}\text{ Hz}$，${ {N}_{\text{f}}}=4096$。常数$\kappa ={ { {T}_{\text{s}}}}/{ { {T}_{\text{c}}}}\;=64$，其中${ {T}_{\text{s}}}={1}/{\left( \Delta { {f}_{\text{ref}}}\cdot { {N}_{\text{f,ref}}} \right)}\;$，$\Delta { {f}_{\text{ref}}}=15\cdot { {10}^{3}}\text{ Hz}$，${ {N}_{\text{f,ref}}}=2048$。</p><blockquote><p>${ {T}_{\text{s}}}$是LTE的采样间隔，为了不引起混淆，NR的采样间隔用新的符号${ {T}_{c}}$命名，${ {T}_{c}}=64{ {T}_{s}}$。</p></blockquote><a id="more"></a><h2 id="波形参数"><a href="#波形参数" class="headerlink" title="波形参数"></a>波形参数</h2><p><br>如Table 4.2-1所示，NR支持多种OFDM波形参数。部分载波带宽（carrier bandwidth part）的$ \mu $和CP由高层参数给定，其中下行链路由<em>DL_BWP_mu</em>和<em>DL_BWP_cp</em>给定，上行链路由<em>UL_BWP_mu</em>和<em>UL_BWP_cp</em>给定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/143031394.png" alt="mark"></p><blockquote><p><strong>Marshall：</strong>NR支持多种子载波间隔，当$ \mu =0 $时即为LTE的参数配置，也就是说LTE的参数配置是NR的一个特例。</p></blockquote><h2 id="帧结构"><a href="#帧结构" class="headerlink" title="帧结构"></a>帧结构</h2><h3 id="帧和子帧"><a href="#帧和子帧" class="headerlink" title="帧和子帧"></a>帧和子帧</h3><p><br>下行与上行链路传输于帧中，一帧的时域为$ { {T}_{\text{f}}}=\left( {\Delta { {f}_{\max }}{ {N}_{\text{f}}}}/{100}\; \right)\cdot { {T}_{\text{c}}}=10\text{ ms} $，一帧包含10个子帧，每个子帧时域为$ { {T}_{\text{sf}}}=\left( {\Delta { {f}_{\max }}{ {N}_{\text{f}}}}/{1000}\; \right)\cdot { {T}_{\text{c}}}=1\text{ ms} $。每个子帧内连续的OFDM符号数为$ N_{\text{symb}}^{\text{subframe},\mu }=N_{\text{symb}}^{\text{slot}}N_{\text{slot}}^{\text{subframe},\mu } $。每帧分为两个相等大小的半帧，每个半帧包含5个子帧，即半帧0由子帧0-4组成，半帧1由子帧5-9组成。</p><p>在一个载波上有一组帧用于上行链路，有一组帧用于下行链路。</p><p>来自UE的上行帧$i$应在UE对应的下行帧开始前$ { {T}_{\text{TA}}}={ {N}_{\text{TA}}}{ {T}_{\text{c}}} $传输。</p><h3 id="时隙"><a href="#时隙" class="headerlink" title="时隙"></a>时隙</h3><p><br>对于子载波间隔配置$ \mu $，时隙在子帧内按递增顺序编号为$ n_{\text{s}}^{\mu }\in \left\{ 0,…,N_{\text{slot}}^{\text{subframe,}\mu }-1 \right\} $，在帧内按递增顺序编号为$ n_{\text{s,f}}^{\mu }\in \left\{ 0,…,N_{\text{slot}}^{\text{frame,}\mu }-1 \right\} $。一个时隙内有$ N_{\text{symb}}^{\text{slot}} $个连续的OFDM符号，其中$ N_{\text{symb}}^{\text{slot}} $的值依赖于CP长度，CP长度由Tables 4.3.2-1 and 4.3.2-2给定。一个子帧内的起始时隙$ n_{\text{s}}^{\mu } $与这个子帧内起始OFDM符号$n_{\text{s}}^{\mu }N_{\text{symb}}^{\text{slot}}$在时间上对齐。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/143556228.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/143622401.png" alt="mark"></p><blockquote><p><strong>Marshall：</strong>一个帧是10ms，一个子帧是1ms，一个子帧内的时隙数是不定的，而一个时隙内的符号数是固定的，因此一个子帧内的符号数是不定的。这里唯一变化的参数就是时隙数，而时隙数是根据子载波间隔配置$ \mu $来确定的。追溯到源头，是由于$ \mu $的不同配置，带来了上述参数的变化。</p></blockquote><h2 id="物理资源"><a href="#物理资源" class="headerlink" title="物理资源"></a>物理资源</h2><h3 id="天线端口"><a href="#天线端口" class="headerlink" title="天线端口"></a>天线端口</h3><p><br>天线端口定义为，在同一个天线端口上，传输某一符号的信道可以从传输另一个符号的信道推知。</p><p>若在一个天线端口上传输的某一符号的信道的大尺度特性，可以从另一个天线端口上传输的某一符号的信道推知，则这两个天线端口被称为是准共定位（quasi co-located，QCL）的。大尺度特性包括一个或多个时延扩展，多普勒频移，平均增益，平均时延，空间Rx参数。</p><h3 id="资源格"><a href="#资源格" class="headerlink" title="资源格"></a>资源格</h3><p><br>对于给定的波形参数和子载波间隔配置，资源格定义为$ N_{\text{RB,}x}^{\text{max,}\mu }N_{\text{sc}}^{\text{RB}} $个频域子载波和$ N_{\text{symb}}^{\text{subframe},\mu } $个时域OFDM符号，其中$ N_{\text{RB,}x}^{\text{max,}\mu } $由Table 4.4.2-1给定，$ x $表示DL（downlink）或UL（uplink）。在不会产生混淆时，下标$ x $可省略。每个天线端口$ p $、每个子载波间隔配置$ \mu $以及每个传输方向（上行或下行），对应一个资源格。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/143930833.png" alt="mark"></p><h3 id="资源粒子"><a href="#资源粒子" class="headerlink" title="资源粒子"></a>资源粒子</h3><p><br>对于天线端口$ p $和子载波间隔配置$ \mu $，资源格中的每个元素被称为资源粒子，并且由索引对$ \left( k,l \right) $唯一地标识，其中$ k $是频域索引，$ l $是时域符号索引。</p><p>天线端口$ p $和子载波间隔配置$ \mu $下的资源粒子表示为$ { {\left( k,l \right)}_{p,\mu }} $，其对应的复数值为$ a_{k,l}^{(p,\mu )} $。在不会产生混淆时，或在没有指定某一天线端口或子载波间隔时，索引$ p $和$ \mu $可以省略，表示为$ a_{k,l}^{(p)} $或$ { {a}_{k,l}} $。</p><p>一个资源粒子可分为“上行链路”、“下行链路”、“灵活”或“保留”。</p><ul><li>如果一个资源粒子被配置为“保留”，UE不应在上行链路资源粒子中传输任何数据，也不应假设下行链路资源粒子中有任何内容。</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/144316598.png" title="Figure 4.4.3-1: Resource grid and resource block"></p><h3 id="资源块"><a href="#资源块" class="headerlink" title="资源块"></a>资源块</h3><p><br>在频域内，物理资源块定义为$ N_{\text{sc}}^{\text{RB}}=12 $连续的子载波。</p><p>在频域内，物理资源块从0到$ N_{\text{RB}}^{\text{max,}\mu }-1 $进行编号。在频域内，物理资源块号$ { {n}_{\text{PRB}}} $与资源粒子 的关系如下：</p><script type="math/tex;mode=display">{ {n}_{\text{PRB}}}=\left\lfloor \frac{k}{N_{\text{sc}}^{\text{RB}}} \right\rfloor</script><h3 id="部分载波带宽"><a href="#部分载波带宽" class="headerlink" title="部分载波带宽"></a>部分载波带宽</h3><p><br>对于给定载波上的给定波形参数$ { {\mu }_{i}} $，部分载波带宽（Carrier bandwidth part）定义为一个物理资源块（在4.4.4中定义）的连续子集。BWP中的资源块从0到$ N_{\text{RB,}x}^{\mu }-1 $进行编号，其中$ x $表示DL（downlink）或UL（uplink）。$ N_{\text{BWP}}^{i} $是4.4.4节中绝对资源块格栅中的PRB0与编号为$i$的部分载波载波带宽中的PRB0之间的偏移。一个BWP内的资源块数应满足$ N_{\text{RB, }x}^{\text{min, }\mu }\le N_{\text{RB,}x}^{\mu }\le N_{\text{RB, }x}^{\text{max, }\mu } $，其中最小与最大值由Table 4.4.2-1给定。</p><p>在下行链路，UE可以配置一个或多个BWP，并且可以在指定的时间对下行BWP进行激活。在激活的BWP之外，UE不会接收PDSCH或PDCCH。</p><p>在上行链路，UE可以配置一个或多个BWP，并且可以在指定的时间对上行BWP进行激活。在激活的BWP之外，UE不会接收PUSCH或PUCCH。</p><h2 id="载波聚合"><a href="#载波聚合" class="headerlink" title="载波聚合"></a>载波聚合</h2><p><br>多个小区的传输可以被聚合起来，除了主小区之外最多可聚合15个次级小区。除非另有说明，本规范中的描述适用于多达16个服务小区中的每一个。</p><h1 id="通用函数"><a href="#通用函数" class="headerlink" title="通用函数"></a>通用函数</h1><h2 id="调制映射器"><a href="#调制映射器" class="headerlink" title="调制映射器"></a>调制映射器</h2><p><br>调制映射器采用二进制0或1作为输入，产生复值调制符号作为输出。</p><h3 id="π-2-BPSK"><a href="#π-2-BPSK" class="headerlink" title="π/2-BPSK"></a>π/2-BPSK</h3><p><br>对于π/2-BPSK调制，比特$b(i)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">x=\frac{ { {e}^{j{i\pi }/{2}\;}}}{\sqrt{2}}\left[ \left( 1-2b(i) \right)+j\left( 1-2b(i) \right) \right]</script><h3 id="BPSK"><a href="#BPSK" class="headerlink" title="BPSK"></a>BPSK</h3><p><br>对于BPSK调制，比特$b(i)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">x=\frac{1}{\sqrt{2}}\left[ \left( 1-2b(i) \right)+j\left( 1-2b(i) \right) \right]</script><h3 id="QPSK"><a href="#QPSK" class="headerlink" title="QPSK"></a>QPSK</h3><p><br>对于QPSK调制，成对比特$b(i),b(i+1)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">x=\frac{1}{\sqrt{2}}\left[ \left( 1-2b(i) \right)+j\left( 1-2b(i+1) \right) \right]</script><h3 id="16QAM"><a href="#16QAM" class="headerlink" title="16QAM"></a>16QAM</h3><p><br>对于16QAM调制，四位比特$b(i),b(i+1),b(i+2),b(i+3)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">x=\frac{1}{\sqrt{10}}\left[ \left( 1-2b(i) \right)\left( 2-\left( 1-2b(i+2) \right) \right)+j\left( 1-2b(i+1) \right)\left( 2-\left( 1-2b(i+3) \right) \right) \right]</script><h3 id="64QAM"><a href="#64QAM" class="headerlink" title="64QAM"></a>64QAM</h3><p><br>对于64QAM调制，六位比特$b(i),b(i+1),b(i+2),b(i+3),b(i+4),b(i+5)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & x=\frac{1}{\sqrt{42}}\left[ \left( 1-2b(i) \right)\left( 4-\left( 1-2b(i+2) \right)\left( 2-\left( 1-2b(i+4) \right) \right) \right) \right. \\ 
 \nonumber & \ \ \ \ \ \ \left. +j\left( 1-2b(i+1) \right)\left( 4-\left( 1-2b(i+3) \right)\left( 2-\left( 1-2b(i+5) \right) \right) \right) \right] \\ 
\end{align}</script><h3 id="256QAM"><a href="#256QAM" class="headerlink" title="256QAM"></a>256QAM</h3><p><br>对于256QAM调制，八位比特$b(i),b(i+1),b(i+2),b(i+3),b(i+4),b(i+5),b(i+6),b(i+7)$根据下式映射为复值调制符号$x$</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & x=\frac{1}{\sqrt{170}}\left[ \left( 1-2b(i) \right)\left( 8-\left( 1-2b(i+2) \right)\left( 4-\left( 1-2b(i+4) \right)\left( 2-\left( 1-2b(i+6) \right) \right) \right) \right) \right. \\ 
 \ \ \ \nonumber & \left. +j\left( 1-2b(i+1) \right)\left( 8-\left( 1-2b(i+3) \right)\left( 4-\left( 1-2b(i+5) \right)\left( 2-\left( 1-2b(i+7) \right) \right) \right) \right) \right]  
\end{align}</script><h2 id="序列生成"><a href="#序列生成" class="headerlink" title="序列生成"></a>序列生成</h2><h3 id="伪随机序列生成"><a href="#伪随机序列生成" class="headerlink" title="伪随机序列生成"></a>伪随机序列生成</h3><p><br>伪随机序列由长度为31的Gold序列定义。输出序列$ c(n) $长度为$ { {M}_{\text{PN}}} $，其中$ n=0,1,…,{ {M}_{\text{PN}}}-1 $，$ c(n) $由下式定义</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & c(n)=\left( { {x}_{1}}(n+{ {N}_{C}})+{ {x}_{2}}(n+{ {N}_{C}}) \right)\bmod 2 \\ 
 \nonumber & { {x}_{1}}(n+31)=\left( { {x}_{1}}(n+3)+{ {x}_{1}}(n) \right)\bmod 2 \\ 
 \nonumber & { {x}_{2}}(n+31)=\left( { {x}_{2}}(n+3)+{ {x}_{2}}(n+2)+{ {x}_{2}}(n+1)+{ {x}_{2}}(n) \right)\bmod 2  
\end{align}</script><p>其中$ { {N}_{C}}=1600 $，第一m序列应由$ { {x}_{1}}(0)=1,{ {x}_{1}}(n)=0,n=1,2,…,30 $初始化。第二m序列由$ { {c}_{\text{init}}}=\sum\nolimits_{i=0}^{30}{ { {x}_{2}}(i)\cdot { {2}^{i}}} $进行初始化，其值取决于序列的应用。</p><h3 id="ZC序列生成"><a href="#ZC序列生成" class="headerlink" title="ZC序列生成"></a>ZC序列生成</h3><p><br>序列$ r_{u,v}^{(\alpha ,\delta )}(n) $由基序列$ { {\bar{r}}_{u,v}}(n) $根据下式的循环移位$ \alpha $得到：</p><script type="math/tex;mode=display">r_{u,v}^{(\alpha ,\delta )}(n)=\begin{matrix}
   { {e}^{j\alpha \left( n+\delta \frac{\omega \bmod 2}{2} \right)}}{ { {\bar{r}}}_{u,v}}(n), & 0\le n<{ {M}_{\text{ZC}}}  \\
\end{matrix}-1</script><p>其中$ { {M}_{\text{ZC}}}={mN_{\text{sc}}^{\text{RB}}}/{ { {2}^{\delta }}}\; $是序列长度，且$ 1\le m\le N_{\text{RB}}^{\text{max,UL}} $。多个序列由基序列根据不同的$ \alpha $和$ \delta $值来得到。</p><p>基序列$ { {\bar{r}}_{u,v}}(n) $被分为若干组，$ u\in \left\{ 0,1,…,29 \right\} $是分组号，$ v $是组内基序列号。每个组包含一个长度为$ { {M}_{\text{ZC}}}=mN_{\text{sc}}^{\text{RB}} $的基序列（$ v=0 $）且$ 1\le m\le 5 $，和两个长度为$ { {M}_{\text{ZC}}}=mN_{\text{sc}}^{\text{RB}} $的基序列（$ v=0,1 $）且$ 6\le m\le N_{\text{RB}}^{\text{max,UL}} $。基序列$ { {\bar{r}}_{u,v}}(0),…,{ {\bar{r}}_{u,v}}({ {M}_{\text{ZC}}}-1) $的定义依赖于序列长度$ { {M}_{\text{ZC}}} $。</p><h4 id="长度大于等于-3N-text-sc-text-RB-的基序列"><a href="#长度大于等于-3N-text-sc-text-RB-的基序列" class="headerlink" title="长度大于等于$ 3N_{\text{sc}}^{\text{RB}} $的基序列"></a>长度大于等于$ 3N_{\text{sc}}^{\text{RB}} $的基序列</h4><p><br>对于$ { {M}_{\text{ZC}}}\ge 3N_{\text{sc}}^{\text{RB}} $，基序列$ { {\bar{r}}_{u,v}}(0),…,{ {\bar{r}}_{u,v}}({ {M}_{\text{ZC}}}-1) $为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & { { {\bar{r}}}_{u,v}}(n)={ {x}_{q}}\left( n\bmod { {N}_{\text{ZC}}} \right) \\ 
 \nonumber & { {x}_{q}}\left( m \right)={ {e}^{-j\frac{\pi qm\left( m+1 \right)}{ { {N}_{\text{ZC}}}}}}  
\end{align}</script><p>其中</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & q=\left\lfloor \bar{q}+{1}/{2}\; \right\rfloor +v\cdot { {(-1)}^{\left\lfloor 2\bar{q} \right\rfloor }} \\ 
 \nonumber & \bar{q}={ {N}_{\text{ZC}}}\cdot {(u+1)}/{31}\; \\ 
\end{align}</script><p>长度$ { {N}_{\text{ZC}}} $为满足$ { {N}_{\text{ZC}}}&lt;{ {M}_{\text{ZC}}} $的最大素数。</p><h4 id="长度小于-3N-text-sc-text-RB-的基序列"><a href="#长度小于-3N-text-sc-text-RB-的基序列" class="headerlink" title="长度小于$ 3N_{\text{sc}}^{\text{RB}} $的基序列"></a>长度小于$ 3N_{\text{sc}}^{\text{RB}} $的基序列</h4><p><br>对于$ { {M}_{\text{ZC}}}={ {N}_{\text{ZC}}} $和$ { {M}_{\text{ZC}}}=2{ {N}_{\text{ZC}}} $，基序列为</p><script type="math/tex;mode=display">{ {\bar{r}}_{u,v}}(n)=\begin{matrix}
   { {e}^{j{\phi (n)\pi }/{4}\;}}, & 0\le n\le { {M}_{\text{ZC}}}-1  \\
\end{matrix}</script><p>其中$ \phi (n) $的值由Tables 5.5.1.2-1 and 5.5.1.2-2给定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/145910963.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171023/150000105.png" alt="mark"></p><h2 id="OFDM基带符号生成"><a href="#OFDM基带符号生成" class="headerlink" title="OFDM基带符号生成"></a>OFDM基带符号生成</h2><p><br>时域连续序号$ s_{l}^{(p,\mu )}\left( t \right) $是天线端口$ p $和子载波间隔配置$ \mu $下，在一个子帧内的第$ l $个OFDM符号。OFDM符号用于除PRACH之外的任何物理信道或物理信号，定义为</p><script type="math/tex;mode=display">s_{ {\bar{l}}}^{(p,\mu )}\left( t \right)=\sum\limits_{k=-\left\lfloor N_{\text{RB}}^{\mu }N_{\text{sc}}^{\text{RB}}/2 \right\rfloor }^{ { {\left\lceil N_{\text{RB}}^{\mu }N_{\text{sc}}^{\text{RB}}/2 \right\rceil }^{ {}}}-1}{a_{ {k}',l}^{(p,\mu )}\cdot { {e}^{j2\pi \left( k+{ {k}_{0}} \right)\Delta f\left( t-{ {N}_{\text{CP},l}}{ {T}_{\text{c}}} \right)}}}</script><p>其中$ 0\le t&lt;\left( { {N}_{\text{u}}}+N_{\text{CP},\bar{l}}^{\mu } \right){ {T}_{\text{c}}} $且$ {k}’=k+\left\lfloor {N_{\text{RB}}^{\mu }N_{\text{sc}}^{\text{RB}}}/{2}\; \right\rfloor $。$ { {k}_{0}} $是在子载波间隔配置$ \mu $下，一个RB内最低编号的子载波，并且与任何小于$ \mu $的配置下的RB内最低编号的子载波相一致。</p><p>子载波间隔配置$ \mu $下，一个子帧内OFDM符号$ l $的起始位置为</p><script type="math/tex;mode=display">t_{\text{start},l}^{\mu }=\left\{ \begin{array}{*{35}{l}}
   0 & l=0  \\
   t_{\text{start},l-1}^{\mu }+\left( { {N}_{\text{u}}}+N_{\text{CP,}l-1}^{\mu } \right)\cdot { {T}_{\text{c}}} & \text{otherwise}  \\
\end{array} \right.</script><p>其中</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & { {N}_{\text{u}}}=2048\kappa \cdot { {2}^{-\mu }} \\ 
  \nonumber & { {N}_{\text{CP},l}}=\left\{ \begin{array}{*{35}{l}}
   512\kappa \cdot { {2}^{-\mu }} & \text{extended cyclic prefix}  \\
   144\kappa \cdot { {2}^{-\mu }}+16\kappa  & \text{normal cyclic prefix and }l=0\text{ or }l=7  \\
   144\kappa \cdot { {2}^{-\mu }} & \text{otherwise}  \\
\end{array} \right.\cdot { {2}^{\mu }}  
\end{align}</script><p>时域连续符号$ s_{l}^{(p,\mu )}\left( t \right) $是天线端口$ p $上用于传输PRACH的符号，定义为</p><script type="math/tex;mode=display">s_{l}^{(p,\mu )}\left( t \right)=\sum\limits_{k=-\left\lfloor { {L}_{\text{RA}}}/2 \right\rfloor }^{ { {\left\lceil { {L}_{\text{RA}}}/2 \right\rceil }^{ {}}}-1}{a_{ { {k}'}}^{(p,\text{RA})}\cdot { {e}^{j2\pi \left( k+{ {k}_{0}} \right)\Delta { {f}_{\text{RA}}}\left( t-N_{\text{CP},l}^{\text{RA}}{ {T}_{\text{c}}} \right)}}}</script><p>其中$ 0\le t&lt;\left( { {N}_{\text{u}}}+N_{\text{CP},l}^{\text{RA}} \right){ {T}_{\text{c}}} $且$ {k}’=k+\left\lfloor { { {L}_{\text{RA}}}}/{2}\; \right\rfloor $。</p><p>一个子帧内PRACH前导的起始位置定义为$ t_{\text{start}}^{\text{RA}} $，假设子帧在$ t=0 $时刻开始，</p><ul><li>对于$ \Delta { {f}_{\text{RA}}}\in \left\{ 15,30,60,120 \right\}\text{ kHz} $，对于符号$ l $有$ t_{\text{start}}^{\text{RA}}=t_{\text{start},l}^{\mu } $</li></ul><p>$ { {L}_{\text{RA}}} $和$ { {N}_{\text{u}}} $由6.3.3节和$ N_{\text{CP},l}^{\text{RA}}=N_{\text{CP}}^{\text{RA}}+n\cdot 16\kappa $给定，其中</p><ul><li>对于$ \Delta { {f}_{\text{RA}}}\in \left\{ 1.25,5 \right\}\text{ kHz} $，有$ n=0 $</li><li>对于$ \Delta { {f}_{\text{RA}}}\in \left\{ 15,30,60,120 \right\}\text{ kHz} $，$n$ is the number of times the interval $ \left[ t_{\text{start}}^{\text{RA}},t_{\text{start}}^{\text{RA}}+\left( N_{\text{u}}^{\text{RA}}+N_{\text{CP}}^{\text{RA}} \right){ {T}_{\text{c}}} \right] $ overlaps with either time instance 0 or time instance $ \left( {\Delta { {f}_{\max }}{ {N}_{\text{f}}}}/{2000}\; \right)\cdot { {T}_{\text{c}}}=0.5\text{ ms} $ in a subframe.</li></ul><h2 id="调制和上变频"><a href="#调制和上变频" class="headerlink" title="调制和上变频"></a>调制和上变频</h2><p><br>对于天线端口$ p $和子载波间隔配置$ \mu $，复值OFDM基带信号调制和上变频至载频$ { {f}_{0}} $：</p><script type="math/tex;mode=display">\operatorname{Re}\left\{ s_{l}^{(p,\mu )}\left( t \right)\cdot { {e}^{j2\pi { {f}_{0}}t}} \right\}</script><h1 id="上行链路"><a href="#上行链路" class="headerlink" title="上行链路"></a>上行链路</h1><p><br><a href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation-ul/">5G-NR物理信道与调制-上行链路v1.1.0</a></p><h1 id="下行链路"><a href="#下行链路" class="headerlink" title="下行链路"></a>下行链路</h1><p><br><a href="http://marshallcomm.cn/2017/10/24/nr-v110-l1-channel-modulation-dl/">5G-NR物理信道与调制-下行链路v1.1.0</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Marshall：&lt;/strong&gt;5G NR物理层规范已更新到&lt;a href=&quot;http://marshallcomm.cn/tags/2017-10/&quot;&gt;v1.1.0版本&lt;/a&gt;，本文整理了38.211规范v1.1.0版，同时宣告&lt;a href=&quot;http://marshallcomm.cn/tags/2017-09/&quot;&gt;v1.0.0版本&lt;/a&gt;过时。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20171023/151427236.png&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;&lt;h1 id=&quot;Scope&quot;&gt;&lt;a href=&quot;#Scope&quot; class=&quot;headerlink&quot; title=&quot;Scope&quot;&gt;&lt;/a&gt;Scope&lt;/h1&gt;&lt;h1 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h1&gt;&lt;h1 id=&quot;Definitions-symbols-and-abbreviations&quot;&gt;&lt;a href=&quot;#Definitions-symbols-and-abbreviations&quot; class=&quot;headerlink&quot; title=&quot;Definitions, symbols and abbreviations&quot;&gt;&lt;/a&gt;Definitions, symbols and abbreviations&lt;/h1&gt;&lt;h1 id=&quot;帧结构与物理资源&quot;&gt;&lt;a href=&quot;#帧结构与物理资源&quot; class=&quot;headerlink&quot; title=&quot;帧结构与物理资源&quot;&gt;&lt;/a&gt;帧结构与物理资源&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;&lt;br&gt;在本规范中，除非另有说明，时域中各个域的大小表示为若干时间单位${ {T}_{\text{c}}}={1}/{\left( \Delta { {f}_{\max }}\cdot { {N}_{\text{f}}} \right)}\;$，其中$\Delta { {f}_{\max }}=480\cdot { {10}^{3}}\text{ Hz}$，${ {N}_{\text{f}}}=4096$。常数$\kappa ={ { {T}_{\text{s}}}}/{ { {T}_{\text{c}}}}\;=64$，其中${ {T}_{\text{s}}}={1}/{\left( \Delta { {f}_{\text{ref}}}\cdot { {N}_{\text{f,ref}}} \right)}\;$，$\Delta { {f}_{\text{ref}}}=15\cdot { {10}^{3}}\text{ Hz}$，${ {N}_{\text{f,ref}}}=2048$。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;${ {T}_{\text{s}}}$是LTE的采样间隔，为了不引起混淆，NR的采样间隔用新的符号${ {T}_{c}}$命名，${ {T}_{c}}=64{ {T}_{s}}$。&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
      <category term="2017-10" scheme="http://marshallcomm.cn/tags/2017-10/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（23）3GPP RAN1#90bis</title>
    <link href="http://marshallcomm.cn/2017/10/20/polar-code-23-3gpp-ran1-90b/"/>
    <id>http://marshallcomm.cn/2017/10/20/polar-code-23-3gpp-ran1-90b/</id>
    <published>2017-10-20T11:43:08.000Z</published>
    <updated>2017-10-20T11:57:29.118Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>2017年10月9~13日，3GPP RAN1#90bis会议在布拉格召开。本次会议对Polar coding的遗留问题继续进行讨论。</p><h1 id="Remaining-issues-of-code-construction"><a href="#Remaining-issues-of-code-construction" class="headerlink" title="Remaining issues of code construction"></a>Remaining issues of code construction</h1><p><br>关于code construction只剩下3个议题悬而未决：冻结比特的赋值问题，加扰方式以及CRC masking。</p><p>关于CRC masking的比特数，本次会议达成如下结论：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/195052712.png" alt="mark"></p><p>RNTI隐含在PDCCH的最后${ {N}_{RNTI}}$个CRC bits上，${ {N}_{RNTI}}$就是RNTI的比特数。工作假设认为${ {N}_{RNTI}}=16$。</p><p>RAN1通知RAN2，PDCCH信道编码对RNTI的承载能力可达到17 bits，也可能是21 bits。RAN1要求RAN2在确定RNTI长度时通知RAN1。</p><h1 id="Remaining-details-of-DL-channel-interleaver"><a href="#Remaining-details-of-DL-channel-interleaver" class="headerlink" title="Remaining details of DL channel interleaver"></a>Remaining details of DL channel interleaver</h1><p><br><a href="http://marshallcomm.cn/2017/10/20/polar-code-22-3gpp-ran1-adhoc3/#Remaining-details-of-rate-matching">3GPP RAN1 adhoc#3</a>会议中信道交织一节提到，是否进行下行信道交织。本次会议明确结论：不采用下行信道交织。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/195541238.png" alt="mark"></p><a id="more"></a><h1 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h1><p><br>对于较大的上行控制信息（UCI）要进行分段操作。本次会议达成如下结论：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/195618581.png" alt="mark"></p><p>UCI要分为相同大小的两段（如需要，则在第一个分段的开始处插入零）。是否进行分段的阈值根据K和R确定，例如K&gt;=threshold且R&lt;=threshold。threshold的值待定。</p><p>先对第一个分段进行CRC添加，然后使用与第一个分段相同的CRC多项式对第二个段进行CRC添加。（也就是两个分段采用相同的CRC多项式。）</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><br>[1] Draft_Minutes_report_RAN1#90b_v010</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;2017年10月9~13日，3GPP RAN1#90bis会议在布拉格召开。本次会议对Polar coding的遗留问题继续进行讨论。&lt;/p&gt;&lt;h1 id=&quot;Remaining-issues-of-code-construction&quot;&gt;&lt;a href=&quot;#Remaining-issues-of-code-construction&quot; class=&quot;headerlink&quot; title=&quot;Remaining issues of code construction&quot;&gt;&lt;/a&gt;Remaining issues of code construction&lt;/h1&gt;&lt;p&gt;&lt;br&gt;关于code construction只剩下3个议题悬而未决：冻结比特的赋值问题，加扰方式以及CRC masking。&lt;/p&gt;&lt;p&gt;关于CRC masking的比特数，本次会议达成如下结论：&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20171020/195052712.png&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;&lt;p&gt;RNTI隐含在PDCCH的最后${ {N}_{RNTI}}$个CRC bits上，${ {N}_{RNTI}}$就是RNTI的比特数。工作假设认为${ {N}_{RNTI}}=16$。&lt;/p&gt;&lt;p&gt;RAN1通知RAN2，PDCCH信道编码对RNTI的承载能力可达到17 bits，也可能是21 bits。RAN1要求RAN2在确定RNTI长度时通知RAN1。&lt;/p&gt;&lt;h1 id=&quot;Remaining-details-of-DL-channel-interleaver&quot;&gt;&lt;a href=&quot;#Remaining-details-of-DL-channel-interleaver&quot; class=&quot;headerlink&quot; title=&quot;Remaining details of DL channel interleaver&quot;&gt;&lt;/a&gt;Remaining details of DL channel interleaver&lt;/h1&gt;&lt;p&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/10/20/polar-code-22-3gpp-ran1-adhoc3/#Remaining-details-of-rate-matching&quot;&gt;3GPP RAN1 adhoc#3&lt;/a&gt;会议中信道交织一节提到，是否进行下行信道交织。本次会议明确结论：不采用下行信道交织。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20171020/195541238.png&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="3GPP_PolarCode" scheme="http://marshallcomm.cn/categories/3GPP-PolarCode/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（22）3GPP RAN1 adhoc#3</title>
    <link href="http://marshallcomm.cn/2017/10/20/polar-code-22-3gpp-ran1-adhoc3/"/>
    <id>http://marshallcomm.cn/2017/10/20/polar-code-22-3gpp-ran1-adhoc3/</id>
    <published>2017-10-20T09:24:01.000Z</published>
    <updated>2017-10-20T09:34:35.782Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>Polar coding大部分内容已在<a href="http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/">3GPP RAN1#90</a>会议中确定下来。2017年9月18~21日，3GPP RAN1 adhoc#3会议在日本名古屋召开，对Polar coding遗留的问题继续进行讨论。</p><h1 id="Downlink-code-construction"><a href="#Downlink-code-construction" class="headerlink" title="Downlink code construction"></a>Downlink code construction</h1><p><br>本次会议达成如下结论：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/172619575.png" alt="mark"></p><p>确认了<a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">38.212v1.0.0协议</a>中关于CRC添加和交织器的工作假设。目前协议假设下行控制信息（DCI）载荷最大为200 bits，即Kmax=200。日后正式确定下来的Kmax值应小于200。</p><a id="more"></a><h1 id="Uplink-code-construction"><a href="#Uplink-code-construction" class="headerlink" title="Uplink code construction"></a>Uplink code construction</h1><p><br>对于上行控制信道编码，本次会议达成如下结论：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/172735593.png" alt="mark"></p><p>确认了CRC bits添加在信息比特末位的工作假设。确定了上行控制信道编码CRC的长度，${ {L}_{CRC}}\text{=}11$，生成多项式为${ {D}^{11}}+{ {D}^{10}}+{ {D}^{9}}+{ {D}^{5}}+1$。</p><h1 id="Remaining-details-of-rate-matching"><a href="#Remaining-details-of-rate-matching" class="headerlink" title="Remaining details of rate matching"></a>Remaining details of rate matching</h1><p><br>关于速率匹配，本次会议确认了上次会议的工作假设：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/172935924.png" alt="mark"></p><p>即下图所示参数设置：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/173004082.png" alt="mark"></p><p>母码长度N由$\left( { {N}_{M}},{ {N}_{R}},{ {N}_{\max }} \right)$的最小值确定。</p><h1 id="Remaining-details-of-channel-interleavers"><a href="#Remaining-details-of-channel-interleavers" class="headerlink" title="Remaining details of channel interleavers"></a>Remaining details of channel interleavers</h1><h2 id="downlink"><a href="#downlink" class="headerlink" title="downlink"></a>downlink</h2><p><br>关于是否采用下行比特级信道交织，本次会议有工作假设，如果采用信道交织，那么比特信道交织的跨度等于1个CCE对应的编码比特数。高CCE聚合等级下，有没有必要进行比特信道交织有待进一步讨论。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/173058821.png" alt="mark"></p><h2 id="uplink"><a href="#uplink" class="headerlink" title="uplink"></a>uplink</h2><p><br><a href="http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/#Channel-interleaver">3GPP RAN1#90会议Channel interleaver</a>的部分提到工作假设，上行链路信道交织采用Triangular interleaver，本次会议确认了这一工作假设。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/173205566.png" alt="mark"></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><br>[1] Final_Minutes_report_RAN1#AH_NR3_v100</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;Polar coding大部分内容已在&lt;a href=&quot;http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/&quot;&gt;3GPP RAN1#90&lt;/a&gt;会议中确定下来。2017年9月18~21日，3GPP RAN1 adhoc#3会议在日本名古屋召开，对Polar coding遗留的问题继续进行讨论。&lt;/p&gt;&lt;h1 id=&quot;Downlink-code-construction&quot;&gt;&lt;a href=&quot;#Downlink-code-construction&quot; class=&quot;headerlink&quot; title=&quot;Downlink code construction&quot;&gt;&lt;/a&gt;Downlink code construction&lt;/h1&gt;&lt;p&gt;&lt;br&gt;本次会议达成如下结论：&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://olyzl8414.bkt.clouddn.com/blog/20171020/172619575.png&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;&lt;p&gt;确认了&lt;a href=&quot;http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/&quot;&gt;38.212v1.0.0协议&lt;/a&gt;中关于CRC添加和交织器的工作假设。目前协议假设下行控制信息（DCI）载荷最大为200 bits，即Kmax=200。日后正式确定下来的Kmax值应小于200。&lt;/p&gt;
    
    </summary>
    
      <category term="3GPP_PolarCode" scheme="http://marshallcomm.cn/categories/3GPP-PolarCode/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（21）3GPP RAN1#90</title>
    <link href="http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/"/>
    <id>http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/</id>
    <published>2017-10-20T01:01:08.000Z</published>
    <updated>2017-12-25T05:17:42.060Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br>我一直有意将<a href="http://marshallcomm.cn/categories/Polar-Code/">Polar Code</a>系列和<a href="http://marshallcomm.cn/categories/3GPP-PolarCode/">3GPP_PolarCode</a>系列区分开，因此把它们放在不同的分类里，虽然它们都是关于polar code的文章，但前者关注极化码编译码算法本身，而后者关注极化码在5G标准化中的进展。前者更偏于理论研究，参考资料多是paper，后者更注重实际应用，参考资料多是3GPP proposal或Technical Specification（技术规范）。这可看作是polar code发展的两条线，有时这两条线又相交重叠，相互促进。如果你熟悉LTE system，那么<a href="http://marshallcomm.cn/categories/3GPP-PolarCode/">3GPP_PolarCode</a>系列则更容易理解。3GPP里的极化码是控制信道框架下的信道编码，它的上一步骤是CRC添加，它的下一步是速率匹配，这个过程在LTE system里也是如此。</p><p>3GPP RAN1#90会议于8月21~25日在布拉格召开。会议达成的结论已在3GPP Rel-15技术规范v1.0.0版本中体现，详见<a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/">《5G物理层协议V100》</a>。</p><p>截止到本次会议，polar coding一个比较完整的编码方案已经形成，从CRC计算到极化码编码，再到速率匹配方案都基本确定了，并已将本次会议达成的结论体现在v1.0.0版本协议的<a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a>中。</p><p>本文结合本次会议达成的结论和v1.0.0版本协议的<a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a>，对Polar coding过程进行比较全面的梳理。5G控制信道编码的基本流程：</p><ul><li>CRC添加</li><li>信道编码</li><li>速率匹配</li></ul><a id="more"></a><h1 id="Code-construction"><a href="#Code-construction" class="headerlink" title="Code construction"></a>Code construction</h1><p><br>这部分主要讨论了CRC和interleaver（交织器）的设计。一方面，基于CRC-Polar的编码方案无疑是3GPP确定采用的方案；另一方面，3GPP RAN1会议已同意支持提前终止（early termination，ET）的编译码策略。<br>传统的做法是将CRC bits统一地放置在信息比特后面，译码端只有译出全部比特时才能对该码字进行校验，校验后才能知道该译码码字是否正确。新的方法是将CRC bits分散地插入到信息比特中间。这样做的好处是，只译出一部分bits即可进行一次CRC校验，一旦检测到误码立即终止译码，由于该码字已经出错，后面就没有必要再译了。Distributed-CRC（DCRC）可降低译码计算量，节省功率，带来提前终止增益。</p><p>例如，$K=4$位信息比特，CRC长度为${ {L}_{CRC}}=4$，CRC bits$\left( \begin{matrix}<br>{ {p}_{1}} &amp; { {p}_{2}} &amp; { {p}_{3}} &amp; { {p}_{4}} \\<br>\end{matrix} \right)$已分散地插入到信息比特中：</p><script type="math/tex;mode=display">\left( \begin{matrix}
   { {x}_{1}} & { {x}_{2}} & { {p}_{1}} & { {x}_{3}} & { {p}_{2}} & { {x}_{4}} & { {p}_{3}} & { {p}_{4}}  \\
\end{matrix} \right)</script><p>译码时每译出一个CRC bit就进行一次校验。</p><p>如上所述，对于极化码编码，CRC计算和交织器往往是联系在一起的。这个过程分为两步：</p><p><strong>第一步，进行正常的CRC添加。</strong>给定长度为${ {L}_{CRC}}$的CRC生成多项式，按照通行的做法去计算CRC。假设待编码比特序列长度为$K$，添加CRC后的序列长度为${ {K}^{‘}}=K+{ {L}_{CRC}}$。3GPP已确定5G NR-PDCCH的CRC长度为24，即${ {L}_{CRC}}=24$，并采用如下生成多项式：</p><script type="math/tex;mode=display">{ {g}_{\text{CRC24C}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{21}}+{ {D}^{20}}+{ {D}^{17}}+{ {D}^{15}}+{ {D}^{13}}+{ {D}^{12}}+{ {D}^{8}}+{ {D}^{4}}+{ {D}^{2}}+D+1]</script><p><strong>第二步进行交织。</strong>交织器将${ {L}_{CRC}}$个CRC bits分散插入到$K$个信息比特中。交织器的输入、输出比特数相同，都是${ {K}^{‘}}=K+{ {L}_{CRC}}$。</p><p><strong>交织模式（interleaver pattern）按下列方法得到</strong>：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/091026784.png" alt="mark"></p><p>${ {K}_{\max }}$表示最大的信息比特数。5G NR控制信道所承载的内容不能太多，因为涉及信令开销的问题，大致在200 bits以内。${ {K}_{\max }}$限定了极化码待编码比特的数目。</p><p>3GPP采用统一的交织方法，即给定了一个统一交织模式$\pi $，$\pi $是按照最大比特数$\left( { {K}_{\max }}+{ {L}_{CRC}} \right)$得到的。交织器的输入比特数是$\left( K+{ {L}_{CRC}} \right)$，对满足$\left( K+{ {L}_{CRC}} \right)\le \left( { {K}_{\max }}+{ {L}_{CRC}} \right)$的任意比特数，其子交织模式$\pi ‘$都来自于这个统一的交织模式$\pi $。其中$\pi \left( k \right)$的值见下表：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/091349888.png" alt="mark"></p><blockquote><p>由于目前${ {K}_{\max }}$的值还未确定，$\pi \left( k \right)$是按照$\left( { {K}_{\max }}+{ {L}_{CRC}} \right)$的长度来计算的，在后面的协议版本中，这张表格将会得到进一步的修订。</p></blockquote><p>子交织模式$\pi ‘$表示交织后的比特位置索引，当按照上述方法获得$\pi ‘$，根据这个比特索引重新给信息比特排序：</p><p>$c_{k}^{‘}={ {c}_{\pi ‘\left( k \right)}}$，$k=0,1,…,{ {K}^{‘}}-1$</p><p>至此，就得到了交织后的信息比特序列，其效果就是：</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & \left( \begin{matrix}
   { {x}_{1}} & { {x}_{2}} & { {x}_{3}} & { {x}_{4}} & { {p}_{1}} & { {p}_{2}} & { {p}_{3}} & { {p}_{4}}  \\
\end{matrix} \right) \\ 
 \nonumber & \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \downarrow  \\ 
 \nonumber & \left( \begin{matrix}
   { {x}_{1}} & { {x}_{2}} & { {p}_{1}} & { {x}_{3}} & { {p}_{2}} & { {x}_{4}} & { {p}_{3}} & { {p}_{4}}  \\
\end{matrix} \right) \\ 
\end{align}</script><p>交织以后则进行极化码编码。不过在编码之前，还需要另一个独立的过程，那就是输入序列的设计。</p><h1 id="Sequence-design"><a href="#Sequence-design" class="headerlink" title="Sequence design"></a>Sequence design</h1><p><br>极化码输入序列的设计，事关信息比特和冻结比特位置如何选取的问题。选取的规则是根据子信道可靠性程度，将信息比特放置在可靠性高的子信道上。关于如何评估子信道可靠性，本博客已花了大量篇幅介绍AWGN下的高斯近似法，之后又介绍了<a href="http://marshallcomm.cn/2017/09/19/polar-code-20-beta-expansion/">Beta-expansion</a>算法。3GPP正是采用了华为提出的Beta-expansion算法，按照极化权重（PW）给子信道排序，用极化权重来度量子信道可靠性。这部分已经写入5G协议规范中，详见博文<a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a> polar coding一节。虽然5G协议并不会提到Beta-expansion算法，但协议所展示的Table 5.3.1-2 Polar sequence and its corresponding reliablity正是基于Beta-expansion算法得到的。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230838961.png" alt="mark"></p><p>需要说明的是，Table 5.3.1-2所示的$W\left( Q_{i}^{ { {N}_{\max }}} \right)$，是在Beta-expansion算法基础上又做了进一步改进的结果。</p><p>按权重从小到大排序$W\left( Q_{0}^{ { {N}_{\max }}} \right)&lt;W\left( Q_{1}^{ { {N}_{\max }}} \right)&lt;…&lt;W\left( Q_{ { {N}_{\max }}-1}^{ { {N}_{\max }}} \right)$，其中$Q_{i}^{ { {N}_{\max }}}$就是按可靠性程度排序之后的比特索引，最终得到极化码输入序列的比特位置索引$\mathbf{Q}_{0}^{ { {N}_{\max }}-1}=\left\{ Q_{0}^{ { {N}_{\max }}},Q_{1}^{ { {N}_{\max }}},…,Q_{ { {N}_{\max }}-1}^{ { {N}_{\max }}} \right\}$。</p><p>用$\bar{Q}_{I}^{N}$表示信息比特索引集合，用$\bar{Q}_{F}^{N}$表示冻结比特索引集合，$\left| \bar{Q}_{I}^{N} \right|={ {K}^{‘}}+{ {n}_{PC}}$，$\left| \bar{Q}_{F}^{N} \right|=N-\left| \bar{Q}_{I}^{N} \right|$。</p><blockquote><p>为了本文叙述的连贯性，本文涉及的${ {K}^{‘}}$表示包含CRC比特的信息位数，即${ {K}^{‘}}=K+{ {L}_{CRC}}$。因此本文中的${ {K}^{‘}}$与5G协议<a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a> polar coding一节中的$K$等价。</p><p>若${ {n}_{PC}}=0$，则说明极化码编码采用CRC-Polar；若${ {n}_{PC}}&gt;0$,则说明极化码采用CRC-PC-Polar，在这种情下，CRC、PC和待编码信息比特都作为极化码的信息比特位，即都在$\bar{Q}_{I}^{N}$中。对于PDCCH信道编码，${ {n}_{PC}}=0$。</p></blockquote><p>用$Q_{PC}^{N}$表示PC比特索引集合，$\left| Q_{PC}^{N} \right|={ {n}_{PC}}$。极化码信息比特索引集合$\bar{Q}_{I}^{N}$还可进一步细分，用$\tilde{Q}_{I}^{N}$表示$\bar{Q}_{I}^{N}$中可靠性最高的$\left( \left| \mathbf{\bar{Q}}_{I}^{N} \right|-{ {n}_{PC}} \right)$个比特索引。PC比特又分为两个部分，其中有$n_{PC}^{wm}$个PC比特对应于$\tilde{Q}_{I}^{N}$的最小行重。用${ {G}_{N}}$表示极化码生成矩阵，${ {G}_{N}}={ {\left( { {G}_{2}} \right)}^{\otimes n}}$，$G2=\left[ \begin{matrix}<br>1 &amp; 0 \\<br>1 &amp; 1 \\<br>\end{matrix} \right]$。用${ {\mathbf{g}}_{j}}$表示${ {G}_{N}}$的第$j$行，用$w\left( { {\mathbf{g}}_{j}} \right)$表示${ {\mathbf{g}}_{j}}$的行重，行重就是${ {\mathbf{g}}_{j}}$中“1”的个数。</p><p>因此1）把$n_{PC}^{wm}$个PC比特放置在具有$\tilde{Q}_{I}^{N}$最小行重的索引上；2）把$\left( { {n}_{PC}}-n_{PC}^{wm} \right)$个PC比特放置在$\bar{Q}_{I}^{N}$中可靠性最低的索引上；3）$\bar{Q}_{I}^{N}$中剩余的比特索引放置${ {K}^{‘}}=K+{ {L}_{CRC}}$个信息比特。</p><blockquote><p>这两部分的PC比特所在的位置是不会重合的。</p><p>如果$\tilde{Q}_{I}^{N}$中最小行重的比特索引数大于$n_{PC}^{wm}$，那么就将$n_{PC}^{wm}$个PC比特放置在行重最小且可靠性最高的比特索引上。</p></blockquote><p>极化码输入序列索引示意如下图所示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171117/182024728.jpg" alt="mark"></p><p>按照如上所述的方法，得到极化码输入序列$\mathbf{u}=\left[ { {u}_{0}}\text{ }{ {u}_{1}}\text{ }{ {u}_{2}}\text{ }…\text{ }{ {u}_{N-1}} \right]$。将序列$\mathbf{u}$和生成矩阵相乘</p><script type="math/tex;mode=display">\mathbf{d}=\mathbf{u}{ {\mathbf{G}}_{n}}</script><p>得到编码器输出序列$\mathbf{d}=\left[ { {d}_{0}}\text{ }{ {d}_{1}}\text{ }{ {d}_{2}}\text{ }…\text{ }{ {d}_{N-1}} \right]$。</p><h1 id="Rate-matching"><a href="#Rate-matching" class="headerlink" title="Rate matching"></a>Rate matching</h1><p><br>编码之后的速率匹配是非常重要的一环。速率匹配的输入序列即为编码输出序列$\mathbf{d}=\left[ { {d}_{0}}\text{ }{ {d}_{1}}\text{ }{ {d}_{2}}\text{ }…\text{ }{ {d}_{N-1}} \right]$，速率匹配的输出序列为${ {f}_{0}},{ {f}_{1}},{ {f}_{2}},…,{ {f}_{E-1}}$，速率匹配比特数为$E$。$E$才是实际要传输的编码比特数。</p><p>速率匹配分为三个过程，子块交织、比特收集、比特交织。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112410760.png" alt="mark"></p><h2 id="子块交织"><a href="#子块交织" class="headerlink" title="子块交织"></a>子块交织</h2><p><br>子块交织就是上图所示的Rate-matching Interleaving，它将输入进来的N编码比特分为32个子块，然后将32个子块按照序列（0 1 2 3 4 5 6 7 8 9 10 11 12 16 13 17 14 18 15 19 20 24 21 22 25 26 28 23 27 29 30 31）重新排序。编码序列${ {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}}$，经过子块交织后表示为${ {y}_{0}},{ {y}_{1}},{ {y}_{2}},…,{ {y}_{N-1}}$。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112524657.png" alt="mark"></p><p>上图是示意图，3GPP规范做了进一步修改：</p><p>子块交织过程为：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112624520.png" alt="mark"></p><p>其中子块交织模式$P\left( i \right)$由下表得到：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112709695.png" alt="mark"></p><h2 id="比特收集"><a href="#比特收集" class="headerlink" title="比特收集"></a>比特收集</h2><p><br>比特收集就是Circular Buffer，有三种速率匹配模式：repetition，puncturing，shortening。比特收集器的输入序列为子块交织器的输出${ {y}_{0}},{ {y}_{1}},{ {y}_{2}},…,{ {y}_{N-1}}$，比特收集器的输出序列为${ {e}_{0}},{ {e}_{1}},{ {e}_{2}},…,{ {e}_{E-1}}$。完成从极化码码长N到速率匹配比特数E的转换，E是实际传输的编码比特数。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112827354.png" alt="mark"></p><p>速率匹配模式的选择方法为：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/112857191.png" alt="mark"></p><p>当$E&gt;N$，选择repetiton；当$\frac{K}{E}\le \frac{7}{16}$，选择Puncturing，当$\frac{K}{E}&gt;\frac{7}{16}$，选择shortening。</p><p>比特收集的具体方法为：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/113048532.png" alt="mark"></p><h2 id="比特交织"><a href="#比特交织" class="headerlink" title="比特交织"></a>比特交织</h2><p><br>比特交织器的输入序列为比特收集器的输出${ {e}_{0}},{ {e}_{1}},{ {e}_{2}},…,{ {e}_{E-1}}$，比特交织器的输出为${ {f}_{0}},{ {f}_{1}},{ {f}_{2}},…,{ {f}_{E-1}}$。</p><p>交织过程如下：</p><p>$ T $表示满足$ T\left( T+1 \right)/2\ge E $的最小整数；</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084452223.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084546055.png" alt="mark"></p><p>至此，一个码字的5G控制信道编码过程就完成了。$K$比特待编码序列，经极化码编码和速率匹配后，输出$E$比特编码序列。</p><h1 id="Channel-interleaver"><a href="#Channel-interleaver" class="headerlink" title="Channel interleaver"></a>Channel interleaver</h1><p><br>编码及速率匹配后，关于是否进行信道交织，以及如何进行交织，本次会议有如下工作假设：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20171020/170137558.png" alt="mark"></p><p>上行链路采用Triangular interleaver，下行链路采用Parallel rectangular interleaver。上行链路信道交织在速率匹配之后，是一个独立的过程。信道交织对下行链路是否有必要，到下一次会议再决定。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><br>[1] Chairman’s Notes RAN1_90_final<br>[2] <a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;我一直有意将&lt;a href=&quot;http://marshallcomm.cn/categories/Polar-Code/&quot;&gt;Polar Code&lt;/a&gt;系列和&lt;a href=&quot;http://marshallcomm.cn/categories/3GPP-PolarCode/&quot;&gt;3GPP_PolarCode&lt;/a&gt;系列区分开，因此把它们放在不同的分类里，虽然它们都是关于polar code的文章，但前者关注极化码编译码算法本身，而后者关注极化码在5G标准化中的进展。前者更偏于理论研究，参考资料多是paper，后者更注重实际应用，参考资料多是3GPP proposal或Technical Specification（技术规范）。这可看作是polar code发展的两条线，有时这两条线又相交重叠，相互促进。如果你熟悉LTE system，那么&lt;a href=&quot;http://marshallcomm.cn/categories/3GPP-PolarCode/&quot;&gt;3GPP_PolarCode&lt;/a&gt;系列则更容易理解。3GPP里的极化码是控制信道框架下的信道编码，它的上一步骤是CRC添加，它的下一步是速率匹配，这个过程在LTE system里也是如此。&lt;/p&gt;&lt;p&gt;3GPP RAN1#90会议于8月21~25日在布拉格召开。会议达成的结论已在3GPP Rel-15技术规范v1.0.0版本中体现，详见&lt;a href=&quot;http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/&quot;&gt;《5G物理层协议V100》&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;截止到本次会议，polar coding一个比较完整的编码方案已经形成，从CRC计算到极化码编码，再到速率匹配方案都基本确定了，并已将本次会议达成的结论体现在v1.0.0版本协议的&lt;a href=&quot;http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/&quot;&gt;《5G-NR复用与信道编码》&lt;/a&gt;中。&lt;/p&gt;&lt;p&gt;本文结合本次会议达成的结论和v1.0.0版本协议的&lt;a href=&quot;http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/&quot;&gt;《5G-NR复用与信道编码》&lt;/a&gt;，对Polar coding过程进行比较全面的梳理。5G控制信道编码的基本流程：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;CRC添加&lt;/li&gt;&lt;li&gt;信道编码&lt;/li&gt;&lt;li&gt;速率匹配&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="3GPP_PolarCode" scheme="http://marshallcomm.cn/categories/3GPP-PolarCode/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>Polar Code（20）Beta-expansion</title>
    <link href="http://marshallcomm.cn/2017/09/19/polar-code-20-beta-expansion/"/>
    <id>http://marshallcomm.cn/2017/09/19/polar-code-20-beta-expansion/</id>
    <published>2017-09-19T09:20:30.000Z</published>
    <updated>2017-11-17T10:26:57.291Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><br><strong>高斯近似（GA）终将成为历史，取而代之的是β-expansion算法。β-expansion与GA性能等价，但复杂度极低。</strong></p><p>文献[1]首先揭示了极化码合成信道（synthesized channels）之间的偏序（Partial Order，PO）关系。2016年8月22-26日，在瑞典哥德堡举行的3GPP RAN1 #86次会议上，华为提出了用极化权重（Polarization Weight，PW）来表征AWGN信道下极化码合成信道可靠性的算法[2]。这两项独立的研究似乎不谋而合，促使华为进一步进行理论扩展，追求AWGN信道下极化码的快速构造方法。这就是本博文所要介绍的β-expansion[3]。</p><p>文献[3]首先介绍了通用偏序（Universal Partial Order，UPO）的两个重要性质：嵌套和对称。这两个性质是能够采用递归方式构造极化码序列的基础。然后介绍了PW方法，其中β参数需要慎重地选择，其值的大小直接决定了合成信道的顺序。最后用大量的篇幅论证了β的最佳取值为1.1892，即$\beta ={ {2}^{ {1}/{4}\;}}$。无论是渐进性分析，还是数值仿真结果都证实β-expansion方法以低复杂度获得了与GA相同的性能。</p><a id="more"></a><h1 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h1><h2 id="极化码策略"><a href="#极化码策略" class="headerlink" title="极化码策略"></a>极化码策略</h2><p><br><strong>策略：</strong>将信息比特放置于好的信道位置上，将冻结比特放置于差的信道位置上。</p><p><strong>关键：</strong>如何有效地识别信道位置的好坏并按可靠性排序，是极化码序列构造的关键。</p><p><strong>不幸：</strong>有效地序列构造仅存在于二进制删除信道（BEC）上。</p><p><strong>挑战：</strong>5G无线通信系统要求极化码至少能够适用于AWGN信道。</p><p><strong>已有方法：</strong>高斯近似（GA）。</p><p><strong>已有方法缺点：</strong>GA的缺点是计算量大，其计算量随着码块长度成比例增加，这对于码长和码率变化的实际系统是不可接受的。不仅如此，对于低延迟的编译码器，也无法实现在线地处理。</p><h2 id="通用偏序（UPO）"><a href="#通用偏序（UPO）" class="headerlink" title="通用偏序（UPO）"></a>通用偏序（UPO）</h2><p><br>文献[1]证明了任意二进制输入对称信道下的可靠性测量存在偏序（Partial Order）关系。给定一对合成信道索引$\left( x,y \right)$，它们的可靠性关系取决于下列规则：</p><p><strong>Addition：</strong>若一个合成信道索引用二进制表示为$\left( a,b,1,c \right)$，那么它的可靠性一定大于合成信道$\left( a,b,0,c \right)$。$’’1\succ 0’’$模式对于1比特或多比特同样适用。例如：</p><p>2（0, 1 ,0） $\prec $ 3（0, 1, 1）</p><p>9（1, 0, 0, 1） $\prec $ 15（1, 1, 1, 1）</p><p>在此例中（1, 0, 0, 1）是合成信道索引9的二进制表示。</p><p><strong>Left-swap：</strong>若合成信道索引为$\left( a,0,b,1,c \right)$，那么它的可靠性一定小于合成信道$\left( a,1,b,0,c \right)$。$’’0…1\prec 1…0’’$模式可以出现多次，并且0,1不需要彼此相邻。例如：</p><p>2（0, 1 ,0） $\prec $ 4（1, 0, 0）</p><p>12（0, 1, 1, 0, 0） $\prec $ 24（1, 1, 0, 0, 0）</p><p>但这两个规则也不是万能的，对于某些索引对$\left( x,y \right)$则无能为力。Addition、Left-swap或它们的联合都不能确定顺序。例如：</p><p>3（0, 1, 1）and 4（1, 0, 0）</p><p>7（0, 1, 1, 1）and 12（1, 1, 0, 0）</p><p>我们称这些序对于UPO是<strong>未知的</strong>。</p><h1 id="UPO的性质"><a href="#UPO的性质" class="headerlink" title="UPO的性质"></a>UPO的性质</h1><p><br><strong>Proposition 1.</strong> （嵌套和对称）极化码通用偏序有两个重要性质：</p><p><strong>嵌套：</strong>码长为$N$的序可在码长为$2N$的序中保持不变。</p><p><strong>对称：</strong>在码长为$N$的极化码中，$x\prec y$的序和$\left( N-1-x \right)\prec \left( N-1-y \right)$的序对称。</p><p>现在讨论UPO的递归结构。定义$\mathbf{UP}{ {\mathbf{O}}_{n}}$为极化码码长$N$的偏序关系$x\prec y$的最小集合，其中$x\prec y$记为$\left\{ x,y \right\}$，$x,y$是$\left[ 0,N-1 \right]$内的整数。关系链$x\prec y\prec z$可以用若干子链表示最临近节点之间的关系，即$x\prec y$和$y\prec z$。例如：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/181904087.png" alt="mark"></p><p>其中$\mathbf{UP}{ {\mathbf{O}}_{n}}$中黑色字体的序来源于它的上一级$\mathbf{UP}{ {\mathbf{O}}_{n-1}}$，对应于Proposition 1的<strong>嵌套性质</strong>；蓝色字体的序表示与黑色字体的序对称的部分，对应于Proposition 1的<strong>对称性质</strong>；红色字体的序表示从$\mathbf{UP}{ {\mathbf{O}}_{n-1}}$到$\mathbf{UP}{ {\mathbf{O}}_{n}}$构造过程中出现的新序，这些新出现的序对于UPO来说是<strong>未知的</strong>。</p><h1 id="β-expansion：PW算法原理"><a href="#β-expansion：PW算法原理" class="headerlink" title="β-expansion：PW算法原理"></a>β-expansion：PW算法原理</h1><p><br><strong>定义：（PW 算法）</strong>考虑一个合成信道索引$x$，其$n$比特二进制扩展为$B=\left( { {b}_{n-1}},…,{ {b}_{1}},{ {b}_{0}} \right)$，最左边为最高有效位。极化权重定义为</p><script type="math/tex;mode=display">\begin{align}
{ {f}^{PW}}:x\mapsto \sum\limits_{i=1}^{n}{ { {b}_{i}}{ {\beta }^{i}}}
\end{align}</script><p>其中$\beta $的值需要慎重选择。文献[2]建议$\beta ={ {2}^{ {1}/{4}\;}}$。</p><p>在数学上，这种表示方法被称为β-expansion，是十进制扩展的推广，可以看作是对于任意实数$y$的基于β的非整数表示。</p><p><strong>例1：</strong>令$\beta ={ {2}^{ {1}/{4}\;}}$，极化码码长为$N={ {2}^{n}}=16$。则对于合成信道索引3，即${ {B}_{3}}=\left( 0,0,1,1 \right)$，其β-expansion可计算为</p><script type="math/tex;mode=display">{ {w}_{3}}=0\cdot { {2}^{ {3}/{4}\;}}+0\cdot { {2}^{ {2}/{4}\;}}+1\cdot { {2}^{ {1}/{4}\;}}+1\cdot { {2}^{ {0}/{4}\;}}=2.189\cdot \cdot \cdot</script><p>同理，我们可以写出所有合成信道的β-expansion</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & w=\left\{ \begin{matrix}
   0.000 & 1.000 & 1.189 & 2.189 & 1.414 & 2.414 & 2.603 & 3.603  \\
\end{matrix} \right. \\ 
 \nonumber & \ \ \ \ \ \ \ \left. \begin{matrix}
   1.682 & 2.682 & 2.871 & 3.871 & 3.096 & 4.096 & 4.285 & 5.285  \\
\end{matrix} \right\} \\ 
\end{align}</script><p>${ {w}_{x}}$值越大表示合成信道索引$x$的可靠性越高。将$w$按可靠性增序排列，就得到了极化码序列</p><script type="math/tex;mode=display">order=\left\{ \begin{matrix}
   0 & 1 & 2 & 4 & 8 & 3 & 5 & 6 & 9 & 10 & 12 & 7 & 11 & 13 & 14 & 15  \\
\end{matrix} \right\}</script><p><strong>PW算法的优点是，对合成信道可靠性，提供了一种简洁、低复杂度的全排列算法，并且当码长${ {2}^{n}}$从$n=1$到$n\to +\infty $增加时，能够始终保持一种嵌套性质。</strong></p><p><strong>Proposition 2. </strong>（嵌套结构）PW算法维持了极化码的嵌套码构造的特性。</p><p><strong>Proposition 3.</strong> 当$\beta &gt;1$，任何由PW算法得到的序列都遵循极化码的通用偏序（UPO）关系。</p><p><strong>Theorem 1.</strong> 对于长度为${ {2}^{n}}\left( n\ge 3 \right)$的极化码，存在一个升序集合${ {A}_{n}}=\left\{ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},…,{ {a}_{ { {i}_{\max }}}},+\infty \right\}$，其中${ {a}_{0}}=1$和${ {a}_{1}},{ {a}_{2}},…,{ {a}_{ { {i}_{\max }}}}$都是代数。任意$\beta $落入区间$\left( { {a}_{i}},{ {a}_{i+1}} \right),\forall i\ge 0$内，β-expansion都是唯一的，并且$\beta $落入不同区间可导致不同的顺序序列。此外，集合${ {A}_{n}}$是嵌套的，即${ {A}_{n}}\subset { {A}_{n+1}}$。</p><blockquote><p>Marshall：通过上述Proposition和Theorem，初步地把β-expansion和偏序建立起联系，β-expansion获得了偏序的理论支撑。两者的共性在于，它们都具有嵌套结构。然而$\beta $的值究竟取何值呢？这还需要在具体的用例中去分析和确定。</p></blockquote><h1 id="AWGN信道下的快速构造"><a href="#AWGN信道下的快速构造" class="headerlink" title="AWGN信道下的快速构造"></a>AWGN信道下的快速构造</h1><p><br>现在UPO已经成为极化码序列构造的基础，而极化码序列的构造决定了合成信道的可靠性顺序。但UPO无法做到对整个序列进行全排列，正如在UPO的性质一节所看到的，从$\mathbf{UP}{ {\mathbf{O}}_{n-1}}$到$\mathbf{UP}{ {\mathbf{O}}_{n}}$的构造中，总会有一些新的序是UPO无法判断的。而高斯近似虽然能够对整个序列进行全排序，但由于其高复杂度而不适用于实际应用。为了克服两者的缺点，本节呈现了一种基于UPO和β-expansion的快速构造方法。</p><blockquote><p>Marshall：根据高斯近似的结果，一步一步缩小$\beta $的取值范围，最终的序列不仅满足UPO性质，而且与高斯近似的结果保持一致。换句话说，没有条件，就去创造条件。</p></blockquote><p>解释一下为什么$\beta $的取值会影响序列顺序，如图1所示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/181329970.png" title="图 1 $\beta $-expansion嵌套结构，$\beta ={ {2}^{ {1}/{4}\;}}$，$N=2,4,8,16$ "></p><p>根据定理1，是默认为$\beta &gt;1$，所以今后只考虑$\beta &gt;1$。</p><p>当$n=3$时，只有一对未定关系，即$\left( \beta +1,{ {\beta }^{2}} \right)$。为了区分它们的关系，需要多项式方式${ {x}^{2}}-x-1=0$，取其大于1的根为$x=\frac{1+\sqrt{5}}{2}=1.618$，因此升序集合为</p><script type="math/tex;mode=display">{ {A}_{3}}=\left\{ 1,1.618,+\infty  \right\}</script><p>当$\beta \in \left( 1,1.618 \right)$时，有$\beta +1&gt;{ {\beta }^{2}}$，则相应的序列为</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/182022400.png" alt="mark"></p><p>当$\beta \in \left( 1.618,+\infty \right)$时，有$\beta +1&lt;{ {\beta }^{2}}$，则相应的序列为</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/182147280.png" alt="mark"></p><p>这就是定理1所说的，当$\beta $落入${ {A}_{3}}$的任意区间内，β-expansion是唯一的，且导致不同的顺序序列。</p><p>当$n=4$时，有4对未定关系，包括之前提到的$\left( \beta +1,{ {\beta }^{2}} \right)$及其两个等价形式，即</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & \left( \beta +1,{ {\beta }^{2}} \right),\left( { {\beta }^{2}}+\beta ,{ {\beta }^{3}} \right),\left( { {\beta }^{2}}+\beta ,{ {\beta }^{3}} \right) \\ 
 \nonumber & \left( \beta +1,{ {\beta }^{3}} \right),\left( { {\beta }^{2}}+1,{ {\beta }^{3}} \right),\left( { {\beta }^{2}}+\beta +1,{ {\beta }^{3}} \right) \\ 
\end{align}</script><p>为了区分它们的关系，需要求解4个多项式方程</p><script type="math/tex;mode=display">\begin{align}
{ {x}^{3}}-{ {x}^{2}}-x-1=0
\end{align}</script><script type="math/tex;mode=display">\begin{align}
{ {x}^{3}}-{ {x}^{2}}-1=0
\end{align}</script><script type="math/tex;mode=display">\begin{align}
{ {x}^{2}}-x-1=0
\end{align}</script><script type="math/tex;mode=display">\begin{align}
{ {x}^{3}}-x-1=0
\end{align}</script><p>得到</p><script type="math/tex;mode=display">{ {A}_{4}}=\left\{ 1,1.325,1.466,1.618,1.839,+\infty  \right\}</script><p>其中1.325,1.466,1.618,1.839分别是多项式方程（2~5）的根。</p><p>$\beta $分别落入${ {A}_{4}}$的5段子区间内，将导致5种不同的序，如图2所示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/183636666.png" title="图 2 极化码的$\beta $-expansion，$N=16$"></p><p>$\beta $取哪个值？此时高斯近似法开始派上用场。对于码长$N={ {2}^{4}}=16$，$n=4$的极化码，AWGN信道下，高斯近似法对合成信道索引的排序为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & 0\to 1\to 2\to 4\to 8\to 3\to 5\to 6\to 9 \\ 
  \nonumber & \to 10\to 12\to 7\to 11\to 13\to 14\to 15 \\ 
\end{align}</script><p>将这个序与图2对比，发现当$\beta \in \left( 1,1.325 \right)$时，两个序一致。</p><p>由此，我们将$\beta $的取值范围由$n=3$时的$\left( 1,1.618 \right)$缩小到$n=4$时的$\left( 1,1.325 \right)$。</p><p>进一步，当$n=5$时，有5对未定关系，即$\left( 28,15 \right),\left( 14,19 \right),\left( 24,13 \right),\left( 24,11 \right),\left( 24,7 \right)$。根据高斯近似的可靠性结果，呈现出与$\beta $的对应关系</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & 28\prec 15,\ 24\prec 11\Leftrightarrow \beta <1.221 \\ 
 \nonumber & \ \ \ \ \ \ \ \ \ \ \ \ 14\prec 19\Leftrightarrow \beta <1.325 \\ 
 \nonumber & \ \ \ \ \ \ \ \ \ \ \ \ 24\prec 13\Leftrightarrow \beta <1.272 \\ 
\end{align}</script><p>对于序$\left\{ 7,24 \right\}$，虽然依赖于SNR的可靠性结果为$7\succ 24$，但大量仿真结果表明$7\prec 24$具有更好的性能。因此选择</p><script type="math/tex;mode=display">7\prec 24\Leftrightarrow \beta >1.179</script><p>此时，$\beta $的取值范围进一步缩小到$\left( 1.179,1.221 \right)$。</p><p>对于$n&gt;5$（$N&gt;32$）的情况，继续重复这一搜索过程，得到如下表中所示的结果。随着$N$的增加，$\beta $的取值范围不断缩小，并接近于$1.1892\approx { {2}^{ {1}/{4}\;}}$。新的序对小于合成信道总数的20%。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/184231335.png" alt="mark"></p><h1 id="渐进性分析与数值仿真结果"><a href="#渐进性分析与数值仿真结果" class="headerlink" title="渐进性分析与数值仿真结果"></a>渐进性分析与数值仿真结果</h1><p><br>β-expansion可以转化为贝努力卷积（Bernoulli Convolution）概念。贝努力卷积定义了概率测度</p><script type="math/tex;mode=display">{ {v}_{\lambda }}=\sum\limits_{i=1}^{+\infty }{ { {b}_{i}}}{ {\beta }^{i}}</script><p>假设$B=\left( …,{ {b}_{1}},{ {b}_{0}} \right)$是二进制独立随机序列，满足</p><script type="math/tex;mode=display">\Pr \left\{ { {b}_{i}}=1 \right\}=\Pr \left\{ { {b}_{i}}=0 \right\}=0.5,\forall i</script><p>测度${ {v}_{\lambda }}$要么是绝对连续的，要么是奇异的。我们需要的正是${ {v}_{\lambda }}$的绝对连续，使得在无限长的序列上能够进行全排列。令$\beta ={ {2}^{ {1}/{k}\;}}$，已经证明当$k=4$时，即$\beta \text{=}1.1892$时，满足绝对连续的必要条件。这与上表中的观察一致。</p><p>图3则从仿真结果上表明β-expansion与高斯近似的性能相同。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170919/184439317.png" title="图 3 Comparison of PW algorithm with β= 1.1892 and Gaussian approximation for different block-length N (code length in number of code bits). Simulation assumptions are: BLER = 0.001, QPSK modulation, AWGN channel, successive cancellation list (SCL) decoder with list size 8 and extra 19-bit CRC."></p><p>至此，从理论分析到仿真结果，充分论证了β-expansion算法的可行性和优越性。</p><h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p><br>[1] C. Schurch, “A partial Order for the Synthesized Channels of a Polar Code, ISIT 2016.<br>[2] 3GPP, R1-167209, Polar code design and rate matching, Huawei, HiSilicon.<br>[3] β-expansion A Theoretical Framework for Fast and Recursive Construction of Polar Codes, Huawei.</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;br&gt;&lt;strong&gt;高斯近似（GA）终将成为历史，取而代之的是β-expansion算法。β-expansion与GA性能等价，但复杂度极低。&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;文献[1]首先揭示了极化码合成信道（synthesized channels）之间的偏序（Partial Order，PO）关系。2016年8月22-26日，在瑞典哥德堡举行的3GPP RAN1 #86次会议上，华为提出了用极化权重（Polarization Weight，PW）来表征AWGN信道下极化码合成信道可靠性的算法[2]。这两项独立的研究似乎不谋而合，促使华为进一步进行理论扩展，追求AWGN信道下极化码的快速构造方法。这就是本博文所要介绍的β-expansion[3]。&lt;/p&gt;&lt;p&gt;文献[3]首先介绍了通用偏序（Universal Partial Order，UPO）的两个重要性质：嵌套和对称。这两个性质是能够采用递归方式构造极化码序列的基础。然后介绍了PW方法，其中β参数需要慎重地选择，其值的大小直接决定了合成信道的顺序。最后用大量的篇幅论证了β的最佳取值为1.1892，即$\beta ={ {2}^{ {1}/{4}\;}}$。无论是渐进性分析，还是数值仿真结果都证实β-expansion方法以低复杂度获得了与GA相同的性能。&lt;/p&gt;
    
    </summary>
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/categories/Polar-Code/"/>
    
    
      <category term="Polar Code" scheme="http://marshallcomm.cn/tags/Polar-Code/"/>
    
  </entry>
  
  <entry>
    <title>5G-NR物理层协议v1.0.0</title>
    <link href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/"/>
    <id>http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/</id>
    <published>2017-09-11T02:19:28.000Z</published>
    <updated>2017-10-24T00:55:41.605Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><p>3GPP 5G 物理层规范共有7个文档：</p><p><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">3GPP TS 38.201: “NR物理层概述”</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">3GPP TS 38.202: “NR物理层提供的服务”</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">3GPP TS 38.211: “NR物理信道与调制”</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">3GPP TS 38.212: “NR复用与信道编码”</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">3GPP TS 38.213: “NR物理层过程（控制）”</a><br>3GPP TS 38.214: “NR物理层过程（数据）”<br>3GPP TS 38.215: “NR物理层测量”</p><p>本系列博文较全面地呈现了<a href="http://marshallcomm.cn/tags/2017-09/"><strong>3GPP Rel-15 V1.0.0 (2017-09)</strong></a>版本前5份规范的各个章节。其中“NR复用与信道编码”规范只关注了与polar code相关的比特级处理，LDPC码相关处理待日后整理。</p><hr><p>是时候开启一个新的系列了。前面已写有两个系列，一是<a href="http://marshallcomm.cn/categories/Polar-Code/">极化码技术系列</a> ，二是<a href="http://marshallcomm.cn/categories/3GPP-PolarCode/">极化码在3GPP标准化的进展系列</a>。今天开启的是<a href="http://marshallcomm.cn/categories/5G-NR/">5G-NR系列</a>。</p><a id="more"></a><p>3GPP 5G标准化时间表为：</p><ul><li>2017年12月完成NSA（non-standalone）标准，并于2018年3月冻结；</li><li>2018年6月完成SA（standalone）标准，并于2018年9月再次冻结。</li></ul><p>如今距离NSA标准的完成只剩下3个月，9月以后的会议更加密集。</p><ul><li>2017-09-11 <strong>3GPP RAN#77</strong></li><li>2017-09-18 3GPP RAN1-NR#3</li><li>2017-10-09 3GPP RAN1#90b</li><li>2017-11-27 3GPP RAN1#91</li><li>2017-12-18 <strong>3GPP RAN#78</strong></li></ul><p>9月7日3GPP把Rel-15的7份物理层规范全部更新到 <a href="http://marshallcomm.cn/tags/2017-09/"><strong>V1.0.0 (2017-09)</strong></a>版本，本博客对5G-NR物理层规范的跟踪就从这个版本开始。</p><p>这个系列的时效性很强。9月7日才更新的规范，9月11日又开RAN全会。这意味着Rel-15规范很快又会更新并填充新的内容，V1.0.0 (2017-09)版本很快就会“过时”。规范内容翻译得比较仓促，也不得不仓促，先整理了前5份文档。</p><p>无论是LTE、LTE-A，还是LTE-A Pro，其规范文档编号都是36.xxx系列，5G NR则使用新的编号——38.xxx系列。</p><p>此时的5G-NR规范仍然只是初稿，仍有大量内容等待填充，以往内容最多的211协议目前也只不过30几页。但从目前已有的内容中，也可大致窥见到5G NR物理层与LTE有多大的不同，又有多大的相似。</p><p>Marshall</p><p>2017年9月11日</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;3GPP 5G 物理层规范共有7个文档：&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/08/nr-v100-general-description/&quot;&gt;3GPP TS 38.201: “NR物理层概述”&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/&quot;&gt;3GPP TS 38.202: “NR物理层提供的服务”&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/&quot;&gt;3GPP TS 38.211: “NR物理信道与调制”&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/&quot;&gt;3GPP TS 38.212: “NR复用与信道编码”&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/&quot;&gt;3GPP TS 38.213: “NR物理层过程（控制）”&lt;/a&gt;&lt;br&gt;3GPP TS 38.214: “NR物理层过程（数据）”&lt;br&gt;3GPP TS 38.215: “NR物理层测量”&lt;/p&gt;&lt;p&gt;本系列博文较全面地呈现了&lt;a href=&quot;http://marshallcomm.cn/tags/2017-09/&quot;&gt;&lt;strong&gt;3GPP Rel-15 V1.0.0 (2017-09)&lt;/strong&gt;&lt;/a&gt;版本前5份规范的各个章节。其中“NR复用与信道编码”规范只关注了与polar code相关的比特级处理，LDPC码相关处理待日后整理。&lt;/p&gt;&lt;hr&gt;&lt;p&gt;是时候开启一个新的系列了。前面已写有两个系列，一是&lt;a href=&quot;http://marshallcomm.cn/categories/Polar-Code/&quot;&gt;极化码技术系列&lt;/a&gt; ，二是&lt;a href=&quot;http://marshallcomm.cn/categories/3GPP-PolarCode/&quot;&gt;极化码在3GPP标准化的进展系列&lt;/a&gt;。今天开启的是&lt;a href=&quot;http://marshallcomm.cn/categories/5G-NR/&quot;&gt;5G-NR系列&lt;/a&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>5G-NR物理层过程（控制）v1.0.0</title>
    <link href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/"/>
    <id>http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/</id>
    <published>2017-09-11T01:43:15.000Z</published>
    <updated>2017-10-24T00:55:33.268Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><h1 id="同步过程"><a href="#同步过程" class="headerlink" title="同步过程"></a>同步过程</h1><h2 id="小区搜索"><a href="#小区搜索" class="headerlink" title="小区搜索"></a>小区搜索</h2><p><br>小区搜索过程是UE获得和小区时间和频率同步，并检测物理层小区ID的过程。</p><p>为进行小区搜索，UE需接收下列同步信号：主同步信号（PSS）和辅同步信号（SSS）。主辅同步信号在TS 38.211中定义。</p><p>UE应假设PBCH、PSS和SSS在连续的OFDM符号内接收，并且形成SS/PBCH块。</p><p>对于半帧中的SS/PBCH块，候选SS/PBCH块的OFDM 符号索引号和第1个OFDM符号索引根据下列情况确定：</p><ul><li>15 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{2, 8} + 14*n。对于载波频率小于等于3 GHz，有n=0, 1。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1, 2, 3。</li><li>30 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{4, 8, 16, 20} + 28*n。对于载波频率小于等于3 GHz，有n=0。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1。</li><li>30 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{2, 8} + 14*n。对于载波频率小于等于3 GHz，有n=0, 1。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1, 2, 3。</li><li>120 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{4, 8, 16, 20} + 28*n。对于载波频率大于6 GHz，有n=0, 1, 2, 3, 5, 6, 7, 8, 10, 11, 12, 13, 15, 16, 17, 18。</li><li>240 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{8, 12, 16, 20, 32, 36, 40, 44} + 56*n。对于载波频率大于6 GHz，有n=0, 1, 2, 3, 5, 6, 7, 8。</li></ul><p>一个半帧中的候选SS/PBCH块在时域上以升序从0到$ L-1 ]$进行编号。对于$ L=4 $或$ L&gt;4 $，UE应根据与每个半帧内SS/PBCH块索引一一对应的PBCH中传输的DM-RS序列索引，分别确定SS/PBCH块索引的2或3个LSB比特。对于$ L=64 $，UE应根据高层参数[<em>SSB-index-explicit</em>]确定每个半帧内SS/PBCH块索引的3 个MSB比特。</p><a id="more"></a><blockquote><p>注：DM-RS序列索引在TS 38.211中定义。</p></blockquote><p>UE可通过参数[<em>SSB-transmitted-SIB1</em>]被配置，SS/PBCH块索引对于与SS/PBCH块对应重叠的REs，UE不应接收其他信号或信道。UE也可通过高层参数[<em>SSB-transmitted</em>]在每个服务小区被配置，SS/PBCH块索引对于与SS/PBCH块对应重叠的REs，UE不应接收其他信号或信道。[通过[<em>SSB-transmitted</em>]配置优先于通过[<em>SSB-transmitted-SIB1</em>]配置。]</p><blockquote><p>注：May be removed and captured in 38.211。</p></blockquote><p>对于每个服务小区中SS/PBCH块的接收，UE可以在每个服务小区通过高层参数[<em>SSB-timing</em>]每半帧周期性地被配置。如果对于SS/PBCH块的接收，UE没有每半帧被周期性配置，则UE应假设以半帧为周期。UE应假设在服务小区中，对于所有SS/PBCH块，周期是相同的。</p><p>对于初始小区的选择，UE可以假设SS/PBCH块半帧出现的周期为2帧。</p><h2 id="传输定时调整"><a href="#传输定时调整" class="headerlink" title="传输定时调整"></a>传输定时调整</h2><h2 id="Timing-for-secondary-cell-activation-deactivation"><a href="#Timing-for-secondary-cell-activation-deactivation" class="headerlink" title="Timing for secondary cell activation / deactivation"></a>Timing for secondary cell activation / deactivation</h2><h1 id="无线链路监测"><a href="#无线链路监测" class="headerlink" title="无线链路监测"></a>无线链路监测</h1><p><br>为了向高层指示失步/同时状态，UE应监测主小区的下行无线链路质量。</p><p>此处暂省略300+字，具体内容详见原文档。</p><h1 id="链路重配置过程"><a href="#链路重配置过程" class="headerlink" title="[链路重配置过程]"></a>[链路重配置过程]</h1><p><br>在一个服务小区内为了[RSRP x 或SINR]测量，UE可以配置一组CSI-RS资源或一组SS/PBCH块索引。UE应假设SCI-RS采用非零传输功率。每个CSI-RS资源参数通过高层信令配置，这些参数包括：</p><ul><li>[资源配置]</li><li>[周期]</li><li>[天线端口]</li><li>[传输功率]</li><li>[伪随机序列生成参数]</li><li>[QCL参数]</li><li>[…]</li></ul><blockquote><p>[Editor’s note: For reconfiguration request, there are also no existing agreements to describe preamble retransmissions, or the window for the UE to receive a response, or the configuration of the CORESET where the PDCCH scheduling the response is transmitted, etc.]</p></blockquote><h1 id="上行功率控制"><a href="#上行功率控制" class="headerlink" title="上行功率控制"></a>上行功率控制</h1><h2 id="物理上行共享信道"><a href="#物理上行共享信道" class="headerlink" title="物理上行共享信道"></a>物理上行共享信道</h2><h3 id="UE-behaviour"><a href="#UE-behaviour" class="headerlink" title="UE behaviour"></a>UE behaviour</h3><h3 id="Power-headroom"><a href="#Power-headroom" class="headerlink" title="Power headroom"></a>Power headroom</h3><h2 id="物理上行控制信道"><a href="#物理上行控制信道" class="headerlink" title="物理上行控制信道"></a>物理上行控制信道</h2><h3 id="UE-behaviour-1"><a href="#UE-behaviour-1" class="headerlink" title="UE behaviour"></a>UE behaviour</h3><h2 id="探测参考信号"><a href="#探测参考信号" class="headerlink" title="探测参考信号"></a>探测参考信号</h2><h2 id="物理随机接入信道"><a href="#物理随机接入信道" class="headerlink" title="物理随机接入信道"></a>物理随机接入信道</h2><p><br>在时隙$ i $内，对于服务小区$c$，UE通过下式确定PRACH传输功率：</p><p><script type="math/tex">{ {P}_{\text{PRACH,c}}}(i)=\min { {\left\{ { {P}_{\text{CMAX},c}}(i),\ { {P}_{\text{PRACH,target}}}+P{ {L}_{c}} \right\}}^{ {}}}</script>dBm</p><p>其中$ { {P}_{\text{CMAX,c}}}(i) $是在TS 38.133中定义的服务小区$c$中在时隙$i$的UE传输功率，$ { {P}_{\text{PRACH,target}}} $由高层参数[<em>preambleReceivedTargetPower</em>]提供，$ P{ {L}_{c}} $是UE计算对于服务小区$c$的路径损耗，单位为dB。为了确定$ { {P}_{\text{PRACH,c}}}(i) $，UE计算路径损耗$ P{ {L}_{c}} $。路径损耗根据SS/PBCH块得到，即$ P{ {L}_{c}} $ = <em>SS/PBCHBlockPower</em> – higher layer filtered RSRP，其中<em>SS/PBCHBlockPower</em>由[<em>SystemInformationBlockType1</em>]提供，RSRP在TS 38.215中定义，高层滤波器配置在TS 38.331中定义。</p><p>如果一个随机接入响应窗口内，如5.2小节中描述，UE不接收随机接入响应，随机接入响应包含了一个与UE发送的前导序列对应的前导ID，UE将为随后的PRACH传输确定传输功率，如果有的话。[TS 38.321]</p><h2 id="载波聚合"><a href="#载波聚合" class="headerlink" title="载波聚合"></a>载波聚合</h2><h2 id="双连接"><a href="#双连接" class="headerlink" title="双连接"></a>双连接</h2><h1 id="随机接入过程"><a href="#随机接入过程" class="headerlink" title="随机接入过程"></a>随机接入过程</h1><p><br>在进行初始化的物理随机接入过程之前，L1应该从高层接收一组SS/PBCH块索引，并且应向高层提供一组对应的RSRP测量。</p><p>在进行初始化的物理随机接入过程之前，L1应该从高层接收以下信息：</p><ul><li>PRACH传输参数（PRACH前导格式，用于PRACH传输的时域和频域资源）</li><li>用于决定小区中根序列及其在前导序列集合中的循环移位值的参数（逻辑根序列表格索引、循环移位$ N_{\text{CS}}^{ {}} $、集合类型（受限集合和非受限集合））</li></ul><p>从物理层来看，物理层随机接入过程包括PRACH中随机接入前导（Msg1）的发送，PDSCH（Msg2）中的随机接入响应（RAR），PUSCH中的Msg3和PDSCH中的Msg4。</p><blockquote><p>批注：Tentatively, Msg3 and Msg4 will be described as part of the RA procedure due to various differences from PUSCH/PDSCH after RRC connection.</p></blockquote><h2 id="随机接入前导"><a href="#随机接入前导" class="headerlink" title="随机接入前导"></a>随机接入前导</h2><p><br>L1过程通过PRACH传输请求被触发，PRACH传输由高层来配置。高层对PRACH传输的配置包括：</p><ul><li>对于PRACH传输，高层参数[<em>PRACH-config</em>]提供的配置</li><li>对于PRACH传输，高层参数[<em>PRACH-cell-idx</em>]提供的服务小区索引</li><li>前导索引，PRACH格式，$ { {P}_{\text{PRACH,target}}} $，相应的RA-RNTI，PRACH资源</li><li>[对于PRACH传输的重复次数，也作为请求的一部分由高层指示]</li></ul><p>A PRACH format is selected from the preamble sequence set for the corresponding preamble sequence length using the preamble index.</p><p>在所指示的PRACH资源上，前导使用所选择的PRACH格式发送，传输功率为4.4节描述的$ { {P}_{\text{PRACH}}} $。</p><h3 id="定时"><a href="#定时" class="headerlink" title="定时"></a>定时</h3><h2 id="随机接入响应"><a href="#随机接入响应" class="headerlink" title="随机接入响应"></a>随机接入响应</h2><p><br>UE通过高层[TS 38.321]在一个约束窗内，采用所指示的RA-RNTI尝试检测PDCCH。窗口开始于最早的CORESET的符号。对于Type1-PDCCH公共搜索空间，UE配置了CORESET。Type1-PDCCH公共搜索空间在7.1节进行了定义，在前导序列传输的[X]个符号之后。随机接入响应窗口的长度由高层参数[<em>rar-windowlength</em>]提供。</p><p>如果UE在时间窗内，采用所指示的RA-RNTI和相应的DL-SCH传输块检测PDCCH，UE将传输块传递到高层。高层分析传输块并向物理层指示上行授权。如果在时间窗内，UE不检测PDCCH或相应的DL-SCH传输块，则UE过程如[TS 38.321]中的描述。</p><p>如果UE在时间窗内，采用所指示的RA-RNTI和相应的DL-SCH传输块检测PDCCH，高层指示[XX]比特的上行授权到物理层。这一过程被称为物理层的随机接入响应（RAR）。UE应接收PDCCH和PDSCH。作为包含[<em>SystemInformationBlockType1</em>]的PDSCH的接收，PDSCH包含了具有相同子载波间隔和相同CP的DL-SCH传输块。[XX]比特的内容，开始于MSB，结束于LSB：</p><p>[…]</p><blockquote><p>批注：To be completed as the contents of the UL grant in the RAR are determined.</p></blockquote><h2 id="Msg3-PUSCH"><a href="#Msg3-PUSCH" class="headerlink" title="Msg3 PUSCH"></a>Msg3 PUSCH</h2><p><br>对于Msg3 PUSCH传输，高层参数[<em>msg3-tp</em>]指示UE是否应用变换预编码（transform precoding），变换预编在[TS 38.211]中描述。</p><p>Msg3 PUSCH传输的子载波间隔由高层参数[<em>msg3-scs</em>]提供。</p><p>UE应在相同的服务小区内发送PRACH和Msg3 PUSCH。</p><h2 id="Msg4-PDSCH"><a href="#Msg4-PDSCH" class="headerlink" title="Msg4 PDSCH"></a>Msg4 PDSCH</h2><p><br>Msg4 PDSCH传输的子载波间隔与PDSCH相同提供随机接入响应。</p><h1 id="UE-procedure-for-reporting-control-information"><a href="#UE-procedure-for-reporting-control-information" class="headerlink" title="UE procedure for reporting control information"></a>UE procedure for reporting control information</h1><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/095958597.png" alt="mark"></p><h2 id="UE-procedure-for-HARQ-ACK-codebook-determination"><a href="#UE-procedure-for-HARQ-ACK-codebook-determination" class="headerlink" title="UE procedure for HARQ-ACK codebook determination"></a>UE procedure for HARQ-ACK codebook determination</h2><h3 id="CBG-based-HARQ-ACK-codebook-determination"><a href="#CBG-based-HARQ-ACK-codebook-determination" class="headerlink" title="CBG-based HARQ-ACK codebook determination"></a>CBG-based HARQ-ACK codebook determination</h3><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/100046252.png" alt="mark"></p><blockquote><p>批注：[HARQ-ACK information bits] The actual number of bits to report can be different – e.g. with bundling.</p><p>批注：[initial] For retransmissions, decisions are needed for dynamic/semi-static HARQ-ACK codebook determination and for possible DCI indications.</p><p>批注：[a] No decision currently exists for 2 TBs (e.g. same number for both TBs, separately configured number per TB).</p></blockquote><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/100136656.png" alt="mark"></p><blockquote><p>批注：[the UE determines whether or not a CBG is retransmitted based on a corresponding value of the CBGTI field] Placeholder text – will be modified once the specifics for the operation of the CBGTI field are decided.</p><p>批注：[<em>cc</em>] LTE terminology for indicating semi-static codebook (can be modified once RRC terminology is finalized). Statement in brackets will be removed if only semi-static codebook determination is supported for CBG-based HARQ-ACK.</p></blockquote><h2 id="UE-procedure-for-reporting-HARQ-ACK"><a href="#UE-procedure-for-reporting-HARQ-ACK" class="headerlink" title="UE procedure for reporting HARQ-ACK"></a>UE procedure for reporting HARQ-ACK</h2><h3 id="HARQ-ACK-reporting-in-physical-uplink-shared-channel"><a href="#HARQ-ACK-reporting-in-physical-uplink-shared-channel" class="headerlink" title="HARQ-ACK reporting in physical uplink shared channel"></a>HARQ-ACK reporting in physical uplink shared channel</h3><h3 id="HARQ-ACK-reporting-in-physical-uplink-control-channel"><a href="#HARQ-ACK-reporting-in-physical-uplink-control-channel" class="headerlink" title="HARQ-ACK reporting in physical uplink control channel"></a>HARQ-ACK reporting in physical uplink control channel</h3><p><br>如果UE没有配置为PUSCH和PUCCH同时传输，并且UE不传输PUSCH，且不传输CSI或positive/negative SR，则UE应传输HARQ-ACK</p><ul><li>on PUCCH format 0 if<ul><li>the transmission is over 1 symbol or 2 symbols,</li><li>the number of HARQ-ACK information bits is 1 or 2</li></ul></li><li>on PUCCH format 1 if<ul><li>the transmission is over 4 or more symbols,</li><li>the number of HARQ-ACK information bits is 1 or 2</li></ul></li><li>on PUCCH format 2 if<ul><li>the transmission is over 1 symbol or 2 symbols,</li><li>the number of HARQ-ACK information bits is more than 2</li></ul></li><li>on PUCCH format 3 if<ul><li>the transmission is over 4 or more symbols,</li><li>the number of HARQ-ACK information bits is more than [2]</li></ul></li></ul><p>UE在一个时隙的$ N_{\text{symb}}^{\text{slot},\mu } $个符号上发送一个或多个PUCCH。对于PUCCH传输时隙的参考，如果UE在PDCCH上检测DCI格式，其中PDCCH通过一定数量的符号调度PDSCH的接收，这些符号的最后一个符号在时隙$n$内，则UE应在PUCCH传输中提供相应的HARQ-ACK信息，PUCCH在时隙$ n+k $上传输，其中$k$是时隙数，且通过DCI格式中的[DL-data-DL-acknowledgement]字段来指示。[DL-data-DL-acknowledgement]字段的值映射到时隙数的值，见Table 9.1.2-1中的定义。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/100506146.png" alt="mark"></p><blockquote><p>批注：Dynamic indication of symbols within a slot or joint indication of time/frequency/code PUCCH resources is not precluded pending specific RAN1 agreements.</p></blockquote><h4 id="HARQ-ACK-procedures-for-one-configured-serving-cell"><a href="#HARQ-ACK-procedures-for-one-configured-serving-cell" class="headerlink" title="HARQ-ACK procedures for one configured serving cell"></a>HARQ-ACK procedures for one configured serving cell</h4><h4 id="HARQ-ACK-procedures-for-more-than-one-configured-serving-cell"><a href="#HARQ-ACK-procedures-for-more-than-one-configured-serving-cell" class="headerlink" title="HARQ-ACK procedures for more than one configured serving cell"></a>HARQ-ACK procedures for more than one configured serving cell</h4><h2 id="UE-procedure-for-reporting-SR"><a href="#UE-procedure-for-reporting-SR" class="headerlink" title="UE procedure for reporting SR"></a>UE procedure for reporting SR</h2><blockquote><p>批注：There are currently no RAN1 decisions on SR transmission structure and possible multiplexing with HARQ-ACK/CSI</p></blockquote><h2 id="UE-procedure-for-reporting-multiple-UCI-types"><a href="#UE-procedure-for-reporting-multiple-UCI-types" class="headerlink" title="UE procedure for reporting multiple UCI types"></a>UE procedure for reporting multiple UCI types</h2><h2 id="UCI-repetition-procedure"><a href="#UCI-repetition-procedure" class="headerlink" title="UCI repetition procedure"></a>UCI repetition procedure</h2><h1 id="UE-procedure-for-receiving-control-information"><a href="#UE-procedure-for-receiving-control-information" class="headerlink" title="UE procedure for receiving control information"></a>UE procedure for receiving control information</h1><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/100635180.png" alt="mark"></p><p>UE应在一个或多个激活的服务小区或BWPs上，根据相应的搜索空间，在一个或多个CORESET内监听一组PDCCH候选集，其中搜索空间是根据所监听的DCI格式译码每个PDCCH候选。</p><blockquote><p>批注：[PDCCH候选集] Can add more details later, such as per activated cell, etc., based on respective agreements.</p><p>批注：[DCI formats] Can remain applicable for potentially mapping multiple DCI formats to a same size (as for LTE DCI format 0 and DCI format 1A).</p></blockquote><h2 id="UE-procedure-for-determining-physical-downlink-control-channel-assignment-in-common-search-space"><a href="#UE-procedure-for-determining-physical-downlink-control-channel-assignment-in-common-search-space" class="headerlink" title="UE procedure for determining physical downlink control channel assignment in common search space"></a>UE procedure for determining physical downlink control channel assignment in common search space</h2><p><br>UE应在下列一个或多个搜索空间内监听PDCCH候选：</p><ul><li>a Type0-PDCCH common search space for a DCI format scrambled by a [SI-RNTI] on a primary cell</li><li>a Type1-PDCCH common search space for a DCI format scrambled by a [RA-RNTI] on a primary cell</li><li>a Type2-PDCCH common search space for a DCI format scrambled by a [INT-RNTI]</li></ul><p>[UE应在没有载波指示域的情况下监听PDCCH候选。]</p><p>如果UE通过高层配置为以[INT-RNTI]加扰的CRC译码DCI格式，UE也在[每个服务小区]配置[一组]PRBs和一组OFDM符号。如果UE以[INT-RNTI]加扰的CRC检测DCI格式，UE可以假设不在这组PRBs和OFDM符号中发送。UE通过高层参数[<em>int-PRBs-unit</em>]配置PRBs的指示粒度。UE通过高层参数[<em>int-symbols-unit</em>]配置OFDM符号的指示粒度。UE通过高层参数[<em>Num-PDCCH-cand</em>]来配置对于DCI格式的每个CCE聚合等级下的若干PDCCH候选，其中DCI格式使用[INT-RNTI]加扰的CRC。</p><blockquote><p>批注：[[INT-RNTI]加扰的CRC] Eventually, this DCI format will have a name and will be used to remove this part.</p></blockquote><h2 id="UE-procedure-for-determining-physical-downlink-control-channel-assignment-in-UE-specific-search-space"><a href="#UE-procedure-for-determining-physical-downlink-control-channel-assignment-in-UE-specific-search-space" class="headerlink" title="UE procedure for determining physical downlink control channel assignment in UE-specific search space"></a>UE procedure for determining physical downlink control channel assignment in UE-specific search space</h2><p><br>对于每个服务小区，高层信令给UE配置$ Q $个CORESETs。对于CORESET $q$，$ 0\le q&lt;Q $，配置包括：</p><ul><li>高层参数[<em>CORESET-start-symb</em>]提供第1个OFDM符号</li><li>高层参数[<em>CORESET-time-duration</em>]提供若干连续的OFDM符号</li><li>高层参数[<em>CORESET-freq-dom</em>]提供一组RBs集合</li><li>高层参数[<em>CORESET-trans-type</em>]提供CCE-to-REG映射</li><li>对于交织的CCE-to-REG映射，高层参数[<em>CORESET-REG-bundle-size</em>]提供REG bundle大小</li><li>[高层参数[<em>CORESET-QCL-ConfigId</em>]提供天线端口quasi-collocation]</li></ul><p>对于非交织的CCE-to-REG映射，REG bundle大小等于6。UE可以假设一个REG bundle内的所有REGs上传输的PDCCH应用相同的预编码。</p><blockquote><p>批注：[对于非交织的CCE-to-REG映射，REG bundle大小等于6。] Can be updated if additional REG bundle sizes are defined for non-interleaved transmissions.</p></blockquote><p>每个CORESET包含一组从0到$ { {N}_{\text{CCE},q}}-1 $编号的CCEs，其中$ { {N}_{\text{CCE},q}} $是CORESET $q$中的CCEs个数。</p><p>UE所监听的PDCCH候选集定义在PDCCH UE特定搜索空间。PDCCH UE特定搜索空间在聚合等级$ L\in \left\{ 1, 2, 4, 8 \right\} $上定义为，对于CCE聚合等级$L$的一组PDCCH候选。对于一个DCI格式，UE在每个服务小区内通过高层参数[<em>Num-PDCCH-cand</em>]配置每个CCE聚合等级 下的一组PDCCH候选。</p><blockquote><p>批注：[UE特定搜索空间] Cross-carrier scheduling, including use of different numerologies, will be captured through the search space.</p></blockquote><p>对于连续接收（non-DRX）模式操作，UE在根据$ { {W}_{\text{PDCCH,} q}} $个符号周期，监听CORESET $q$中的PDCCH候选，其中对于CORESET $q$的$ { {W}_{\text{PDCCH,} q}} $由高层参数[<em>CORESET-monitor-period</em>]配置。</p><blockquote><p>批注：[CORESET-monitor-period] Need to determine how, based on configured periodicity, UE monitors PDCCH and whether it is a CORESET or a search space parameter. Allowed periodicity values (symbol, slot, etc.) are TBD (start from 1 symbol) and are to be included in RAN2 specifications (likely not visible in 38.213).</p></blockquote><p>服务小区中的UE，在UE特定的搜索空间监听PDCCH的候选，如果UE没有配置载波指示域，UE应在没有载波指示域的条件下监听PDCCH候选。服务小区中的UE，在UE 特定的搜索空间监听PDCCH的候选，如果UE配置了载波指示域，则UE应使用载波指示域监听PDCCH候选。</p><p>如果UE在另一个服务小区上被配置使用对应于secondary cell的载波指示来监听PDCCH候选，UE不希望在secondary cell上监听PDCCH候选。[对于服务小区中的UE监听PDCCH候选，UE应至少在同一个服务小区内监听PDCCH候选。]</p><h1 id="Bandwidth-part-operation"><a href="#Bandwidth-part-operation" class="headerlink" title="Bandwidth part operation"></a>Bandwidth part operation</h1><blockquote><p>批注：It will be attempted, as much as possible, to capture all BWP operation aspects in this Subclause while referring to other Subclauses. Potential overlaps will be resolved as the specifications progress.</p><p>批注：Text is subject to revisions as descriptions in 38.211 and 38.213 are aligned.</p></blockquote><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/101231694.png" alt="mark"></p><blockquote><p>批注：[BWP] Regarding the CSS, he agreement for its configuration is ambiguous. Which CSS configuration is it (e.g. is it for SIB scheduling, for GC-PDCCH, … )? Maybe multiple CSS configurations are applicable as in Subclause 10.1? Reference to primary cell in the agreement points to SIB scheduling but clarification is needed for what the CSS intends to do, whether the respective BWP is same as the BWP from initial access, ….</p></blockquote><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/101316284.png" alt="mark"></p><blockquote><p>批注：[transmissions] Activation/deactivation by DCI requires further details (e.g. it is FFS whether it is a DCI scheduling PDSCH/PUSCH in a configured BWP ot a separate DCI). Deactivation by a timer also requires further details (e.g. no separate specifications if it is the DRX timer). A separate timer may be described in RRC specifications as for the DRX timer.</p></blockquote><h1 id="Configurations-and-assumptions-independent-of-physical-channels-or-signals"><a href="#Configurations-and-assumptions-independent-of-physical-channels-or-signals" class="headerlink" title="Configurations and assumptions independent of physical channels or signals"></a>Configurations and assumptions independent of physical channels or signals</h1><blockquote><p>批注：[signals] To capture reserved resources, potential LTE-NR coexistence aspects, etc. For LTE-NR DC with single UL Tx, corresponding agreement regarding configuration of DL-reference UL/DL configuration affects only LTE operation, is suitable for LTE specifications, and is not captured (unless it is extended to NR-NR DC).</p></blockquote><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;同步过程&quot;&gt;&lt;a href=&quot;#同步过程&quot; class=&quot;headerlink&quot; title=&quot;同步过程&quot;&gt;&lt;/a&gt;同步过程&lt;/h1&gt;&lt;h2 id=&quot;小区搜索&quot;&gt;&lt;a href=&quot;#小区搜索&quot; class=&quot;headerlink&quot; title=&quot;小区搜索&quot;&gt;&lt;/a&gt;小区搜索&lt;/h2&gt;&lt;p&gt;&lt;br&gt;小区搜索过程是UE获得和小区时间和频率同步，并检测物理层小区ID的过程。&lt;/p&gt;&lt;p&gt;为进行小区搜索，UE需接收下列同步信号：主同步信号（PSS）和辅同步信号（SSS）。主辅同步信号在TS 38.211中定义。&lt;/p&gt;&lt;p&gt;UE应假设PBCH、PSS和SSS在连续的OFDM符号内接收，并且形成SS/PBCH块。&lt;/p&gt;&lt;p&gt;对于半帧中的SS/PBCH块，候选SS/PBCH块的OFDM 符号索引号和第1个OFDM符号索引根据下列情况确定：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;15 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{2, 8} + 14*n。对于载波频率小于等于3 GHz，有n=0, 1。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1, 2, 3。&lt;/li&gt;&lt;li&gt;30 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{4, 8, 16, 20} + 28*n。对于载波频率小于等于3 GHz，有n=0。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1。&lt;/li&gt;&lt;li&gt;30 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{2, 8} + 14*n。对于载波频率小于等于3 GHz，有n=0, 1。对于载波频率大于3 GHz且小于6 GHz，有n=0, 1, 2, 3。&lt;/li&gt;&lt;li&gt;120 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{4, 8, 16, 20} + 28*n。对于载波频率大于6 GHz，有n=0, 1, 2, 3, 5, 6, 7, 8, 10, 11, 12, 13, 15, 16, 17, 18。&lt;/li&gt;&lt;li&gt;240 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{8, 12, 16, 20, 32, 36, 40, 44} + 56*n。对于载波频率大于6 GHz，有n=0, 1, 2, 3, 5, 6, 7, 8。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;一个半帧中的候选SS/PBCH块在时域上以升序从0到$ L-1 ]$进行编号。对于$ L=4 $或$ L&amp;gt;4 $，UE应根据与每个半帧内SS/PBCH块索引一一对应的PBCH中传输的DM-RS序列索引，分别确定SS/PBCH块索引的2或3个LSB比特。对于$ L=64 $，UE应根据高层参数[&lt;em&gt;SSB-index-explicit&lt;/em&gt;]确定每个半帧内SS/PBCH块索引的3 个MSB比特。&lt;/p&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>5G-NR复用与信道编码v1.0.0</title>
    <link href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/"/>
    <id>http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/</id>
    <published>2017-09-10T14:23:31.000Z</published>
    <updated>2017-10-24T00:55:22.831Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><blockquote><p>Marshall注：本博文重点关注了与polar code相关的比特级处理。</p></blockquote><h1 id="物理信道映射"><a href="#物理信道映射" class="headerlink" title="物理信道映射"></a>物理信道映射</h1><h2 id="上行"><a href="#上行" class="headerlink" title="上行"></a>上行</h2><h2 id="下行"><a href="#下行" class="headerlink" title="下行"></a>下行</h2><h1 id="通用流程"><a href="#通用流程" class="headerlink" title="通用流程"></a>通用流程</h1><p><br>来自MAC层/向MAC层输出的数据和控制流经过编/解码，通过无线传输链路提供传输和控制服务。信道编码方案是错误检测、错误纠正、速率匹配、交织以及传输信道或控制信息向物理信道映射/从物理信道到传输信道控制信息解析或分离的组合方案。</p><h2 id="CRC计算"><a href="#CRC计算" class="headerlink" title="CRC计算"></a>CRC计算</h2><p><br>CRC计算单元的输入比特为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，奇偶校验比特为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $。$ A $是输入序列的长度，$ L $是校验比特数目。校验比特由下列循环生成多项式之一产生：</p><ul><li>$ { {g}_{\text{CRC24A}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{18}}+{ {D}^{17}}+{ {D}^{14}}+{ {D}^{11}}+{ {D}^{10}}+{ {D}^{7}}+{ {D}^{6}}+{ {D}^{5}}+{ {D}^{4}}+{ {D}^{3}}+D+1] $，CRC长度$ L=24 $；</li><li>$ { {g}_{\text{CRC24B}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{6}}+{ {D}^{5}}+D+1] $，CRC长度$ L=24 $；</li><li>$ { {g}_{\text{CRC24C}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{21}}+{ {D}^{20}}+{ {D}^{17}}+{ {D}^{15}}+{ {D}^{13}}+{ {D}^{12}}+{ {D}^{8}}+{ {D}^{4}}+{ {D}^{2}}+D+1] $，CRC长度$ L=24 $；</li><li>$ { {g}_{\text{CRC16}}}\left( D \right)=[{ {D}^{16}}+{ {D}^{12}}+{ {D}^{5}}+D+1] $，CRC长度$ L=16 $</li></ul><a id="more"></a><p>编码以系统方式进行，这意味着在二元域GF（2）中，多项式：</p><script type="math/tex;mode=display">{ {a}_{0}}{ {D}^{A+L-1}}+{ {a}_{1}}{ {D}^{A+L-2}}+...+{ {a}_{A-1}}{ {D}^{L}}+{ {p}_{0}}{ {D}^{L-1}}+{ {p}_{1}}{ {D}^{L-2}}+...+{ {p}_{L-2}}{ {D}^{1}}+{ {p}_{L-1}}</script><p>除以相应的CRC生成多项式时，余数等于0。</p><p>添加CRC之后的比特序列表示为$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $。$ { {a}_{k}} $和$ { {b}_{k}} $的关系如下：</p><p>$ { {b}_{k}}={ {a}_{k}} $，对于$ k=0,1,2,…,A-1 $</p><p>$ { {b}_{k}}={ {p}_{k-A}} $，对于$ k=A,A+1,A+2,…,A+L-1 $</p><h2 id="码块分段和CRC添加"><a href="#码块分段和CRC添加" class="headerlink" title="码块分段和CRC添加"></a>码块分段和CRC添加</h2><h3 id="LDPC码"><a href="#LDPC码" class="headerlink" title="LDPC码"></a>LDPC码</h3><p><br>码块分段单元的输入序列为$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B&gt;0 $]。如果$ B $大于最大码块大小$ { {K}_{\text{cb}}} $，则输入序列要进行分段操作，并且每个分段后的码块要添加一个$ L=24 $的CRC序列。最大码块大小为：</p><ul><li>$ { {K}_{\text{cb}}}=8448 $。</li></ul><p>码块总数C根据以下方法计算得到：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/224129593.png" alt="mark"></p><p>当$ C\ne 0 $时，码块分段的输出比特为$ { {c}_{r0}},{ {c}_{r1}},{ {c}_{r2}},{ {c}_{r3}},…,{ {c}_{r\left( { {K}_{r}}-1 \right)}} $，其中$ 0\le r&lt;C $为码块号，$ { {K}_{r}} $是码块$r$中的比特数。</p><p>每个码块中的比特数为（仅适用于$ C\ne 0 $的情况）：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/224305482.png" alt="mark"></p><blockquote><p>注：蓝色高亮部分是华为批注：K+ and K_ are kept for now. May update after TBS is finalized.</p></blockquote><p>在Table 5.3.2-1中所有列举的集合中找到Z的最小值，表示为$ { {Z}_{c}} $。$ { {K}_{b}}\cdot { {Z}_{c}}\ge { {K}_{+}} $且对于LDPC BG#1有$ K=22{ {Z}_{c}} $，对于LDPC BG#2有$ K=10{ {Z}_{c}} $。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/224439978.png" alt="mark"></p><h2 id="信道编码"><a href="#信道编码" class="headerlink" title="信道编码"></a>信道编码</h2><h3 id="Polar-coding"><a href="#Polar-coding" class="headerlink" title="Polar coding"></a>Polar coding</h3><p><br>对于给定的码块，信道编码器的输入序列为$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $，其中$ K $是编码器的输入比特数。编码后的比特序列表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $，其中$ N={ {2}^{n}} $并且$n$的值由下列方法决定：</p><p>$ E $表示速率匹配输出序列长度，由2.4.1节给出；</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/224919697.png" alt="mark"></p><p>比特序列$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $采用下列方法被交织成比特序列$ c_{0}^{‘},c_{1}^{‘},c_{2}^{‘},c_{3}^{‘},…,c_{K-1}^{‘} $:</p><p>$ { { {c}’}_{k}}={ {c}_{\Pi \left( k \right)}} $，$ k=0,1,…,K-1 $</p><p>其中交织pattern $ \Pi \left( k \right) $由下列方法确定：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/225102168.png" alt="mark"></p><p>其中$ \Pi _{IL}^{\max }\left( m \right) $由Table 5.3.1-1和$ K_{IL}^{\max } $给定。</p><blockquote><p>华为批注：The value of $ K_{IL}^{\max } $ equals to Kmax = max(140, max DCI payload size in Rel-15 + 20) + 24. The value of $ K_{IL}^{\max } $ should be the number of elements in Table 5.3.1-1, in the end. According to the current Tabel 5.3.1-1, $ K_{IL}^{\max }=224 $.</p></blockquote><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/225628499.png" alt="mark"></p><blockquote><p>华为批注：Contents of this table will be updated. Current working assumption is the pattern for nFAR=21 in R1-1712167.</p></blockquote><p>Polar序列$ \mathbf{Q}_{0}^{ { {N}_{\max }}-1}=\left\{ Q_{0}^{ { {N}_{\max }}},Q_{1}^{ { {N}_{\max }}},…,Q_{ { {N}_{\max }}-1}^{ { {N}_{\max }}} \right\} $由Table5.3.1-2给定，其中$ 0\le Q_{i}^{ { {N}_{\max }}}\le { {N}_{\max }}-1 $表示Polar编码前的一个比特索引，其中$ i=0,1,…,N-1 $，$ { {N}_{\max }}=1024 $。Polar序列$ \mathbf{Q}_{0}^{ { {N}_{\max }}-1} $按可靠性升序排列$ W\left( Q_{0}^{ { {N}_{\max }}} \right)&lt;W\left( Q_{1}^{ { {N}_{\max }}} \right)&lt;…&lt;W\left( Q_{ { {N}_{\max }}-1}^{ { {N}_{\max }}} \right) $，其中$ W\left( Q_{i}^{ { {N}_{\max }}} \right) $表示比特索引$ Q_{i}^{ { {N}_{\max }}} $的可靠性。</p><p>对任意码块编码为$ N $比特，都使用相同的Polar序列$ \mathbf{Q}_{0}^{N-1}=\left\{ Q_{0}^{N},Q_{1}^{N},Q_{2}^{N},…,Q_{N-1}^{N} \right\} $。Polar序列$ \mathbf{Q}_{0}^{N-1} $是Polar序列$ \mathbf{Q}_{0}^{ { {N}_{\max }}-1} $的子集，即值小于$ N $的所有$ Q_{i}^{ { {N}_{\max }}} $元素，并且按可靠性升序排列$ W\left( Q_{0}^{N} \right)&lt;W\left( Q_{1}^{N} \right)&lt;W\left( Q_{2}^{N} \right)&lt;…&lt;W\left( Q_{N-1}^{N} \right) $。</p><p>$ \mathbf{\bar{Q}}_{I}^{N} $是Polar序列$ \mathbf{Q}_{0}^{N-1} $中的一组比特索引，$ \mathbf{\bar{Q}}_{F}^{N} $是Polar序列$ \mathbf{Q}_{0}^{N-1} $中其他比特的索引，其中$ \mathbf{\bar{Q}}_{I}^{N} $和$ \mathbf{\bar{Q}}_{F}^{N} $由2.4.1.1节给定，$ \left| \mathbf{\bar{Q}}_{I}^{N} \right|=K+{ {n}_{PC}} $，$ \left| \mathbf{\bar{Q}}_{F}^{N} \right|=N-\left| \mathbf{\bar{Q}}_{I}^{N} \right| $，$ { {n}_{PC}} $是奇偶校验比特数。</p><p>$ { {\mathbf{G}}_{N}}={ {\left( { {\mathbf{G}}_{2}} \right)}^{\otimes n}} $表示矩阵$ { {\mathbf{G}}_{2}} $的$n$次克罗内克积，其中$ { {\mathbf{G}}_{2}}=\left[ \begin{matrix}<br>1 &amp; 0 \\<br>1 &amp; 1 \\<br>\end{matrix} \right] $。</p><p>$ { {\mathbf{g}}_{j}} $表示矩阵$ { {\mathbf{G}}_{N}} $的第$ j $行，比特索引$ j=0,1,…,N-1 $。$ w\left( { {\mathbf{g}}_{j}} \right) $表示$ { {\mathbf{g}}_{j}} $的行重，即$ { {\mathbf{g}}_{j}} $中1的个数。奇偶校验比特的索引集合表示为$ \mathbf{Q}_{PC}^{N} $，其中$ \left| \mathbf{Q}_{PC}^{N} \right|={ {n}_{PC}} $。$ \left( { {n}_{PC}}-n_{PC}^{wm} \right) $个奇偶校验比特位于$ \mathbf{\bar{Q}}_{I}^{N} $中的$ \left( { {n}_{PC}}-n_{PC}^{wm} \right) $个最不可靠的比特索引。其他$ n_{PC}^{wm} $个奇偶校验比特位于$ \mathbf{\tilde{Q}}_{I}^{N} $中行重最小的比特索引，其中$ \mathbf{\tilde{Q}}_{I}^{N} $表示$ \mathbf{\bar{Q}}_{I}^{N} $中$ \left( \left| \mathbf{\bar{Q}}_{I}^{N} \right|-{ {n}_{PC}} \right) $个最可靠的比特索引；如果$ \mathbf{\tilde{Q}}_{I}^{N} $中具有相同最小行重的比特索引大于$ n_{PC}^{wm} $，则其他$ n_{PC}^{wm} $个奇偶校验比特位于$ \mathbf{\tilde{Q}}_{I}^{N} $中可靠性最高且行重最小的$ n_{PC}^{wm} $个比特索引。</p><p>根据下列方法生成序列$ \mathbf{u}=\left[ { {u}_{0}}\text{ }{ {u}_{1}}\text{ }{ {u}_{2}}\text{ }…\text{ }{ {u}_{N-1}} \right] $：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230721744.png" alt="mark"></p><blockquote><p>注：粉色部分为华为批注：Need further agreements on how to set the values for frozen bits.</p></blockquote><p>通过$ \mathbf{d}=\mathbf{u}{ {\mathbf{G}}_{n}} $编码器得到输出序列，表示为$ \mathbf{d}=\left[ { {d}_{0}}\text{ }{ {d}_{1}}\text{ }{ {d}_{2}}\text{ }…\text{ }{ {d}_{N-1}} \right] $。编码在二元域GF（2）进行。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230838961.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230901215.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230923898.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/230947989.png" alt="mark"></p><h3 id="LDPC码-1"><a href="#LDPC码-1" class="headerlink" title="LDPC码"></a>LDPC码</h3><h2 id="速率匹配"><a href="#速率匹配" class="headerlink" title="速率匹配"></a>速率匹配</h2><p><br>Polar code速率匹配包括子块交织、比特收集和比特交织。速率匹配的输入序列为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $，输出序列表示为$ { {f}_{0}},{ {f}_{1}},{ {f}_{2}},…,{ {f}_{E-1}} $。</p><h3 id="polar-code速率匹配"><a href="#polar-code速率匹配" class="headerlink" title="polar code速率匹配"></a>polar code速率匹配</h3><h4 id="子块交织"><a href="#子块交织" class="headerlink" title="子块交织"></a>子块交织</h4><p><br>编码比特$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $就是子块交织器的输入比特。编码比特$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $被分为32个子块。子块交织器的输出比特为$ { {y}_{0}},{ {y}_{1}},{ {y}_{2}},…,{ {y}_{N-1}} $，用以下方式生成：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/083917955.png" alt="mark"></p><p>其中子块交织pattern $ P\left( i \right) $由Table 5.4.1.1-1给定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084010857.png" alt="mark"></p><p>比特索引集合$ \mathbf{\bar{Q}}_{I}^{N} $和$ \mathbf{\bar{Q}}_{F}^{N} $由下列方法确定，其中$ K $，$ { {n}_{PC}} $和$ \mathbf{Q}_{0}^{N-1} $由2.3.1节定义：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084158930.png" alt="mark"></p><h4 id="比特选择"><a href="#比特选择" class="headerlink" title="比特选择"></a>比特选择</h4><p><br>$E$表示速率匹配输出序列的长度，速率匹配输出序列为$ { {e}_{k}} $，$ k=0,1,2,…,E-1 $由以下方法产生：</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084308555.png" alt="mark"></p><h4 id="比特交织"><a href="#比特交织" class="headerlink" title="比特交织"></a>比特交织</h4><p><br>比特序列$ { {e}_{0}},{ {e}_{1}},{ {e}_{2}},…,{ {e}_{E-1}} $通过以下方法被交织为比特序列$ { {f}_{0}},{ {f}_{1}},{ {f}_{2}},…,{ {f}_{E-1}} $：</p><p>$ T $表示满足$ T\left( T+1 \right)/2\ge E $的最小整数；</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084452223.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170912/084546055.png" alt="mark"></p><h3 id="LDPC-code速率匹配"><a href="#LDPC-code速率匹配" class="headerlink" title="LDPC code速率匹配"></a>LDPC code速率匹配</h3><h2 id="码块级联"><a href="#码块级联" class="headerlink" title="码块级联"></a>码块级联</h2><h1 id="上行传输信道和控制信息"><a href="#上行传输信道和控制信息" class="headerlink" title="上行传输信道和控制信息"></a>上行传输信道和控制信息</h1><h2 id="随机接入信道"><a href="#随机接入信道" class="headerlink" title="随机接入信道"></a>随机接入信道</h2><h2 id="上行共享信道"><a href="#上行共享信道" class="headerlink" title="上行共享信道"></a>上行共享信道</h2><h3 id="传输块CRC添加"><a href="#传输块CRC添加" class="headerlink" title="传输块CRC添加"></a>传输块CRC添加</h3><p><br>每个上行共享信道（UL-SCH）传输块都通过一个CRC来提供错误检测。</p><p>使用整个传输块来计算CRC校验比特。送到L1的一个传输块的比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$A$是传输块大小，$L$是校验比特数。按照TS 38.321规范中的定义，最低顺序信息比特$ { {a}_{0}} $被映射到最高有效位。</p><p>校验比特按照2.1节的描述进行计算并添加到UL-SCH传输块中，若$ A&gt;3824 $则设置$L$为24比特，使用生成多项式$ { {g}_{\text{CRC24A}}}\left( D \right) $；否则设置$ L $为16比特，使用生成多项式$ { {g}_{\text{CRC16}}}\left( D \right) $。</p><h3 id="码块分段及CRC添加"><a href="#码块分段及CRC添加" class="headerlink" title="码块分段及CRC添加"></a>码块分段及CRC添加</h3><p><br>码块分段的输入比特流记为$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$B$表示传输块的比特数目（包含CRC）。</p><p>码块分段及CRC添加根据2.2.1节中描述进行。</p><p>码块分段之后的比特流记为$ { {c}_{r0}},{ {c}_{r1}},{ {c}_{r2}},{ {c}_{r3}},…,{ {c}_{r\left( { {K}_{r}}-1 \right)}} $，其中$ r $是码块号，$ { {K}_{r}} $是码块$ r $的比特数。</p><h3 id="UL-SCH的信道编码"><a href="#UL-SCH的信道编码" class="headerlink" title="UL-SCH的信道编码"></a>UL-SCH的信道编码</h3><p><br>码块比特流送至信道编码模块。码块中的比特表示为$ { {c}_{r0}},{ {c}_{r1}},{ {c}_{r2}},{ {c}_{r3}},…,{ {c}_{r\left( { {K}_{r}}-1 \right)}} $，其中$r$是码块号，$ { {K}_{r}} $是码块$ r $的比特数。码块的总数表示为$ C $，每个码块根据2.3.2节的描述独立地进行LDPC编码。</p><p>编码之后的比特流表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $，其中对于LDPC BG#1，有$ N=66{ {Z}_{c}} $；对于LDPC BG#2，有$ N=50{ {Z}_{c}} $。$ { {Z}_{c}} $的值由2.2.1节给定。</p><h3 id="速率匹配-1"><a href="#速率匹配-1" class="headerlink" title="速率匹配"></a>速率匹配</h3><h3 id="码块级联-1"><a href="#码块级联-1" class="headerlink" title="码块级联"></a>码块级联</h3><h3 id="数据和控制复用"><a href="#数据和控制复用" class="headerlink" title="数据和控制复用"></a>数据和控制复用</h3><h3 id="信道交织"><a href="#信道交织" class="headerlink" title="信道交织"></a>信道交织</h3><h2 id="上行控制信息"><a href="#上行控制信息" class="headerlink" title="上行控制信息"></a>上行控制信息</h2><h3 id="PUCCH上的控制信息"><a href="#PUCCH上的控制信息" class="headerlink" title="PUCCH上的控制信息"></a>PUCCH上的控制信息</h3><h4 id="UCI比特序列生成"><a href="#UCI比特序列生成" class="headerlink" title="UCI比特序列生成"></a>UCI比特序列生成</h4><blockquote><p>[Editor notes: This section will capture how to generate the UCI bit stream $ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $.]</p></blockquote><h4 id="CRC添加"><a href="#CRC添加" class="headerlink" title="CRC添加"></a>CRC添加</h4><p><br>如果UCI负载大小$ A\ge { {A}_{0}} $，整个负载都用于计算CRC校验比特。负载比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特表示为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$A$是UCI负载大小，$L$是校验比特数。</p><blockquote><p>华为注：$ { {A}_{0}} $的值有待进一步确定。</p></blockquote><p>校验比特按照2.1节的描述进行计算并添加，并设置$ L $为X比特，得到添加CRC后的比特序列$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B=A+L $。</p><blockquote><p>对于X的值，华为注：Depending on further agreements, different CRC lengths may be applied for different payload sizes.</p><p>[Editor notes: need to define the relationship between $ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $ and $ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $.]</p></blockquote><h4 id="UCI的信道编码"><a href="#UCI的信道编码" class="headerlink" title="UCI的信道编码"></a>UCI的信道编码</h4><p><br>信息比特流送至信道编码模块。信息比特流表示为$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $，其中$ K $是比特数。</p><p>如果$ 12\le K\le 22 $，则信息比特根据2.3.1节通过Polar进行编码，若$ E-K&gt;192 $，则设置$ { {n}_{\max }}=10 $，$ { {I}_{IL}}=0 $，$ { {n}_{PC}}=3 $，$ n_{PC}^{wm}=1 $；<br>若$ E-K\le 192 $，则设置$ n_{PC}^{wm}=0 $，其中$E$是由3.3.1.4节给定的速率匹配输出序列长度。</p><blockquote><p>关于$ 12\le K\le 22 $，华为批注：Need to capture the agreements for K &lt; 12 in the future.</p></blockquote><p>如果$ K&gt;22 $，则信息比特根据2.3.1节通过Polar进行编码，设置$ { {n}_{\max }}=10 $，$ { {I}_{IL}}=0 $，$ { {n}_{PC}}=0 $，$ n_{PC}^{wm}=0 $。</p><p>编码之后的比特流表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},{ {d}_{3}},…,{ {d}_{N-1}} $，其中$N$是编码比特数。</p><h4 id="速率匹配-2"><a href="#速率匹配-2" class="headerlink" title="速率匹配"></a>速率匹配</h4><h3 id="PUSCH上的控制信息"><a href="#PUSCH上的控制信息" class="headerlink" title="PUSCH上的控制信息"></a>PUSCH上的控制信息</h3><h4 id="UCI比特序列生成-1"><a href="#UCI比特序列生成-1" class="headerlink" title="UCI比特序列生成"></a>UCI比特序列生成</h4><blockquote><p>[Editor notes: This section will capture how to generate the UCI bit stream $ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $.]</p></blockquote><h4 id="CRC添加-1"><a href="#CRC添加-1" class="headerlink" title="CRC添加"></a>CRC添加</h4><p><br>如果UCI负载大小$ A\ge { {A}_{0}} $，整个负载都用于计算CRC校验比特。负载比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特表示为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$A$是UCI负载大小，$L$是校验比特数。</p><blockquote><p>华为注：$ { {A}_{0}} $的值有待进一步确定。</p></blockquote><p>校验比特按照2.1节的描述进行计算并添加，并设置$L$为X比特，得到添加CRC后的比特序列$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B=A+L $。</p><blockquote><p>对于X的值，华为注：Depending on further agreements, different CRC lengths may be applied for different payload sizes.</p><p>[Editor notes: need to define the relationship between $ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $ and $ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $.]</p></blockquote><h4 id="UCI的信道编码-1"><a href="#UCI的信道编码-1" class="headerlink" title="UCI的信道编码"></a>UCI的信道编码</h4><p><br>信息比特流送至信道编码模块。信息比特流表示为$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $，其中$ K $是比特数。</p><p>如果$ 12\le K\le 22 $，则信息比特根据2.3.1节通过Polar进行编码，若$ E-K&gt;192 $，则设置$ { {n}_{\max }}=10 $，$ { {I}_{IL}}=0 $，$ { {n}_{PC}}=3 $，$ n_{PC}^{wm}=1 $；若$ E-K\le 192 $，则设置$ n_{PC}^{wm}=0 $，其中$E$是由3.3.2.4节给定的速率匹配输出序列长度。</p><blockquote><p>关于$ 12\le K\le 22 $，华为批注：Need to capture the agreements for K &lt; 12 in the future.</p></blockquote><p>如果$ K&gt;22 $，则信息比特根据2.3.1节通过Polar进行编码，设置$ { {n}_{\max }}=10 $，$ { {I}_{IL}}=0 $，$ { {n}_{PC}}=0 $，$ n_{PC}^{wm}=0 $。</p><p>编码之后的比特流表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},{ {d}_{3}},…,{ {d}_{N-1}} $，其中$N$是编码比特数。</p><h4 id="速率匹配-3"><a href="#速率匹配-3" class="headerlink" title="速率匹配"></a>速率匹配</h4><h1 id="下行传输和控制信息"><a href="#下行传输和控制信息" class="headerlink" title="下行传输和控制信息"></a>下行传输和控制信息</h1><h2 id="广播信息"><a href="#广播信息" class="headerlink" title="广播信息"></a>广播信息</h2><p><br>Figure 7.1-1给出了BCH传输信道的处理结构。到达编码单元的数据，每80ms最多有一个传输块，其编码流程如下：</p><ul><li>向传输块添加CRC</li><li>信道编码</li><li>速率匹配</li></ul><blockquote><p>华为批注：Will add the figure later.</p></blockquote><h3 id="传输块CRC添加-1"><a href="#传输块CRC添加-1" class="headerlink" title="传输块CRC添加"></a>传输块CRC添加</h3><p><br>BCH传输块都通过CRC来进行错误检测。</p><p>使用整个传输块来计算CRC校验比特。（<em>华为批注：This sentence may be updated depending on further agreements, e.g. if some PBCH payload bits are not used to generate CRC bits.</em>）送到L1的一个传输块的比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$A$是传输块大小，$L$是校验比特数。按照TS 38.321规范中的定义，最低顺序信息比特$ { {a}_{0}} $被映射到最高有效位。</p><p>校验比特按照2.1节的描述进行计算并添加到BCH传输块中，设置$ L $为24比特，使用生成多项式$ { {g}_{\text{CRC24C}}}\left( D \right) $，得到添加CRC后的序列为$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B=A+L $。</p><blockquote><p>[Editor notes: need to define the relationship between and , pending on further agreements.]</p></blockquote><h3 id="信道编码-1"><a href="#信道编码-1" class="headerlink" title="信道编码"></a>信道编码</h3><p><br>信息比特送至信道编码模块。信息比特表示为$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $，其中$K$为比特数。它们根据2.3.1节进行Polar编码，设置$ { {n}_{\max }}=9 $，$ { {I}_{IL}}=1 $，$ { {n}_{PC}}=0 $，$ n_{PC}^{wm}=0 $。</p><p>编码之后的比特序列表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},{ {d}_{3}},…,{ {d}_{N-1}} $，其中$N$为编码比特数。</p><h3 id="速率匹配-4"><a href="#速率匹配-4" class="headerlink" title="速率匹配"></a>速率匹配</h3><h2 id="下行共享信道和寻呼信道"><a href="#下行共享信道和寻呼信道" class="headerlink" title="下行共享信道和寻呼信道"></a>下行共享信道和寻呼信道</h2><h3 id="传输块CRC添加-2"><a href="#传输块CRC添加-2" class="headerlink" title="传输块CRC添加"></a>传输块CRC添加</h3><p><br>每个传输块都通过CRC来进行错误检测。</p><p>使用整个传输块来计算CRC校验比特。送到L1的一个传输块的比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$A$是传输块大小，$L$是校验比特数。按照TS 38.321规范中的定义，最低顺序信息比特$ { {a}_{0}} $被映射到最高有效位。</p><p>校验比特按照2.1节的描述进行计算并添加到UL-SCH传输块中，若$ A&gt;3824 $，则设置$ L $为24比特，使用生成多项式$ { {g}_{\text{CRC24A}}}\left( D \right) $；否则设置$ L $为16比特，使用生成多项式$ { {g}_{\text{CRC16}}}\left( D \right) $。</p><h3 id="码块分段及CRC添加-1"><a href="#码块分段及CRC添加-1" class="headerlink" title="码块分段及CRC添加"></a>码块分段及CRC添加</h3><p><br>码块分段的输入比特流记为$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B $表示传输块的比特数目（包含CRC）。</p><p>码块分段及CRC添加根据2.2.1节中描述进行。</p><p>码块分段之后的比特流记为$ { {c}_{r0}},{ {c}_{r1}},{ {c}_{r2}},{ {c}_{r3}},…,{ {c}_{r\left( { {K}_{r}}-1 \right)}} $，其中$r$是码块号，$ { {K}_{r}} $是码块$r$的比特数。</p><h3 id="信道编码-2"><a href="#信道编码-2" class="headerlink" title="信道编码"></a>信道编码</h3><p><br>码块比特流送至信道编码模块。码块中的比特表示为$ { {c}_{r0}},{ {c}_{r1}},{ {c}_{r2}},{ {c}_{r3}},…,{ {c}_{r\left( { {K}_{r}}-1 \right)}} $，其中$r$是码块号，$ { {K}_{r}} $是码块$r$的比特数。码块的总数表示为$ C $，每个码块根据2.3.2节的描述独立地进行LDPC编码。</p><p>编码之后的比特流表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},…,{ {d}_{N-1}} $，其中对于LDPC BG#1，有$ N=66{ {Z}_{c}} $；对于LDPC BG#2，有$ N=50{ {Z}_{c}} $。$ { {Z}_{c}} $的值由2.2.1节给定。</p><h3 id="速率匹配-5"><a href="#速率匹配-5" class="headerlink" title="速率匹配"></a>速率匹配</h3><h2 id="下行控制信息"><a href="#下行控制信息" class="headerlink" title="下行控制信息"></a>下行控制信息</h2><p><br>DCI传输下行和上行调度信息，对非周期CQI报告的请求，或对一个小区和RNTI的上行功率控制命令。</p><blockquote><p>华为批注：This sentence will be updated later, pending on other agreed usages of DCI.</p></blockquote><p>Figure 7.3-1给出了DCI的处理结构。编码流程如下：</p><ul><li>信息单元复用</li><li>CRC添加</li><li>信道编码</li><li>速率匹配</li></ul><blockquote><p>华为批注：Will add the figure later.</p></blockquote><h3 id="DCI格式"><a href="#DCI格式" class="headerlink" title="DCI格式"></a>DCI格式</h3><h3 id="CRC添加-2"><a href="#CRC添加-2" class="headerlink" title="CRC添加"></a>CRC添加</h3><p><br>DCI传输通过CRC进行错误检测。</p><p>使用整个DCI负载计算CRC校验比特。DCI负载比特表示为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，校验比特表示为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $，其中$ A $为DCI负载比特大小，$ L $为校验比特数。</p><p>校验比特按照2.1节的描述进行计算并添加，并设置$L$为24比特，使用生成多项式$ { {g}_{\text{CRC24C}}}\left( D \right) $，得到添加CRC后的比特序列$ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $，其中$ B=A+L $。</p><blockquote><p>[Editor notes: need to define the relationship between $ { {b}_{0}},{ {b}_{1}},{ {b}_{2}},{ {b}_{3}},…,{ {b}_{B-1}} $ and $ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $, pending on further agreements.]</p></blockquote><h3 id="信道编码-3"><a href="#信道编码-3" class="headerlink" title="信道编码"></a>信道编码</h3><p><br>信息比特送至信道编码模块。信息比特表示为$ { {c}_{0}},{ {c}_{1}},{ {c}_{2}},{ {c}_{3}},…,{ {c}_{K-1}} $，其中$ K $是信息比特数，它们根据2.3.1节进行Polar编码，并设置$ { {n}_{\max }}=9 $，$ { {I}_{IL}}=1 $，$ { {n}_{PC}}=0 $，$ n_{PC}^{wm}=0 $。</p><p>编码之后的比特序列表示为$ { {d}_{0}},{ {d}_{1}},{ {d}_{2}},{ {d}_{3}},…,{ {d}_{N-1}} $，其中$N$为编码比特数。</p><h3 id="速率匹配-6"><a href="#速率匹配-6" class="headerlink" title="速率匹配"></a>速率匹配</h3><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;blockquote&gt;&lt;p&gt;Marshall注：本博文重点关注了与polar code相关的比特级处理。&lt;/p&gt;&lt;/blockquote&gt;&lt;h1 id=&quot;物理信道映射&quot;&gt;&lt;a href=&quot;#物理信道映射&quot; class=&quot;headerlink&quot; title=&quot;物理信道映射&quot;&gt;&lt;/a&gt;物理信道映射&lt;/h1&gt;&lt;h2 id=&quot;上行&quot;&gt;&lt;a href=&quot;#上行&quot; class=&quot;headerlink&quot; title=&quot;上行&quot;&gt;&lt;/a&gt;上行&lt;/h2&gt;&lt;h2 id=&quot;下行&quot;&gt;&lt;a href=&quot;#下行&quot; class=&quot;headerlink&quot; title=&quot;下行&quot;&gt;&lt;/a&gt;下行&lt;/h2&gt;&lt;h1 id=&quot;通用流程&quot;&gt;&lt;a href=&quot;#通用流程&quot; class=&quot;headerlink&quot; title=&quot;通用流程&quot;&gt;&lt;/a&gt;通用流程&lt;/h1&gt;&lt;p&gt;&lt;br&gt;来自MAC层/向MAC层输出的数据和控制流经过编/解码，通过无线传输链路提供传输和控制服务。信道编码方案是错误检测、错误纠正、速率匹配、交织以及传输信道或控制信息向物理信道映射/从物理信道到传输信道控制信息解析或分离的组合方案。&lt;/p&gt;&lt;h2 id=&quot;CRC计算&quot;&gt;&lt;a href=&quot;#CRC计算&quot; class=&quot;headerlink&quot; title=&quot;CRC计算&quot;&gt;&lt;/a&gt;CRC计算&lt;/h2&gt;&lt;p&gt;&lt;br&gt;CRC计算单元的输入比特为$ { {a}_{0}},{ {a}_{1}},{ {a}_{2}},{ {a}_{3}},…,{ {a}_{A-1}} $，奇偶校验比特为$ { {p}_{0}},{ {p}_{1}},{ {p}_{2}},{ {p}_{3}},…,{ {p}_{L-1}} $。$ A $是输入序列的长度，$ L $是校验比特数目。校验比特由下列循环生成多项式之一产生：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;$ { {g}_{\text{CRC24A}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{18}}+{ {D}^{17}}+{ {D}^{14}}+{ {D}^{11}}+{ {D}^{10}}+{ {D}^{7}}+{ {D}^{6}}+{ {D}^{5}}+{ {D}^{4}}+{ {D}^{3}}+D+1] $，CRC长度$ L=24 $；&lt;/li&gt;&lt;li&gt;$ { {g}_{\text{CRC24B}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{6}}+{ {D}^{5}}+D+1] $，CRC长度$ L=24 $；&lt;/li&gt;&lt;li&gt;$ { {g}_{\text{CRC24C}}}\left( D \right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{21}}+{ {D}^{20}}+{ {D}^{17}}+{ {D}^{15}}+{ {D}^{13}}+{ {D}^{12}}+{ {D}^{8}}+{ {D}^{4}}+{ {D}^{2}}+D+1] $，CRC长度$ L=24 $；&lt;/li&gt;&lt;li&gt;$ { {g}_{\text{CRC16}}}\left( D \right)=[{ {D}^{16}}+{ {D}^{12}}+{ {D}^{5}}+D+1] $，CRC长度$ L=16 $&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>5G-NR物理信道与调制-下行链路v1.0.0</title>
    <link href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-dl/"/>
    <id>http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-dl/</id>
    <published>2017-09-09T11:28:07.000Z</published>
    <updated>2017-10-24T00:55:12.782Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><p><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/#下行链路">上接《NR物理信道与调制》下行链路</a></p><h1 id="下行链路"><a href="#下行链路" class="headerlink" title="下行链路"></a>下行链路</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="物理信道概述"><a href="#物理信道概述" class="headerlink" title="物理信道概述"></a>物理信道概述</h3><p><br>下行链路物理信道对应于一组资源元素（REs）的集合，用于承载源自高层的信息。本规范定义了如下下行信道：</p><ul><li>物理下行共享信道（PDSCH）</li><li>物理广播信道（PBCH）</li><li>物理下行控制信道（PDCCH）</li></ul><h3 id="物理信号概述"><a href="#物理信号概述" class="headerlink" title="物理信号概述"></a>物理信号概述</h3><p><br>下行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下下行物理信号：</p><ul><li>解调参考信号（Demodulation reference signals，DM-RS）</li><li>相位跟踪参考信号（Phase-tracking reference signals，PT-RS）</li><li>信道状态信息参考信号（Channel-state information reference signal，CSI-RS）</li><li>主同步信号（Primary synchronization signal，PSS）</li><li>辅同步信号（Secondary synchronization signal，SSS）</li></ul><a id="more"></a><h2 id="物理资源"><a href="#物理资源" class="headerlink" title="物理资源"></a>物理资源</h2><p><br>本规范定义了下列用于下行链路的天线端口：</p><ul><li>Antenna ports starting with 1000 for DM-RS associated with PDSCH</li><li>Antenna ports starting with 2000 for DM-RS associated with PDCCH</li><li>Antenna ports starting with 3000 for CSI-RS</li><li>Antenna ports starting with 4000 for SS/PBCH block transmission</li></ul><h2 id="物理信道"><a href="#物理信道" class="headerlink" title="物理信道"></a>物理信道</h2><h3 id="物理下行共享信道"><a href="#物理下行共享信道" class="headerlink" title="物理下行共享信道"></a>物理下行共享信道</h3><h4 id="加扰"><a href="#加扰" class="headerlink" title="加扰"></a>加扰</h4><p><br>对于每个码字$ q $，UE应假设比特块$ { {b}^{(q)}}(0),…,{ {b}^{(q)}}(M_{\text{bit}}^{(q)}-1) $应在调制前被加扰，其中$ M_{\text{bit}}^{(q)} $是在物理信道上传输的码字$ q $的比特数，加扰后的比特块为$ { {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1) $。根据如下公式进行加扰</p><script type="math/tex;mode=display">{ {\tilde{b}}^{(q)}}(i)=\left( { {b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2</script><p>其中加扰序列$ { {c}^{(q)}}(i) $由2.2节给出。</p><h4 id="调制"><a href="#调制" class="headerlink" title="调制"></a>调制</h4><p><br>对于每个码字$ q $，UE应假设加扰比特块$ { {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1) $根据Table 7.3.1.2-1中的调制方式进行调制，具体调制方法见《NR物理信道与调制》2.1节，得到复值调制符号块$ { {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1) $。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/195532388.png" alt="mark"></p><h4 id="层映射"><a href="#层映射" class="headerlink" title="层映射"></a>层映射</h4><p><br>UE假设每个码字的复值调制符号根据Table 7.3.1.3-1被映射到一层或多层上发送。码字$ q $的复值调制符号$ { {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1) $被映射到层$ x(i)={ {\left[ \begin{matrix}<br>{ {x}^{(0)}}(i) &amp; … &amp; { {x}^{(\upsilon -1)}}(i) \\<br>\end{matrix} \right]}^{T}} $，$ i=0,1,…,M_{\text{symb}}^{\text{layer}}-1 $，其中$ \upsilon $是层数，$ M_{\text{symb}}^{\text{layer}} $是每层的调制符号数。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/200219608.png" alt="mark"></p><h4 id="预编码"><a href="#预编码" class="headerlink" title="预编码"></a>预编码</h4><script type="math/tex;mode=display">\left[ \begin{matrix}
   { {y}^{(0)}}(i)  \\
   \vdots   \\
   { {y}^{(P-1)}}(i)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   { {x}^{(0)}}(i)  \\
   \vdots   \\
   { {x}^{(\upsilon -1)}}(i)  \\
\end{matrix} \right]</script><p>where $ P=\upsilon $.</p><h4 id="资源映射"><a href="#资源映射" class="headerlink" title="资源映射"></a>资源映射</h4><p><br>UE应假设对物理信道的传输所使用的每个天线端口，复值符号块$ { {y}^{(p)}}(0),…,{ {y}^{(p)}}(M_{\text{symb}}^{\text{ap}}-1) $应符合38.xxx下行功率分配的规定，并且从$ { {y}^{(p)}}(0) $开始映射到REs $ \left( k,l \right) $，REs满足以下所有条件：</p><ul><li>它们位于分配给传输的资源块中</li><li>根据TS 38.214，它们被声明可用于PDSCH</li></ul><p>向没有其他用途的REs $ { {\left( k,l \right)}_{p,\mu }} $上映射，以递增顺序先按天线端口索引$ p $，再按分配的物理资源索引$ k $，然后按索引$ l $映射，索引$ l $以TS 38.213规范的描述以$ l={ {l}_{0}} $为起始。</p><p>UE可以假设在一个PRB bundle内使用相同的预编码，一个PRB bundle由2个或4个PRBs组成。PRB bundle基于 absolute资源格定义。</p><h3 id="物理下行控制信道"><a href="#物理下行控制信道" class="headerlink" title="物理下行控制信道"></a>物理下行控制信道</h3><h4 id="控制信道单元"><a href="#控制信道单元" class="headerlink" title="控制信道单元"></a>控制信道单元</h4><p><br>物理下行控制信道由一个或多个控制信道单元（control-channel elements，CCE）组成，CCE数由Table 7.3.2.1-1指示。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/202216219.png" alt="mark"></p><h4 id="控制资源集"><a href="#控制资源集" class="headerlink" title="控制资源集"></a>控制资源集</h4><p><br>一个控制资源集（Control-resource set，CORESET）由$ N_{\text{RB}}^{\text{CORESET}} $个频域RB和$ N_{\text{symb}}^{\text{CORESET}}\in \left\{ 1,2,3 \right\} $个时域符号组成，$ N_{\text{RB}}^{\text{CORESET}} $通过高层参数<em>CORESET-freq-dom</em>给定，$ N_{\text{symb}}^{\text{CORESET}} $通过高层参数<em>CORESET-time-dur</em>给定，其中仅当高层参数<em>DL-DMRS-typeA-pos</em> =3时支持$ N_{\text{symb}}^{\text{CORESET}}=3 $。</p><p>一个CCE由6个资源粒子组（resource-element group，REG）组成，一个REG等于一个OFDM符号上的RB。一个CORESET 内的REGs按时域优先的方式以递增顺序编号，在CORESET内从第1个OFDM符号且最低的RB以0开始编号。</p><p>UE可以配置多个CORESET。每个CORESET只与一个CCE-to-REG映射关联。</p><p>对于一个CORESET，CCE-to-REG映射可以交织（interleaved），也可以不交织（non- interleaved），这由高层参数<em>CORESET-Trans-type</em>来配置，并且由REG bundles来描述：</p><ul><li>REG bundle $ i $定义为REGs $ \left\{ iL,iL+1,…,iL+L-1 \right\} $，其中$ L $是REG bundle size，REG bundle size由高层参数<em>CORESET-REG-bundle-size</em>配置，$ i=0,1,…,{N_{\text{REG}}^{\text{CORESET}}}/{L}\;-1 $是CORESET内的REG数。</li><li>CCE $ j $由REG bundles $ \left\{ f({6j}/{L}\;),f({6j}/{L}\;+1),…,f({6j}/{L}\;+{6}/{L}\;-1) \right\} $组成，其中$ f(\cdot ) $是交织器。</li></ul><p>对于非交织的CCE-to-REG映射，$ L=6 $且$ f(j)=j $。</p><p>对于交织的CCE-to-REG映射，对于$ N_{\text{symb}}^{\text{CORESET}}=1 $，有$ L\in \left\{ 2,6 \right\} $；对于$ N_{\text{symb}}^{\text{CORESET}}\in \left\{ 2,3 \right\} $，有$ L\in \left\{ N_{\text{symb}}^{\text{CORSET}},6 \right\} $。</p><p>UE可假设在一个REG bundle内在频域上使用相同的预编码。</p><h4 id="加扰-1"><a href="#加扰-1" class="headerlink" title="加扰"></a>加扰</h4><h4 id="PDCCH调制"><a href="#PDCCH调制" class="headerlink" title="PDCCH调制"></a>PDCCH调制</h4><p><br>UE应假设比特块$ \tilde{b}(0),…,\tilde{b}({ {M}_{\text{bit}}}-1) $进行QPSK调制，QPSK调制采用《NR物理信道与调制》2.1.3节所描述的方法，得到复值调制符号块$ d(0),…,d({ {M}_{\text{symb}}}-1) $。</p><h4 id="资源映射-1"><a href="#资源映射-1" class="headerlink" title="资源映射"></a>资源映射</h4><p><br>UE应假设用于监测PDCCH的CCEs中，复值符号块$ d(0),…,d({ {M}_{\text{symb}}}-1) $乘以一个幅值因子$ { {\beta }_{\text{PDCCH}}} $，然后按照先$ l $后$k$的递增顺序映射到REs$ { {\left( k,l \right)}_{p,\mu }} $。</p><h3 id="物理广播信道"><a href="#物理广播信道" class="headerlink" title="物理广播信道"></a>物理广播信道</h3><h4 id="调制-1"><a href="#调制-1" class="headerlink" title="调制"></a>调制</h4><p><br>UE应假设比特块$ b(0),…,b({ {M}_{\text{bit}}}-1) $采用QPSK调制，QPSK调制采用《NR物理信道与调制》2.1节所描述的方法，得到复值调制符号块$ { {d}_{\text{PBCH}}}(0),…,{ {d}_{\text{PBCH}}}({ {M}_{\text{symb}}}-1) $。</p><h4 id="资源映射-2"><a href="#资源映射-2" class="headerlink" title="资源映射"></a>资源映射</h4><p><br>资源映射在本文1.4.3节中描述。</p><h2 id="物理信号"><a href="#物理信号" class="headerlink" title="物理信号"></a>物理信号</h2><h3 id="参考信号"><a href="#参考信号" class="headerlink" title="参考信号"></a>参考信号</h3><h4 id="用于PDSCH的DM-RS"><a href="#用于PDSCH的DM-RS" class="headerlink" title="用于PDSCH的DM-RS"></a>用于PDSCH的DM-RS</h4><h5 id="序列生成"><a href="#序列生成" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假设参考信号序列$ r(m) $定义为</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $在《NR物理信道与调制》2.2节中定义。</p><blockquote><p>Note: Sequence defined on a global scale relative to (FFS) SSBlock or RRC-configured reference point.</p></blockquote><h5 id="资源映射-3"><a href="#资源映射-3" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>UE应假设PDSCH DM-RS根据type 1或type 2映射到REs，DM-RS的类型由高层参数<em>DL-DMRS-config-type</em>给定。</p><p>UE应假设序列$ r(m) $根据如下公式映射到RE</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( 2m+{k}'+{ {m}_{0}} \right) \\ 
 \nonumber & k=\left\{ \begin{array}{*{35}{l}}
   { {k}_{\text{0}}}+4m+2{k}'+\Delta  & \text{Configuration type 1}  \\
   { {k}_{\text{0}}}+6m+{k}'+\Delta  & \text{Configuration type 2}  \\
\end{array} \right. \\ 
 \nonumber & {k}'=0,1 \\ 
\nonumber  & l=\bar{l}+{l}'  
\end{align}</script><p>其中$ l $定义为相对于时隙的起始，$ { {w}_{\text{f}}}\left( { {k}’} \right) $，$ { {w}_{\text{t}}}\left( { {l}’} \right) $和$ \Delta $由Tables 7.4.1.1.2-1 and 7.4.1.1.2-2给定。</p><p>时域索引$ {l}’ $和所支持的天线端口$p$依赖于DM-RS duration，DM-RS duration根据Table 7.4.1.1.2-3确定。$ \bar{l} $依赖于高层参数<em>DL-DMRS-add-pos</em>，<em>DL-DMRS-add-pos</em>由Table 7.4.1.1.2-4给定。$ { {l}_{0}} $依赖于映射类型：</p><ul><li>对于PDSCH映射类型A：如果高层参数<em>DL-DMRS-typeA-pos</em> =3则$ { {l}_{0}}=3 $，以及$ { {l}_{0}}=2 $</li><li>对于PDSCH映射类型B：$ { {l}_{0}} $是DM-RS映射到所调度的PDSCH资源中的第1个OFDM符号</li></ul><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/213937051.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/214014814.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/214111058.png" alt="mark"></p><blockquote><p>Note: More than one additional DM_RS can be configured.</p></blockquote><h4 id="用于PDSCH的PT-RS"><a href="#用于PDSCH的PT-RS" class="headerlink" title="用于PDSCH的PT-RS"></a>用于PDSCH的PT-RS</h4><h5 id="序列生成-1"><a href="#序列生成-1" class="headerlink" title="序列生成"></a>序列生成</h5><h5 id="资源映射-4"><a href="#资源映射-4" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>UE应假设只有当高层参数<em>DL-PTRS-present</em>指示PT-RS被使用时，并且只在用于PDSCH的RBs中呈现。</p><p>如果呈现，UE应假设PDSCH PT-RS根据如下公式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{PTRS}}}r(m) \\ 
 \nonumber & l={ {l}_{\text{DMRS}}}+1+{ {L}_{\text{PTRS}}}\cdot {l}' \\ 
 \nonumber & l'=0,1,2,...  
\end{align}</script><p>每$ { {K}_{\text{PTRS}}} $个被调度的RBs中，当下列条件被满足时，从最低编号的RB开始调度（<em>Note: It may not be the lowest numbers RB, FFS if an offset is used.</em>）</p><ul><li>$l$在用于PDSCH传输的所分配的OFDM符号内</li><li>RE $ \left( k,l \right) $不用于DM-RS</li></ul><p>其中</p><ul><li>索引$k$是一个PRB内的子载波数</li><li>对于1个符号DM-RS，有$ { {l}_{\text{DM-RS}}}={ {l}_{0}} $；对于2个符号DM-RS，有$ { {l}_{\text{DM-RS}}}={ {l}_{0}}+1 $，其中$ { {l}_{0}} $由1.4.1.1.2节定义</li><li>$ { {K}_{\text{PTRS}}}\in \left\{ 2,4 \right\} $由[6, TS38.214]给定</li><li>$ { {L}_{\text{PT-RS}}}\in \left\{ 1,2,4 \right\} $由[6, TS38.214]给定</li></ul><h4 id="用于PDCCH的DM-RS"><a href="#用于PDCCH的DM-RS" class="headerlink" title="用于PDCCH的DM-RS"></a>用于PDCCH的DM-RS</h4><h4 id="用于PBCH的DM-RS"><a href="#用于PBCH的DM-RS" class="headerlink" title="用于PBCH的DM-RS"></a>用于PBCH的DM-RS</h4><h5 id="序列生成-2"><a href="#序列生成-2" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假设用于SS/PBCH的参考信号$ r(m) $由下式定义</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中$ c(n) $由《NR物理信道与调制》2.2节给定。加扰序列生成应在每个SS/PBCH块的起始处通过小区ID $ N_{\text{ID}}^{\text{cell}} $和$ { {n}_{\text{t}}} $被初始化，块时间索引由PBCH DM-RS承载。</p><h5 id="资源映射-5"><a href="#资源映射-5" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>资源映射在1.4.3节中描述。</p><h4 id="CSI-RS"><a href="#CSI-RS" class="headerlink" title="CSI-RS"></a>CSI-RS</h4><h5 id="序列生成-3"><a href="#序列生成-3" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>UE应假设参考信号序列$ r(m) $由下式定义</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $由《NR物理信道与调制》2.2节定义。</p><h5 id="资源映射-6"><a href="#资源映射-6" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>UE应假设序列$ r(m) $根据以下公式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{CSIRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( m \right) \\ 
 \nonumber & k=\bar{k}+{k}' \\ 
 \nonumber & l=\bar{l}+{l}'  
\end{align}</script><p>但有以下例外</p><ul><li>与所配置的CORESET重叠的REs应从CSI-RS传输中排除</li></ul><p>其中$l$定义为相对于时隙的起始，$ \bar{k} $和$ \bar{l} $由Table 7.4.1.5.2-1和$ { {w}_{\text{f}}}\left( { {k}’} \right),{ {w}_{\text{t}}}\left( { {l}’} \right)\in \left\{ \left[ \begin{matrix}<br>+1 &amp; +1 \\<br>\end{matrix} \right],\left[ \begin{matrix}<br>+1 &amp; -1 \\<br>\end{matrix} \right],\left[ \begin{matrix}<br>-1 &amp; +1 \\<br>\end{matrix} \right],\left[ \begin{matrix}<br>-1 &amp; -1 \\<br>\end{matrix} \right] \right\} $给定。对于每个$ \bar{l} $，有长度为6的bitmap $ \left[ { {b}_{5}}\cdots { {b}_{0}} \right] $]，其中比特$ { {b}_{i}} $隐含地以索引$ j $按递增顺序指示$ { {k}_{j}}=2i $。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/215953799.png" alt="mark"></p><h4 id="Tracking-RS"><a href="#Tracking-RS" class="headerlink" title="Tracking RS"></a>Tracking RS</h4><blockquote><p>Note: depending on future decisions, the TRS may become a realization of a CSI-RS in which case this section will be removed.</p></blockquote><h5 id="序列产生"><a href="#序列产生" class="headerlink" title="序列产生"></a>序列产生</h5><p><br>UE应假设参考信号序列$ r(m) $定义为</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $由《NR物理信道与调制》2.2节定义。</p><h5 id="资源映射-7"><a href="#资源映射-7" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>TRS burst由4个OFDM符号组成，并在2个连续时隙内发送。</p><p>UE应假设TRS在一个burst内根据以下公式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{TRS}}}r(m) \\ 
 \nonumber & k=4m+{ {k}_{0}}  
\end{align}</script><p>The UE may assume that a TRS burst is quasi co-located with respect to delay spread, average delay, Doppler shift, and Doppler spread with the PDSCH DM-RS.</p><h3 id="同步信号"><a href="#同步信号" class="headerlink" title="同步信号"></a>同步信号</h3><h4 id="物理层小区ID"><a href="#物理层小区ID" class="headerlink" title="物理层小区ID"></a>物理层小区ID</h4><p><br>1008个唯一的物理层小区ID通过下式给定</p><script type="math/tex;mode=display">N_{\text{ID}}^{\text{cell}}=3N_{\text{ID}}^{\text{(1)}}+N_{\text{ID}}^{\text{(2)}}</script><p>其中$ N_{\text{ID}}^{\text{(1)}}\in \left\{ 0,1,…,335 \right\} $且$ N_{\text{ID}}^{\text{(2)}}\in \left\{ 0,1,2 \right\} $。</p><h4 id="主同步信号"><a href="#主同步信号" class="headerlink" title="主同步信号"></a>主同步信号</h4><h5 id="序列产生-1"><a href="#序列产生-1" class="headerlink" title="序列产生"></a>序列产生</h5><p><br>主同步信号序列$ { {d}_{\text{PSS}}}(n) $定义为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & { {d}_{\text{PSS}}}\left( n \right)=1-2x\left( m \right) \\ 
 \nonumber & m=\left( n+43N_{\text{ID}}^{\text{(2)}} \right)\bmod 127 \\ 
 \nonumber  & 0\le n<127  
\end{align}</script><p>其中</p><script type="math/tex;mode=display">x\left( i+7 \right)=\left( x\left( i+4 \right)+x\left( i \right) \right)\bmod 2</script><p>且</p><script type="math/tex;mode=display">\left[ \begin{matrix}
   x\left( 6 \right) & x\left( 5 \right) & x\left( 4 \right) & x\left( 3 \right) & x\left( 2 \right) & x\left( 1 \right) & x\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   1 & 1 & 1 & 0 & 1 & 1 & 0  \\
\end{matrix} \right]</script><h5 id="资源映射-8"><a href="#资源映射-8" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>资源映射由1.4.3节描述。</p><h4 id="辅同步信号"><a href="#辅同步信号" class="headerlink" title="辅同步信号"></a>辅同步信号</h4><h5 id="序列产生-2"><a href="#序列产生-2" class="headerlink" title="序列产生"></a>序列产生</h5><p><br>辅同步信号序列$ { {d}_{\text{SSS}}}(n) $定义为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber  & { {d}_{\text{SSS}}}\left( n \right)=\left[ 1-2{ {x}_{0}}\left( \left( n+{ {m}_{0}} \right)\bmod 127 \right) \right]\left[ 1-2{ {x}_{1}}\left( \left( n+{ {m}_{1}} \right)\bmod 127 \right) \right] \\ 
 \nonumber & { {m}_{0}}=15\left\lfloor \frac{N_{\text{ID}}^{\text{(1)}}}{\text{112}} \right\rfloor +5N_{\text{ID}}^{\text{(2)}} \\ 
 \nonumber & { {m}_{1}}=N_{\text{ID}}^{\text{(1)}}\bmod 112 \\ 
 \nonumber & 0\le n<127  
\end{align}</script><p>其中</p><script type="math/tex;mode=display">\begin{align}
  \nonumber  & { {x}_{0}}\left( i+7 \right)=\left( { {x}_{0}}\left( i+4 \right)+x{}_{0}\left( i \right) \right)\bmod 2 \\ 
 \nonumber  & { {x}_{1}}\left( i+7 \right)=\left( { {x}_{1}}\left( i+1 \right)+x{}_{1}\left( i \right) \right)\bmod 2  
\end{align}</script><p>且</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & \left[ \begin{matrix}
   { {x}_{0}}\left( 6 \right) & { {x}_{0}}\left( 5 \right) & { {x}_{0}}\left( 4 \right) & { {x}_{0}}\left( 3 \right) & { {x}_{0}}\left( 2 \right) & { {x}_{0}}\left( 1 \right) & { {x}_{0}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 & 0 & 0 & 0 & 0 & 0 & 1  \\
\end{matrix} \right] \\ 
 \nonumber & \left[ \begin{matrix}
   { {x}_{1}}\left( 6 \right) & { {x}_{1}}\left( 5 \right) & { {x}_{1}}\left( 4 \right) & { {x}_{1}}\left( 3 \right) & { {x}_{1}}\left( 2 \right) & { {x}_{1}}\left( 1 \right) & { {x}_{1}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 & 0 & 0 & 0 & 0 & 0 & 1  \\
\end{matrix} \right]  
\end{align}</script><h5 id="资源映射-9"><a href="#资源映射-9" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>资源映射由1.4.3节描述。</p><h3 id="SS-PBCH块"><a href="#SS-PBCH块" class="headerlink" title="SS/PBCH块"></a>SS/PBCH块</h3><h4 id="SS-PBCH块的时频结构"><a href="#SS-PBCH块的时频结构" class="headerlink" title="SS/PBCH块的时频结构"></a>SS/PBCH块的时频结构</h4><p><br>在时域上，一个SS/PBCH块由4个OFDM符号组成，按递增顺序从0到3编号。在频域上，一个SS/PBCH块由24个连续RBs组成，其中的子载波按递增顺序从0到287编号，以编号最低的RB为起始。</p><p>UE应假设为了符合[TS 38.213]中的PSS功率分配规定，符号序列$ { {d}_{\text{PSS}}}(0),…,{ {d}_{\text{PSS}}}(126) $应乘以一个幅值因子$ { {\beta }_{\text{SS}}} $以构成主同步信号，并按照$k$递增的顺序映射到REs $ { {\left( k,l \right)}_{p,\mu }} $，其中$k$和$l$分别表示一个SS/PBCH块内频域和时域索引，并由Table 7.4.3.1-1给定。</p><p>UE应假设为了符合[TS 38.213]中的SSS功率分配规定，符号序列$ { {d}_{\text{SSS}}}(0),…,{ {d}_{\text{SSS}}}(126) $应乘以一个幅值因子$ { {\beta }_{\text{SS}}} $以构成辅同步信号，并按照$k$递增的顺序映射到REs $ { {\left( k,l \right)}_{p,\mu }} $，其中$k$和$l$分别表示一个SS/PBCH块内频域和时域索引，并由Table 7.4.3.1-1给定。</p><p>UE应假设为了符合[TS 38.213]中的PBCH功率分配规定，复值符号序列$ { {d}_{\text{PBCH}}}(0),…,{ {d}_{\text{PBCH}}}({ {M}_{\text{symb}}}-1) $应乘以一个幅值因子$ { {\beta }_{\text{PBCH}}}$以构成物理广播信道，并且从$ { {d}_{\text{PBCH}}}(0) $开始映射到REs $ { {\left( k,l \right)}_{p,\mu }} $，其中REs满足以下所有条件：</p><ul><li>它们不用于PBCH DM-RS</li></ul><p>向没有其他用途的REs $ { {\left( k,l \right)}_{p,\mu }} $上映射，以递增顺序先按$ k $再按$ l $映射，其中$ k $和$l$分别表示一个SS/PBCH块内的频域和时域索引，并由Table 7.4.3.1-1给定。</p><p>UE假设为了符合[TS 38.213]中的PBCH DM-RS功率分配规定，复值符号序列$ { {r}_{l}}(0),…,{ {r}_{l}}(143) $应乘以一个幅值因子$ \beta _{\text{PBCH}}^{\text{DMRS}} $以构成SS/PBCH块的DM-RS，并且以递增顺序先按$k$后按$l$映射到REs $ { {\left( k,l \right)}_{p,\mu }} $，其中$ k $和$l$分别表示一个SS/PBCH块内的频域和时域索引，并由Table 7.4.3.1-1和$ v=N_{\text{ID}}^{\text{cell}}\bmod 4 $给定。</p><p>对于SS/PBCH块，UE应假设</p><ul><li>天线端口$ p=4000 $，</li><li>子载波间隔配置$ \mu \in \left\{ 0,1,3,4 \right\} $，且</li><li>对于PSS，SSS和PBCH有相同的CP长度和子载波间隔</li></ul><p>The UE may assume that SS/PBCH blocks transmitted with the same block time index within a SS/PBCH burst set periodicity are quasi co-located with respect to Doppler spread, Doppler shift, average gain, average delay, and spatial Rx parameters. The UE shall not assume quasi co-location for any other SS/PBCH block transmissions.</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/221608824.png" alt="mark"></p><h4 id="SS-PBCH块的时域位置"><a href="#SS-PBCH块的时域位置" class="headerlink" title="SS/PBCH块的时域位置"></a>SS/PBCH块的时域位置</h4><p><br>UE应对可能的SS/PBCH块进行监测的时域位置在[TS38.213] 4.1节描述。</p><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/#下行链路&quot;&gt;上接《NR物理信道与调制》下行链路&lt;/a&gt;&lt;/p&gt;&lt;h1 id=&quot;下行链路&quot;&gt;&lt;a href=&quot;#下行链路&quot; class=&quot;headerlink&quot; title=&quot;下行链路&quot;&gt;&lt;/a&gt;下行链路&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;h3 id=&quot;物理信道概述&quot;&gt;&lt;a href=&quot;#物理信道概述&quot; class=&quot;headerlink&quot; title=&quot;物理信道概述&quot;&gt;&lt;/a&gt;物理信道概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;下行链路物理信道对应于一组资源元素（REs）的集合，用于承载源自高层的信息。本规范定义了如下下行信道：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;物理下行共享信道（PDSCH）&lt;/li&gt;&lt;li&gt;物理广播信道（PBCH）&lt;/li&gt;&lt;li&gt;物理下行控制信道（PDCCH）&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;物理信号概述&quot;&gt;&lt;a href=&quot;#物理信号概述&quot; class=&quot;headerlink&quot; title=&quot;物理信号概述&quot;&gt;&lt;/a&gt;物理信号概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;下行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下下行物理信号：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;解调参考信号（Demodulation reference signals，DM-RS）&lt;/li&gt;&lt;li&gt;相位跟踪参考信号（Phase-tracking reference signals，PT-RS）&lt;/li&gt;&lt;li&gt;信道状态信息参考信号（Channel-state information reference signal，CSI-RS）&lt;/li&gt;&lt;li&gt;主同步信号（Primary synchronization signal，PSS）&lt;/li&gt;&lt;li&gt;辅同步信号（Secondary synchronization signal，SSS）&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
  <entry>
    <title>5G-NR物理信道与调制-上行链路v1.0.0</title>
    <link href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-ul/"/>
    <id>http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-ul/</id>
    <published>2017-09-09T09:16:48.000Z</published>
    <updated>2017-10-24T00:54:59.441Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --><p><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/#上行链路">上接《NR物理信道与调制》上行链路</a></p><h1 id="上行链路"><a href="#上行链路" class="headerlink" title="上行链路"></a>上行链路</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="物理信道概述"><a href="#物理信道概述" class="headerlink" title="物理信道概述"></a>物理信道概述</h3><p><br>上行链路物理信道对应于一组资源元素（REs）的集合，用于承载源自高层的信息。本规范定义了如下上行信道：</p><ul><li>物理上行共享信道（PUSCH）</li><li>物理上行控制信道（PUCCH）</li><li>物理随机接入信道（PRACH）</li></ul><h3 id="物理信号概述"><a href="#物理信号概述" class="headerlink" title="物理信号概述"></a>物理信号概述</h3><p><br>上行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下上行物理信号：</p><ul><li>解调参考信号（Demodulation reference signals，DM-RS）</li><li>相位跟踪参考信号（Phase-tracking reference signals，PT-RS）</li><li>探测参考信号（Sounding reference signal，SRS）</li></ul><a id="more"></a><h2 id="物理资源"><a href="#物理资源" class="headerlink" title="物理资源"></a>物理资源</h2><p><br>本规范定义了下列用于上行链路的天线端口：</p><ul><li>Antenna ports starting with 1000 for DM-RS associated with PUSCH</li><li>Antenna ports starting with 2000 for DM-RS associated with PUCCH</li><li>Antenna ports starting with 3000 for SRS</li><li>Antenna port 4000 for PRACH</li></ul><h2 id="物理信道"><a href="#物理信道" class="headerlink" title="物理信道"></a>物理信道</h2><h3 id="物理上行共享信道"><a href="#物理上行共享信道" class="headerlink" title="物理上行共享信道"></a>物理上行共享信道</h3><h4 id="加扰"><a href="#加扰" class="headerlink" title="加扰"></a>加扰</h4><p><br>对于每个码字$q$，比特块${ {b}^{(q)}}(0),…,{ {b}^{(q)}}(M_{\text{bit}}^{(q)}-1)$应当在调制前被加扰，其中$M_{\text{bit}}^{(q)}$是在物理信道上传输的码字$q$的比特数，加扰后的比特块为${ {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1)$。根据如下公式进行加扰</p><script type="math/tex;mode=display">{ {\tilde{b}}^{(q)}}(i)=\left( { {b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2</script><p>其中加扰序列${ {c}^{(q)}}(i)$由2.2节中给定。</p><blockquote><p>注：RAN1还没有正式同意PUSCH加扰部分的内容，3.3.1.1和3.3.1.2节可能需要重新调整。</p></blockquote><h4 id="调制"><a href="#调制" class="headerlink" title="调制"></a>调制</h4><p><br>对于每个码字$q$，加扰比特块${ {\tilde{b}}^{(q)}}(0),…,{ {\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1)$根据Table 6.3.1.2-1中的调制方式进行调制，具体调制方法见2.1节，得到复值调制符号块${ {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1)$。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/172437037.png" alt="mark"></p><h4 id="层映射"><a href="#层映射" class="headerlink" title="层映射"></a>层映射</h4><p><br>每个码字的复值调制符号根据Table 7.3.1.3-1最多映射到4个层。码字$q$ 的复值调制符号${ {d}^{(q)}}(0),…,{ {d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1)$被映射到层$x(i)={ {\left[ \begin{matrix}<br>{ {x}^{(0)}}(i) &amp; … &amp; { {x}^{(\upsilon -1)}}(i) \\<br>\end{matrix} \right]}^{T}}$，$i=0,1,…,M_{\text{symb}}^{\text{layer}}-1$，其中$\upsilon $是层数，$M_{\text{symb}}^{\text{layer}}$是每层的调制符号数。</p><h4 id="变换预编码"><a href="#变换预编码" class="headerlink" title="变换预编码"></a>变换预编码</h4><p><br>如果变换预编码（transform precoding）不可用，对于层$\lambda =0,1,…,\upsilon -1$有${ {y}^{(\lambda )}}(i)={ {x}^{(\lambda )}}(i)$。</p><p>如果变换预编码可用，$\upsilon =1$且复值符号块${ {x}^{(0)}}(0),…,{ {x}^{(0)}}(M_{\text{symb}}^{\text{layer}}-1)$对于单层$\lambda =0$被分为${M_{\text{symb}}^{\text{layer}}}/{M_{\text{sc}}^{\text{PUSCH}}}\;$个集合，每个集合对应于一个OFDM符号。变换预编码根据如下公式进行</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & { {y}^{(0)}}(l\cdot M_{\text{sc}}^{\text{PUSCH}}+k)=\frac{1}{\sqrt{M_{\text{sc}}^{\text{PUSCH}}}}\sum\limits_{i=0}^{M_{\text{sc}}^{\text{PUSCH}}-1}{ { {x}^{(0)}}(l\cdot M_{\text{sc}}^{\text{PUSCH}}+i){ {e}^{-j\frac{2\pi ik}{M_{\text{sc}}^{\text{PUSCH}}}}}} \\ 
 \nonumber & k=0,...,M_{\text{sc}}^{\text{PUSCH}}-1 \\ 
 \nonumber & l=0,...,{M_{\text{symb}}^{\text{layer}}}/{M_{\text{sc}}^{\text{PUSCH}}}\;-1  
\end{align}</script><p>得到复值符号块${ {y}^{(0)}}(0),…,{ {y}^{(0)}}(M_{\text{symb}}^{\text{layer}}-1)$。$M_{\text{sc}}^{\text{PUSCH}}=M_{\text{RB}}^{\text{PUSCH}}\cdot N_{\text{sc}}^{\text{RB}}$，其中$M_{\text{RB}}^{\text{PUSCH}}$表示PUSCH就RB而言的带宽，并且满足</p><script type="math/tex;mode=display">M_{\text{RB}}^{\text{PUSCH}}={ {2}^{ { {\alpha }_{2}}}}\cdot { {3}^{ { {\alpha }_{3}}}}\cdot { {5}^{ { {\alpha }_{5}}}}\le N_{\text{RB}}^{\text{UL}}</script><p>其中${ {\alpha }_{2}},{ {\alpha }_{3}},{ {\alpha }_{5}}$是非负整数集合。</p><h4 id="预编码"><a href="#预编码" class="headerlink" title="预编码"></a>预编码</h4><p><br>根据如下公式对向量块${ {\left[ \begin{matrix}<br>{ {y}^{(0)}}(i) &amp; … &amp; { {y}^{(\upsilon -1)}}(i) \\<br>\end{matrix} \right]}^{T}}$，$i=0,1,…,M_{\text{symb}}^{\text{layer}}-1$进行预编码</p><script type="math/tex;mode=display">\left[ \begin{matrix}
   { {z}^{(0)}}(i)  \\
   \vdots   \\
   { {z}^{(P-1)}}(i)  \\
\end{matrix} \right]=W\left[ \begin{matrix}
   { {y}^{(0)}}(i)  \\
   \vdots   \\
   { {y}^{(\upsilon -1)}}(i)  \\
\end{matrix} \right]</script><p>其中$i=0,1,…,M_{\text{symb}}^{\text{ap}}-1$，$M_{\text{symb}}^{\text{ap}}=M_{\text{symb}}^{\text{layer}}$。</p><p>对基于非码本的传输，预编码矩阵$W$在TS 38.214规范中得到。</p><p>对基于码本的传输，预编码矩阵$W$由Table 6.3.1.5-1给定，其中TPMI索引由调度上行传输的DCI中获得。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/180222320.png" alt="mark"></p><h4 id="映射到物理资源"><a href="#映射到物理资源" class="headerlink" title="映射到物理资源"></a>映射到物理资源</h4><p><br>为满足TS 38.213规范对PUSCH传输功率${ {P}_{\text{PUSCH}}}$的要求，对于PUSCH传输所使用的每个天线端口，复值符号块${ {z}^{(p)}}(0),…,{ {z}^{(p)}}(M_{\text{symb}}^{\text{ap}}-1)$应当乘以一个幅值因子${ {\beta }_{\text{PUSCH}}}$，然后从${ {z}^{(p)}}(0)$开始依次映射到RE ${ {\left( k,l \right)}_{p,\mu }}$上，并且RE满足如下条件：</p><ul><li>它们位于用于传输所分配的资源中，且</li><li>它们不用于DM-RS相关的传输</li><li>they are not in the OFDM symbols used for transmission of the associated DM-RS in case of transform precoding not enabled.</li></ul><p>If transform precoding is not enabled, the mapping to resource elements ${ {\left( k,l \right)}_{p,\mu }}$ not reserved for other purposes shall be in increasing order of first the antenna port index $p$, then the index $k$ over the assigned physical resource blocks, and then the index $l$, starting with $l={ {l}_{0}}$.（注： ${ {l}_{0}}$ is the start of UL transmission. Need some reference to 213/214）</p><h3 id="物理上行控制信道"><a href="#物理上行控制信道" class="headerlink" title="物理上行控制信道"></a>物理上行控制信道</h3><p><br>PUCCH支持多种格式，如Table 6.3.2-1所示。对于单个UE，支持采用格式0或格式2的2个PUCCH同时传输，或支持采用格式1或格式3的其中一个PUCCH与采用格式0或格式2的其中一个PUCCH同时传输。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/180832948.png" alt="mark"></p><h4 id="PUCCH格式0"><a href="#PUCCH格式0" class="headerlink" title="PUCCH格式0"></a>PUCCH格式0</h4><h5 id="序列选择"><a href="#序列选择" class="headerlink" title="序列选择"></a>序列选择</h5><p><br>定义一组序列$\left\{ \begin{matrix}<br>{ {x}_{0}}(n) &amp; { {x}_{1}}(n) &amp; { {x}_{2}}(n) &amp; { {x}_{3}}(n) \\<br>\end{matrix} \right\}$，每组序列长度为12。</p><p>比特块$b(0),…,b({ {M}_{\text{bit}}}-1)$其中${ {M}_{\text{bit}}}\in \left\{ 1,2 \right\}$是PUCCH传输的比特数，根据下式选择序列</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & y(n)={ {x}_{j}}(n) \\ 
 \nonumber & j=\sum\nolimits_{i=0}^{ { {M}_{\text{bit}}}-1}{b(i)\cdot { {2}^{i}}}  
\end{align}</script><h5 id="映射到资源元素"><a href="#映射到资源元素" class="headerlink" title="映射到资源元素"></a>映射到资源元素</h5><p><br>为满足TS 38.213规范对PUCCH传输功率${ {P}_{\text{PUCCH,0}}}$的要求，序列$y(n)$应当乘以一个幅值因子${ {\beta }_{\text{PUCCH,0}}}$。在天线端口$p=2000$，先按$k$，再按$l$的递增顺序从$y(0)$开始映射到RE ${ {\left( k,l \right)}_{p,\mu }}$。</p><h4 id="PUCCH格式1"><a href="#PUCCH格式1" class="headerlink" title="PUCCH格式1"></a>PUCCH格式1</h4><h5 id="序列调制"><a href="#序列调制" class="headerlink" title="序列调制"></a>序列调制</h5><p><br>比特块$b(0),…,b({ {M}_{\text{bit}}}-1)$按照2.1节所述的方法进行调制，若${ {M}_{\text{bit}}}=1$，则使用BPSK，若${ {M}_{\text{bit}}}=2$，则使用QPSK，得到一个复值符号$d(0)$。</p><p>复值符号$d(0)$应根据下式乘以一个序列$r_{u,v}^{({ {\alpha }_{p}})}(n)$</p><script type="math/tex;mode=display">{ {y}^{(p)}}(n)=d(0)\cdot r_{u,v}^{({ {\alpha }_{p}})}(n),\text{          }n=0,1,...,N_{\text{seq}}^{\text{PUCCH}}-1</script><p>复值符号${ {y}^{(p)}}(0),…,{ {y}^{(p)}}(N_{\text{seq}}^{\text{PUCCH}}-1)$应根据下式采用正交序列${ {w}_{n_{\text{oc}}^{\text{(}p\text{)}}}}(i)$进行块扩展（block-wise spread）</p><script type="math/tex;mode=display">{ {z}^{(p)}}\left( m\cdot N_{\text{seq}}^{\text{PUCCH}}+n \right)={ {w}_{n_{\text{oc}}^{\text{(}p\text{)}}}}(m)\cdot { {y}^{(p)}}\left( n \right)</script><p>其中</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & m=0,...,N_{\text{SF}}^{\text{PUCCH}}-1 \\ 
 \nonumber & n=0,...,N_{\text{seq}}^{\text{PUCCH}}-1 \\ 
\end{align}</script><h5 id="映射到物理资源-1"><a href="#映射到物理资源-1" class="headerlink" title="映射到物理资源"></a>映射到物理资源</h5><p><br>为满足TS 38.213规范对PUCCH传输功率${ {P}_{\text{PUCCH,1}}}$的要求，序列${ {z}^{(p)}}(n)$应当乘以一个幅值因子${ {\beta }_{\text{PUCCH,1}}}$，序列从${ {z}^{(p)}}(0)$开始映射到RE ${ {\left( k,l \right)}_{p,\mu }}$，RE满足下列所有条件：</p><ul><li>它们位于用于传输的RB中，</li><li>它们不用于DM-RS相关的传输</li></ul><p>The mapping to resource elements ${ {\left( k,l \right)}_{p,\mu }}$ not reserved for other purposes shall be in increasing order of first the index $k$ over the assigned physical resource blocks, and then the index $l$.</p><h4 id="PUCCH格式2"><a href="#PUCCH格式2" class="headerlink" title="PUCCH格式2"></a>PUCCH格式2</h4><h4 id="PUCCH格式3"><a href="#PUCCH格式3" class="headerlink" title="PUCCH格式3"></a>PUCCH格式3</h4><h4 id="PUCCH格式4"><a href="#PUCCH格式4" class="headerlink" title="PUCCH格式4"></a>PUCCH格式4</h4><h3 id="物理随机接入信道"><a href="#物理随机接入信道" class="headerlink" title="物理随机接入信道"></a>物理随机接入信道</h3><h4 id="序列生成"><a href="#序列生成" class="headerlink" title="序列生成"></a>序列生成</h4><p><br>随机接入前导${ {x}_{u,v}}(n)$应根据下式生成</p><script type="math/tex;mode=display">\begin{align}
 \nonumber & { {x}_{u,v}}(n)={ {x}_{u}}((n+{ {C}_{v}})\bmod { {L}_{\text{RA}}}) \\ 
 \nonumber & { {x}_{u}}(i)={ {e}^{-j\frac{\pi ui(i+1)}{ { {L}_{\text{RA}}}}}},i=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}</script><p>频域符号表示应根据下式生成</p><script type="math/tex;mode=display">{ {y}_{u,v}}(n)=\sum\limits_{m=0}^{ { {L}_{\text{RA}}}-1}{ { {x}_{u,v}}(m)\cdot { {e}^{-j\frac{2\pi mn}{ { {L}_{\text{RA}}}}}}}</script><p>其中${ {L}_{\text{RA}}}=839$或${ {L}_{\text{RA}}}=[127or139]$根据前导格式确定，前导格式由Tables 6.3.3.1-1和6.3.3.1-2给定。</p><p>循环移位${ {C}_{v}}$给定为</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & C{}_{v}=\left\{ \begin{array}{*{35}{l}}
   v{ {N}_{\text{CS}}} & \text{v}=\text{0,1,}...\text{,}\left\lfloor { { {L}_{\text{RA}}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor -1,{ {N}_{\text{CS}}}\ne 0 & \text{for unrestricted sets}  \\
   \text{0} & { {N}_{\text{CS}}}=0 & \text{for unrestricted sets}  \\
   { {d}_{\text{start}}}\left\lfloor {v}/{n_{\text{shift}}^{\text{RA}}}\; \right\rfloor +\left( v\bmod n_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} & v=0,1,...,w-1 & \text{for restricted sets type A and B}  \\
   { { {\bar{\bar{d}}}}_{\text{start}}}+\left( v-w \right){ {N}_{\text{CS}}} & v=w,...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}-1 & \text{for restricted sets type B}  \\
   { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}+\left( v-w-\bar{\bar{n}}_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} & v=w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}},...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}+\bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}-1 & \text{for restricted sets type B}  \\
\end{array} \right. \\ 
 \nonumber & w=n_{\text{shift}}^{\text{RA}}n_{\text{group}}^{\text{RA}}+\bar{n}_{\text{shift}}^{\text{RA}}  
\end{align}</script><p>其中${ {N}_{\text{CS}}}$在Table 6.3.3.1-3中给定，高层参数<em>restrictedSetConfig</em>决定了受限集合的类型，6.3.3.1-1和6.3.3.1-2指示了对不同前导格式的受限集合的类型。</p><p>变量${ {d}_{u}}$给定为</p><script type="math/tex;mode=display">{ {d}_{u}}=\left\{ \begin{array}{*{35}{l}}
   q & 0\le q<{ { {L}_{\text{RA}}}}/{2}\;  \\
   { {L}_{\text{RA}}}-q & \text{otherwise}  \\
\end{array} \right.</script><p>其中$q$是满足$\left( qu \right)\bmod { {L}_{\text{RA}}}=1$的最小非负整数。循环移位的受限集合参数依赖于${ {d}_{u}}$。</p><ul><li>对于${ {N}_{\text{CS}}}\le { {d}_{u}}&lt;{ { {L}_{\text{RA}}}}/{3}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=2{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {({ {L}_{\text{RA}}}-2{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}</script><ul><li>对于 ${ { {L}_{\text{RA}}}}/{3}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{2}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max \left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}</script><p>对于受限集合类型B，参数规定为：</p><ul><li>对于$ { {N}_{\text{CS}}}\le { {d}_{u}}&lt;{ { {L}_{\text{RA}}}}/{5}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=4{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {({ {L}_{\text{RA}}}-4{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}</script><ul><li>对于$ { { {L}_{\text{RA}}}}/{5}\;\le { {d}_{u}}\le {\left( { {L}_{\text{RA}}}-{ {N}_{\text{CS}}} \right)}/{\text{4}}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( { {L}_{\text{RA}}}-4{ {d}_{u}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-4{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max \left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}</script><ul><li>对于$ {({ {L}_{\text{RA}}}+{ {N}_{\text{CS}}})}/{4}\;\le { {d}_{u}}&lt;{2{ {L}_{\text{RA}}}}/{7}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {(4{ {d}_{u}}-{ {L}_{\text{RA}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=4{ {d}_{u}}-{ {L}_{\text{RA}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}={ {L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}={ {L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( { {L}_{\text{RA}}}-3{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}},4{ {d}_{u}}-{ {L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( \left( 1-\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right) \right)\left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)+\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right)\left( 4{ {d}_{u}}-{ {L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right) \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor -\bar{\bar{n}}_{\text{shift}}^{\text{RA}}  
\end{align}</script><ul><li>对于$ {2{ {L}_{\text{RA}}}}/{7}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{3}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-3{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}={ {L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}={ {d}_{u}}+n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( 4{ {d}_{u}}-{ {L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}},{ {L}_{\text{RA}}}-3{ {d}_{u}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><ul><li>对于$ {({ {L}_{\text{RA}}}+{ {N}_{\text{CS}}})}/{3}\;\le { {d}_{u}}&lt;{2{ {L}_{\text{RA}}}}/{5}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {(3{ {d}_{u}}-{ {N}_{\text{ZC}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=3{ {d}_{u}}-{ {N}_{\text{ZC}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor { { {d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( { {L}_{\text{RA}}}-2{ {d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><ul><li>对于$ {2{ {L}_{\text{RA}}}}/{5}\;\le { {d}_{u}}\le {({ {L}_{\text{RA}}}-{ {N}_{\text{CS}}})}/{2}\; $</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & n_{\text{shift}}^{\text{RA}}=\left\lfloor {({ {N}_{\text{ZC}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\ 
 \nonumber & { {d}_{\text{start}}}=2({ {N}_{\text{ZC}}}-2{ {d}_{u}})+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\ 
 \nonumber & { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\ 
 \nonumber & { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\ 
 \nonumber & n_{\text{group}}^{\text{RA}}=\left\lfloor {({ {L}_{\text{RA}}}-{ {d}_{u}})}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\ 
 \nonumber & \bar{n}_{\text{shift}}^{\text{RA}}=\max \left( \left\lfloor {\left( 3{ {d}_{u}}-{ {L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\ 
 \nonumber & \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\ 
 \nonumber & \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}</script><p>对于其他所有的$ { {d}_{u}} $值，受限集合不存在循环移位。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/190959609.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/191029404.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/191117976.png" alt="mark"></p><h4 id="映射到物理元素"><a href="#映射到物理元素" class="headerlink" title="映射到物理元素"></a>映射到物理元素</h4><p><br>前导序列应根据下式映射到物理资源</p><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k}^{(p,\text{RA})}={ {\beta }_{\text{PRACH}}}{ {y}_{u,v}}(k) \\ 
 \nonumber & k=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}</script><p>其中$ { {\beta }_{\text{PRACH}}} $是幅值因子，为满足TS 38.213规范对PRACH传输功率$ { {P}_{\text{PRACH}}} $的要求，前导序列应乘以$ { {\beta }_{\text{PRACH}}} $，$ p=4000 $是天线端口。基带信号应根据2.3节使用Table 6.3.3.1-1或Table 6.3.3.1-2的参数生成。</p><h2 id="物理信号"><a href="#物理信号" class="headerlink" title="物理信号"></a>物理信号</h2><h3 id="参考信号"><a href="#参考信号" class="headerlink" title="参考信号"></a>参考信号</h3><h4 id="用于PUSCH的DM-RS"><a href="#用于PUSCH的DM-RS" class="headerlink" title="用于PUSCH的DM-RS"></a>用于PUSCH的DM-RS</h4><h5 id="序列生成-1"><a href="#序列生成-1" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>若对PUSCH的转换预编码不启用，则参考信号序列$ r(m) $根据下式生成</p><script type="math/tex;mode=display">r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)</script><p>其中伪随机序列$ c(i) $在《NR物理信道与调制》2.2节中定义。</p><p>若对PUSCH的转换预编码启用，则参考信息$ r(m) $根据下式生成</p><script type="math/tex;mode=display">r(m)={ {e}^{-j\frac{\pi qm(m+1)}{L}}}</script><blockquote><p>Note: Agreement says “Support ZC-sequence for UL DFT-S-OFDM DMRS” but unclear if this refers to the sequences in LTE (ZC-derived/computer generated) or “pure” ZC.</p></blockquote><h5 id="资源映射"><a href="#资源映射" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>PUSCH DM-RS根据type 1或type 2映射到物理资源，DM-RS的类型由高层参数<em>UL-DMRS-config-type</em>给定。</p><p>UE应根据以下规则将序列$ r(m) $映射到REs</p><ul><li>if transform precoding is not enabled,</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( 2m+{k}'+{ {m}_{0}} \right) \\ 
 \nonumber & k=\left\{ \begin{matrix}
   { {k}_{\text{0}}}+4m+2{k}'+\Delta  & \text{Configuration type 1}  \\
   { {k}_{\text{0}}}+6m+{k}'+\Delta  & \text{Configuration type 2}  \\
\end{matrix} \right. \\ 
 \nonumber & {k}'=0,1 \\ 
 \nonumber & l=\bar{l}+{l}'  
\end{align}</script><ul><li>if transform precoding is enabled</li></ul><script type="math/tex;mode=display">\begin{align}
  \nonumber & a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{ {w}_{\text{f}}}\left( { {k}'} \right)\cdot { {w}_{\text{t}}}\left( { {l}'} \right)\cdot r\left( 2m+{k}'+{ {m}_{0}} \right) \\ 
 \nonumber & k={ {k}_{\text{0}}}+4m+2{k}'+\Delta  \\ 
 \nonumber & {k}'=0,1 \\ 
\nonumber  & l=\bar{l}+{l}'  
\end{align}</script><p>其中$l$是指相对于PUSCH传输的起始，$ { {w}_{\text{f}}}\left( { {k}’} \right) $，$ { {w}_{\text{f}}}\left( { {k}’} \right) $，和$ \Delta $在Tables 6.4.1.1.2-1 and 6.4.1.1.2-2中给定。</p><p>时域索引$ {l}’ $和所支持的天线端口$p$根据Table 6.4.1.1.2-3中的DM-RS duration确定。</p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/192118412.png" alt="mark"></p><p><img src="http://olyzl8414.bkt.clouddn.com/blog/20170911/192207337.png" alt="mark"></p><h4 id="相位跟踪参考信号"><a href="#相位跟踪参考信号" class="headerlink" title="相位跟踪参考信号"></a>相位跟踪参考信号</h4><h5 id="序列生成-2"><a href="#序列生成-2" class="headerlink" title="序列生成"></a>序列生成</h5><h5 id="资源映射-1"><a href="#资源映射-1" class="headerlink" title="资源映射"></a>资源映射</h5><h4 id="用于PUCCH的DM-RS"><a href="#用于PUCCH的DM-RS" class="headerlink" title="用于PUCCH的DM-RS"></a>用于PUCCH的DM-RS</h4><h5 id="用于PUCCH格式1的DM-RS"><a href="#用于PUCCH格式1的DM-RS" class="headerlink" title="用于PUCCH格式1的DM-RS"></a>用于PUCCH格式1的DM-RS</h5><h4 id="探测参考信号"><a href="#探测参考信号" class="headerlink" title="探测参考信号"></a>探测参考信号</h4><h5 id="序列生成-3"><a href="#序列生成-3" class="headerlink" title="序列生成"></a>序列生成</h5><p><br>探测参考信号序列根据下式生成</p><script type="math/tex;mode=display">r\left( m \right)=r_{u,v}^{(\alpha )}\left( m \right)</script><p>其中$ r_{u,v}^{(\alpha )}\left( n \right) $]由XXX给定。</p><h5 id="资源映射-2"><a href="#资源映射-2" class="headerlink" title="资源映射"></a>资源映射</h5><p><br>探测参考信号应在上行天线端口$ 3000+i $上发送，其中$ i $是$ i=0 $或$ i=0,1 $或$ i=0,1,2,3 $其中之一。</p><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a><br><a href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a><br><a href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a><br><a href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a><br><a href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Sun Dec 31 2017 18:04:11 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;a href=&quot;http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/#上行链路&quot;&gt;上接《NR物理信道与调制》上行链路&lt;/a&gt;&lt;/p&gt;&lt;h1 id=&quot;上行链路&quot;&gt;&lt;a href=&quot;#上行链路&quot; class=&quot;headerlink&quot; title=&quot;上行链路&quot;&gt;&lt;/a&gt;上行链路&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;h3 id=&quot;物理信道概述&quot;&gt;&lt;a href=&quot;#物理信道概述&quot; class=&quot;headerlink&quot; title=&quot;物理信道概述&quot;&gt;&lt;/a&gt;物理信道概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;上行链路物理信道对应于一组资源元素（REs）的集合，用于承载源自高层的信息。本规范定义了如下上行信道：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;物理上行共享信道（PUSCH）&lt;/li&gt;&lt;li&gt;物理上行控制信道（PUCCH）&lt;/li&gt;&lt;li&gt;物理随机接入信道（PRACH）&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;物理信号概述&quot;&gt;&lt;a href=&quot;#物理信号概述&quot; class=&quot;headerlink&quot; title=&quot;物理信号概述&quot;&gt;&lt;/a&gt;物理信号概述&lt;/h3&gt;&lt;p&gt;&lt;br&gt;上行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下上行物理信号：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;解调参考信号（Demodulation reference signals，DM-RS）&lt;/li&gt;&lt;li&gt;相位跟踪参考信号（Phase-tracking reference signals，PT-RS）&lt;/li&gt;&lt;li&gt;探测参考信号（Sounding reference signal，SRS）&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/categories/5G-NR/"/>
    
    
      <category term="2017-09" scheme="http://marshallcomm.cn/tags/2017-09/"/>
    
      <category term="5G-NR" scheme="http://marshallcomm.cn/tags/5G-NR/"/>
    
      <category term="3GPP" scheme="http://marshallcomm.cn/tags/3GPP/"/>
    
  </entry>
  
</feed>
